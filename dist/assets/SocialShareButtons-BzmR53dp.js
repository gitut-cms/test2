import{c as I,r as b,j as t,R as F,K as x,S as z,M as L,N as P,O as R,P as S,t as T}from"./index-hpjxKmld.js";const N=({url:u,title:h,description:g})=>{const{t:f}=I(),[w,m]=b.useState(!1),[y,r]=b.useState(!1),i=b.useMemo(()=>{let e=u;const s=e.indexOf("?"),n=e.indexOf("#");let o=e,a="";if(s!==-1||n!==-1){const d=Math.min(s===-1?1/0:s,n===-1?1/0:n);o=e.substring(0,d),a=e.substring(d)}return o.endsWith(".html")&&(o=o.slice(0,-5)),o+a},[u]),l=encodeURIComponent(i),c=encodeURIComponent(h),j=[{name:"LinkedIn",url:`https://www.linkedin.com/shareArticle?mini=true&url=${l}&title=${c}`,icon:t.jsx(P,{}),color:"bg-blue-700 hover:bg-blue-800"},{name:"Pinterest",url:`https://pinterest.com/pin/create/button/?url=${l}&description=${c}`,icon:t.jsx(R,{}),color:"bg-red-600 hover:bg-red-700"},{name:"Reddit",url:`https://www.reddit.com/submit?url=${l}&title=${c}`,icon:t.jsx(S,{}),color:"bg-orange-500 hover:bg-orange-600"},{name:"Facebook",url:`https://www.facebook.com/sharer/sharer.php?u=${l}&quote=${c}`,icon:t.jsx(T,{}),color:"bg-blue-600 hover:bg-blue-700"}],$=()=>{navigator.clipboard.writeText(i).then(()=>{m(!0),setTimeout(()=>m(!1),2e3)})},p=e=>{navigator.clipboard.writeText(e).then(()=>{r(!0),setTimeout(()=>r(!1),2e3)})},k=()=>{const e=(g||"").replace(/<[^>]*>/g,""),s=e.substring(0,155)+(e.length>155?"...":""),n=`${h}

${s}

${i}`,o=`
      <p style="font-weight: bold; font-family: sans-serif; font-size: 16px;">${h}</p>
      <div style="font-family: sans-serif; font-size: 14px;"><p>${s}</p></div>
      <a href="${i}">${i}</a>
    `;try{if(typeof ClipboardItem>"u"){p(n);return}const a=new Blob([o],{type:"text/html"}),d=new Blob([n],{type:"text/plain"}),v=new ClipboardItem({"text/html":a,"text/plain":d});navigator.clipboard.write([v]).then(()=>{r(!0),setTimeout(()=>r(!1),2e3)}).catch(C=>{console.error("Async clipboard write failed, falling back to plain text: ",C),p(n)})}catch(a){console.error("Failed to use Clipboard API, falling back to writeText: ",a),p(n)}};return t.jsxs("div",{className:"fixed bottom-6 left-6 z-40 flex flex-col items-center gap-3",children:[j.map(e=>t.jsx("a",{href:e.url,target:"_blank",rel:"noopener noreferrer","aria-label":`Share on ${e.name}`,className:`w-12 h-12 rounded-full text-white flex items-center justify-center shadow-lg transition-transform hover:scale-110 ${e.color}`,children:F.cloneElement(e.icon,{size:24})},e.name)),t.jsx("button",{onClick:$,"aria-label":"Copy link",className:"w-12 h-12 rounded-full text-white flex items-center justify-center shadow-lg transition-all hover:scale-110 bg-gray-600 hover:bg-gray-700",children:w?t.jsx(x,{size:22}):t.jsx(z,{size:22})}),t.jsx("button",{onClick:k,"aria-label":f("share.copyDetails"),title:f("share.copyDetails"),className:"w-12 h-12 rounded-full text-white flex items-center justify-center shadow-lg transition-all hover:scale-110 bg-gray-600 hover:bg-gray-700",children:y?t.jsx(x,{size:22}):t.jsx(L,{size:22})})]})};export{N as S};
