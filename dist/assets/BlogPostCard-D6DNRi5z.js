import{c as j,j as e,L as w,r as y,R as N,K as k,M as I,N as D,O as F,P,t as L}from"./index-hpjxKmld.js";const M=({url:n,title:h,description:g})=>{const{t:s}=j(),[i,p]=y.useState(""),l=y.useMemo(()=>{let t=n;const r=t.indexOf("?"),d=t.indexOf("#");let o=t,b="";if(r!==-1||d!==-1){const x=Math.min(r===-1?1/0:r,d===-1?1/0:d);o=t.substring(0,x),b=t.substring(x)}return o.endsWith(".html")&&(o=o.slice(0,-5)),o+b},[n]),c=encodeURIComponent(l),a=encodeURIComponent(h),u=[{name:"LinkedIn",url:`https://www.linkedin.com/shareArticle?mini=true&url=${c}&title=${a}`,icon:e.jsx(D,{}),color:"text-blue-700 hover:text-blue-800"},{name:"Pinterest",url:`https://pinterest.com/pin/create/button/?url=${c}&description=${a}`,icon:e.jsx(F,{}),color:"text-red-600 hover:text-red-700"},{name:"Reddit",url:`https://www.reddit.com/submit?url=${c}&title=${a}`,icon:e.jsx(P,{}),color:"text-orange-500 hover:text-orange-600"},{name:"Facebook",url:`https://www.facebook.com/sharer/sharer.php?u=${c}&quote=${a}`,icon:e.jsx(L,{}),color:"text-blue-600 hover:text-blue-700"}],m=()=>{p(s("share.copied")),setTimeout(()=>p(""),2e3)},f=t=>{navigator.clipboard.writeText(t).then(m)},$=t=>{t.stopPropagation();const r=(g||"").replace(/<[^>]*>/g,""),d=r.substring(0,155)+(r.length>155?"...":""),o=`${h}

${d}

${l}`,b=`
            <p style="font-weight: bold; font-family: sans-serif; font-size: 16px;">${h}</p>
            <div style="font-family: sans-serif; font-size: 14px;"><p>${d}</p></div>
            <a href="${l}">${l}</a>
        `;try{if(typeof ClipboardItem>"u"){f(o);return}const x=new Blob([b],{type:"text/html"}),v=new Blob([o],{type:"text/plain"});navigator.clipboard.write([new ClipboardItem({"text/html":x,"text/plain":v})]).then(m,C=>{console.error("Async clipboard write failed, falling back to plain text: ",C),f(o)})}catch(x){console.error("Failed to use Clipboard API, falling back to writeText: ",x),f(o)}};return e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-xs text-gray-500 font-semibold",children:s("share.title")}),u.map(t=>e.jsx("a",{href:t.url,target:"_blank",rel:"noopener noreferrer","aria-label":`Share on ${t.name}`,className:`transition-transform hover:scale-125 ${t.color}`,onClick:r=>r.stopPropagation(),children:N.cloneElement(t.icon,{size:20})},t.name)),e.jsx("button",{onClick:$,"aria-label":s("share.copyDetails"),className:"transition-transform hover:scale-125 text-gray-500 hover:text-gray-700",title:s("share.copyDetails"),children:i?e.jsxs("span",{className:"text-xs font-bold text-green-600 flex items-center gap-1",children:[e.jsx(k,{})," ",i]}):e.jsx(I,{size:18})})]})},S=({post:n,lang:h})=>{const{t:g}=j(),s=h||"ar",i=n.publishedAt||n.createdAt;let p="Invalid Date";if(i){const m=i.toDate?i.toDate():new Date(i);isNaN(m.getTime())||(p=m.toLocaleDateString("ar-DZ"))}const l=n.content&&(n.content[s]||Object.values(n.content)[0])||"",c=l.replace(/<[^>]*>/g,"").substring(0,100)+(l.length>100?"...":""),a=s!=="ar"?`/blog/${s}/${n.slug}`:`/blog/${n.slug}`,u=`${window.location.origin}${a}`;return e.jsx("article",{className:"bg-white rounded-lg shadow-md overflow-hidden transition-shadow hover:shadow-xl duration-300 flex flex-col group",children:e.jsxs("div",{className:"p-6 flex flex-col flex-grow",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-2",children:p}),e.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-3 group-hover:text-green-600 transition-colors",children:e.jsx(w,{to:a,children:n.title})}),e.jsx("p",{className:"text-gray-600 mb-4 flex-grow",children:c}),e.jsxs(w,{to:a,className:"font-semibold text-green-600 hover:underline mb-4",children:[g("blogPostCard.readMore")," â†’"]}),e.jsx("div",{className:"mt-auto pt-3 border-t",children:e.jsx(M,{url:u,title:n.title,description:c})})]})})};export{S as B};
