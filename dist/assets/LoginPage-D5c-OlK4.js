import{c as F,r,a as R,o as L,j as e,L as P}from"./index-DgmZNK3x.js";const B=()=>{const{t,countryCode:p}=F(),[i,f]=r.useState(""),[d,y]=r.useState(""),[g,n]=r.useState(""),[o,l]=r.useState(!1),w=R(),{login:j,logout:N,sendPasswordReset:v}=L(),[S,u]=r.useState(!1),[c,k]=r.useState(""),[x,b]=r.useState(""),[h,m]=r.useState(""),E=async s=>{if(s.preventDefault(),n(""),!i||!d){n(t("login.error.fillAllFields"));return}l(!0);try{const a=await j(i,d);a.emailVerified?w(`/${a.countryCode}/app`):(n(t("login.error.verifyEmail")),await N(),l(!1))}catch{n(t("login.error.wrongCredentials")),l(!1)}},C=async s=>{if(s.preventDefault(),b(""),m(""),!c){m(t("login.error.enterEmail"));return}l(!0);try{await v(c),b(t("login.reset.successMessage"))}catch(a){m(a.message||t("login.reset.errorMessage"))}l(!1)};return e.jsx("div",{className:"max-w-md mx-auto mt-10",children:e.jsx("div",{className:"bg-white rounded-lg shadow-xl p-8",children:S?e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"text-3xl font-bold text-center text-gray-900 mb-6",children:t("login.reset.title")}),x&&e.jsx("p",{className:"bg-green-100 text-green-700 p-3 rounded-md mb-4 text-center",children:x}),h&&e.jsx("p",{className:"bg-red-100 text-red-700 p-3 rounded-md mb-4 text-center",children:h}),e.jsxs("form",{onSubmit:C,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"reset-email",className:"block text-sm font-medium text-gray-700 mb-1",children:t("login.reset.emailLabel")}),e.jsx("input",{type:"email",id:"reset-email",value:c,onChange:s=>k(s.target.value),required:!0,className:"block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm",placeholder:"user@example.com"})]}),e.jsx("button",{type:"submit",disabled:o,className:"w-full bg-green-600 text-white p-3 rounded-lg font-bold hover:bg-green-700 disabled:bg-gray-400",children:t(o?"login.reset.sendingButton":"login.reset.sendButton")})]}),e.jsx("p",{className:"text-center text-gray-600 mt-6",children:e.jsxs("button",{onClick:()=>u(!1),className:"text-green-600 hover:underline font-semibold",children:["â†’ ",t("login.reset.backToLogin")]})})]}):e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"text-3xl font-bold text-center text-gray-900 mb-6",children:t("login.title")}),g&&e.jsx("p",{className:"bg-red-100 text-red-700 p-3 rounded-md mb-4 text-center",children:g}),e.jsxs("form",{onSubmit:E,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:t("login.emailLabel")}),e.jsx("input",{type:"email",id:"email",value:i,onChange:s=>f(s.target.value),required:!0,className:"block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-green-500 focus:border-green-500",placeholder:"user@example.com"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:t("login.passwordLabel")}),e.jsx("button",{type:"button",onClick:()=>u(!0),className:"text-sm text-green-600 hover:underline font-semibold",children:t("login.forgotPassword")})]}),e.jsx("input",{type:"password",id:"password",value:d,onChange:s=>y(s.target.value),required:!0,className:"block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-green-500 focus:border-green-500",placeholder:"********"})]}),e.jsx("button",{type:"submit",disabled:o,className:"w-full bg-green-600 text-white p-3 rounded-lg font-bold hover:bg-green-700 transition-colors disabled:bg-gray-400",children:t(o?"login.loggingInButton":"login.loginButton")})]}),e.jsxs("p",{className:"text-center text-gray-600 mt-6",children:[t("login.noAccount")," ",e.jsx(P,{to:`/${p}/signup`,className:"text-green-600 hover:underline font-semibold",children:t("login.createAccount")})]})]})})})};export{B as default};
