(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function t(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=t(r);fetch(r.href,o)}})();var em=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function kv(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Jy={exports:{}},rd={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FE;function Lk(){if(FE)return rd;FE=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,r,o){var l=null;if(o!==void 0&&(l=""+o),r.key!==void 0&&(l=""+r.key),"key"in r){o={};for(var u in r)u!=="key"&&(o[u]=r[u])}else o=r;return r=o.ref,{$$typeof:n,type:i,key:l,ref:r!==void 0?r:null,props:o}}return rd.Fragment=e,rd.jsx=t,rd.jsxs=t,rd}var BE;function Ok(){return BE||(BE=1,Jy.exports=Lk()),Jy.exports}var g=Ok(),Yy={exports:{}},lt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qE;function Fk(){if(qE)return lt;qE=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),v=Symbol.iterator;function w(K){return K===null||typeof K!="object"?null:(K=v&&K[v]||K["@@iterator"],typeof K=="function"?K:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,b={};function A(K,Y,Z){this.props=K,this.context=Y,this.refs=b,this.updater=Z||E}A.prototype.isReactComponent={},A.prototype.setState=function(K,Y){if(typeof K!="object"&&typeof K!="function"&&K!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,K,Y,"setState")},A.prototype.forceUpdate=function(K){this.updater.enqueueForceUpdate(this,K,"forceUpdate")};function C(){}C.prototype=A.prototype;function R(K,Y,Z){this.props=K,this.context=Y,this.refs=b,this.updater=Z||E}var L=R.prototype=new C;L.constructor=R,S(L,A.prototype),L.isPureReactComponent=!0;var q=Array.isArray,z={H:null,A:null,T:null,S:null,V:null},H=Object.prototype.hasOwnProperty;function O(K,Y,Z,he,ve,we){return Z=we.ref,{$$typeof:n,type:K,key:Y,ref:Z!==void 0?Z:null,props:we}}function V(K,Y){return O(K.type,Y,void 0,void 0,void 0,K.props)}function U(K){return typeof K=="object"&&K!==null&&K.$$typeof===n}function j(K){var Y={"=":"=0",":":"=2"};return"$"+K.replace(/[=:]/g,function(Z){return Y[Z]})}var J=/\/+/g;function M(K,Y){return typeof K=="object"&&K!==null&&K.key!=null?j(""+K.key):Y.toString(36)}function F(){}function k(K){switch(K.status){case"fulfilled":return K.value;case"rejected":throw K.reason;default:switch(typeof K.status=="string"?K.then(F,F):(K.status="pending",K.then(function(Y){K.status==="pending"&&(K.status="fulfilled",K.value=Y)},function(Y){K.status==="pending"&&(K.status="rejected",K.reason=Y)})),K.status){case"fulfilled":return K.value;case"rejected":throw K.reason}}throw K}function ne(K,Y,Z,he,ve){var we=typeof K;(we==="undefined"||we==="boolean")&&(K=null);var ke=!1;if(K===null)ke=!0;else switch(we){case"bigint":case"string":case"number":ke=!0;break;case"object":switch(K.$$typeof){case n:case e:ke=!0;break;case y:return ke=K._init,ne(ke(K._payload),Y,Z,he,ve)}}if(ke)return ve=ve(K),ke=he===""?"."+M(K,0):he,q(ve)?(Z="",ke!=null&&(Z=ke.replace(J,"$&/")+"/"),ne(ve,Y,Z,"",function(st){return st})):ve!=null&&(U(ve)&&(ve=V(ve,Z+(ve.key==null||K&&K.key===ve.key?"":(""+ve.key).replace(J,"$&/")+"/")+ke)),Y.push(ve)),1;ke=0;var it=he===""?".":he+":";if(q(K))for(var Me=0;Me<K.length;Me++)he=K[Me],we=it+M(he,Me),ke+=ne(he,Y,Z,we,ve);else if(Me=w(K),typeof Me=="function")for(K=Me.call(K),Me=0;!(he=K.next()).done;)he=he.value,we=it+M(he,Me++),ke+=ne(he,Y,Z,we,ve);else if(we==="object"){if(typeof K.then=="function")return ne(k(K),Y,Z,he,ve);throw Y=String(K),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys(K).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.")}return ke}function te(K,Y,Z){if(K==null)return K;var he=[],ve=0;return ne(K,he,"","",function(we){return Y.call(Z,we,ve++)}),he}function X(K){if(K._status===-1){var Y=K._result;Y=Y(),Y.then(function(Z){(K._status===0||K._status===-1)&&(K._status=1,K._result=Z)},function(Z){(K._status===0||K._status===-1)&&(K._status=2,K._result=Z)}),K._status===-1&&(K._status=0,K._result=Y)}if(K._status===1)return K._result.default;throw K._result}var _e=typeof reportError=="function"?reportError:function(K){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Y=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof K=="object"&&K!==null&&typeof K.message=="string"?String(K.message):String(K),error:K});if(!window.dispatchEvent(Y))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",K);return}console.error(K)};function me(){}return lt.Children={map:te,forEach:function(K,Y,Z){te(K,function(){Y.apply(this,arguments)},Z)},count:function(K){var Y=0;return te(K,function(){Y++}),Y},toArray:function(K){return te(K,function(Y){return Y})||[]},only:function(K){if(!U(K))throw Error("React.Children.only expected to receive a single React element child.");return K}},lt.Component=A,lt.Fragment=t,lt.Profiler=r,lt.PureComponent=R,lt.StrictMode=i,lt.Suspense=f,lt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=z,lt.__COMPILER_RUNTIME={__proto__:null,c:function(K){return z.H.useMemoCache(K)}},lt.cache=function(K){return function(){return K.apply(null,arguments)}},lt.cloneElement=function(K,Y,Z){if(K==null)throw Error("The argument must be a React element, but you passed "+K+".");var he=S({},K.props),ve=K.key,we=void 0;if(Y!=null)for(ke in Y.ref!==void 0&&(we=void 0),Y.key!==void 0&&(ve=""+Y.key),Y)!H.call(Y,ke)||ke==="key"||ke==="__self"||ke==="__source"||ke==="ref"&&Y.ref===void 0||(he[ke]=Y[ke]);var ke=arguments.length-2;if(ke===1)he.children=Z;else if(1<ke){for(var it=Array(ke),Me=0;Me<ke;Me++)it[Me]=arguments[Me+2];he.children=it}return O(K.type,ve,void 0,void 0,we,he)},lt.createContext=function(K){return K={$$typeof:l,_currentValue:K,_currentValue2:K,_threadCount:0,Provider:null,Consumer:null},K.Provider=K,K.Consumer={$$typeof:o,_context:K},K},lt.createElement=function(K,Y,Z){var he,ve={},we=null;if(Y!=null)for(he in Y.key!==void 0&&(we=""+Y.key),Y)H.call(Y,he)&&he!=="key"&&he!=="__self"&&he!=="__source"&&(ve[he]=Y[he]);var ke=arguments.length-2;if(ke===1)ve.children=Z;else if(1<ke){for(var it=Array(ke),Me=0;Me<ke;Me++)it[Me]=arguments[Me+2];ve.children=it}if(K&&K.defaultProps)for(he in ke=K.defaultProps,ke)ve[he]===void 0&&(ve[he]=ke[he]);return O(K,we,void 0,void 0,null,ve)},lt.createRef=function(){return{current:null}},lt.forwardRef=function(K){return{$$typeof:u,render:K}},lt.isValidElement=U,lt.lazy=function(K){return{$$typeof:y,_payload:{_status:-1,_result:K},_init:X}},lt.memo=function(K,Y){return{$$typeof:m,type:K,compare:Y===void 0?null:Y}},lt.startTransition=function(K){var Y=z.T,Z={};z.T=Z;try{var he=K(),ve=z.S;ve!==null&&ve(Z,he),typeof he=="object"&&he!==null&&typeof he.then=="function"&&he.then(me,_e)}catch(we){_e(we)}finally{z.T=Y}},lt.unstable_useCacheRefresh=function(){return z.H.useCacheRefresh()},lt.use=function(K){return z.H.use(K)},lt.useActionState=function(K,Y,Z){return z.H.useActionState(K,Y,Z)},lt.useCallback=function(K,Y){return z.H.useCallback(K,Y)},lt.useContext=function(K){return z.H.useContext(K)},lt.useDebugValue=function(){},lt.useDeferredValue=function(K,Y){return z.H.useDeferredValue(K,Y)},lt.useEffect=function(K,Y,Z){var he=z.H;if(typeof Z=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return he.useEffect(K,Y)},lt.useId=function(){return z.H.useId()},lt.useImperativeHandle=function(K,Y,Z){return z.H.useImperativeHandle(K,Y,Z)},lt.useInsertionEffect=function(K,Y){return z.H.useInsertionEffect(K,Y)},lt.useLayoutEffect=function(K,Y){return z.H.useLayoutEffect(K,Y)},lt.useMemo=function(K,Y){return z.H.useMemo(K,Y)},lt.useOptimistic=function(K,Y){return z.H.useOptimistic(K,Y)},lt.useReducer=function(K,Y,Z){return z.H.useReducer(K,Y,Z)},lt.useRef=function(K){return z.H.useRef(K)},lt.useState=function(K){return z.H.useState(K)},lt.useSyncExternalStore=function(K,Y,Z){return z.H.useSyncExternalStore(K,Y,Z)},lt.useTransition=function(){return z.H.useTransition()},lt.version="19.1.1",lt}var zE;function Dv(){return zE||(zE=1,Yy.exports=Fk()),Yy.exports}var ae=Dv();const ZA=kv(ae);var Qy={exports:{}},sd={},Xy={exports:{}},Zy={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jE;function Bk(){return jE||(jE=1,(function(n){function e(te,X){var _e=te.length;te.push(X);e:for(;0<_e;){var me=_e-1>>>1,K=te[me];if(0<r(K,X))te[me]=X,te[_e]=K,_e=me;else break e}}function t(te){return te.length===0?null:te[0]}function i(te){if(te.length===0)return null;var X=te[0],_e=te.pop();if(_e!==X){te[0]=_e;e:for(var me=0,K=te.length,Y=K>>>1;me<Y;){var Z=2*(me+1)-1,he=te[Z],ve=Z+1,we=te[ve];if(0>r(he,_e))ve<K&&0>r(we,he)?(te[me]=we,te[ve]=_e,me=ve):(te[me]=he,te[Z]=_e,me=Z);else if(ve<K&&0>r(we,_e))te[me]=we,te[ve]=_e,me=ve;else break e}}return X}function r(te,X){var _e=te.sortIndex-X.sortIndex;return _e!==0?_e:te.id-X.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();n.unstable_now=function(){return l.now()-u}}var f=[],m=[],y=1,v=null,w=3,E=!1,S=!1,b=!1,A=!1,C=typeof setTimeout=="function"?setTimeout:null,R=typeof clearTimeout=="function"?clearTimeout:null,L=typeof setImmediate<"u"?setImmediate:null;function q(te){for(var X=t(m);X!==null;){if(X.callback===null)i(m);else if(X.startTime<=te)i(m),X.sortIndex=X.expirationTime,e(f,X);else break;X=t(m)}}function z(te){if(b=!1,q(te),!S)if(t(f)!==null)S=!0,H||(H=!0,M());else{var X=t(m);X!==null&&ne(z,X.startTime-te)}}var H=!1,O=-1,V=5,U=-1;function j(){return A?!0:!(n.unstable_now()-U<V)}function J(){if(A=!1,H){var te=n.unstable_now();U=te;var X=!0;try{e:{S=!1,b&&(b=!1,R(O),O=-1),E=!0;var _e=w;try{t:{for(q(te),v=t(f);v!==null&&!(v.expirationTime>te&&j());){var me=v.callback;if(typeof me=="function"){v.callback=null,w=v.priorityLevel;var K=me(v.expirationTime<=te);if(te=n.unstable_now(),typeof K=="function"){v.callback=K,q(te),X=!0;break t}v===t(f)&&i(f),q(te)}else i(f);v=t(f)}if(v!==null)X=!0;else{var Y=t(m);Y!==null&&ne(z,Y.startTime-te),X=!1}}break e}finally{v=null,w=_e,E=!1}X=void 0}}finally{X?M():H=!1}}}var M;if(typeof L=="function")M=function(){L(J)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,k=F.port2;F.port1.onmessage=J,M=function(){k.postMessage(null)}}else M=function(){C(J,0)};function ne(te,X){O=C(function(){te(n.unstable_now())},X)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(te){te.callback=null},n.unstable_forceFrameRate=function(te){0>te||125<te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):V=0<te?Math.floor(1e3/te):5},n.unstable_getCurrentPriorityLevel=function(){return w},n.unstable_next=function(te){switch(w){case 1:case 2:case 3:var X=3;break;default:X=w}var _e=w;w=X;try{return te()}finally{w=_e}},n.unstable_requestPaint=function(){A=!0},n.unstable_runWithPriority=function(te,X){switch(te){case 1:case 2:case 3:case 4:case 5:break;default:te=3}var _e=w;w=te;try{return X()}finally{w=_e}},n.unstable_scheduleCallback=function(te,X,_e){var me=n.unstable_now();switch(typeof _e=="object"&&_e!==null?(_e=_e.delay,_e=typeof _e=="number"&&0<_e?me+_e:me):_e=me,te){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=_e+K,te={id:y++,callback:X,priorityLevel:te,startTime:_e,expirationTime:K,sortIndex:-1},_e>me?(te.sortIndex=_e,e(m,te),t(f)===null&&te===t(m)&&(b?(R(O),O=-1):b=!0,ne(z,_e-me))):(te.sortIndex=K,e(f,te),S||E||(S=!0,H||(H=!0,M()))),te},n.unstable_shouldYield=j,n.unstable_wrapCallback=function(te){var X=w;return function(){var _e=w;w=X;try{return te.apply(this,arguments)}finally{w=_e}}}})(Zy)),Zy}var GE;function qk(){return GE||(GE=1,Xy.exports=Bk()),Xy.exports}var e_={exports:{}},Xn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HE;function zk(){if(HE)return Xn;HE=1;var n=Dv();function e(f){var m="https://react.dev/errors/"+f;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)m+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+f+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},r=Symbol.for("react.portal");function o(f,m,y){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:v==null?null:""+v,children:f,containerInfo:m,implementation:y}}var l=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(f,m){if(f==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return Xn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Xn.createPortal=function(f,m){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(e(299));return o(f,m,null,y)},Xn.flushSync=function(f){var m=l.T,y=i.p;try{if(l.T=null,i.p=2,f)return f()}finally{l.T=m,i.p=y,i.d.f()}},Xn.preconnect=function(f,m){typeof f=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,i.d.C(f,m))},Xn.prefetchDNS=function(f){typeof f=="string"&&i.d.D(f)},Xn.preinit=function(f,m){if(typeof f=="string"&&m&&typeof m.as=="string"){var y=m.as,v=u(y,m.crossOrigin),w=typeof m.integrity=="string"?m.integrity:void 0,E=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;y==="style"?i.d.S(f,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:v,integrity:w,fetchPriority:E}):y==="script"&&i.d.X(f,{crossOrigin:v,integrity:w,fetchPriority:E,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},Xn.preinitModule=function(f,m){if(typeof f=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var y=u(m.as,m.crossOrigin);i.d.M(f,{crossOrigin:y,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&i.d.M(f)},Xn.preload=function(f,m){if(typeof f=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var y=m.as,v=u(y,m.crossOrigin);i.d.L(f,y,{crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},Xn.preloadModule=function(f,m){if(typeof f=="string")if(m){var y=u(m.as,m.crossOrigin);i.d.m(f,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:y,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else i.d.m(f)},Xn.requestFormReset=function(f){i.d.r(f)},Xn.unstable_batchedUpdates=function(f,m){return f(m)},Xn.useFormState=function(f,m,y){return l.H.useFormState(f,m,y)},Xn.useFormStatus=function(){return l.H.useHostTransitionStatus()},Xn.version="19.1.1",Xn}var $E;function jk(){if($E)return e_.exports;$E=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),e_.exports=zk(),e_.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var WE;function Gk(){if(WE)return sd;WE=1;var n=qk(),e=Dv(),t=jk();function i(s){var a="https://react.dev/errors/"+s;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)a+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+s+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function o(s){var a=s,c=s;if(s.alternate)for(;a.return;)a=a.return;else{s=a;do a=s,(a.flags&4098)!==0&&(c=a.return),s=a.return;while(s)}return a.tag===3?c:null}function l(s){if(s.tag===13){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function u(s){if(o(s)!==s)throw Error(i(188))}function f(s){var a=s.alternate;if(!a){if(a=o(s),a===null)throw Error(i(188));return a!==s?null:s}for(var c=s,p=a;;){var T=c.return;if(T===null)break;var x=T.alternate;if(x===null){if(p=T.return,p!==null){c=p;continue}break}if(T.child===x.child){for(x=T.child;x;){if(x===c)return u(T),s;if(x===p)return u(T),a;x=x.sibling}throw Error(i(188))}if(c.return!==p.return)c=T,p=x;else{for(var D=!1,B=T.child;B;){if(B===c){D=!0,c=T,p=x;break}if(B===p){D=!0,p=T,c=x;break}B=B.sibling}if(!D){for(B=x.child;B;){if(B===c){D=!0,c=x,p=T;break}if(B===p){D=!0,p=x,c=T;break}B=B.sibling}if(!D)throw Error(i(189))}}if(c.alternate!==p)throw Error(i(190))}if(c.tag!==3)throw Error(i(188));return c.stateNode.current===c?s:a}function m(s){var a=s.tag;if(a===5||a===26||a===27||a===6)return s;for(s=s.child;s!==null;){if(a=m(s),a!==null)return a;s=s.sibling}return null}var y=Object.assign,v=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),E=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),b=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),R=Symbol.for("react.consumer"),L=Symbol.for("react.context"),q=Symbol.for("react.forward_ref"),z=Symbol.for("react.suspense"),H=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),V=Symbol.for("react.lazy"),U=Symbol.for("react.activity"),j=Symbol.for("react.memo_cache_sentinel"),J=Symbol.iterator;function M(s){return s===null||typeof s!="object"?null:(s=J&&s[J]||s["@@iterator"],typeof s=="function"?s:null)}var F=Symbol.for("react.client.reference");function k(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===F?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case S:return"Fragment";case A:return"Profiler";case b:return"StrictMode";case z:return"Suspense";case H:return"SuspenseList";case U:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case E:return"Portal";case L:return(s.displayName||"Context")+".Provider";case R:return(s._context.displayName||"Context")+".Consumer";case q:var a=s.render;return s=s.displayName,s||(s=a.displayName||a.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case O:return a=s.displayName||null,a!==null?a:k(s.type)||"Memo";case V:a=s._payload,s=s._init;try{return k(s(a))}catch{}}return null}var ne=Array.isArray,te=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,_e={pending:!1,data:null,method:null,action:null},me=[],K=-1;function Y(s){return{current:s}}function Z(s){0>K||(s.current=me[K],me[K]=null,K--)}function he(s,a){K++,me[K]=s.current,s.current=a}var ve=Y(null),we=Y(null),ke=Y(null),it=Y(null);function Me(s,a){switch(he(ke,a),he(we,s),he(ve,null),a.nodeType){case 9:case 11:s=(s=a.documentElement)&&(s=s.namespaceURI)?hE(s):0;break;default:if(s=a.tagName,a=a.namespaceURI)a=hE(a),s=mE(a,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}Z(ve),he(ve,s)}function st(){Z(ve),Z(we),Z(ke)}function yt(s){s.memoizedState!==null&&he(it,s);var a=ve.current,c=mE(a,s.type);a!==c&&(he(we,s),he(ve,c))}function Ze(s){we.current===s&&(Z(ve),Z(we)),it.current===s&&(Z(it),Zc._currentValue=_e)}var Bt=Object.prototype.hasOwnProperty,Pt=n.unstable_scheduleCallback,P=n.unstable_cancelCallback,xe=n.unstable_shouldYield,se=n.unstable_requestPaint,$=n.unstable_now,W=n.unstable_getCurrentPriorityLevel,re=n.unstable_ImmediatePriority,Ee=n.unstable_UserBlockingPriority,Ae=n.unstable_NormalPriority,ce=n.unstable_LowPriority,Ne=n.unstable_IdlePriority,Fe=n.log,Ve=n.unstable_setDisableYieldValue,Oe=null,Ke=null;function We(s){if(typeof Fe=="function"&&Ve(s),Ke&&typeof Ke.setStrictMode=="function")try{Ke.setStrictMode(Oe,s)}catch{}}var _t=Math.clz32?Math.clz32:oi,si=Math.log,Yn=Math.LN2;function oi(s){return s>>>=0,s===0?32:31-(si(s)/Yn|0)|0}var At=256,ai=4194304;function Bn(s){var a=s&42;if(a!==0)return a;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Pn(s,a,c){var p=s.pendingLanes;if(p===0)return 0;var T=0,x=s.suspendedLanes,D=s.pingedLanes;s=s.warmLanes;var B=p&134217727;return B!==0?(p=B&~x,p!==0?T=Bn(p):(D&=B,D!==0?T=Bn(D):c||(c=B&~s,c!==0&&(T=Bn(c))))):(B=p&~x,B!==0?T=Bn(B):D!==0?T=Bn(D):c||(c=p&~s,c!==0&&(T=Bn(c)))),T===0?0:a!==0&&a!==T&&(a&x)===0&&(x=T&-T,c=a&-a,x>=c||x===32&&(c&4194048)!==0)?a:T}function ir(s,a){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&a)===0}function Se(s,a){switch(s){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Qe(){var s=At;return At<<=1,(At&4194048)===0&&(At=256),s}function qe(){var s=ai;return ai<<=1,(ai&62914560)===0&&(ai=4194304),s}function je(s){for(var a=[],c=0;31>c;c++)a.push(s);return a}function ot(s,a){s.pendingLanes|=a,a!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function vt(s,a,c,p,T,x){var D=s.pendingLanes;s.pendingLanes=c,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=c,s.entangledLanes&=c,s.errorRecoveryDisabledLanes&=c,s.shellSuspendCounter=0;var B=s.entanglements,ee=s.expirationTimes,fe=s.hiddenUpdates;for(c=D&~c;0<c;){var be=31-_t(c),Ce=1<<be;B[be]=0,ee[be]=-1;var pe=fe[be];if(pe!==null)for(fe[be]=null,be=0;be<pe.length;be++){var ge=pe[be];ge!==null&&(ge.lane&=-536870913)}c&=~Ce}p!==0&&Wt(s,p,0),x!==0&&T===0&&s.tag!==0&&(s.suspendedLanes|=x&~(D&~a))}function Wt(s,a,c){s.pendingLanes|=a,s.suspendedLanes&=~a;var p=31-_t(a);s.entangledLanes|=a,s.entanglements[p]=s.entanglements[p]|1073741824|c&4194090}function _n(s,a){var c=s.entangledLanes|=a;for(s=s.entanglements;c;){var p=31-_t(c),T=1<<p;T&a|s[p]&a&&(s[p]|=a),c&=~T}}function li(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function rr(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Ii(){var s=X.p;return s!==0?s:(s=window.event,s===void 0?32:DE(s.type))}function Qr(s,a){var c=X.p;try{return X.p=s,a()}finally{X.p=c}}var ut=Math.random().toString(36).slice(2),Yt="__reactFiber$"+ut,jt="__reactProps$"+ut,ui="__reactContainer$"+ut,Xr="__reactEvents$"+ut,rc="__reactListeners$"+ut,yr="__reactHandles$"+ut,tl="__reactResources$"+ut,jo="__reactMarker$"+ut;function Ls(s){delete s[Yt],delete s[jt],delete s[Xr],delete s[rc],delete s[yr]}function Zr(s){var a=s[Yt];if(a)return a;for(var c=s.parentNode;c;){if(a=c[ui]||c[Yt]){if(c=a.alternate,a.child!==null||c!==null&&c.child!==null)for(s=_E(s);s!==null;){if(c=s[Yt])return c;s=_E(s)}return a}s=c,c=s.parentNode}return null}function _r(s){if(s=s[Yt]||s[ui]){var a=s.tag;if(a===5||a===6||a===13||a===26||a===27||a===3)return s}return null}function vr(s){var a=s.tag;if(a===5||a===26||a===27||a===6)return s.stateNode;throw Error(i(33))}function ci(s){var a=s[tl];return a||(a=s[tl]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function fn(s){s[jo]=!0}var sc=new Set,nl={};function sr(s,a){es(s,a),es(s+"Capture",a)}function es(s,a){for(nl[s]=a,s=0;s<a.length;s++)sc.add(a[s])}var Vf=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Uf={},Go={};function Lf(s){return Bt.call(Go,s)?!0:Bt.call(Uf,s)?!1:Vf.test(s)?Go[s]=!0:(Uf[s]=!0,!1)}function Os(s,a,c){if(Lf(a))if(c===null)s.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":s.removeAttribute(a);return;case"boolean":var p=a.toLowerCase().slice(0,5);if(p!=="data-"&&p!=="aria-"){s.removeAttribute(a);return}}s.setAttribute(a,""+c)}}function Tr(s,a,c){if(c===null)s.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(a);return}s.setAttribute(a,""+c)}}function qn(s,a,c,p){if(p===null)s.removeAttribute(c);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(c);return}s.setAttributeNS(a,c,""+p)}}var Ho,Of;function ts(s){if(Ho===void 0)try{throw Error()}catch(c){var a=c.stack.trim().match(/\n( *(at )?)/);Ho=a&&a[1]||"",Of=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ho+s+Of}var il=!1;function rl(s,a){if(!s||il)return"";il=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var p={DetermineComponentFrameRoot:function(){try{if(a){var Ce=function(){throw Error()};if(Object.defineProperty(Ce.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ce,[])}catch(ge){var pe=ge}Reflect.construct(s,[],Ce)}else{try{Ce.call()}catch(ge){pe=ge}s.call(Ce.prototype)}}else{try{throw Error()}catch(ge){pe=ge}(Ce=s())&&typeof Ce.catch=="function"&&Ce.catch(function(){})}}catch(ge){if(ge&&pe&&typeof ge.stack=="string")return[ge.stack,pe.stack]}return[null,null]}};p.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var T=Object.getOwnPropertyDescriptor(p.DetermineComponentFrameRoot,"name");T&&T.configurable&&Object.defineProperty(p.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var x=p.DetermineComponentFrameRoot(),D=x[0],B=x[1];if(D&&B){var ee=D.split(`
`),fe=B.split(`
`);for(T=p=0;p<ee.length&&!ee[p].includes("DetermineComponentFrameRoot");)p++;for(;T<fe.length&&!fe[T].includes("DetermineComponentFrameRoot");)T++;if(p===ee.length||T===fe.length)for(p=ee.length-1,T=fe.length-1;1<=p&&0<=T&&ee[p]!==fe[T];)T--;for(;1<=p&&0<=T;p--,T--)if(ee[p]!==fe[T]){if(p!==1||T!==1)do if(p--,T--,0>T||ee[p]!==fe[T]){var be=`
`+ee[p].replace(" at new "," at ");return s.displayName&&be.includes("<anonymous>")&&(be=be.replace("<anonymous>",s.displayName)),be}while(1<=p&&0<=T);break}}}finally{il=!1,Error.prepareStackTrace=c}return(c=s?s.displayName||s.name:"")?ts(c):""}function oc(s){switch(s.tag){case 26:case 27:case 5:return ts(s.type);case 16:return ts("Lazy");case 13:return ts("Suspense");case 19:return ts("SuspenseList");case 0:case 15:return rl(s.type,!1);case 11:return rl(s.type.render,!1);case 1:return rl(s.type,!0);case 31:return ts("Activity");default:return""}}function sl(s){try{var a="";do a+=oc(s),s=s.return;while(s);return a}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}function di(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function ac(s){var a=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Zp(s){var a=ac(s)?"checked":"value",c=Object.getOwnPropertyDescriptor(s.constructor.prototype,a),p=""+s[a];if(!s.hasOwnProperty(a)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var T=c.get,x=c.set;return Object.defineProperty(s,a,{configurable:!0,get:function(){return T.call(this)},set:function(D){p=""+D,x.call(this,D)}}),Object.defineProperty(s,a,{enumerable:c.enumerable}),{getValue:function(){return p},setValue:function(D){p=""+D},stopTracking:function(){s._valueTracker=null,delete s[a]}}}}function ol(s){s._valueTracker||(s._valueTracker=Zp(s))}function lc(s){if(!s)return!1;var a=s._valueTracker;if(!a)return!0;var c=a.getValue(),p="";return s&&(p=ac(s)?s.checked?"true":"false":s.value),s=p,s!==c?(a.setValue(s),!0):!1}function $o(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var eg=/[\n"\\]/g;function vn(s){return s.replace(eg,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function Ai(s,a,c,p,T,x,D,B){s.name="",D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"?s.type=D:s.removeAttribute("type"),a!=null?D==="number"?(a===0&&s.value===""||s.value!=a)&&(s.value=""+di(a)):s.value!==""+di(a)&&(s.value=""+di(a)):D!=="submit"&&D!=="reset"||s.removeAttribute("value"),a!=null?Fs(s,D,di(a)):c!=null?Fs(s,D,di(c)):p!=null&&s.removeAttribute("value"),T==null&&x!=null&&(s.defaultChecked=!!x),T!=null&&(s.checked=T&&typeof T!="function"&&typeof T!="symbol"),B!=null&&typeof B!="function"&&typeof B!="symbol"&&typeof B!="boolean"?s.name=""+di(B):s.removeAttribute("name")}function Wo(s,a,c,p,T,x,D,B){if(x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(s.type=x),a!=null||c!=null){if(!(x!=="submit"&&x!=="reset"||a!=null))return;c=c!=null?""+di(c):"",a=a!=null?""+di(a):c,B||a===s.value||(s.value=a),s.defaultValue=a}p=p??T,p=typeof p!="function"&&typeof p!="symbol"&&!!p,s.checked=B?s.checked:!!p,s.defaultChecked=!!p,D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"&&(s.name=D)}function Fs(s,a,c){a==="number"&&$o(s.ownerDocument)===s||s.defaultValue===""+c||(s.defaultValue=""+c)}function ns(s,a,c,p){if(s=s.options,a){a={};for(var T=0;T<c.length;T++)a["$"+c[T]]=!0;for(c=0;c<s.length;c++)T=a.hasOwnProperty("$"+s[c].value),s[c].selected!==T&&(s[c].selected=T),T&&p&&(s[c].defaultSelected=!0)}else{for(c=""+di(c),a=null,T=0;T<s.length;T++){if(s[T].value===c){s[T].selected=!0,p&&(s[T].defaultSelected=!0);return}a!==null||s[T].disabled||(a=s[T])}a!==null&&(a.selected=!0)}}function Ut(s,a,c){if(a!=null&&(a=""+di(a),a!==s.value&&(s.value=a),c==null)){s.defaultValue!==a&&(s.defaultValue=a);return}s.defaultValue=c!=null?""+di(c):""}function Ko(s,a,c,p){if(a==null){if(p!=null){if(c!=null)throw Error(i(92));if(ne(p)){if(1<p.length)throw Error(i(93));p=p[0]}c=p}c==null&&(c=""),a=c}c=di(a),s.defaultValue=c,p=s.textContent,p===c&&p!==""&&p!==null&&(s.value=p)}function Bi(s,a){if(a){var c=s.firstChild;if(c&&c===s.lastChild&&c.nodeType===3){c.nodeValue=a;return}}s.textContent=a}var Jo=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ff(s,a,c){var p=a.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?p?s.setProperty(a,""):a==="float"?s.cssFloat="":s[a]="":p?s.setProperty(a,c):typeof c!="number"||c===0||Jo.has(a)?a==="float"?s.cssFloat=c:s[a]=(""+c).trim():s[a]=c+"px"}function uc(s,a,c){if(a!=null&&typeof a!="object")throw Error(i(62));if(s=s.style,c!=null){for(var p in c)!c.hasOwnProperty(p)||a!=null&&a.hasOwnProperty(p)||(p.indexOf("--")===0?s.setProperty(p,""):p==="float"?s.cssFloat="":s[p]="");for(var T in a)p=a[T],a.hasOwnProperty(T)&&c[T]!==p&&Ff(s,T,p)}else for(var x in a)a.hasOwnProperty(x)&&Ff(s,x,a[x])}function cc(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var tg=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ng=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function al(s){return ng.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}var is=null;function qi(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var rs=null,ss=null;function dc(s){var a=_r(s);if(a&&(s=a.stateNode)){var c=s[jt]||null;e:switch(s=a.stateNode,a.type){case"input":if(Ai(s,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),a=c.name,c.type==="radio"&&a!=null){for(c=s;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+vn(""+a)+'"][type="radio"]'),a=0;a<c.length;a++){var p=c[a];if(p!==s&&p.form===s.form){var T=p[jt]||null;if(!T)throw Error(i(90));Ai(p,T.value,T.defaultValue,T.defaultValue,T.checked,T.defaultChecked,T.type,T.name)}}for(a=0;a<c.length;a++)p=c[a],p.form===s.form&&lc(p)}break e;case"textarea":Ut(s,c.value,c.defaultValue);break e;case"select":a=c.value,a!=null&&ns(s,!!c.multiple,a,!1)}}}var wr=!1;function Bf(s,a,c){if(wr)return s(a,c);wr=!0;try{var p=s(a);return p}finally{if(wr=!1,(rs!==null||ss!==null)&&(Dh(),rs&&(a=rs,s=ss,ss=rs=null,dc(a),s)))for(a=0;a<s.length;a++)dc(s[a])}}function Yo(s,a){var c=s.stateNode;if(c===null)return null;var p=c[jt]||null;if(p===null)return null;c=p[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(s=s.type,p=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!p;break e;default:s=!1}if(s)return null;if(c&&typeof c!="function")throw Error(i(231,a,typeof c));return c}var or=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),zi=!1;if(or)try{var Qo={};Object.defineProperty(Qo,"passive",{get:function(){zi=!0}}),window.addEventListener("test",Qo,Qo),window.removeEventListener("test",Qo,Qo)}catch{zi=!1}var xr=null,Bs=null,os=null;function fc(){if(os)return os;var s,a=Bs,c=a.length,p,T="value"in xr?xr.value:xr.textContent,x=T.length;for(s=0;s<c&&a[s]===T[s];s++);var D=c-s;for(p=1;p<=D&&a[c-p]===T[x-p];p++);return os=T.slice(s,1<p?1-p:void 0)}function Er(s){var a=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&a===13&&(s=13)):s=a,s===10&&(s=13),32<=s||s===13?s:0}function br(){return!0}function hc(){return!1}function kn(s){function a(c,p,T,x,D){this._reactName=c,this._targetInst=T,this.type=p,this.nativeEvent=x,this.target=D,this.currentTarget=null;for(var B in s)s.hasOwnProperty(B)&&(c=s[B],this[B]=c?c(x):x[B]);return this.isDefaultPrevented=(x.defaultPrevented!=null?x.defaultPrevented:x.returnValue===!1)?br:hc,this.isPropagationStopped=hc,this}return y(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=br)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=br)},persist:function(){},isPersistent:br}),a}var Rt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ll=kn(Rt),Xo=y({},Rt,{view:0,detail:0}),qf=kn(Xo),ul,cl,Sr,Zo=y({},Xo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:na,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Sr&&(Sr&&s.type==="mousemove"?(ul=s.screenX-Sr.screenX,cl=s.screenY-Sr.screenY):cl=ul=0,Sr=s),ul)},movementY:function(s){return"movementY"in s?s.movementY:cl}}),ji=kn(Zo),zf=y({},Zo,{dataTransfer:0}),ig=kn(zf),ea=y({},Xo,{relatedTarget:0}),dl=kn(ea),mc=y({},Rt,{animationName:0,elapsedTime:0,pseudoElement:0}),fl=kn(mc),jf=y({},Rt,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),hl=kn(jf),rg=y({},Rt,{data:0}),pc=kn(rg),ta={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Gf={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Hf={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function gc(s){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(s):(s=Hf[s])?!!a[s]:!1}function na(){return gc}var $f=y({},Xo,{key:function(s){if(s.key){var a=ta[s.key]||s.key;if(a!=="Unidentified")return a}return s.type==="keypress"?(s=Er(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Gf[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:na,charCode:function(s){return s.type==="keypress"?Er(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Er(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),ml=kn($f),Wf=y({},Zo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),yc=kn(Wf),as=y({},Xo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:na}),Kf=kn(as),Jf=y({},Rt,{propertyName:0,elapsedTime:0,pseudoElement:0}),Yf=kn(Jf),Qf=y({},Zo,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),pl=kn(Qf),fi=y({},Rt,{newState:0,oldState:0}),Xf=kn(fi),Zf=[9,13,27,32],Ir=or&&"CompositionEvent"in window,_=null;or&&"documentMode"in document&&(_=document.documentMode);var I=or&&"TextEvent"in window&&!_,N=or&&(!Ir||_&&8<_&&11>=_),G=" ",le=!1;function Te(s,a){switch(s){case"keyup":return Zf.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ue(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Tt=!1;function Sn(s,a){switch(s){case"compositionend":return Ue(a);case"keypress":return a.which!==32?null:(le=!0,G);case"textInput":return s=a.data,s===G&&le?null:s;default:return null}}function wt(s,a){if(Tt)return s==="compositionend"||!Ir&&Te(s,a)?(s=fc(),os=Bs=xr=null,Tt=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return N&&a.locale!=="ko"?null:a.data;default:return null}}var Dn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function In(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a==="input"?!!Dn[s.type]:a==="textarea"}function ls(s,a,c,p){rs?ss?ss.push(p):ss=[p]:rs=p,a=Fh(a,"onChange"),0<a.length&&(c=new ll("onChange","change",null,c,p),s.push({event:c,listeners:a}))}var zn=null,Ar=null;function _c(s){lE(s,0)}function eh(s){var a=vr(s);if(lc(a))return s}function RT(s,a){if(s==="change")return a}var NT=!1;if(or){var sg;if(or){var og="oninput"in document;if(!og){var PT=document.createElement("div");PT.setAttribute("oninput","return;"),og=typeof PT.oninput=="function"}sg=og}else sg=!1;NT=sg&&(!document.documentMode||9<document.documentMode)}function kT(){zn&&(zn.detachEvent("onpropertychange",DT),Ar=zn=null)}function DT(s){if(s.propertyName==="value"&&eh(Ar)){var a=[];ls(a,Ar,s,qi(s)),Bf(_c,a)}}function hP(s,a,c){s==="focusin"?(kT(),zn=a,Ar=c,zn.attachEvent("onpropertychange",DT)):s==="focusout"&&kT()}function mP(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return eh(Ar)}function pP(s,a){if(s==="click")return eh(a)}function gP(s,a){if(s==="input"||s==="change")return eh(a)}function yP(s,a){return s===a&&(s!==0||1/s===1/a)||s!==s&&a!==a}var Ci=typeof Object.is=="function"?Object.is:yP;function vc(s,a){if(Ci(s,a))return!0;if(typeof s!="object"||s===null||typeof a!="object"||a===null)return!1;var c=Object.keys(s),p=Object.keys(a);if(c.length!==p.length)return!1;for(p=0;p<c.length;p++){var T=c[p];if(!Bt.call(a,T)||!Ci(s[T],a[T]))return!1}return!0}function MT(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function VT(s,a){var c=MT(s);s=0;for(var p;c;){if(c.nodeType===3){if(p=s+c.textContent.length,s<=a&&p>=a)return{node:c,offset:a-s};s=p}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=MT(c)}}function UT(s,a){return s&&a?s===a?!0:s&&s.nodeType===3?!1:a&&a.nodeType===3?UT(s,a.parentNode):"contains"in s?s.contains(a):s.compareDocumentPosition?!!(s.compareDocumentPosition(a)&16):!1:!1}function LT(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var a=$o(s.document);a instanceof s.HTMLIFrameElement;){try{var c=typeof a.contentWindow.location.href=="string"}catch{c=!1}if(c)s=a.contentWindow;else break;a=$o(s.document)}return a}function ag(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a&&(a==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||a==="textarea"||s.contentEditable==="true")}var _P=or&&"documentMode"in document&&11>=document.documentMode,gl=null,lg=null,Tc=null,ug=!1;function OT(s,a,c){var p=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;ug||gl==null||gl!==$o(p)||(p=gl,"selectionStart"in p&&ag(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),Tc&&vc(Tc,p)||(Tc=p,p=Fh(lg,"onSelect"),0<p.length&&(a=new ll("onSelect","select",null,a,c),s.push({event:a,listeners:p}),a.target=gl)))}function ia(s,a){var c={};return c[s.toLowerCase()]=a.toLowerCase(),c["Webkit"+s]="webkit"+a,c["Moz"+s]="moz"+a,c}var yl={animationend:ia("Animation","AnimationEnd"),animationiteration:ia("Animation","AnimationIteration"),animationstart:ia("Animation","AnimationStart"),transitionrun:ia("Transition","TransitionRun"),transitionstart:ia("Transition","TransitionStart"),transitioncancel:ia("Transition","TransitionCancel"),transitionend:ia("Transition","TransitionEnd")},cg={},FT={};or&&(FT=document.createElement("div").style,"AnimationEvent"in window||(delete yl.animationend.animation,delete yl.animationiteration.animation,delete yl.animationstart.animation),"TransitionEvent"in window||delete yl.transitionend.transition);function ra(s){if(cg[s])return cg[s];if(!yl[s])return s;var a=yl[s],c;for(c in a)if(a.hasOwnProperty(c)&&c in FT)return cg[s]=a[c];return s}var BT=ra("animationend"),qT=ra("animationiteration"),zT=ra("animationstart"),vP=ra("transitionrun"),TP=ra("transitionstart"),wP=ra("transitioncancel"),jT=ra("transitionend"),GT=new Map,dg="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");dg.push("scrollEnd");function ar(s,a){GT.set(s,a),sr(a,[s])}var HT=new WeakMap;function Gi(s,a){if(typeof s=="object"&&s!==null){var c=HT.get(s);return c!==void 0?c:(a={value:s,source:a,stack:sl(a)},HT.set(s,a),a)}return{value:s,source:a,stack:sl(a)}}var Hi=[],_l=0,fg=0;function th(){for(var s=_l,a=fg=_l=0;a<s;){var c=Hi[a];Hi[a++]=null;var p=Hi[a];Hi[a++]=null;var T=Hi[a];Hi[a++]=null;var x=Hi[a];if(Hi[a++]=null,p!==null&&T!==null){var D=p.pending;D===null?T.next=T:(T.next=D.next,D.next=T),p.pending=T}x!==0&&$T(c,T,x)}}function nh(s,a,c,p){Hi[_l++]=s,Hi[_l++]=a,Hi[_l++]=c,Hi[_l++]=p,fg|=p,s.lanes|=p,s=s.alternate,s!==null&&(s.lanes|=p)}function hg(s,a,c,p){return nh(s,a,c,p),ih(s)}function vl(s,a){return nh(s,null,null,a),ih(s)}function $T(s,a,c){s.lanes|=c;var p=s.alternate;p!==null&&(p.lanes|=c);for(var T=!1,x=s.return;x!==null;)x.childLanes|=c,p=x.alternate,p!==null&&(p.childLanes|=c),x.tag===22&&(s=x.stateNode,s===null||s._visibility&1||(T=!0)),s=x,x=x.return;return s.tag===3?(x=s.stateNode,T&&a!==null&&(T=31-_t(c),s=x.hiddenUpdates,p=s[T],p===null?s[T]=[a]:p.push(a),a.lane=c|536870912),x):null}function ih(s){if(50<Hc)throw Hc=0,vy=null,Error(i(185));for(var a=s.return;a!==null;)s=a,a=s.return;return s.tag===3?s.stateNode:null}var Tl={};function xP(s,a,c,p){this.tag=s,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ri(s,a,c,p){return new xP(s,a,c,p)}function mg(s){return s=s.prototype,!(!s||!s.isReactComponent)}function us(s,a){var c=s.alternate;return c===null?(c=Ri(s.tag,a,s.key,s.mode),c.elementType=s.elementType,c.type=s.type,c.stateNode=s.stateNode,c.alternate=s,s.alternate=c):(c.pendingProps=a,c.type=s.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=s.flags&65011712,c.childLanes=s.childLanes,c.lanes=s.lanes,c.child=s.child,c.memoizedProps=s.memoizedProps,c.memoizedState=s.memoizedState,c.updateQueue=s.updateQueue,a=s.dependencies,c.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},c.sibling=s.sibling,c.index=s.index,c.ref=s.ref,c.refCleanup=s.refCleanup,c}function WT(s,a){s.flags&=65011714;var c=s.alternate;return c===null?(s.childLanes=0,s.lanes=a,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=c.childLanes,s.lanes=c.lanes,s.child=c.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=c.memoizedProps,s.memoizedState=c.memoizedState,s.updateQueue=c.updateQueue,s.type=c.type,a=c.dependencies,s.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),s}function rh(s,a,c,p,T,x){var D=0;if(p=s,typeof s=="function")mg(s)&&(D=1);else if(typeof s=="string")D=bk(s,c,ve.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case U:return s=Ri(31,c,a,T),s.elementType=U,s.lanes=x,s;case S:return sa(c.children,T,x,a);case b:D=8,T|=24;break;case A:return s=Ri(12,c,a,T|2),s.elementType=A,s.lanes=x,s;case z:return s=Ri(13,c,a,T),s.elementType=z,s.lanes=x,s;case H:return s=Ri(19,c,a,T),s.elementType=H,s.lanes=x,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case C:case L:D=10;break e;case R:D=9;break e;case q:D=11;break e;case O:D=14;break e;case V:D=16,p=null;break e}D=29,c=Error(i(130,s===null?"null":typeof s,"")),p=null}return a=Ri(D,c,a,T),a.elementType=s,a.type=p,a.lanes=x,a}function sa(s,a,c,p){return s=Ri(7,s,p,a),s.lanes=c,s}function pg(s,a,c){return s=Ri(6,s,null,a),s.lanes=c,s}function gg(s,a,c){return a=Ri(4,s.children!==null?s.children:[],s.key,a),a.lanes=c,a.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},a}var wl=[],xl=0,sh=null,oh=0,$i=[],Wi=0,oa=null,cs=1,ds="";function aa(s,a){wl[xl++]=oh,wl[xl++]=sh,sh=s,oh=a}function KT(s,a,c){$i[Wi++]=cs,$i[Wi++]=ds,$i[Wi++]=oa,oa=s;var p=cs;s=ds;var T=32-_t(p)-1;p&=~(1<<T),c+=1;var x=32-_t(a)+T;if(30<x){var D=T-T%5;x=(p&(1<<D)-1).toString(32),p>>=D,T-=D,cs=1<<32-_t(a)+T|c<<T|p,ds=x+s}else cs=1<<x|c<<T|p,ds=s}function yg(s){s.return!==null&&(aa(s,1),KT(s,1,0))}function _g(s){for(;s===sh;)sh=wl[--xl],wl[xl]=null,oh=wl[--xl],wl[xl]=null;for(;s===oa;)oa=$i[--Wi],$i[Wi]=null,ds=$i[--Wi],$i[Wi]=null,cs=$i[--Wi],$i[Wi]=null}var hi=null,on=null,Ct=!1,la=null,Cr=!1,vg=Error(i(519));function ua(s){var a=Error(i(418,""));throw Ec(Gi(a,s)),vg}function JT(s){var a=s.stateNode,c=s.type,p=s.memoizedProps;switch(a[Yt]=s,a[jt]=p,c){case"dialog":ht("cancel",a),ht("close",a);break;case"iframe":case"object":case"embed":ht("load",a);break;case"video":case"audio":for(c=0;c<Wc.length;c++)ht(Wc[c],a);break;case"source":ht("error",a);break;case"img":case"image":case"link":ht("error",a),ht("load",a);break;case"details":ht("toggle",a);break;case"input":ht("invalid",a),Wo(a,p.value,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name,!0),ol(a);break;case"select":ht("invalid",a);break;case"textarea":ht("invalid",a),Ko(a,p.value,p.defaultValue,p.children),ol(a)}c=p.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||a.textContent===""+c||p.suppressHydrationWarning===!0||fE(a.textContent,c)?(p.popover!=null&&(ht("beforetoggle",a),ht("toggle",a)),p.onScroll!=null&&ht("scroll",a),p.onScrollEnd!=null&&ht("scrollend",a),p.onClick!=null&&(a.onclick=Bh),a=!0):a=!1,a||ua(s)}function YT(s){for(hi=s.return;hi;)switch(hi.tag){case 5:case 13:Cr=!1;return;case 27:case 3:Cr=!0;return;default:hi=hi.return}}function wc(s){if(s!==hi)return!1;if(!Ct)return YT(s),Ct=!0,!1;var a=s.tag,c;if((c=a!==3&&a!==27)&&((c=a===5)&&(c=s.type,c=!(c!=="form"&&c!=="button")||Vy(s.type,s.memoizedProps)),c=!c),c&&on&&ua(s),YT(s),a===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));e:{for(s=s.nextSibling,a=0;s;){if(s.nodeType===8)if(c=s.data,c==="/$"){if(a===0){on=ur(s.nextSibling);break e}a--}else c!=="$"&&c!=="$!"&&c!=="$?"||a++;s=s.nextSibling}on=null}}else a===27?(a=on,no(s.type)?(s=Fy,Fy=null,on=s):on=a):on=hi?ur(s.stateNode.nextSibling):null;return!0}function xc(){on=hi=null,Ct=!1}function QT(){var s=la;return s!==null&&(wi===null?wi=s:wi.push.apply(wi,s),la=null),s}function Ec(s){la===null?la=[s]:la.push(s)}var Tg=Y(null),ca=null,fs=null;function qs(s,a,c){he(Tg,a._currentValue),a._currentValue=c}function hs(s){s._currentValue=Tg.current,Z(Tg)}function wg(s,a,c){for(;s!==null;){var p=s.alternate;if((s.childLanes&a)!==a?(s.childLanes|=a,p!==null&&(p.childLanes|=a)):p!==null&&(p.childLanes&a)!==a&&(p.childLanes|=a),s===c)break;s=s.return}}function xg(s,a,c,p){var T=s.child;for(T!==null&&(T.return=s);T!==null;){var x=T.dependencies;if(x!==null){var D=T.child;x=x.firstContext;e:for(;x!==null;){var B=x;x=T;for(var ee=0;ee<a.length;ee++)if(B.context===a[ee]){x.lanes|=c,B=x.alternate,B!==null&&(B.lanes|=c),wg(x.return,c,s),p||(D=null);break e}x=B.next}}else if(T.tag===18){if(D=T.return,D===null)throw Error(i(341));D.lanes|=c,x=D.alternate,x!==null&&(x.lanes|=c),wg(D,c,s),D=null}else D=T.child;if(D!==null)D.return=T;else for(D=T;D!==null;){if(D===s){D=null;break}if(T=D.sibling,T!==null){T.return=D.return,D=T;break}D=D.return}T=D}}function bc(s,a,c,p){s=null;for(var T=a,x=!1;T!==null;){if(!x){if((T.flags&524288)!==0)x=!0;else if((T.flags&262144)!==0)break}if(T.tag===10){var D=T.alternate;if(D===null)throw Error(i(387));if(D=D.memoizedProps,D!==null){var B=T.type;Ci(T.pendingProps.value,D.value)||(s!==null?s.push(B):s=[B])}}else if(T===it.current){if(D=T.alternate,D===null)throw Error(i(387));D.memoizedState.memoizedState!==T.memoizedState.memoizedState&&(s!==null?s.push(Zc):s=[Zc])}T=T.return}s!==null&&xg(a,s,c,p),a.flags|=262144}function ah(s){for(s=s.firstContext;s!==null;){if(!Ci(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function da(s){ca=s,fs=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function Qn(s){return XT(ca,s)}function lh(s,a){return ca===null&&da(s),XT(s,a)}function XT(s,a){var c=a._currentValue;if(a={context:a,memoizedValue:c,next:null},fs===null){if(s===null)throw Error(i(308));fs=a,s.dependencies={lanes:0,firstContext:a},s.flags|=524288}else fs=fs.next=a;return c}var EP=typeof AbortController<"u"?AbortController:function(){var s=[],a=this.signal={aborted:!1,addEventListener:function(c,p){s.push(p)}};this.abort=function(){a.aborted=!0,s.forEach(function(c){return c()})}},bP=n.unstable_scheduleCallback,SP=n.unstable_NormalPriority,An={$$typeof:L,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Eg(){return{controller:new EP,data:new Map,refCount:0}}function Sc(s){s.refCount--,s.refCount===0&&bP(SP,function(){s.controller.abort()})}var Ic=null,bg=0,El=0,bl=null;function IP(s,a){if(Ic===null){var c=Ic=[];bg=0,El=Iy(),bl={status:"pending",value:void 0,then:function(p){c.push(p)}}}return bg++,a.then(ZT,ZT),a}function ZT(){if(--bg===0&&Ic!==null){bl!==null&&(bl.status="fulfilled");var s=Ic;Ic=null,El=0,bl=null;for(var a=0;a<s.length;a++)(0,s[a])()}}function AP(s,a){var c=[],p={status:"pending",value:null,reason:null,then:function(T){c.push(T)}};return s.then(function(){p.status="fulfilled",p.value=a;for(var T=0;T<c.length;T++)(0,c[T])(a)},function(T){for(p.status="rejected",p.reason=T,T=0;T<c.length;T++)(0,c[T])(void 0)}),p}var ew=te.S;te.S=function(s,a){typeof a=="object"&&a!==null&&typeof a.then=="function"&&IP(s,a),ew!==null&&ew(s,a)};var fa=Y(null);function Sg(){var s=fa.current;return s!==null?s:Gt.pooledCache}function uh(s,a){a===null?he(fa,fa.current):he(fa,a.pool)}function tw(){var s=Sg();return s===null?null:{parent:An._currentValue,pool:s}}var Ac=Error(i(460)),nw=Error(i(474)),ch=Error(i(542)),Ig={then:function(){}};function iw(s){return s=s.status,s==="fulfilled"||s==="rejected"}function dh(){}function rw(s,a,c){switch(c=s[c],c===void 0?s.push(a):c!==a&&(a.then(dh,dh),a=c),a.status){case"fulfilled":return a.value;case"rejected":throw s=a.reason,ow(s),s;default:if(typeof a.status=="string")a.then(dh,dh);else{if(s=Gt,s!==null&&100<s.shellSuspendCounter)throw Error(i(482));s=a,s.status="pending",s.then(function(p){if(a.status==="pending"){var T=a;T.status="fulfilled",T.value=p}},function(p){if(a.status==="pending"){var T=a;T.status="rejected",T.reason=p}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw s=a.reason,ow(s),s}throw Cc=a,Ac}}var Cc=null;function sw(){if(Cc===null)throw Error(i(459));var s=Cc;return Cc=null,s}function ow(s){if(s===Ac||s===ch)throw Error(i(483))}var zs=!1;function Ag(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Cg(s,a){s=s.updateQueue,a.updateQueue===s&&(a.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function js(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function Gs(s,a,c){var p=s.updateQueue;if(p===null)return null;if(p=p.shared,(kt&2)!==0){var T=p.pending;return T===null?a.next=a:(a.next=T.next,T.next=a),p.pending=a,a=ih(s),$T(s,null,c),a}return nh(s,p,a,c),ih(s)}function Rc(s,a,c){if(a=a.updateQueue,a!==null&&(a=a.shared,(c&4194048)!==0)){var p=a.lanes;p&=s.pendingLanes,c|=p,a.lanes=c,_n(s,c)}}function Rg(s,a){var c=s.updateQueue,p=s.alternate;if(p!==null&&(p=p.updateQueue,c===p)){var T=null,x=null;if(c=c.firstBaseUpdate,c!==null){do{var D={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};x===null?T=x=D:x=x.next=D,c=c.next}while(c!==null);x===null?T=x=a:x=x.next=a}else T=x=a;c={baseState:p.baseState,firstBaseUpdate:T,lastBaseUpdate:x,shared:p.shared,callbacks:p.callbacks},s.updateQueue=c;return}s=c.lastBaseUpdate,s===null?c.firstBaseUpdate=a:s.next=a,c.lastBaseUpdate=a}var Ng=!1;function Nc(){if(Ng){var s=bl;if(s!==null)throw s}}function Pc(s,a,c,p){Ng=!1;var T=s.updateQueue;zs=!1;var x=T.firstBaseUpdate,D=T.lastBaseUpdate,B=T.shared.pending;if(B!==null){T.shared.pending=null;var ee=B,fe=ee.next;ee.next=null,D===null?x=fe:D.next=fe,D=ee;var be=s.alternate;be!==null&&(be=be.updateQueue,B=be.lastBaseUpdate,B!==D&&(B===null?be.firstBaseUpdate=fe:B.next=fe,be.lastBaseUpdate=ee))}if(x!==null){var Ce=T.baseState;D=0,be=fe=ee=null,B=x;do{var pe=B.lane&-536870913,ge=pe!==B.lane;if(ge?(xt&pe)===pe:(p&pe)===pe){pe!==0&&pe===El&&(Ng=!0),be!==null&&(be=be.next={lane:0,tag:B.tag,payload:B.payload,callback:null,next:null});e:{var nt=s,et=B;pe=a;var Ft=c;switch(et.tag){case 1:if(nt=et.payload,typeof nt=="function"){Ce=nt.call(Ft,Ce,pe);break e}Ce=nt;break e;case 3:nt.flags=nt.flags&-65537|128;case 0:if(nt=et.payload,pe=typeof nt=="function"?nt.call(Ft,Ce,pe):nt,pe==null)break e;Ce=y({},Ce,pe);break e;case 2:zs=!0}}pe=B.callback,pe!==null&&(s.flags|=64,ge&&(s.flags|=8192),ge=T.callbacks,ge===null?T.callbacks=[pe]:ge.push(pe))}else ge={lane:pe,tag:B.tag,payload:B.payload,callback:B.callback,next:null},be===null?(fe=be=ge,ee=Ce):be=be.next=ge,D|=pe;if(B=B.next,B===null){if(B=T.shared.pending,B===null)break;ge=B,B=ge.next,ge.next=null,T.lastBaseUpdate=ge,T.shared.pending=null}}while(!0);be===null&&(ee=Ce),T.baseState=ee,T.firstBaseUpdate=fe,T.lastBaseUpdate=be,x===null&&(T.shared.lanes=0),Xs|=D,s.lanes=D,s.memoizedState=Ce}}function aw(s,a){if(typeof s!="function")throw Error(i(191,s));s.call(a)}function lw(s,a){var c=s.callbacks;if(c!==null)for(s.callbacks=null,s=0;s<c.length;s++)aw(c[s],a)}var Sl=Y(null),fh=Y(0);function uw(s,a){s=Ts,he(fh,s),he(Sl,a),Ts=s|a.baseLanes}function Pg(){he(fh,Ts),he(Sl,Sl.current)}function kg(){Ts=fh.current,Z(Sl),Z(fh)}var Hs=0,ct=null,Lt=null,Tn=null,hh=!1,Il=!1,ha=!1,mh=0,kc=0,Al=null,CP=0;function hn(){throw Error(i(321))}function Dg(s,a){if(a===null)return!1;for(var c=0;c<a.length&&c<s.length;c++)if(!Ci(s[c],a[c]))return!1;return!0}function Mg(s,a,c,p,T,x){return Hs=x,ct=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,te.H=s===null||s.memoizedState===null?$w:Ww,ha=!1,x=c(p,T),ha=!1,Il&&(x=dw(a,c,p,T)),cw(s),x}function cw(s){te.H=Th;var a=Lt!==null&&Lt.next!==null;if(Hs=0,Tn=Lt=ct=null,hh=!1,kc=0,Al=null,a)throw Error(i(300));s===null||Mn||(s=s.dependencies,s!==null&&ah(s)&&(Mn=!0))}function dw(s,a,c,p){ct=s;var T=0;do{if(Il&&(Al=null),kc=0,Il=!1,25<=T)throw Error(i(301));if(T+=1,Tn=Lt=null,s.updateQueue!=null){var x=s.updateQueue;x.lastEffect=null,x.events=null,x.stores=null,x.memoCache!=null&&(x.memoCache.index=0)}te.H=VP,x=a(c,p)}while(Il);return x}function RP(){var s=te.H,a=s.useState()[0];return a=typeof a.then=="function"?Dc(a):a,s=s.useState()[0],(Lt!==null?Lt.memoizedState:null)!==s&&(ct.flags|=1024),a}function Vg(){var s=mh!==0;return mh=0,s}function Ug(s,a,c){a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~c}function Lg(s){if(hh){for(s=s.memoizedState;s!==null;){var a=s.queue;a!==null&&(a.pending=null),s=s.next}hh=!1}Hs=0,Tn=Lt=ct=null,Il=!1,kc=mh=0,Al=null}function vi(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Tn===null?ct.memoizedState=Tn=s:Tn=Tn.next=s,Tn}function wn(){if(Lt===null){var s=ct.alternate;s=s!==null?s.memoizedState:null}else s=Lt.next;var a=Tn===null?ct.memoizedState:Tn.next;if(a!==null)Tn=a,Lt=s;else{if(s===null)throw ct.alternate===null?Error(i(467)):Error(i(310));Lt=s,s={memoizedState:Lt.memoizedState,baseState:Lt.baseState,baseQueue:Lt.baseQueue,queue:Lt.queue,next:null},Tn===null?ct.memoizedState=Tn=s:Tn=Tn.next=s}return Tn}function Og(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Dc(s){var a=kc;return kc+=1,Al===null&&(Al=[]),s=rw(Al,s,a),a=ct,(Tn===null?a.memoizedState:Tn.next)===null&&(a=a.alternate,te.H=a===null||a.memoizedState===null?$w:Ww),s}function ph(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return Dc(s);if(s.$$typeof===L)return Qn(s)}throw Error(i(438,String(s)))}function Fg(s){var a=null,c=ct.updateQueue;if(c!==null&&(a=c.memoCache),a==null){var p=ct.alternate;p!==null&&(p=p.updateQueue,p!==null&&(p=p.memoCache,p!=null&&(a={data:p.data.map(function(T){return T.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),c===null&&(c=Og(),ct.updateQueue=c),c.memoCache=a,c=a.data[a.index],c===void 0)for(c=a.data[a.index]=Array(s),p=0;p<s;p++)c[p]=j;return a.index++,c}function ms(s,a){return typeof a=="function"?a(s):a}function gh(s){var a=wn();return Bg(a,Lt,s)}function Bg(s,a,c){var p=s.queue;if(p===null)throw Error(i(311));p.lastRenderedReducer=c;var T=s.baseQueue,x=p.pending;if(x!==null){if(T!==null){var D=T.next;T.next=x.next,x.next=D}a.baseQueue=T=x,p.pending=null}if(x=s.baseState,T===null)s.memoizedState=x;else{a=T.next;var B=D=null,ee=null,fe=a,be=!1;do{var Ce=fe.lane&-536870913;if(Ce!==fe.lane?(xt&Ce)===Ce:(Hs&Ce)===Ce){var pe=fe.revertLane;if(pe===0)ee!==null&&(ee=ee.next={lane:0,revertLane:0,action:fe.action,hasEagerState:fe.hasEagerState,eagerState:fe.eagerState,next:null}),Ce===El&&(be=!0);else if((Hs&pe)===pe){fe=fe.next,pe===El&&(be=!0);continue}else Ce={lane:0,revertLane:fe.revertLane,action:fe.action,hasEagerState:fe.hasEagerState,eagerState:fe.eagerState,next:null},ee===null?(B=ee=Ce,D=x):ee=ee.next=Ce,ct.lanes|=pe,Xs|=pe;Ce=fe.action,ha&&c(x,Ce),x=fe.hasEagerState?fe.eagerState:c(x,Ce)}else pe={lane:Ce,revertLane:fe.revertLane,action:fe.action,hasEagerState:fe.hasEagerState,eagerState:fe.eagerState,next:null},ee===null?(B=ee=pe,D=x):ee=ee.next=pe,ct.lanes|=Ce,Xs|=Ce;fe=fe.next}while(fe!==null&&fe!==a);if(ee===null?D=x:ee.next=B,!Ci(x,s.memoizedState)&&(Mn=!0,be&&(c=bl,c!==null)))throw c;s.memoizedState=x,s.baseState=D,s.baseQueue=ee,p.lastRenderedState=x}return T===null&&(p.lanes=0),[s.memoizedState,p.dispatch]}function qg(s){var a=wn(),c=a.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=s;var p=c.dispatch,T=c.pending,x=a.memoizedState;if(T!==null){c.pending=null;var D=T=T.next;do x=s(x,D.action),D=D.next;while(D!==T);Ci(x,a.memoizedState)||(Mn=!0),a.memoizedState=x,a.baseQueue===null&&(a.baseState=x),c.lastRenderedState=x}return[x,p]}function fw(s,a,c){var p=ct,T=wn(),x=Ct;if(x){if(c===void 0)throw Error(i(407));c=c()}else c=a();var D=!Ci((Lt||T).memoizedState,c);D&&(T.memoizedState=c,Mn=!0),T=T.queue;var B=pw.bind(null,p,T,s);if(Mc(2048,8,B,[s]),T.getSnapshot!==a||D||Tn!==null&&Tn.memoizedState.tag&1){if(p.flags|=2048,Cl(9,yh(),mw.bind(null,p,T,c,a),null),Gt===null)throw Error(i(349));x||(Hs&124)!==0||hw(p,a,c)}return c}function hw(s,a,c){s.flags|=16384,s={getSnapshot:a,value:c},a=ct.updateQueue,a===null?(a=Og(),ct.updateQueue=a,a.stores=[s]):(c=a.stores,c===null?a.stores=[s]:c.push(s))}function mw(s,a,c,p){a.value=c,a.getSnapshot=p,gw(a)&&yw(s)}function pw(s,a,c){return c(function(){gw(a)&&yw(s)})}function gw(s){var a=s.getSnapshot;s=s.value;try{var c=a();return!Ci(s,c)}catch{return!0}}function yw(s){var a=vl(s,2);a!==null&&Mi(a,s,2)}function zg(s){var a=vi();if(typeof s=="function"){var c=s;if(s=c(),ha){We(!0);try{c()}finally{We(!1)}}}return a.memoizedState=a.baseState=s,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ms,lastRenderedState:s},a}function _w(s,a,c,p){return s.baseState=c,Bg(s,Lt,typeof p=="function"?p:ms)}function NP(s,a,c,p,T){if(vh(s))throw Error(i(485));if(s=a.action,s!==null){var x={payload:T,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(D){x.listeners.push(D)}};te.T!==null?c(!0):x.isTransition=!1,p(x),c=a.pending,c===null?(x.next=a.pending=x,vw(a,x)):(x.next=c.next,a.pending=c.next=x)}}function vw(s,a){var c=a.action,p=a.payload,T=s.state;if(a.isTransition){var x=te.T,D={};te.T=D;try{var B=c(T,p),ee=te.S;ee!==null&&ee(D,B),Tw(s,a,B)}catch(fe){jg(s,a,fe)}finally{te.T=x}}else try{x=c(T,p),Tw(s,a,x)}catch(fe){jg(s,a,fe)}}function Tw(s,a,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(p){ww(s,a,p)},function(p){return jg(s,a,p)}):ww(s,a,c)}function ww(s,a,c){a.status="fulfilled",a.value=c,xw(a),s.state=c,a=s.pending,a!==null&&(c=a.next,c===a?s.pending=null:(c=c.next,a.next=c,vw(s,c)))}function jg(s,a,c){var p=s.pending;if(s.pending=null,p!==null){p=p.next;do a.status="rejected",a.reason=c,xw(a),a=a.next;while(a!==p)}s.action=null}function xw(s){s=s.listeners;for(var a=0;a<s.length;a++)(0,s[a])()}function Ew(s,a){return a}function bw(s,a){if(Ct){var c=Gt.formState;if(c!==null){e:{var p=ct;if(Ct){if(on){t:{for(var T=on,x=Cr;T.nodeType!==8;){if(!x){T=null;break t}if(T=ur(T.nextSibling),T===null){T=null;break t}}x=T.data,T=x==="F!"||x==="F"?T:null}if(T){on=ur(T.nextSibling),p=T.data==="F!";break e}}ua(p)}p=!1}p&&(a=c[0])}}return c=vi(),c.memoizedState=c.baseState=a,p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ew,lastRenderedState:a},c.queue=p,c=jw.bind(null,ct,p),p.dispatch=c,p=zg(!1),x=Kg.bind(null,ct,!1,p.queue),p=vi(),T={state:a,dispatch:null,action:s,pending:null},p.queue=T,c=NP.bind(null,ct,T,x,c),T.dispatch=c,p.memoizedState=s,[a,c,!1]}function Sw(s){var a=wn();return Iw(a,Lt,s)}function Iw(s,a,c){if(a=Bg(s,a,Ew)[0],s=gh(ms)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var p=Dc(a)}catch(D){throw D===Ac?ch:D}else p=a;a=wn();var T=a.queue,x=T.dispatch;return c!==a.memoizedState&&(ct.flags|=2048,Cl(9,yh(),PP.bind(null,T,c),null)),[p,x,s]}function PP(s,a){s.action=a}function Aw(s){var a=wn(),c=Lt;if(c!==null)return Iw(a,c,s);wn(),a=a.memoizedState,c=wn();var p=c.queue.dispatch;return c.memoizedState=s,[a,p,!1]}function Cl(s,a,c,p){return s={tag:s,create:c,deps:p,inst:a,next:null},a=ct.updateQueue,a===null&&(a=Og(),ct.updateQueue=a),c=a.lastEffect,c===null?a.lastEffect=s.next=s:(p=c.next,c.next=s,s.next=p,a.lastEffect=s),s}function yh(){return{destroy:void 0,resource:void 0}}function Cw(){return wn().memoizedState}function _h(s,a,c,p){var T=vi();p=p===void 0?null:p,ct.flags|=s,T.memoizedState=Cl(1|a,yh(),c,p)}function Mc(s,a,c,p){var T=wn();p=p===void 0?null:p;var x=T.memoizedState.inst;Lt!==null&&p!==null&&Dg(p,Lt.memoizedState.deps)?T.memoizedState=Cl(a,x,c,p):(ct.flags|=s,T.memoizedState=Cl(1|a,x,c,p))}function Rw(s,a){_h(8390656,8,s,a)}function Nw(s,a){Mc(2048,8,s,a)}function Pw(s,a){return Mc(4,2,s,a)}function kw(s,a){return Mc(4,4,s,a)}function Dw(s,a){if(typeof a=="function"){s=s();var c=a(s);return function(){typeof c=="function"?c():a(null)}}if(a!=null)return s=s(),a.current=s,function(){a.current=null}}function Mw(s,a,c){c=c!=null?c.concat([s]):null,Mc(4,4,Dw.bind(null,a,s),c)}function Gg(){}function Vw(s,a){var c=wn();a=a===void 0?null:a;var p=c.memoizedState;return a!==null&&Dg(a,p[1])?p[0]:(c.memoizedState=[s,a],s)}function Uw(s,a){var c=wn();a=a===void 0?null:a;var p=c.memoizedState;if(a!==null&&Dg(a,p[1]))return p[0];if(p=s(),ha){We(!0);try{s()}finally{We(!1)}}return c.memoizedState=[p,a],p}function Hg(s,a,c){return c===void 0||(Hs&1073741824)!==0?s.memoizedState=a:(s.memoizedState=c,s=Fx(),ct.lanes|=s,Xs|=s,c)}function Lw(s,a,c,p){return Ci(c,a)?c:Sl.current!==null?(s=Hg(s,c,p),Ci(s,a)||(Mn=!0),s):(Hs&42)===0?(Mn=!0,s.memoizedState=c):(s=Fx(),ct.lanes|=s,Xs|=s,a)}function Ow(s,a,c,p,T){var x=X.p;X.p=x!==0&&8>x?x:8;var D=te.T,B={};te.T=B,Kg(s,!1,a,c);try{var ee=T(),fe=te.S;if(fe!==null&&fe(B,ee),ee!==null&&typeof ee=="object"&&typeof ee.then=="function"){var be=AP(ee,p);Vc(s,a,be,Di(s))}else Vc(s,a,p,Di(s))}catch(Ce){Vc(s,a,{then:function(){},status:"rejected",reason:Ce},Di())}finally{X.p=x,te.T=D}}function kP(){}function $g(s,a,c,p){if(s.tag!==5)throw Error(i(476));var T=Fw(s).queue;Ow(s,T,a,_e,c===null?kP:function(){return Bw(s),c(p)})}function Fw(s){var a=s.memoizedState;if(a!==null)return a;a={memoizedState:_e,baseState:_e,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ms,lastRenderedState:_e},next:null};var c={};return a.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ms,lastRenderedState:c},next:null},s.memoizedState=a,s=s.alternate,s!==null&&(s.memoizedState=a),a}function Bw(s){var a=Fw(s).next.queue;Vc(s,a,{},Di())}function Wg(){return Qn(Zc)}function qw(){return wn().memoizedState}function zw(){return wn().memoizedState}function DP(s){for(var a=s.return;a!==null;){switch(a.tag){case 24:case 3:var c=Di();s=js(c);var p=Gs(a,s,c);p!==null&&(Mi(p,a,c),Rc(p,a,c)),a={cache:Eg()},s.payload=a;return}a=a.return}}function MP(s,a,c){var p=Di();c={lane:p,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null},vh(s)?Gw(a,c):(c=hg(s,a,c,p),c!==null&&(Mi(c,s,p),Hw(c,a,p)))}function jw(s,a,c){var p=Di();Vc(s,a,c,p)}function Vc(s,a,c,p){var T={lane:p,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null};if(vh(s))Gw(a,T);else{var x=s.alternate;if(s.lanes===0&&(x===null||x.lanes===0)&&(x=a.lastRenderedReducer,x!==null))try{var D=a.lastRenderedState,B=x(D,c);if(T.hasEagerState=!0,T.eagerState=B,Ci(B,D))return nh(s,a,T,0),Gt===null&&th(),!1}catch{}finally{}if(c=hg(s,a,T,p),c!==null)return Mi(c,s,p),Hw(c,a,p),!0}return!1}function Kg(s,a,c,p){if(p={lane:2,revertLane:Iy(),action:p,hasEagerState:!1,eagerState:null,next:null},vh(s)){if(a)throw Error(i(479))}else a=hg(s,c,p,2),a!==null&&Mi(a,s,2)}function vh(s){var a=s.alternate;return s===ct||a!==null&&a===ct}function Gw(s,a){Il=hh=!0;var c=s.pending;c===null?a.next=a:(a.next=c.next,c.next=a),s.pending=a}function Hw(s,a,c){if((c&4194048)!==0){var p=a.lanes;p&=s.pendingLanes,c|=p,a.lanes=c,_n(s,c)}}var Th={readContext:Qn,use:ph,useCallback:hn,useContext:hn,useEffect:hn,useImperativeHandle:hn,useLayoutEffect:hn,useInsertionEffect:hn,useMemo:hn,useReducer:hn,useRef:hn,useState:hn,useDebugValue:hn,useDeferredValue:hn,useTransition:hn,useSyncExternalStore:hn,useId:hn,useHostTransitionStatus:hn,useFormState:hn,useActionState:hn,useOptimistic:hn,useMemoCache:hn,useCacheRefresh:hn},$w={readContext:Qn,use:ph,useCallback:function(s,a){return vi().memoizedState=[s,a===void 0?null:a],s},useContext:Qn,useEffect:Rw,useImperativeHandle:function(s,a,c){c=c!=null?c.concat([s]):null,_h(4194308,4,Dw.bind(null,a,s),c)},useLayoutEffect:function(s,a){return _h(4194308,4,s,a)},useInsertionEffect:function(s,a){_h(4,2,s,a)},useMemo:function(s,a){var c=vi();a=a===void 0?null:a;var p=s();if(ha){We(!0);try{s()}finally{We(!1)}}return c.memoizedState=[p,a],p},useReducer:function(s,a,c){var p=vi();if(c!==void 0){var T=c(a);if(ha){We(!0);try{c(a)}finally{We(!1)}}}else T=a;return p.memoizedState=p.baseState=T,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:T},p.queue=s,s=s.dispatch=MP.bind(null,ct,s),[p.memoizedState,s]},useRef:function(s){var a=vi();return s={current:s},a.memoizedState=s},useState:function(s){s=zg(s);var a=s.queue,c=jw.bind(null,ct,a);return a.dispatch=c,[s.memoizedState,c]},useDebugValue:Gg,useDeferredValue:function(s,a){var c=vi();return Hg(c,s,a)},useTransition:function(){var s=zg(!1);return s=Ow.bind(null,ct,s.queue,!0,!1),vi().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,a,c){var p=ct,T=vi();if(Ct){if(c===void 0)throw Error(i(407));c=c()}else{if(c=a(),Gt===null)throw Error(i(349));(xt&124)!==0||hw(p,a,c)}T.memoizedState=c;var x={value:c,getSnapshot:a};return T.queue=x,Rw(pw.bind(null,p,x,s),[s]),p.flags|=2048,Cl(9,yh(),mw.bind(null,p,x,c,a),null),c},useId:function(){var s=vi(),a=Gt.identifierPrefix;if(Ct){var c=ds,p=cs;c=(p&~(1<<32-_t(p)-1)).toString(32)+c,a=""+a+"R"+c,c=mh++,0<c&&(a+="H"+c.toString(32)),a+=""}else c=CP++,a=""+a+"r"+c.toString(32)+"";return s.memoizedState=a},useHostTransitionStatus:Wg,useFormState:bw,useActionState:bw,useOptimistic:function(s){var a=vi();a.memoizedState=a.baseState=s;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=c,a=Kg.bind(null,ct,!0,c),c.dispatch=a,[s,a]},useMemoCache:Fg,useCacheRefresh:function(){return vi().memoizedState=DP.bind(null,ct)}},Ww={readContext:Qn,use:ph,useCallback:Vw,useContext:Qn,useEffect:Nw,useImperativeHandle:Mw,useInsertionEffect:Pw,useLayoutEffect:kw,useMemo:Uw,useReducer:gh,useRef:Cw,useState:function(){return gh(ms)},useDebugValue:Gg,useDeferredValue:function(s,a){var c=wn();return Lw(c,Lt.memoizedState,s,a)},useTransition:function(){var s=gh(ms)[0],a=wn().memoizedState;return[typeof s=="boolean"?s:Dc(s),a]},useSyncExternalStore:fw,useId:qw,useHostTransitionStatus:Wg,useFormState:Sw,useActionState:Sw,useOptimistic:function(s,a){var c=wn();return _w(c,Lt,s,a)},useMemoCache:Fg,useCacheRefresh:zw},VP={readContext:Qn,use:ph,useCallback:Vw,useContext:Qn,useEffect:Nw,useImperativeHandle:Mw,useInsertionEffect:Pw,useLayoutEffect:kw,useMemo:Uw,useReducer:qg,useRef:Cw,useState:function(){return qg(ms)},useDebugValue:Gg,useDeferredValue:function(s,a){var c=wn();return Lt===null?Hg(c,s,a):Lw(c,Lt.memoizedState,s,a)},useTransition:function(){var s=qg(ms)[0],a=wn().memoizedState;return[typeof s=="boolean"?s:Dc(s),a]},useSyncExternalStore:fw,useId:qw,useHostTransitionStatus:Wg,useFormState:Aw,useActionState:Aw,useOptimistic:function(s,a){var c=wn();return Lt!==null?_w(c,Lt,s,a):(c.baseState=s,[s,c.queue.dispatch])},useMemoCache:Fg,useCacheRefresh:zw},Rl=null,Uc=0;function wh(s){var a=Uc;return Uc+=1,Rl===null&&(Rl=[]),rw(Rl,s,a)}function Lc(s,a){a=a.props.ref,s.ref=a!==void 0?a:null}function xh(s,a){throw a.$$typeof===v?Error(i(525)):(s=Object.prototype.toString.call(a),Error(i(31,s==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":s)))}function Kw(s){var a=s._init;return a(s._payload)}function Jw(s){function a(oe,ie){if(s){var de=oe.deletions;de===null?(oe.deletions=[ie],oe.flags|=16):de.push(ie)}}function c(oe,ie){if(!s)return null;for(;ie!==null;)a(oe,ie),ie=ie.sibling;return null}function p(oe){for(var ie=new Map;oe!==null;)oe.key!==null?ie.set(oe.key,oe):ie.set(oe.index,oe),oe=oe.sibling;return ie}function T(oe,ie){return oe=us(oe,ie),oe.index=0,oe.sibling=null,oe}function x(oe,ie,de){return oe.index=de,s?(de=oe.alternate,de!==null?(de=de.index,de<ie?(oe.flags|=67108866,ie):de):(oe.flags|=67108866,ie)):(oe.flags|=1048576,ie)}function D(oe){return s&&oe.alternate===null&&(oe.flags|=67108866),oe}function B(oe,ie,de,Ie){return ie===null||ie.tag!==6?(ie=pg(de,oe.mode,Ie),ie.return=oe,ie):(ie=T(ie,de),ie.return=oe,ie)}function ee(oe,ie,de,Ie){var He=de.type;return He===S?be(oe,ie,de.props.children,Ie,de.key):ie!==null&&(ie.elementType===He||typeof He=="object"&&He!==null&&He.$$typeof===V&&Kw(He)===ie.type)?(ie=T(ie,de.props),Lc(ie,de),ie.return=oe,ie):(ie=rh(de.type,de.key,de.props,null,oe.mode,Ie),Lc(ie,de),ie.return=oe,ie)}function fe(oe,ie,de,Ie){return ie===null||ie.tag!==4||ie.stateNode.containerInfo!==de.containerInfo||ie.stateNode.implementation!==de.implementation?(ie=gg(de,oe.mode,Ie),ie.return=oe,ie):(ie=T(ie,de.children||[]),ie.return=oe,ie)}function be(oe,ie,de,Ie,He){return ie===null||ie.tag!==7?(ie=sa(de,oe.mode,Ie,He),ie.return=oe,ie):(ie=T(ie,de),ie.return=oe,ie)}function Ce(oe,ie,de){if(typeof ie=="string"&&ie!==""||typeof ie=="number"||typeof ie=="bigint")return ie=pg(""+ie,oe.mode,de),ie.return=oe,ie;if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case w:return de=rh(ie.type,ie.key,ie.props,null,oe.mode,de),Lc(de,ie),de.return=oe,de;case E:return ie=gg(ie,oe.mode,de),ie.return=oe,ie;case V:var Ie=ie._init;return ie=Ie(ie._payload),Ce(oe,ie,de)}if(ne(ie)||M(ie))return ie=sa(ie,oe.mode,de,null),ie.return=oe,ie;if(typeof ie.then=="function")return Ce(oe,wh(ie),de);if(ie.$$typeof===L)return Ce(oe,lh(oe,ie),de);xh(oe,ie)}return null}function pe(oe,ie,de,Ie){var He=ie!==null?ie.key:null;if(typeof de=="string"&&de!==""||typeof de=="number"||typeof de=="bigint")return He!==null?null:B(oe,ie,""+de,Ie);if(typeof de=="object"&&de!==null){switch(de.$$typeof){case w:return de.key===He?ee(oe,ie,de,Ie):null;case E:return de.key===He?fe(oe,ie,de,Ie):null;case V:return He=de._init,de=He(de._payload),pe(oe,ie,de,Ie)}if(ne(de)||M(de))return He!==null?null:be(oe,ie,de,Ie,null);if(typeof de.then=="function")return pe(oe,ie,wh(de),Ie);if(de.$$typeof===L)return pe(oe,ie,lh(oe,de),Ie);xh(oe,de)}return null}function ge(oe,ie,de,Ie,He){if(typeof Ie=="string"&&Ie!==""||typeof Ie=="number"||typeof Ie=="bigint")return oe=oe.get(de)||null,B(ie,oe,""+Ie,He);if(typeof Ie=="object"&&Ie!==null){switch(Ie.$$typeof){case w:return oe=oe.get(Ie.key===null?de:Ie.key)||null,ee(ie,oe,Ie,He);case E:return oe=oe.get(Ie.key===null?de:Ie.key)||null,fe(ie,oe,Ie,He);case V:var dt=Ie._init;return Ie=dt(Ie._payload),ge(oe,ie,de,Ie,He)}if(ne(Ie)||M(Ie))return oe=oe.get(de)||null,be(ie,oe,Ie,He,null);if(typeof Ie.then=="function")return ge(oe,ie,de,wh(Ie),He);if(Ie.$$typeof===L)return ge(oe,ie,de,lh(ie,Ie),He);xh(ie,Ie)}return null}function nt(oe,ie,de,Ie){for(var He=null,dt=null,Ye=ie,tt=ie=0,Un=null;Ye!==null&&tt<de.length;tt++){Ye.index>tt?(Un=Ye,Ye=null):Un=Ye.sibling;var bt=pe(oe,Ye,de[tt],Ie);if(bt===null){Ye===null&&(Ye=Un);break}s&&Ye&&bt.alternate===null&&a(oe,Ye),ie=x(bt,ie,tt),dt===null?He=bt:dt.sibling=bt,dt=bt,Ye=Un}if(tt===de.length)return c(oe,Ye),Ct&&aa(oe,tt),He;if(Ye===null){for(;tt<de.length;tt++)Ye=Ce(oe,de[tt],Ie),Ye!==null&&(ie=x(Ye,ie,tt),dt===null?He=Ye:dt.sibling=Ye,dt=Ye);return Ct&&aa(oe,tt),He}for(Ye=p(Ye);tt<de.length;tt++)Un=ge(Ye,oe,tt,de[tt],Ie),Un!==null&&(s&&Un.alternate!==null&&Ye.delete(Un.key===null?tt:Un.key),ie=x(Un,ie,tt),dt===null?He=Un:dt.sibling=Un,dt=Un);return s&&Ye.forEach(function(ao){return a(oe,ao)}),Ct&&aa(oe,tt),He}function et(oe,ie,de,Ie){if(de==null)throw Error(i(151));for(var He=null,dt=null,Ye=ie,tt=ie=0,Un=null,bt=de.next();Ye!==null&&!bt.done;tt++,bt=de.next()){Ye.index>tt?(Un=Ye,Ye=null):Un=Ye.sibling;var ao=pe(oe,Ye,bt.value,Ie);if(ao===null){Ye===null&&(Ye=Un);break}s&&Ye&&ao.alternate===null&&a(oe,Ye),ie=x(ao,ie,tt),dt===null?He=ao:dt.sibling=ao,dt=ao,Ye=Un}if(bt.done)return c(oe,Ye),Ct&&aa(oe,tt),He;if(Ye===null){for(;!bt.done;tt++,bt=de.next())bt=Ce(oe,bt.value,Ie),bt!==null&&(ie=x(bt,ie,tt),dt===null?He=bt:dt.sibling=bt,dt=bt);return Ct&&aa(oe,tt),He}for(Ye=p(Ye);!bt.done;tt++,bt=de.next())bt=ge(Ye,oe,tt,bt.value,Ie),bt!==null&&(s&&bt.alternate!==null&&Ye.delete(bt.key===null?tt:bt.key),ie=x(bt,ie,tt),dt===null?He=bt:dt.sibling=bt,dt=bt);return s&&Ye.forEach(function(Uk){return a(oe,Uk)}),Ct&&aa(oe,tt),He}function Ft(oe,ie,de,Ie){if(typeof de=="object"&&de!==null&&de.type===S&&de.key===null&&(de=de.props.children),typeof de=="object"&&de!==null){switch(de.$$typeof){case w:e:{for(var He=de.key;ie!==null;){if(ie.key===He){if(He=de.type,He===S){if(ie.tag===7){c(oe,ie.sibling),Ie=T(ie,de.props.children),Ie.return=oe,oe=Ie;break e}}else if(ie.elementType===He||typeof He=="object"&&He!==null&&He.$$typeof===V&&Kw(He)===ie.type){c(oe,ie.sibling),Ie=T(ie,de.props),Lc(Ie,de),Ie.return=oe,oe=Ie;break e}c(oe,ie);break}else a(oe,ie);ie=ie.sibling}de.type===S?(Ie=sa(de.props.children,oe.mode,Ie,de.key),Ie.return=oe,oe=Ie):(Ie=rh(de.type,de.key,de.props,null,oe.mode,Ie),Lc(Ie,de),Ie.return=oe,oe=Ie)}return D(oe);case E:e:{for(He=de.key;ie!==null;){if(ie.key===He)if(ie.tag===4&&ie.stateNode.containerInfo===de.containerInfo&&ie.stateNode.implementation===de.implementation){c(oe,ie.sibling),Ie=T(ie,de.children||[]),Ie.return=oe,oe=Ie;break e}else{c(oe,ie);break}else a(oe,ie);ie=ie.sibling}Ie=gg(de,oe.mode,Ie),Ie.return=oe,oe=Ie}return D(oe);case V:return He=de._init,de=He(de._payload),Ft(oe,ie,de,Ie)}if(ne(de))return nt(oe,ie,de,Ie);if(M(de)){if(He=M(de),typeof He!="function")throw Error(i(150));return de=He.call(de),et(oe,ie,de,Ie)}if(typeof de.then=="function")return Ft(oe,ie,wh(de),Ie);if(de.$$typeof===L)return Ft(oe,ie,lh(oe,de),Ie);xh(oe,de)}return typeof de=="string"&&de!==""||typeof de=="number"||typeof de=="bigint"?(de=""+de,ie!==null&&ie.tag===6?(c(oe,ie.sibling),Ie=T(ie,de),Ie.return=oe,oe=Ie):(c(oe,ie),Ie=pg(de,oe.mode,Ie),Ie.return=oe,oe=Ie),D(oe)):c(oe,ie)}return function(oe,ie,de,Ie){try{Uc=0;var He=Ft(oe,ie,de,Ie);return Rl=null,He}catch(Ye){if(Ye===Ac||Ye===ch)throw Ye;var dt=Ri(29,Ye,null,oe.mode);return dt.lanes=Ie,dt.return=oe,dt}finally{}}}var Nl=Jw(!0),Yw=Jw(!1),Ki=Y(null),Rr=null;function $s(s){var a=s.alternate;he(Cn,Cn.current&1),he(Ki,s),Rr===null&&(a===null||Sl.current!==null||a.memoizedState!==null)&&(Rr=s)}function Qw(s){if(s.tag===22){if(he(Cn,Cn.current),he(Ki,s),Rr===null){var a=s.alternate;a!==null&&a.memoizedState!==null&&(Rr=s)}}else Ws()}function Ws(){he(Cn,Cn.current),he(Ki,Ki.current)}function ps(s){Z(Ki),Rr===s&&(Rr=null),Z(Cn)}var Cn=Y(0);function Eh(s){for(var a=s;a!==null;){if(a.tag===13){var c=a.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||Oy(c)))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}function Jg(s,a,c,p){a=s.memoizedState,c=c(p,a),c=c==null?a:y({},a,c),s.memoizedState=c,s.lanes===0&&(s.updateQueue.baseState=c)}var Yg={enqueueSetState:function(s,a,c){s=s._reactInternals;var p=Di(),T=js(p);T.payload=a,c!=null&&(T.callback=c),a=Gs(s,T,p),a!==null&&(Mi(a,s,p),Rc(a,s,p))},enqueueReplaceState:function(s,a,c){s=s._reactInternals;var p=Di(),T=js(p);T.tag=1,T.payload=a,c!=null&&(T.callback=c),a=Gs(s,T,p),a!==null&&(Mi(a,s,p),Rc(a,s,p))},enqueueForceUpdate:function(s,a){s=s._reactInternals;var c=Di(),p=js(c);p.tag=2,a!=null&&(p.callback=a),a=Gs(s,p,c),a!==null&&(Mi(a,s,c),Rc(a,s,c))}};function Xw(s,a,c,p,T,x,D){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(p,x,D):a.prototype&&a.prototype.isPureReactComponent?!vc(c,p)||!vc(T,x):!0}function Zw(s,a,c,p){s=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(c,p),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(c,p),a.state!==s&&Yg.enqueueReplaceState(a,a.state,null)}function ma(s,a){var c=a;if("ref"in a){c={};for(var p in a)p!=="ref"&&(c[p]=a[p])}if(s=s.defaultProps){c===a&&(c=y({},c));for(var T in s)c[T]===void 0&&(c[T]=s[T])}return c}var bh=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)};function ex(s){bh(s)}function tx(s){console.error(s)}function nx(s){bh(s)}function Sh(s,a){try{var c=s.onUncaughtError;c(a.value,{componentStack:a.stack})}catch(p){setTimeout(function(){throw p})}}function ix(s,a,c){try{var p=s.onCaughtError;p(c.value,{componentStack:c.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(T){setTimeout(function(){throw T})}}function Qg(s,a,c){return c=js(c),c.tag=3,c.payload={element:null},c.callback=function(){Sh(s,a)},c}function rx(s){return s=js(s),s.tag=3,s}function sx(s,a,c,p){var T=c.type.getDerivedStateFromError;if(typeof T=="function"){var x=p.value;s.payload=function(){return T(x)},s.callback=function(){ix(a,c,p)}}var D=c.stateNode;D!==null&&typeof D.componentDidCatch=="function"&&(s.callback=function(){ix(a,c,p),typeof T!="function"&&(Zs===null?Zs=new Set([this]):Zs.add(this));var B=p.stack;this.componentDidCatch(p.value,{componentStack:B!==null?B:""})})}function UP(s,a,c,p,T){if(c.flags|=32768,p!==null&&typeof p=="object"&&typeof p.then=="function"){if(a=c.alternate,a!==null&&bc(a,c,T,!0),c=Ki.current,c!==null){switch(c.tag){case 13:return Rr===null?wy():c.alternate===null&&an===0&&(an=3),c.flags&=-257,c.flags|=65536,c.lanes=T,p===Ig?c.flags|=16384:(a=c.updateQueue,a===null?c.updateQueue=new Set([p]):a.add(p),Ey(s,p,T)),!1;case 22:return c.flags|=65536,p===Ig?c.flags|=16384:(a=c.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([p])},c.updateQueue=a):(c=a.retryQueue,c===null?a.retryQueue=new Set([p]):c.add(p)),Ey(s,p,T)),!1}throw Error(i(435,c.tag))}return Ey(s,p,T),wy(),!1}if(Ct)return a=Ki.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=T,p!==vg&&(s=Error(i(422),{cause:p}),Ec(Gi(s,c)))):(p!==vg&&(a=Error(i(423),{cause:p}),Ec(Gi(a,c))),s=s.current.alternate,s.flags|=65536,T&=-T,s.lanes|=T,p=Gi(p,c),T=Qg(s.stateNode,p,T),Rg(s,T),an!==4&&(an=2)),!1;var x=Error(i(520),{cause:p});if(x=Gi(x,c),Gc===null?Gc=[x]:Gc.push(x),an!==4&&(an=2),a===null)return!0;p=Gi(p,c),c=a;do{switch(c.tag){case 3:return c.flags|=65536,s=T&-T,c.lanes|=s,s=Qg(c.stateNode,p,s),Rg(c,s),!1;case 1:if(a=c.type,x=c.stateNode,(c.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(Zs===null||!Zs.has(x))))return c.flags|=65536,T&=-T,c.lanes|=T,T=rx(T),sx(T,s,c,p),Rg(c,T),!1}c=c.return}while(c!==null);return!1}var ox=Error(i(461)),Mn=!1;function jn(s,a,c,p){a.child=s===null?Yw(a,null,c,p):Nl(a,s.child,c,p)}function ax(s,a,c,p,T){c=c.render;var x=a.ref;if("ref"in p){var D={};for(var B in p)B!=="ref"&&(D[B]=p[B])}else D=p;return da(a),p=Mg(s,a,c,D,x,T),B=Vg(),s!==null&&!Mn?(Ug(s,a,T),gs(s,a,T)):(Ct&&B&&yg(a),a.flags|=1,jn(s,a,p,T),a.child)}function lx(s,a,c,p,T){if(s===null){var x=c.type;return typeof x=="function"&&!mg(x)&&x.defaultProps===void 0&&c.compare===null?(a.tag=15,a.type=x,ux(s,a,x,p,T)):(s=rh(c.type,null,p,a,a.mode,T),s.ref=a.ref,s.return=a,a.child=s)}if(x=s.child,!sy(s,T)){var D=x.memoizedProps;if(c=c.compare,c=c!==null?c:vc,c(D,p)&&s.ref===a.ref)return gs(s,a,T)}return a.flags|=1,s=us(x,p),s.ref=a.ref,s.return=a,a.child=s}function ux(s,a,c,p,T){if(s!==null){var x=s.memoizedProps;if(vc(x,p)&&s.ref===a.ref)if(Mn=!1,a.pendingProps=p=x,sy(s,T))(s.flags&131072)!==0&&(Mn=!0);else return a.lanes=s.lanes,gs(s,a,T)}return Xg(s,a,c,p,T)}function cx(s,a,c){var p=a.pendingProps,T=p.children,x=s!==null?s.memoizedState:null;if(p.mode==="hidden"){if((a.flags&128)!==0){if(p=x!==null?x.baseLanes|c:c,s!==null){for(T=a.child=s.child,x=0;T!==null;)x=x|T.lanes|T.childLanes,T=T.sibling;a.childLanes=x&~p}else a.childLanes=0,a.child=null;return dx(s,a,p,c)}if((c&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},s!==null&&uh(a,x!==null?x.cachePool:null),x!==null?uw(a,x):Pg(),Qw(a);else return a.lanes=a.childLanes=536870912,dx(s,a,x!==null?x.baseLanes|c:c,c)}else x!==null?(uh(a,x.cachePool),uw(a,x),Ws(),a.memoizedState=null):(s!==null&&uh(a,null),Pg(),Ws());return jn(s,a,T,c),a.child}function dx(s,a,c,p){var T=Sg();return T=T===null?null:{parent:An._currentValue,pool:T},a.memoizedState={baseLanes:c,cachePool:T},s!==null&&uh(a,null),Pg(),Qw(a),s!==null&&bc(s,a,p,!0),null}function Ih(s,a){var c=a.ref;if(c===null)s!==null&&s.ref!==null&&(a.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(i(284));(s===null||s.ref!==c)&&(a.flags|=4194816)}}function Xg(s,a,c,p,T){return da(a),c=Mg(s,a,c,p,void 0,T),p=Vg(),s!==null&&!Mn?(Ug(s,a,T),gs(s,a,T)):(Ct&&p&&yg(a),a.flags|=1,jn(s,a,c,T),a.child)}function fx(s,a,c,p,T,x){return da(a),a.updateQueue=null,c=dw(a,p,c,T),cw(s),p=Vg(),s!==null&&!Mn?(Ug(s,a,x),gs(s,a,x)):(Ct&&p&&yg(a),a.flags|=1,jn(s,a,c,x),a.child)}function hx(s,a,c,p,T){if(da(a),a.stateNode===null){var x=Tl,D=c.contextType;typeof D=="object"&&D!==null&&(x=Qn(D)),x=new c(p,x),a.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,x.updater=Yg,a.stateNode=x,x._reactInternals=a,x=a.stateNode,x.props=p,x.state=a.memoizedState,x.refs={},Ag(a),D=c.contextType,x.context=typeof D=="object"&&D!==null?Qn(D):Tl,x.state=a.memoizedState,D=c.getDerivedStateFromProps,typeof D=="function"&&(Jg(a,c,D,p),x.state=a.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof x.getSnapshotBeforeUpdate=="function"||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(D=x.state,typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount(),D!==x.state&&Yg.enqueueReplaceState(x,x.state,null),Pc(a,p,x,T),Nc(),x.state=a.memoizedState),typeof x.componentDidMount=="function"&&(a.flags|=4194308),p=!0}else if(s===null){x=a.stateNode;var B=a.memoizedProps,ee=ma(c,B);x.props=ee;var fe=x.context,be=c.contextType;D=Tl,typeof be=="object"&&be!==null&&(D=Qn(be));var Ce=c.getDerivedStateFromProps;be=typeof Ce=="function"||typeof x.getSnapshotBeforeUpdate=="function",B=a.pendingProps!==B,be||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(B||fe!==D)&&Zw(a,x,p,D),zs=!1;var pe=a.memoizedState;x.state=pe,Pc(a,p,x,T),Nc(),fe=a.memoizedState,B||pe!==fe||zs?(typeof Ce=="function"&&(Jg(a,c,Ce,p),fe=a.memoizedState),(ee=zs||Xw(a,c,ee,p,pe,fe,D))?(be||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount()),typeof x.componentDidMount=="function"&&(a.flags|=4194308)):(typeof x.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=p,a.memoizedState=fe),x.props=p,x.state=fe,x.context=D,p=ee):(typeof x.componentDidMount=="function"&&(a.flags|=4194308),p=!1)}else{x=a.stateNode,Cg(s,a),D=a.memoizedProps,be=ma(c,D),x.props=be,Ce=a.pendingProps,pe=x.context,fe=c.contextType,ee=Tl,typeof fe=="object"&&fe!==null&&(ee=Qn(fe)),B=c.getDerivedStateFromProps,(fe=typeof B=="function"||typeof x.getSnapshotBeforeUpdate=="function")||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(D!==Ce||pe!==ee)&&Zw(a,x,p,ee),zs=!1,pe=a.memoizedState,x.state=pe,Pc(a,p,x,T),Nc();var ge=a.memoizedState;D!==Ce||pe!==ge||zs||s!==null&&s.dependencies!==null&&ah(s.dependencies)?(typeof B=="function"&&(Jg(a,c,B,p),ge=a.memoizedState),(be=zs||Xw(a,c,be,p,pe,ge,ee)||s!==null&&s.dependencies!==null&&ah(s.dependencies))?(fe||typeof x.UNSAFE_componentWillUpdate!="function"&&typeof x.componentWillUpdate!="function"||(typeof x.componentWillUpdate=="function"&&x.componentWillUpdate(p,ge,ee),typeof x.UNSAFE_componentWillUpdate=="function"&&x.UNSAFE_componentWillUpdate(p,ge,ee)),typeof x.componentDidUpdate=="function"&&(a.flags|=4),typeof x.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof x.componentDidUpdate!="function"||D===s.memoizedProps&&pe===s.memoizedState||(a.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||D===s.memoizedProps&&pe===s.memoizedState||(a.flags|=1024),a.memoizedProps=p,a.memoizedState=ge),x.props=p,x.state=ge,x.context=ee,p=be):(typeof x.componentDidUpdate!="function"||D===s.memoizedProps&&pe===s.memoizedState||(a.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||D===s.memoizedProps&&pe===s.memoizedState||(a.flags|=1024),p=!1)}return x=p,Ih(s,a),p=(a.flags&128)!==0,x||p?(x=a.stateNode,c=p&&typeof c.getDerivedStateFromError!="function"?null:x.render(),a.flags|=1,s!==null&&p?(a.child=Nl(a,s.child,null,T),a.child=Nl(a,null,c,T)):jn(s,a,c,T),a.memoizedState=x.state,s=a.child):s=gs(s,a,T),s}function mx(s,a,c,p){return xc(),a.flags|=256,jn(s,a,c,p),a.child}var Zg={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ey(s){return{baseLanes:s,cachePool:tw()}}function ty(s,a,c){return s=s!==null?s.childLanes&~c:0,a&&(s|=Ji),s}function px(s,a,c){var p=a.pendingProps,T=!1,x=(a.flags&128)!==0,D;if((D=x)||(D=s!==null&&s.memoizedState===null?!1:(Cn.current&2)!==0),D&&(T=!0,a.flags&=-129),D=(a.flags&32)!==0,a.flags&=-33,s===null){if(Ct){if(T?$s(a):Ws(),Ct){var B=on,ee;if(ee=B){e:{for(ee=B,B=Cr;ee.nodeType!==8;){if(!B){B=null;break e}if(ee=ur(ee.nextSibling),ee===null){B=null;break e}}B=ee}B!==null?(a.memoizedState={dehydrated:B,treeContext:oa!==null?{id:cs,overflow:ds}:null,retryLane:536870912,hydrationErrors:null},ee=Ri(18,null,null,0),ee.stateNode=B,ee.return=a,a.child=ee,hi=a,on=null,ee=!0):ee=!1}ee||ua(a)}if(B=a.memoizedState,B!==null&&(B=B.dehydrated,B!==null))return Oy(B)?a.lanes=32:a.lanes=536870912,null;ps(a)}return B=p.children,p=p.fallback,T?(Ws(),T=a.mode,B=Ah({mode:"hidden",children:B},T),p=sa(p,T,c,null),B.return=a,p.return=a,B.sibling=p,a.child=B,T=a.child,T.memoizedState=ey(c),T.childLanes=ty(s,D,c),a.memoizedState=Zg,p):($s(a),ny(a,B))}if(ee=s.memoizedState,ee!==null&&(B=ee.dehydrated,B!==null)){if(x)a.flags&256?($s(a),a.flags&=-257,a=iy(s,a,c)):a.memoizedState!==null?(Ws(),a.child=s.child,a.flags|=128,a=null):(Ws(),T=p.fallback,B=a.mode,p=Ah({mode:"visible",children:p.children},B),T=sa(T,B,c,null),T.flags|=2,p.return=a,T.return=a,p.sibling=T,a.child=p,Nl(a,s.child,null,c),p=a.child,p.memoizedState=ey(c),p.childLanes=ty(s,D,c),a.memoizedState=Zg,a=T);else if($s(a),Oy(B)){if(D=B.nextSibling&&B.nextSibling.dataset,D)var fe=D.dgst;D=fe,p=Error(i(419)),p.stack="",p.digest=D,Ec({value:p,source:null,stack:null}),a=iy(s,a,c)}else if(Mn||bc(s,a,c,!1),D=(c&s.childLanes)!==0,Mn||D){if(D=Gt,D!==null&&(p=c&-c,p=(p&42)!==0?1:li(p),p=(p&(D.suspendedLanes|c))!==0?0:p,p!==0&&p!==ee.retryLane))throw ee.retryLane=p,vl(s,p),Mi(D,s,p),ox;B.data==="$?"||wy(),a=iy(s,a,c)}else B.data==="$?"?(a.flags|=192,a.child=s.child,a=null):(s=ee.treeContext,on=ur(B.nextSibling),hi=a,Ct=!0,la=null,Cr=!1,s!==null&&($i[Wi++]=cs,$i[Wi++]=ds,$i[Wi++]=oa,cs=s.id,ds=s.overflow,oa=a),a=ny(a,p.children),a.flags|=4096);return a}return T?(Ws(),T=p.fallback,B=a.mode,ee=s.child,fe=ee.sibling,p=us(ee,{mode:"hidden",children:p.children}),p.subtreeFlags=ee.subtreeFlags&65011712,fe!==null?T=us(fe,T):(T=sa(T,B,c,null),T.flags|=2),T.return=a,p.return=a,p.sibling=T,a.child=p,p=T,T=a.child,B=s.child.memoizedState,B===null?B=ey(c):(ee=B.cachePool,ee!==null?(fe=An._currentValue,ee=ee.parent!==fe?{parent:fe,pool:fe}:ee):ee=tw(),B={baseLanes:B.baseLanes|c,cachePool:ee}),T.memoizedState=B,T.childLanes=ty(s,D,c),a.memoizedState=Zg,p):($s(a),c=s.child,s=c.sibling,c=us(c,{mode:"visible",children:p.children}),c.return=a,c.sibling=null,s!==null&&(D=a.deletions,D===null?(a.deletions=[s],a.flags|=16):D.push(s)),a.child=c,a.memoizedState=null,c)}function ny(s,a){return a=Ah({mode:"visible",children:a},s.mode),a.return=s,s.child=a}function Ah(s,a){return s=Ri(22,s,null,a),s.lanes=0,s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},s}function iy(s,a,c){return Nl(a,s.child,null,c),s=ny(a,a.pendingProps.children),s.flags|=2,a.memoizedState=null,s}function gx(s,a,c){s.lanes|=a;var p=s.alternate;p!==null&&(p.lanes|=a),wg(s.return,a,c)}function ry(s,a,c,p,T){var x=s.memoizedState;x===null?s.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:p,tail:c,tailMode:T}:(x.isBackwards=a,x.rendering=null,x.renderingStartTime=0,x.last=p,x.tail=c,x.tailMode=T)}function yx(s,a,c){var p=a.pendingProps,T=p.revealOrder,x=p.tail;if(jn(s,a,p.children,c),p=Cn.current,(p&2)!==0)p=p&1|2,a.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=a.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&gx(s,c,a);else if(s.tag===19)gx(s,c,a);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===a)break e;for(;s.sibling===null;){if(s.return===null||s.return===a)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}p&=1}switch(he(Cn,p),T){case"forwards":for(c=a.child,T=null;c!==null;)s=c.alternate,s!==null&&Eh(s)===null&&(T=c),c=c.sibling;c=T,c===null?(T=a.child,a.child=null):(T=c.sibling,c.sibling=null),ry(a,!1,T,c,x);break;case"backwards":for(c=null,T=a.child,a.child=null;T!==null;){if(s=T.alternate,s!==null&&Eh(s)===null){a.child=T;break}s=T.sibling,T.sibling=c,c=T,T=s}ry(a,!0,c,null,x);break;case"together":ry(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function gs(s,a,c){if(s!==null&&(a.dependencies=s.dependencies),Xs|=a.lanes,(c&a.childLanes)===0)if(s!==null){if(bc(s,a,c,!1),(c&a.childLanes)===0)return null}else return null;if(s!==null&&a.child!==s.child)throw Error(i(153));if(a.child!==null){for(s=a.child,c=us(s,s.pendingProps),a.child=c,c.return=a;s.sibling!==null;)s=s.sibling,c=c.sibling=us(s,s.pendingProps),c.return=a;c.sibling=null}return a.child}function sy(s,a){return(s.lanes&a)!==0?!0:(s=s.dependencies,!!(s!==null&&ah(s)))}function LP(s,a,c){switch(a.tag){case 3:Me(a,a.stateNode.containerInfo),qs(a,An,s.memoizedState.cache),xc();break;case 27:case 5:yt(a);break;case 4:Me(a,a.stateNode.containerInfo);break;case 10:qs(a,a.type,a.memoizedProps.value);break;case 13:var p=a.memoizedState;if(p!==null)return p.dehydrated!==null?($s(a),a.flags|=128,null):(c&a.child.childLanes)!==0?px(s,a,c):($s(a),s=gs(s,a,c),s!==null?s.sibling:null);$s(a);break;case 19:var T=(s.flags&128)!==0;if(p=(c&a.childLanes)!==0,p||(bc(s,a,c,!1),p=(c&a.childLanes)!==0),T){if(p)return yx(s,a,c);a.flags|=128}if(T=a.memoizedState,T!==null&&(T.rendering=null,T.tail=null,T.lastEffect=null),he(Cn,Cn.current),p)break;return null;case 22:case 23:return a.lanes=0,cx(s,a,c);case 24:qs(a,An,s.memoizedState.cache)}return gs(s,a,c)}function _x(s,a,c){if(s!==null)if(s.memoizedProps!==a.pendingProps)Mn=!0;else{if(!sy(s,c)&&(a.flags&128)===0)return Mn=!1,LP(s,a,c);Mn=(s.flags&131072)!==0}else Mn=!1,Ct&&(a.flags&1048576)!==0&&KT(a,oh,a.index);switch(a.lanes=0,a.tag){case 16:e:{s=a.pendingProps;var p=a.elementType,T=p._init;if(p=T(p._payload),a.type=p,typeof p=="function")mg(p)?(s=ma(p,s),a.tag=1,a=hx(null,a,p,s,c)):(a.tag=0,a=Xg(null,a,p,s,c));else{if(p!=null){if(T=p.$$typeof,T===q){a.tag=11,a=ax(null,a,p,s,c);break e}else if(T===O){a.tag=14,a=lx(null,a,p,s,c);break e}}throw a=k(p)||p,Error(i(306,a,""))}}return a;case 0:return Xg(s,a,a.type,a.pendingProps,c);case 1:return p=a.type,T=ma(p,a.pendingProps),hx(s,a,p,T,c);case 3:e:{if(Me(a,a.stateNode.containerInfo),s===null)throw Error(i(387));p=a.pendingProps;var x=a.memoizedState;T=x.element,Cg(s,a),Pc(a,p,null,c);var D=a.memoizedState;if(p=D.cache,qs(a,An,p),p!==x.cache&&xg(a,[An],c,!0),Nc(),p=D.element,x.isDehydrated)if(x={element:p,isDehydrated:!1,cache:D.cache},a.updateQueue.baseState=x,a.memoizedState=x,a.flags&256){a=mx(s,a,p,c);break e}else if(p!==T){T=Gi(Error(i(424)),a),Ec(T),a=mx(s,a,p,c);break e}else{switch(s=a.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(on=ur(s.firstChild),hi=a,Ct=!0,la=null,Cr=!0,c=Yw(a,null,p,c),a.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling}else{if(xc(),p===T){a=gs(s,a,c);break e}jn(s,a,p,c)}a=a.child}return a;case 26:return Ih(s,a),s===null?(c=xE(a.type,null,a.pendingProps,null))?a.memoizedState=c:Ct||(c=a.type,s=a.pendingProps,p=qh(ke.current).createElement(c),p[Yt]=a,p[jt]=s,Hn(p,c,s),fn(p),a.stateNode=p):a.memoizedState=xE(a.type,s.memoizedProps,a.pendingProps,s.memoizedState),null;case 27:return yt(a),s===null&&Ct&&(p=a.stateNode=vE(a.type,a.pendingProps,ke.current),hi=a,Cr=!0,T=on,no(a.type)?(Fy=T,on=ur(p.firstChild)):on=T),jn(s,a,a.pendingProps.children,c),Ih(s,a),s===null&&(a.flags|=4194304),a.child;case 5:return s===null&&Ct&&((T=p=on)&&(p=dk(p,a.type,a.pendingProps,Cr),p!==null?(a.stateNode=p,hi=a,on=ur(p.firstChild),Cr=!1,T=!0):T=!1),T||ua(a)),yt(a),T=a.type,x=a.pendingProps,D=s!==null?s.memoizedProps:null,p=x.children,Vy(T,x)?p=null:D!==null&&Vy(T,D)&&(a.flags|=32),a.memoizedState!==null&&(T=Mg(s,a,RP,null,null,c),Zc._currentValue=T),Ih(s,a),jn(s,a,p,c),a.child;case 6:return s===null&&Ct&&((s=c=on)&&(c=fk(c,a.pendingProps,Cr),c!==null?(a.stateNode=c,hi=a,on=null,s=!0):s=!1),s||ua(a)),null;case 13:return px(s,a,c);case 4:return Me(a,a.stateNode.containerInfo),p=a.pendingProps,s===null?a.child=Nl(a,null,p,c):jn(s,a,p,c),a.child;case 11:return ax(s,a,a.type,a.pendingProps,c);case 7:return jn(s,a,a.pendingProps,c),a.child;case 8:return jn(s,a,a.pendingProps.children,c),a.child;case 12:return jn(s,a,a.pendingProps.children,c),a.child;case 10:return p=a.pendingProps,qs(a,a.type,p.value),jn(s,a,p.children,c),a.child;case 9:return T=a.type._context,p=a.pendingProps.children,da(a),T=Qn(T),p=p(T),a.flags|=1,jn(s,a,p,c),a.child;case 14:return lx(s,a,a.type,a.pendingProps,c);case 15:return ux(s,a,a.type,a.pendingProps,c);case 19:return yx(s,a,c);case 31:return p=a.pendingProps,c=a.mode,p={mode:p.mode,children:p.children},s===null?(c=Ah(p,c),c.ref=a.ref,a.child=c,c.return=a,a=c):(c=us(s.child,p),c.ref=a.ref,a.child=c,c.return=a,a=c),a;case 22:return cx(s,a,c);case 24:return da(a),p=Qn(An),s===null?(T=Sg(),T===null&&(T=Gt,x=Eg(),T.pooledCache=x,x.refCount++,x!==null&&(T.pooledCacheLanes|=c),T=x),a.memoizedState={parent:p,cache:T},Ag(a),qs(a,An,T)):((s.lanes&c)!==0&&(Cg(s,a),Pc(a,null,null,c),Nc()),T=s.memoizedState,x=a.memoizedState,T.parent!==p?(T={parent:p,cache:p},a.memoizedState=T,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=T),qs(a,An,p)):(p=x.cache,qs(a,An,p),p!==T.cache&&xg(a,[An],c,!0))),jn(s,a,a.pendingProps.children,c),a.child;case 29:throw a.pendingProps}throw Error(i(156,a.tag))}function ys(s){s.flags|=4}function vx(s,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!AE(a)){if(a=Ki.current,a!==null&&((xt&4194048)===xt?Rr!==null:(xt&62914560)!==xt&&(xt&536870912)===0||a!==Rr))throw Cc=Ig,nw;s.flags|=8192}}function Ch(s,a){a!==null&&(s.flags|=4),s.flags&16384&&(a=s.tag!==22?qe():536870912,s.lanes|=a,Ml|=a)}function Oc(s,a){if(!Ct)switch(s.tailMode){case"hidden":a=s.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?s.tail=null:c.sibling=null;break;case"collapsed":c=s.tail;for(var p=null;c!==null;)c.alternate!==null&&(p=c),c=c.sibling;p===null?a||s.tail===null?s.tail=null:s.tail.sibling=null:p.sibling=null}}function nn(s){var a=s.alternate!==null&&s.alternate.child===s.child,c=0,p=0;if(a)for(var T=s.child;T!==null;)c|=T.lanes|T.childLanes,p|=T.subtreeFlags&65011712,p|=T.flags&65011712,T.return=s,T=T.sibling;else for(T=s.child;T!==null;)c|=T.lanes|T.childLanes,p|=T.subtreeFlags,p|=T.flags,T.return=s,T=T.sibling;return s.subtreeFlags|=p,s.childLanes=c,a}function OP(s,a,c){var p=a.pendingProps;switch(_g(a),a.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return nn(a),null;case 1:return nn(a),null;case 3:return c=a.stateNode,p=null,s!==null&&(p=s.memoizedState.cache),a.memoizedState.cache!==p&&(a.flags|=2048),hs(An),st(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(s===null||s.child===null)&&(wc(a)?ys(a):s===null||s.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,QT())),nn(a),null;case 26:return c=a.memoizedState,s===null?(ys(a),c!==null?(nn(a),vx(a,c)):(nn(a),a.flags&=-16777217)):c?c!==s.memoizedState?(ys(a),nn(a),vx(a,c)):(nn(a),a.flags&=-16777217):(s.memoizedProps!==p&&ys(a),nn(a),a.flags&=-16777217),null;case 27:Ze(a),c=ke.current;var T=a.type;if(s!==null&&a.stateNode!=null)s.memoizedProps!==p&&ys(a);else{if(!p){if(a.stateNode===null)throw Error(i(166));return nn(a),null}s=ve.current,wc(a)?JT(a):(s=vE(T,p,c),a.stateNode=s,ys(a))}return nn(a),null;case 5:if(Ze(a),c=a.type,s!==null&&a.stateNode!=null)s.memoizedProps!==p&&ys(a);else{if(!p){if(a.stateNode===null)throw Error(i(166));return nn(a),null}if(s=ve.current,wc(a))JT(a);else{switch(T=qh(ke.current),s){case 1:s=T.createElementNS("http://www.w3.org/2000/svg",c);break;case 2:s=T.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;default:switch(c){case"svg":s=T.createElementNS("http://www.w3.org/2000/svg",c);break;case"math":s=T.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;case"script":s=T.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof p.is=="string"?T.createElement("select",{is:p.is}):T.createElement("select"),p.multiple?s.multiple=!0:p.size&&(s.size=p.size);break;default:s=typeof p.is=="string"?T.createElement(c,{is:p.is}):T.createElement(c)}}s[Yt]=a,s[jt]=p;e:for(T=a.child;T!==null;){if(T.tag===5||T.tag===6)s.appendChild(T.stateNode);else if(T.tag!==4&&T.tag!==27&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===a)break e;for(;T.sibling===null;){if(T.return===null||T.return===a)break e;T=T.return}T.sibling.return=T.return,T=T.sibling}a.stateNode=s;e:switch(Hn(s,c,p),c){case"button":case"input":case"select":case"textarea":s=!!p.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&ys(a)}}return nn(a),a.flags&=-16777217,null;case 6:if(s&&a.stateNode!=null)s.memoizedProps!==p&&ys(a);else{if(typeof p!="string"&&a.stateNode===null)throw Error(i(166));if(s=ke.current,wc(a)){if(s=a.stateNode,c=a.memoizedProps,p=null,T=hi,T!==null)switch(T.tag){case 27:case 5:p=T.memoizedProps}s[Yt]=a,s=!!(s.nodeValue===c||p!==null&&p.suppressHydrationWarning===!0||fE(s.nodeValue,c)),s||ua(a)}else s=qh(s).createTextNode(p),s[Yt]=a,a.stateNode=s}return nn(a),null;case 13:if(p=a.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(T=wc(a),p!==null&&p.dehydrated!==null){if(s===null){if(!T)throw Error(i(318));if(T=a.memoizedState,T=T!==null?T.dehydrated:null,!T)throw Error(i(317));T[Yt]=a}else xc(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;nn(a),T=!1}else T=QT(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=T),T=!0;if(!T)return a.flags&256?(ps(a),a):(ps(a),null)}if(ps(a),(a.flags&128)!==0)return a.lanes=c,a;if(c=p!==null,s=s!==null&&s.memoizedState!==null,c){p=a.child,T=null,p.alternate!==null&&p.alternate.memoizedState!==null&&p.alternate.memoizedState.cachePool!==null&&(T=p.alternate.memoizedState.cachePool.pool);var x=null;p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(x=p.memoizedState.cachePool.pool),x!==T&&(p.flags|=2048)}return c!==s&&c&&(a.child.flags|=8192),Ch(a,a.updateQueue),nn(a),null;case 4:return st(),s===null&&Ny(a.stateNode.containerInfo),nn(a),null;case 10:return hs(a.type),nn(a),null;case 19:if(Z(Cn),T=a.memoizedState,T===null)return nn(a),null;if(p=(a.flags&128)!==0,x=T.rendering,x===null)if(p)Oc(T,!1);else{if(an!==0||s!==null&&(s.flags&128)!==0)for(s=a.child;s!==null;){if(x=Eh(s),x!==null){for(a.flags|=128,Oc(T,!1),s=x.updateQueue,a.updateQueue=s,Ch(a,s),a.subtreeFlags=0,s=c,c=a.child;c!==null;)WT(c,s),c=c.sibling;return he(Cn,Cn.current&1|2),a.child}s=s.sibling}T.tail!==null&&$()>Ph&&(a.flags|=128,p=!0,Oc(T,!1),a.lanes=4194304)}else{if(!p)if(s=Eh(x),s!==null){if(a.flags|=128,p=!0,s=s.updateQueue,a.updateQueue=s,Ch(a,s),Oc(T,!0),T.tail===null&&T.tailMode==="hidden"&&!x.alternate&&!Ct)return nn(a),null}else 2*$()-T.renderingStartTime>Ph&&c!==536870912&&(a.flags|=128,p=!0,Oc(T,!1),a.lanes=4194304);T.isBackwards?(x.sibling=a.child,a.child=x):(s=T.last,s!==null?s.sibling=x:a.child=x,T.last=x)}return T.tail!==null?(a=T.tail,T.rendering=a,T.tail=a.sibling,T.renderingStartTime=$(),a.sibling=null,s=Cn.current,he(Cn,p?s&1|2:s&1),a):(nn(a),null);case 22:case 23:return ps(a),kg(),p=a.memoizedState!==null,s!==null?s.memoizedState!==null!==p&&(a.flags|=8192):p&&(a.flags|=8192),p?(c&536870912)!==0&&(a.flags&128)===0&&(nn(a),a.subtreeFlags&6&&(a.flags|=8192)):nn(a),c=a.updateQueue,c!==null&&Ch(a,c.retryQueue),c=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),p=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(p=a.memoizedState.cachePool.pool),p!==c&&(a.flags|=2048),s!==null&&Z(fa),null;case 24:return c=null,s!==null&&(c=s.memoizedState.cache),a.memoizedState.cache!==c&&(a.flags|=2048),hs(An),nn(a),null;case 25:return null;case 30:return null}throw Error(i(156,a.tag))}function FP(s,a){switch(_g(a),a.tag){case 1:return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 3:return hs(An),st(),s=a.flags,(s&65536)!==0&&(s&128)===0?(a.flags=s&-65537|128,a):null;case 26:case 27:case 5:return Ze(a),null;case 13:if(ps(a),s=a.memoizedState,s!==null&&s.dehydrated!==null){if(a.alternate===null)throw Error(i(340));xc()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 19:return Z(Cn),null;case 4:return st(),null;case 10:return hs(a.type),null;case 22:case 23:return ps(a),kg(),s!==null&&Z(fa),s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 24:return hs(An),null;case 25:return null;default:return null}}function Tx(s,a){switch(_g(a),a.tag){case 3:hs(An),st();break;case 26:case 27:case 5:Ze(a);break;case 4:st();break;case 13:ps(a);break;case 19:Z(Cn);break;case 10:hs(a.type);break;case 22:case 23:ps(a),kg(),s!==null&&Z(fa);break;case 24:hs(An)}}function Fc(s,a){try{var c=a.updateQueue,p=c!==null?c.lastEffect:null;if(p!==null){var T=p.next;c=T;do{if((c.tag&s)===s){p=void 0;var x=c.create,D=c.inst;p=x(),D.destroy=p}c=c.next}while(c!==T)}}catch(B){qt(a,a.return,B)}}function Ks(s,a,c){try{var p=a.updateQueue,T=p!==null?p.lastEffect:null;if(T!==null){var x=T.next;p=x;do{if((p.tag&s)===s){var D=p.inst,B=D.destroy;if(B!==void 0){D.destroy=void 0,T=a;var ee=c,fe=B;try{fe()}catch(be){qt(T,ee,be)}}}p=p.next}while(p!==x)}}catch(be){qt(a,a.return,be)}}function wx(s){var a=s.updateQueue;if(a!==null){var c=s.stateNode;try{lw(a,c)}catch(p){qt(s,s.return,p)}}}function xx(s,a,c){c.props=ma(s.type,s.memoizedProps),c.state=s.memoizedState;try{c.componentWillUnmount()}catch(p){qt(s,a,p)}}function Bc(s,a){try{var c=s.ref;if(c!==null){switch(s.tag){case 26:case 27:case 5:var p=s.stateNode;break;case 30:p=s.stateNode;break;default:p=s.stateNode}typeof c=="function"?s.refCleanup=c(p):c.current=p}}catch(T){qt(s,a,T)}}function Nr(s,a){var c=s.ref,p=s.refCleanup;if(c!==null)if(typeof p=="function")try{p()}catch(T){qt(s,a,T)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(T){qt(s,a,T)}else c.current=null}function Ex(s){var a=s.type,c=s.memoizedProps,p=s.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":c.autoFocus&&p.focus();break e;case"img":c.src?p.src=c.src:c.srcSet&&(p.srcset=c.srcSet)}}catch(T){qt(s,s.return,T)}}function oy(s,a,c){try{var p=s.stateNode;ok(p,s.type,c,a),p[jt]=a}catch(T){qt(s,s.return,T)}}function bx(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&no(s.type)||s.tag===4}function ay(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||bx(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&no(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function ly(s,a,c){var p=s.tag;if(p===5||p===6)s=s.stateNode,a?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(s,a):(a=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,a.appendChild(s),c=c._reactRootContainer,c!=null||a.onclick!==null||(a.onclick=Bh));else if(p!==4&&(p===27&&no(s.type)&&(c=s.stateNode,a=null),s=s.child,s!==null))for(ly(s,a,c),s=s.sibling;s!==null;)ly(s,a,c),s=s.sibling}function Rh(s,a,c){var p=s.tag;if(p===5||p===6)s=s.stateNode,a?c.insertBefore(s,a):c.appendChild(s);else if(p!==4&&(p===27&&no(s.type)&&(c=s.stateNode),s=s.child,s!==null))for(Rh(s,a,c),s=s.sibling;s!==null;)Rh(s,a,c),s=s.sibling}function Sx(s){var a=s.stateNode,c=s.memoizedProps;try{for(var p=s.type,T=a.attributes;T.length;)a.removeAttributeNode(T[0]);Hn(a,p,c),a[Yt]=s,a[jt]=c}catch(x){qt(s,s.return,x)}}var _s=!1,mn=!1,uy=!1,Ix=typeof WeakSet=="function"?WeakSet:Set,Vn=null;function BP(s,a){if(s=s.containerInfo,Dy=Wh,s=LT(s),ag(s)){if("selectionStart"in s)var c={start:s.selectionStart,end:s.selectionEnd};else e:{c=(c=s.ownerDocument)&&c.defaultView||window;var p=c.getSelection&&c.getSelection();if(p&&p.rangeCount!==0){c=p.anchorNode;var T=p.anchorOffset,x=p.focusNode;p=p.focusOffset;try{c.nodeType,x.nodeType}catch{c=null;break e}var D=0,B=-1,ee=-1,fe=0,be=0,Ce=s,pe=null;t:for(;;){for(var ge;Ce!==c||T!==0&&Ce.nodeType!==3||(B=D+T),Ce!==x||p!==0&&Ce.nodeType!==3||(ee=D+p),Ce.nodeType===3&&(D+=Ce.nodeValue.length),(ge=Ce.firstChild)!==null;)pe=Ce,Ce=ge;for(;;){if(Ce===s)break t;if(pe===c&&++fe===T&&(B=D),pe===x&&++be===p&&(ee=D),(ge=Ce.nextSibling)!==null)break;Ce=pe,pe=Ce.parentNode}Ce=ge}c=B===-1||ee===-1?null:{start:B,end:ee}}else c=null}c=c||{start:0,end:0}}else c=null;for(My={focusedElem:s,selectionRange:c},Wh=!1,Vn=a;Vn!==null;)if(a=Vn,s=a.child,(a.subtreeFlags&1024)!==0&&s!==null)s.return=a,Vn=s;else for(;Vn!==null;){switch(a=Vn,x=a.alternate,s=a.flags,a.tag){case 0:break;case 11:case 15:break;case 1:if((s&1024)!==0&&x!==null){s=void 0,c=a,T=x.memoizedProps,x=x.memoizedState,p=c.stateNode;try{var nt=ma(c.type,T,c.elementType===c.type);s=p.getSnapshotBeforeUpdate(nt,x),p.__reactInternalSnapshotBeforeUpdate=s}catch(et){qt(c,c.return,et)}}break;case 3:if((s&1024)!==0){if(s=a.stateNode.containerInfo,c=s.nodeType,c===9)Ly(s);else if(c===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":Ly(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(i(163))}if(s=a.sibling,s!==null){s.return=a.return,Vn=s;break}Vn=a.return}}function Ax(s,a,c){var p=c.flags;switch(c.tag){case 0:case 11:case 15:Js(s,c),p&4&&Fc(5,c);break;case 1:if(Js(s,c),p&4)if(s=c.stateNode,a===null)try{s.componentDidMount()}catch(D){qt(c,c.return,D)}else{var T=ma(c.type,a.memoizedProps);a=a.memoizedState;try{s.componentDidUpdate(T,a,s.__reactInternalSnapshotBeforeUpdate)}catch(D){qt(c,c.return,D)}}p&64&&wx(c),p&512&&Bc(c,c.return);break;case 3:if(Js(s,c),p&64&&(s=c.updateQueue,s!==null)){if(a=null,c.child!==null)switch(c.child.tag){case 27:case 5:a=c.child.stateNode;break;case 1:a=c.child.stateNode}try{lw(s,a)}catch(D){qt(c,c.return,D)}}break;case 27:a===null&&p&4&&Sx(c);case 26:case 5:Js(s,c),a===null&&p&4&&Ex(c),p&512&&Bc(c,c.return);break;case 12:Js(s,c);break;case 13:Js(s,c),p&4&&Nx(s,c),p&64&&(s=c.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(c=JP.bind(null,c),hk(s,c))));break;case 22:if(p=c.memoizedState!==null||_s,!p){a=a!==null&&a.memoizedState!==null||mn,T=_s;var x=mn;_s=p,(mn=a)&&!x?Ys(s,c,(c.subtreeFlags&8772)!==0):Js(s,c),_s=T,mn=x}break;case 30:break;default:Js(s,c)}}function Cx(s){var a=s.alternate;a!==null&&(s.alternate=null,Cx(a)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(a=s.stateNode,a!==null&&Ls(a)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var Qt=null,Ti=!1;function vs(s,a,c){for(c=c.child;c!==null;)Rx(s,a,c),c=c.sibling}function Rx(s,a,c){if(Ke&&typeof Ke.onCommitFiberUnmount=="function")try{Ke.onCommitFiberUnmount(Oe,c)}catch{}switch(c.tag){case 26:mn||Nr(c,a),vs(s,a,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:mn||Nr(c,a);var p=Qt,T=Ti;no(c.type)&&(Qt=c.stateNode,Ti=!1),vs(s,a,c),Jc(c.stateNode),Qt=p,Ti=T;break;case 5:mn||Nr(c,a);case 6:if(p=Qt,T=Ti,Qt=null,vs(s,a,c),Qt=p,Ti=T,Qt!==null)if(Ti)try{(Qt.nodeType===9?Qt.body:Qt.nodeName==="HTML"?Qt.ownerDocument.body:Qt).removeChild(c.stateNode)}catch(x){qt(c,a,x)}else try{Qt.removeChild(c.stateNode)}catch(x){qt(c,a,x)}break;case 18:Qt!==null&&(Ti?(s=Qt,yE(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,c.stateNode),id(s)):yE(Qt,c.stateNode));break;case 4:p=Qt,T=Ti,Qt=c.stateNode.containerInfo,Ti=!0,vs(s,a,c),Qt=p,Ti=T;break;case 0:case 11:case 14:case 15:mn||Ks(2,c,a),mn||Ks(4,c,a),vs(s,a,c);break;case 1:mn||(Nr(c,a),p=c.stateNode,typeof p.componentWillUnmount=="function"&&xx(c,a,p)),vs(s,a,c);break;case 21:vs(s,a,c);break;case 22:mn=(p=mn)||c.memoizedState!==null,vs(s,a,c),mn=p;break;default:vs(s,a,c)}}function Nx(s,a){if(a.memoizedState===null&&(s=a.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{id(s)}catch(c){qt(a,a.return,c)}}function qP(s){switch(s.tag){case 13:case 19:var a=s.stateNode;return a===null&&(a=s.stateNode=new Ix),a;case 22:return s=s.stateNode,a=s._retryCache,a===null&&(a=s._retryCache=new Ix),a;default:throw Error(i(435,s.tag))}}function cy(s,a){var c=qP(s);a.forEach(function(p){var T=YP.bind(null,s,p);c.has(p)||(c.add(p),p.then(T,T))})}function Ni(s,a){var c=a.deletions;if(c!==null)for(var p=0;p<c.length;p++){var T=c[p],x=s,D=a,B=D;e:for(;B!==null;){switch(B.tag){case 27:if(no(B.type)){Qt=B.stateNode,Ti=!1;break e}break;case 5:Qt=B.stateNode,Ti=!1;break e;case 3:case 4:Qt=B.stateNode.containerInfo,Ti=!0;break e}B=B.return}if(Qt===null)throw Error(i(160));Rx(x,D,T),Qt=null,Ti=!1,x=T.alternate,x!==null&&(x.return=null),T.return=null}if(a.subtreeFlags&13878)for(a=a.child;a!==null;)Px(a,s),a=a.sibling}var lr=null;function Px(s,a){var c=s.alternate,p=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Ni(a,s),Pi(s),p&4&&(Ks(3,s,s.return),Fc(3,s),Ks(5,s,s.return));break;case 1:Ni(a,s),Pi(s),p&512&&(mn||c===null||Nr(c,c.return)),p&64&&_s&&(s=s.updateQueue,s!==null&&(p=s.callbacks,p!==null&&(c=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=c===null?p:c.concat(p))));break;case 26:var T=lr;if(Ni(a,s),Pi(s),p&512&&(mn||c===null||Nr(c,c.return)),p&4){var x=c!==null?c.memoizedState:null;if(p=s.memoizedState,c===null)if(p===null)if(s.stateNode===null){e:{p=s.type,c=s.memoizedProps,T=T.ownerDocument||T;t:switch(p){case"title":x=T.getElementsByTagName("title")[0],(!x||x[jo]||x[Yt]||x.namespaceURI==="http://www.w3.org/2000/svg"||x.hasAttribute("itemprop"))&&(x=T.createElement(p),T.head.insertBefore(x,T.querySelector("head > title"))),Hn(x,p,c),x[Yt]=s,fn(x),p=x;break e;case"link":var D=SE("link","href",T).get(p+(c.href||""));if(D){for(var B=0;B<D.length;B++)if(x=D[B],x.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&x.getAttribute("rel")===(c.rel==null?null:c.rel)&&x.getAttribute("title")===(c.title==null?null:c.title)&&x.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){D.splice(B,1);break t}}x=T.createElement(p),Hn(x,p,c),T.head.appendChild(x);break;case"meta":if(D=SE("meta","content",T).get(p+(c.content||""))){for(B=0;B<D.length;B++)if(x=D[B],x.getAttribute("content")===(c.content==null?null:""+c.content)&&x.getAttribute("name")===(c.name==null?null:c.name)&&x.getAttribute("property")===(c.property==null?null:c.property)&&x.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&x.getAttribute("charset")===(c.charSet==null?null:c.charSet)){D.splice(B,1);break t}}x=T.createElement(p),Hn(x,p,c),T.head.appendChild(x);break;default:throw Error(i(468,p))}x[Yt]=s,fn(x),p=x}s.stateNode=p}else IE(T,s.type,s.stateNode);else s.stateNode=bE(T,p,s.memoizedProps);else x!==p?(x===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):x.count--,p===null?IE(T,s.type,s.stateNode):bE(T,p,s.memoizedProps)):p===null&&s.stateNode!==null&&oy(s,s.memoizedProps,c.memoizedProps)}break;case 27:Ni(a,s),Pi(s),p&512&&(mn||c===null||Nr(c,c.return)),c!==null&&p&4&&oy(s,s.memoizedProps,c.memoizedProps);break;case 5:if(Ni(a,s),Pi(s),p&512&&(mn||c===null||Nr(c,c.return)),s.flags&32){T=s.stateNode;try{Bi(T,"")}catch(ge){qt(s,s.return,ge)}}p&4&&s.stateNode!=null&&(T=s.memoizedProps,oy(s,T,c!==null?c.memoizedProps:T)),p&1024&&(uy=!0);break;case 6:if(Ni(a,s),Pi(s),p&4){if(s.stateNode===null)throw Error(i(162));p=s.memoizedProps,c=s.stateNode;try{c.nodeValue=p}catch(ge){qt(s,s.return,ge)}}break;case 3:if(Gh=null,T=lr,lr=zh(a.containerInfo),Ni(a,s),lr=T,Pi(s),p&4&&c!==null&&c.memoizedState.isDehydrated)try{id(a.containerInfo)}catch(ge){qt(s,s.return,ge)}uy&&(uy=!1,kx(s));break;case 4:p=lr,lr=zh(s.stateNode.containerInfo),Ni(a,s),Pi(s),lr=p;break;case 12:Ni(a,s),Pi(s);break;case 13:Ni(a,s),Pi(s),s.child.flags&8192&&s.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(gy=$()),p&4&&(p=s.updateQueue,p!==null&&(s.updateQueue=null,cy(s,p)));break;case 22:T=s.memoizedState!==null;var ee=c!==null&&c.memoizedState!==null,fe=_s,be=mn;if(_s=fe||T,mn=be||ee,Ni(a,s),mn=be,_s=fe,Pi(s),p&8192)e:for(a=s.stateNode,a._visibility=T?a._visibility&-2:a._visibility|1,T&&(c===null||ee||_s||mn||pa(s)),c=null,a=s;;){if(a.tag===5||a.tag===26){if(c===null){ee=c=a;try{if(x=ee.stateNode,T)D=x.style,typeof D.setProperty=="function"?D.setProperty("display","none","important"):D.display="none";else{B=ee.stateNode;var Ce=ee.memoizedProps.style,pe=Ce!=null&&Ce.hasOwnProperty("display")?Ce.display:null;B.style.display=pe==null||typeof pe=="boolean"?"":(""+pe).trim()}}catch(ge){qt(ee,ee.return,ge)}}}else if(a.tag===6){if(c===null){ee=a;try{ee.stateNode.nodeValue=T?"":ee.memoizedProps}catch(ge){qt(ee,ee.return,ge)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===s)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break e;for(;a.sibling===null;){if(a.return===null||a.return===s)break e;c===a&&(c=null),a=a.return}c===a&&(c=null),a.sibling.return=a.return,a=a.sibling}p&4&&(p=s.updateQueue,p!==null&&(c=p.retryQueue,c!==null&&(p.retryQueue=null,cy(s,c))));break;case 19:Ni(a,s),Pi(s),p&4&&(p=s.updateQueue,p!==null&&(s.updateQueue=null,cy(s,p)));break;case 30:break;case 21:break;default:Ni(a,s),Pi(s)}}function Pi(s){var a=s.flags;if(a&2){try{for(var c,p=s.return;p!==null;){if(bx(p)){c=p;break}p=p.return}if(c==null)throw Error(i(160));switch(c.tag){case 27:var T=c.stateNode,x=ay(s);Rh(s,x,T);break;case 5:var D=c.stateNode;c.flags&32&&(Bi(D,""),c.flags&=-33);var B=ay(s);Rh(s,B,D);break;case 3:case 4:var ee=c.stateNode.containerInfo,fe=ay(s);ly(s,fe,ee);break;default:throw Error(i(161))}}catch(be){qt(s,s.return,be)}s.flags&=-3}a&4096&&(s.flags&=-4097)}function kx(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var a=s;kx(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),s=s.sibling}}function Js(s,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)Ax(s,a.alternate,a),a=a.sibling}function pa(s){for(s=s.child;s!==null;){var a=s;switch(a.tag){case 0:case 11:case 14:case 15:Ks(4,a,a.return),pa(a);break;case 1:Nr(a,a.return);var c=a.stateNode;typeof c.componentWillUnmount=="function"&&xx(a,a.return,c),pa(a);break;case 27:Jc(a.stateNode);case 26:case 5:Nr(a,a.return),pa(a);break;case 22:a.memoizedState===null&&pa(a);break;case 30:pa(a);break;default:pa(a)}s=s.sibling}}function Ys(s,a,c){for(c=c&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var p=a.alternate,T=s,x=a,D=x.flags;switch(x.tag){case 0:case 11:case 15:Ys(T,x,c),Fc(4,x);break;case 1:if(Ys(T,x,c),p=x,T=p.stateNode,typeof T.componentDidMount=="function")try{T.componentDidMount()}catch(fe){qt(p,p.return,fe)}if(p=x,T=p.updateQueue,T!==null){var B=p.stateNode;try{var ee=T.shared.hiddenCallbacks;if(ee!==null)for(T.shared.hiddenCallbacks=null,T=0;T<ee.length;T++)aw(ee[T],B)}catch(fe){qt(p,p.return,fe)}}c&&D&64&&wx(x),Bc(x,x.return);break;case 27:Sx(x);case 26:case 5:Ys(T,x,c),c&&p===null&&D&4&&Ex(x),Bc(x,x.return);break;case 12:Ys(T,x,c);break;case 13:Ys(T,x,c),c&&D&4&&Nx(T,x);break;case 22:x.memoizedState===null&&Ys(T,x,c),Bc(x,x.return);break;case 30:break;default:Ys(T,x,c)}a=a.sibling}}function dy(s,a){var c=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),s=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(s=a.memoizedState.cachePool.pool),s!==c&&(s!=null&&s.refCount++,c!=null&&Sc(c))}function fy(s,a){s=null,a.alternate!==null&&(s=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==s&&(a.refCount++,s!=null&&Sc(s))}function Pr(s,a,c,p){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)Dx(s,a,c,p),a=a.sibling}function Dx(s,a,c,p){var T=a.flags;switch(a.tag){case 0:case 11:case 15:Pr(s,a,c,p),T&2048&&Fc(9,a);break;case 1:Pr(s,a,c,p);break;case 3:Pr(s,a,c,p),T&2048&&(s=null,a.alternate!==null&&(s=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==s&&(a.refCount++,s!=null&&Sc(s)));break;case 12:if(T&2048){Pr(s,a,c,p),s=a.stateNode;try{var x=a.memoizedProps,D=x.id,B=x.onPostCommit;typeof B=="function"&&B(D,a.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(ee){qt(a,a.return,ee)}}else Pr(s,a,c,p);break;case 13:Pr(s,a,c,p);break;case 23:break;case 22:x=a.stateNode,D=a.alternate,a.memoizedState!==null?x._visibility&2?Pr(s,a,c,p):qc(s,a):x._visibility&2?Pr(s,a,c,p):(x._visibility|=2,Pl(s,a,c,p,(a.subtreeFlags&10256)!==0)),T&2048&&dy(D,a);break;case 24:Pr(s,a,c,p),T&2048&&fy(a.alternate,a);break;default:Pr(s,a,c,p)}}function Pl(s,a,c,p,T){for(T=T&&(a.subtreeFlags&10256)!==0,a=a.child;a!==null;){var x=s,D=a,B=c,ee=p,fe=D.flags;switch(D.tag){case 0:case 11:case 15:Pl(x,D,B,ee,T),Fc(8,D);break;case 23:break;case 22:var be=D.stateNode;D.memoizedState!==null?be._visibility&2?Pl(x,D,B,ee,T):qc(x,D):(be._visibility|=2,Pl(x,D,B,ee,T)),T&&fe&2048&&dy(D.alternate,D);break;case 24:Pl(x,D,B,ee,T),T&&fe&2048&&fy(D.alternate,D);break;default:Pl(x,D,B,ee,T)}a=a.sibling}}function qc(s,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var c=s,p=a,T=p.flags;switch(p.tag){case 22:qc(c,p),T&2048&&dy(p.alternate,p);break;case 24:qc(c,p),T&2048&&fy(p.alternate,p);break;default:qc(c,p)}a=a.sibling}}var zc=8192;function kl(s){if(s.subtreeFlags&zc)for(s=s.child;s!==null;)Mx(s),s=s.sibling}function Mx(s){switch(s.tag){case 26:kl(s),s.flags&zc&&s.memoizedState!==null&&Ik(lr,s.memoizedState,s.memoizedProps);break;case 5:kl(s);break;case 3:case 4:var a=lr;lr=zh(s.stateNode.containerInfo),kl(s),lr=a;break;case 22:s.memoizedState===null&&(a=s.alternate,a!==null&&a.memoizedState!==null?(a=zc,zc=16777216,kl(s),zc=a):kl(s));break;default:kl(s)}}function Vx(s){var a=s.alternate;if(a!==null&&(s=a.child,s!==null)){a.child=null;do a=s.sibling,s.sibling=null,s=a;while(s!==null)}}function jc(s){var a=s.deletions;if((s.flags&16)!==0){if(a!==null)for(var c=0;c<a.length;c++){var p=a[c];Vn=p,Lx(p,s)}Vx(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Ux(s),s=s.sibling}function Ux(s){switch(s.tag){case 0:case 11:case 15:jc(s),s.flags&2048&&Ks(9,s,s.return);break;case 3:jc(s);break;case 12:jc(s);break;case 22:var a=s.stateNode;s.memoizedState!==null&&a._visibility&2&&(s.return===null||s.return.tag!==13)?(a._visibility&=-3,Nh(s)):jc(s);break;default:jc(s)}}function Nh(s){var a=s.deletions;if((s.flags&16)!==0){if(a!==null)for(var c=0;c<a.length;c++){var p=a[c];Vn=p,Lx(p,s)}Vx(s)}for(s=s.child;s!==null;){switch(a=s,a.tag){case 0:case 11:case 15:Ks(8,a,a.return),Nh(a);break;case 22:c=a.stateNode,c._visibility&2&&(c._visibility&=-3,Nh(a));break;default:Nh(a)}s=s.sibling}}function Lx(s,a){for(;Vn!==null;){var c=Vn;switch(c.tag){case 0:case 11:case 15:Ks(8,c,a);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var p=c.memoizedState.cachePool.pool;p!=null&&p.refCount++}break;case 24:Sc(c.memoizedState.cache)}if(p=c.child,p!==null)p.return=c,Vn=p;else e:for(c=s;Vn!==null;){p=Vn;var T=p.sibling,x=p.return;if(Cx(p),p===c){Vn=null;break e}if(T!==null){T.return=x,Vn=T;break e}Vn=x}}}var zP={getCacheForType:function(s){var a=Qn(An),c=a.data.get(s);return c===void 0&&(c=s(),a.data.set(s,c)),c}},jP=typeof WeakMap=="function"?WeakMap:Map,kt=0,Gt=null,ft=null,xt=0,Dt=0,ki=null,Qs=!1,Dl=!1,hy=!1,Ts=0,an=0,Xs=0,ga=0,my=0,Ji=0,Ml=0,Gc=null,wi=null,py=!1,gy=0,Ph=1/0,kh=null,Zs=null,Gn=0,eo=null,Vl=null,Ul=0,yy=0,_y=null,Ox=null,Hc=0,vy=null;function Di(){if((kt&2)!==0&&xt!==0)return xt&-xt;if(te.T!==null){var s=El;return s!==0?s:Iy()}return Ii()}function Fx(){Ji===0&&(Ji=(xt&536870912)===0||Ct?Qe():536870912);var s=Ki.current;return s!==null&&(s.flags|=32),Ji}function Mi(s,a,c){(s===Gt&&(Dt===2||Dt===9)||s.cancelPendingCommit!==null)&&(Ll(s,0),to(s,xt,Ji,!1)),ot(s,c),((kt&2)===0||s!==Gt)&&(s===Gt&&((kt&2)===0&&(ga|=c),an===4&&to(s,xt,Ji,!1)),kr(s))}function Bx(s,a,c){if((kt&6)!==0)throw Error(i(327));var p=!c&&(a&124)===0&&(a&s.expiredLanes)===0||ir(s,a),T=p?$P(s,a):xy(s,a,!0),x=p;do{if(T===0){Dl&&!p&&to(s,a,0,!1);break}else{if(c=s.current.alternate,x&&!GP(c)){T=xy(s,a,!1),x=!1;continue}if(T===2){if(x=a,s.errorRecoveryDisabledLanes&x)var D=0;else D=s.pendingLanes&-536870913,D=D!==0?D:D&536870912?536870912:0;if(D!==0){a=D;e:{var B=s;T=Gc;var ee=B.current.memoizedState.isDehydrated;if(ee&&(Ll(B,D).flags|=256),D=xy(B,D,!1),D!==2){if(hy&&!ee){B.errorRecoveryDisabledLanes|=x,ga|=x,T=4;break e}x=wi,wi=T,x!==null&&(wi===null?wi=x:wi.push.apply(wi,x))}T=D}if(x=!1,T!==2)continue}}if(T===1){Ll(s,0),to(s,a,0,!0);break}e:{switch(p=s,x=T,x){case 0:case 1:throw Error(i(345));case 4:if((a&4194048)!==a)break;case 6:to(p,a,Ji,!Qs);break e;case 2:wi=null;break;case 3:case 5:break;default:throw Error(i(329))}if((a&62914560)===a&&(T=gy+300-$(),10<T)){if(to(p,a,Ji,!Qs),Pn(p,0,!0)!==0)break e;p.timeoutHandle=pE(qx.bind(null,p,c,wi,kh,py,a,Ji,ga,Ml,Qs,x,2,-0,0),T);break e}qx(p,c,wi,kh,py,a,Ji,ga,Ml,Qs,x,0,-0,0)}}break}while(!0);kr(s)}function qx(s,a,c,p,T,x,D,B,ee,fe,be,Ce,pe,ge){if(s.timeoutHandle=-1,Ce=a.subtreeFlags,(Ce&8192||(Ce&16785408)===16785408)&&(Xc={stylesheets:null,count:0,unsuspend:Sk},Mx(a),Ce=Ak(),Ce!==null)){s.cancelPendingCommit=Ce(Kx.bind(null,s,a,x,c,p,T,D,B,ee,be,1,pe,ge)),to(s,x,D,!fe);return}Kx(s,a,x,c,p,T,D,B,ee)}function GP(s){for(var a=s;;){var c=a.tag;if((c===0||c===11||c===15)&&a.flags&16384&&(c=a.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var p=0;p<c.length;p++){var T=c[p],x=T.getSnapshot;T=T.value;try{if(!Ci(x(),T))return!1}catch{return!1}}if(c=a.child,a.subtreeFlags&16384&&c!==null)c.return=a,a=c;else{if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function to(s,a,c,p){a&=~my,a&=~ga,s.suspendedLanes|=a,s.pingedLanes&=~a,p&&(s.warmLanes|=a),p=s.expirationTimes;for(var T=a;0<T;){var x=31-_t(T),D=1<<x;p[x]=-1,T&=~D}c!==0&&Wt(s,c,a)}function Dh(){return(kt&6)===0?($c(0),!1):!0}function Ty(){if(ft!==null){if(Dt===0)var s=ft.return;else s=ft,fs=ca=null,Lg(s),Rl=null,Uc=0,s=ft;for(;s!==null;)Tx(s.alternate,s),s=s.return;ft=null}}function Ll(s,a){var c=s.timeoutHandle;c!==-1&&(s.timeoutHandle=-1,lk(c)),c=s.cancelPendingCommit,c!==null&&(s.cancelPendingCommit=null,c()),Ty(),Gt=s,ft=c=us(s.current,null),xt=a,Dt=0,ki=null,Qs=!1,Dl=ir(s,a),hy=!1,Ml=Ji=my=ga=Xs=an=0,wi=Gc=null,py=!1,(a&8)!==0&&(a|=a&32);var p=s.entangledLanes;if(p!==0)for(s=s.entanglements,p&=a;0<p;){var T=31-_t(p),x=1<<T;a|=s[T],p&=~x}return Ts=a,th(),c}function zx(s,a){ct=null,te.H=Th,a===Ac||a===ch?(a=sw(),Dt=3):a===nw?(a=sw(),Dt=4):Dt=a===ox?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,ki=a,ft===null&&(an=1,Sh(s,Gi(a,s.current)))}function jx(){var s=te.H;return te.H=Th,s===null?Th:s}function Gx(){var s=te.A;return te.A=zP,s}function wy(){an=4,Qs||(xt&4194048)!==xt&&Ki.current!==null||(Dl=!0),(Xs&134217727)===0&&(ga&134217727)===0||Gt===null||to(Gt,xt,Ji,!1)}function xy(s,a,c){var p=kt;kt|=2;var T=jx(),x=Gx();(Gt!==s||xt!==a)&&(kh=null,Ll(s,a)),a=!1;var D=an;e:do try{if(Dt!==0&&ft!==null){var B=ft,ee=ki;switch(Dt){case 8:Ty(),D=6;break e;case 3:case 2:case 9:case 6:Ki.current===null&&(a=!0);var fe=Dt;if(Dt=0,ki=null,Ol(s,B,ee,fe),c&&Dl){D=0;break e}break;default:fe=Dt,Dt=0,ki=null,Ol(s,B,ee,fe)}}HP(),D=an;break}catch(be){zx(s,be)}while(!0);return a&&s.shellSuspendCounter++,fs=ca=null,kt=p,te.H=T,te.A=x,ft===null&&(Gt=null,xt=0,th()),D}function HP(){for(;ft!==null;)Hx(ft)}function $P(s,a){var c=kt;kt|=2;var p=jx(),T=Gx();Gt!==s||xt!==a?(kh=null,Ph=$()+500,Ll(s,a)):Dl=ir(s,a);e:do try{if(Dt!==0&&ft!==null){a=ft;var x=ki;t:switch(Dt){case 1:Dt=0,ki=null,Ol(s,a,x,1);break;case 2:case 9:if(iw(x)){Dt=0,ki=null,$x(a);break}a=function(){Dt!==2&&Dt!==9||Gt!==s||(Dt=7),kr(s)},x.then(a,a);break e;case 3:Dt=7;break e;case 4:Dt=5;break e;case 7:iw(x)?(Dt=0,ki=null,$x(a)):(Dt=0,ki=null,Ol(s,a,x,7));break;case 5:var D=null;switch(ft.tag){case 26:D=ft.memoizedState;case 5:case 27:var B=ft;if(!D||AE(D)){Dt=0,ki=null;var ee=B.sibling;if(ee!==null)ft=ee;else{var fe=B.return;fe!==null?(ft=fe,Mh(fe)):ft=null}break t}}Dt=0,ki=null,Ol(s,a,x,5);break;case 6:Dt=0,ki=null,Ol(s,a,x,6);break;case 8:Ty(),an=6;break e;default:throw Error(i(462))}}WP();break}catch(be){zx(s,be)}while(!0);return fs=ca=null,te.H=p,te.A=T,kt=c,ft!==null?0:(Gt=null,xt=0,th(),an)}function WP(){for(;ft!==null&&!xe();)Hx(ft)}function Hx(s){var a=_x(s.alternate,s,Ts);s.memoizedProps=s.pendingProps,a===null?Mh(s):ft=a}function $x(s){var a=s,c=a.alternate;switch(a.tag){case 15:case 0:a=fx(c,a,a.pendingProps,a.type,void 0,xt);break;case 11:a=fx(c,a,a.pendingProps,a.type.render,a.ref,xt);break;case 5:Lg(a);default:Tx(c,a),a=ft=WT(a,Ts),a=_x(c,a,Ts)}s.memoizedProps=s.pendingProps,a===null?Mh(s):ft=a}function Ol(s,a,c,p){fs=ca=null,Lg(a),Rl=null,Uc=0;var T=a.return;try{if(UP(s,T,a,c,xt)){an=1,Sh(s,Gi(c,s.current)),ft=null;return}}catch(x){if(T!==null)throw ft=T,x;an=1,Sh(s,Gi(c,s.current)),ft=null;return}a.flags&32768?(Ct||p===1?s=!0:Dl||(xt&536870912)!==0?s=!1:(Qs=s=!0,(p===2||p===9||p===3||p===6)&&(p=Ki.current,p!==null&&p.tag===13&&(p.flags|=16384))),Wx(a,s)):Mh(a)}function Mh(s){var a=s;do{if((a.flags&32768)!==0){Wx(a,Qs);return}s=a.return;var c=OP(a.alternate,a,Ts);if(c!==null){ft=c;return}if(a=a.sibling,a!==null){ft=a;return}ft=a=s}while(a!==null);an===0&&(an=5)}function Wx(s,a){do{var c=FP(s.alternate,s);if(c!==null){c.flags&=32767,ft=c;return}if(c=s.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!a&&(s=s.sibling,s!==null)){ft=s;return}ft=s=c}while(s!==null);an=6,ft=null}function Kx(s,a,c,p,T,x,D,B,ee){s.cancelPendingCommit=null;do Vh();while(Gn!==0);if((kt&6)!==0)throw Error(i(327));if(a!==null){if(a===s.current)throw Error(i(177));if(x=a.lanes|a.childLanes,x|=fg,vt(s,c,x,D,B,ee),s===Gt&&(ft=Gt=null,xt=0),Vl=a,eo=s,Ul=c,yy=x,_y=T,Ox=p,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,QP(Ae,function(){return Zx(),null})):(s.callbackNode=null,s.callbackPriority=0),p=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||p){p=te.T,te.T=null,T=X.p,X.p=2,D=kt,kt|=4;try{BP(s,a,c)}finally{kt=D,X.p=T,te.T=p}}Gn=1,Jx(),Yx(),Qx()}}function Jx(){if(Gn===1){Gn=0;var s=eo,a=Vl,c=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||c){c=te.T,te.T=null;var p=X.p;X.p=2;var T=kt;kt|=4;try{Px(a,s);var x=My,D=LT(s.containerInfo),B=x.focusedElem,ee=x.selectionRange;if(D!==B&&B&&B.ownerDocument&&UT(B.ownerDocument.documentElement,B)){if(ee!==null&&ag(B)){var fe=ee.start,be=ee.end;if(be===void 0&&(be=fe),"selectionStart"in B)B.selectionStart=fe,B.selectionEnd=Math.min(be,B.value.length);else{var Ce=B.ownerDocument||document,pe=Ce&&Ce.defaultView||window;if(pe.getSelection){var ge=pe.getSelection(),nt=B.textContent.length,et=Math.min(ee.start,nt),Ft=ee.end===void 0?et:Math.min(ee.end,nt);!ge.extend&&et>Ft&&(D=Ft,Ft=et,et=D);var oe=VT(B,et),ie=VT(B,Ft);if(oe&&ie&&(ge.rangeCount!==1||ge.anchorNode!==oe.node||ge.anchorOffset!==oe.offset||ge.focusNode!==ie.node||ge.focusOffset!==ie.offset)){var de=Ce.createRange();de.setStart(oe.node,oe.offset),ge.removeAllRanges(),et>Ft?(ge.addRange(de),ge.extend(ie.node,ie.offset)):(de.setEnd(ie.node,ie.offset),ge.addRange(de))}}}}for(Ce=[],ge=B;ge=ge.parentNode;)ge.nodeType===1&&Ce.push({element:ge,left:ge.scrollLeft,top:ge.scrollTop});for(typeof B.focus=="function"&&B.focus(),B=0;B<Ce.length;B++){var Ie=Ce[B];Ie.element.scrollLeft=Ie.left,Ie.element.scrollTop=Ie.top}}Wh=!!Dy,My=Dy=null}finally{kt=T,X.p=p,te.T=c}}s.current=a,Gn=2}}function Yx(){if(Gn===2){Gn=0;var s=eo,a=Vl,c=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||c){c=te.T,te.T=null;var p=X.p;X.p=2;var T=kt;kt|=4;try{Ax(s,a.alternate,a)}finally{kt=T,X.p=p,te.T=c}}Gn=3}}function Qx(){if(Gn===4||Gn===3){Gn=0,se();var s=eo,a=Vl,c=Ul,p=Ox;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?Gn=5:(Gn=0,Vl=eo=null,Xx(s,s.pendingLanes));var T=s.pendingLanes;if(T===0&&(Zs=null),rr(c),a=a.stateNode,Ke&&typeof Ke.onCommitFiberRoot=="function")try{Ke.onCommitFiberRoot(Oe,a,void 0,(a.current.flags&128)===128)}catch{}if(p!==null){a=te.T,T=X.p,X.p=2,te.T=null;try{for(var x=s.onRecoverableError,D=0;D<p.length;D++){var B=p[D];x(B.value,{componentStack:B.stack})}}finally{te.T=a,X.p=T}}(Ul&3)!==0&&Vh(),kr(s),T=s.pendingLanes,(c&4194090)!==0&&(T&42)!==0?s===vy?Hc++:(Hc=0,vy=s):Hc=0,$c(0)}}function Xx(s,a){(s.pooledCacheLanes&=a)===0&&(a=s.pooledCache,a!=null&&(s.pooledCache=null,Sc(a)))}function Vh(s){return Jx(),Yx(),Qx(),Zx()}function Zx(){if(Gn!==5)return!1;var s=eo,a=yy;yy=0;var c=rr(Ul),p=te.T,T=X.p;try{X.p=32>c?32:c,te.T=null,c=_y,_y=null;var x=eo,D=Ul;if(Gn=0,Vl=eo=null,Ul=0,(kt&6)!==0)throw Error(i(331));var B=kt;if(kt|=4,Ux(x.current),Dx(x,x.current,D,c),kt=B,$c(0,!1),Ke&&typeof Ke.onPostCommitFiberRoot=="function")try{Ke.onPostCommitFiberRoot(Oe,x)}catch{}return!0}finally{X.p=T,te.T=p,Xx(s,a)}}function eE(s,a,c){a=Gi(c,a),a=Qg(s.stateNode,a,2),s=Gs(s,a,2),s!==null&&(ot(s,2),kr(s))}function qt(s,a,c){if(s.tag===3)eE(s,s,c);else for(;a!==null;){if(a.tag===3){eE(a,s,c);break}else if(a.tag===1){var p=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(Zs===null||!Zs.has(p))){s=Gi(c,s),c=rx(2),p=Gs(a,c,2),p!==null&&(sx(c,p,a,s),ot(p,2),kr(p));break}}a=a.return}}function Ey(s,a,c){var p=s.pingCache;if(p===null){p=s.pingCache=new jP;var T=new Set;p.set(a,T)}else T=p.get(a),T===void 0&&(T=new Set,p.set(a,T));T.has(c)||(hy=!0,T.add(c),s=KP.bind(null,s,a,c),a.then(s,s))}function KP(s,a,c){var p=s.pingCache;p!==null&&p.delete(a),s.pingedLanes|=s.suspendedLanes&c,s.warmLanes&=~c,Gt===s&&(xt&c)===c&&(an===4||an===3&&(xt&62914560)===xt&&300>$()-gy?(kt&2)===0&&Ll(s,0):my|=c,Ml===xt&&(Ml=0)),kr(s)}function tE(s,a){a===0&&(a=qe()),s=vl(s,a),s!==null&&(ot(s,a),kr(s))}function JP(s){var a=s.memoizedState,c=0;a!==null&&(c=a.retryLane),tE(s,c)}function YP(s,a){var c=0;switch(s.tag){case 13:var p=s.stateNode,T=s.memoizedState;T!==null&&(c=T.retryLane);break;case 19:p=s.stateNode;break;case 22:p=s.stateNode._retryCache;break;default:throw Error(i(314))}p!==null&&p.delete(a),tE(s,c)}function QP(s,a){return Pt(s,a)}var Uh=null,Fl=null,by=!1,Lh=!1,Sy=!1,ya=0;function kr(s){s!==Fl&&s.next===null&&(Fl===null?Uh=Fl=s:Fl=Fl.next=s),Lh=!0,by||(by=!0,ZP())}function $c(s,a){if(!Sy&&Lh){Sy=!0;do for(var c=!1,p=Uh;p!==null;){if(s!==0){var T=p.pendingLanes;if(T===0)var x=0;else{var D=p.suspendedLanes,B=p.pingedLanes;x=(1<<31-_t(42|s)+1)-1,x&=T&~(D&~B),x=x&201326741?x&201326741|1:x?x|2:0}x!==0&&(c=!0,sE(p,x))}else x=xt,x=Pn(p,p===Gt?x:0,p.cancelPendingCommit!==null||p.timeoutHandle!==-1),(x&3)===0||ir(p,x)||(c=!0,sE(p,x));p=p.next}while(c);Sy=!1}}function XP(){nE()}function nE(){Lh=by=!1;var s=0;ya!==0&&(ak()&&(s=ya),ya=0);for(var a=$(),c=null,p=Uh;p!==null;){var T=p.next,x=iE(p,a);x===0?(p.next=null,c===null?Uh=T:c.next=T,T===null&&(Fl=c)):(c=p,(s!==0||(x&3)!==0)&&(Lh=!0)),p=T}$c(s)}function iE(s,a){for(var c=s.suspendedLanes,p=s.pingedLanes,T=s.expirationTimes,x=s.pendingLanes&-62914561;0<x;){var D=31-_t(x),B=1<<D,ee=T[D];ee===-1?((B&c)===0||(B&p)!==0)&&(T[D]=Se(B,a)):ee<=a&&(s.expiredLanes|=B),x&=~B}if(a=Gt,c=xt,c=Pn(s,s===a?c:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),p=s.callbackNode,c===0||s===a&&(Dt===2||Dt===9)||s.cancelPendingCommit!==null)return p!==null&&p!==null&&P(p),s.callbackNode=null,s.callbackPriority=0;if((c&3)===0||ir(s,c)){if(a=c&-c,a===s.callbackPriority)return a;switch(p!==null&&P(p),rr(c)){case 2:case 8:c=Ee;break;case 32:c=Ae;break;case 268435456:c=Ne;break;default:c=Ae}return p=rE.bind(null,s),c=Pt(c,p),s.callbackPriority=a,s.callbackNode=c,a}return p!==null&&p!==null&&P(p),s.callbackPriority=2,s.callbackNode=null,2}function rE(s,a){if(Gn!==0&&Gn!==5)return s.callbackNode=null,s.callbackPriority=0,null;var c=s.callbackNode;if(Vh()&&s.callbackNode!==c)return null;var p=xt;return p=Pn(s,s===Gt?p:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),p===0?null:(Bx(s,p,a),iE(s,$()),s.callbackNode!=null&&s.callbackNode===c?rE.bind(null,s):null)}function sE(s,a){if(Vh())return null;Bx(s,a,!0)}function ZP(){uk(function(){(kt&6)!==0?Pt(re,XP):nE()})}function Iy(){return ya===0&&(ya=Qe()),ya}function oE(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:al(""+s)}function aE(s,a){var c=a.ownerDocument.createElement("input");return c.name=a.name,c.value=a.value,s.id&&c.setAttribute("form",s.id),a.parentNode.insertBefore(c,a),s=new FormData(s),c.parentNode.removeChild(c),s}function ek(s,a,c,p,T){if(a==="submit"&&c&&c.stateNode===T){var x=oE((T[jt]||null).action),D=p.submitter;D&&(a=(a=D[jt]||null)?oE(a.formAction):D.getAttribute("formAction"),a!==null&&(x=a,D=null));var B=new ll("action","action",null,p,T);s.push({event:B,listeners:[{instance:null,listener:function(){if(p.defaultPrevented){if(ya!==0){var ee=D?aE(T,D):new FormData(T);$g(c,{pending:!0,data:ee,method:T.method,action:x},null,ee)}}else typeof x=="function"&&(B.preventDefault(),ee=D?aE(T,D):new FormData(T),$g(c,{pending:!0,data:ee,method:T.method,action:x},x,ee))},currentTarget:T}]})}}for(var Ay=0;Ay<dg.length;Ay++){var Cy=dg[Ay],tk=Cy.toLowerCase(),nk=Cy[0].toUpperCase()+Cy.slice(1);ar(tk,"on"+nk)}ar(BT,"onAnimationEnd"),ar(qT,"onAnimationIteration"),ar(zT,"onAnimationStart"),ar("dblclick","onDoubleClick"),ar("focusin","onFocus"),ar("focusout","onBlur"),ar(vP,"onTransitionRun"),ar(TP,"onTransitionStart"),ar(wP,"onTransitionCancel"),ar(jT,"onTransitionEnd"),es("onMouseEnter",["mouseout","mouseover"]),es("onMouseLeave",["mouseout","mouseover"]),es("onPointerEnter",["pointerout","pointerover"]),es("onPointerLeave",["pointerout","pointerover"]),sr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),sr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),sr("onBeforeInput",["compositionend","keypress","textInput","paste"]),sr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),sr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),sr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ik=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Wc));function lE(s,a){a=(a&4)!==0;for(var c=0;c<s.length;c++){var p=s[c],T=p.event;p=p.listeners;e:{var x=void 0;if(a)for(var D=p.length-1;0<=D;D--){var B=p[D],ee=B.instance,fe=B.currentTarget;if(B=B.listener,ee!==x&&T.isPropagationStopped())break e;x=B,T.currentTarget=fe;try{x(T)}catch(be){bh(be)}T.currentTarget=null,x=ee}else for(D=0;D<p.length;D++){if(B=p[D],ee=B.instance,fe=B.currentTarget,B=B.listener,ee!==x&&T.isPropagationStopped())break e;x=B,T.currentTarget=fe;try{x(T)}catch(be){bh(be)}T.currentTarget=null,x=ee}}}}function ht(s,a){var c=a[Xr];c===void 0&&(c=a[Xr]=new Set);var p=s+"__bubble";c.has(p)||(uE(a,s,2,!1),c.add(p))}function Ry(s,a,c){var p=0;a&&(p|=4),uE(c,s,p,a)}var Oh="_reactListening"+Math.random().toString(36).slice(2);function Ny(s){if(!s[Oh]){s[Oh]=!0,sc.forEach(function(c){c!=="selectionchange"&&(ik.has(c)||Ry(c,!1,s),Ry(c,!0,s))});var a=s.nodeType===9?s:s.ownerDocument;a===null||a[Oh]||(a[Oh]=!0,Ry("selectionchange",!1,a))}}function uE(s,a,c,p){switch(DE(a)){case 2:var T=Nk;break;case 8:T=Pk;break;default:T=Gy}c=T.bind(null,a,c,s),T=void 0,!zi||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(T=!0),p?T!==void 0?s.addEventListener(a,c,{capture:!0,passive:T}):s.addEventListener(a,c,!0):T!==void 0?s.addEventListener(a,c,{passive:T}):s.addEventListener(a,c,!1)}function Py(s,a,c,p,T){var x=p;if((a&1)===0&&(a&2)===0&&p!==null)e:for(;;){if(p===null)return;var D=p.tag;if(D===3||D===4){var B=p.stateNode.containerInfo;if(B===T)break;if(D===4)for(D=p.return;D!==null;){var ee=D.tag;if((ee===3||ee===4)&&D.stateNode.containerInfo===T)return;D=D.return}for(;B!==null;){if(D=Zr(B),D===null)return;if(ee=D.tag,ee===5||ee===6||ee===26||ee===27){p=x=D;continue e}B=B.parentNode}}p=p.return}Bf(function(){var fe=x,be=qi(c),Ce=[];e:{var pe=GT.get(s);if(pe!==void 0){var ge=ll,nt=s;switch(s){case"keypress":if(Er(c)===0)break e;case"keydown":case"keyup":ge=ml;break;case"focusin":nt="focus",ge=dl;break;case"focusout":nt="blur",ge=dl;break;case"beforeblur":case"afterblur":ge=dl;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ge=ji;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ge=ig;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ge=Kf;break;case BT:case qT:case zT:ge=fl;break;case jT:ge=Yf;break;case"scroll":case"scrollend":ge=qf;break;case"wheel":ge=pl;break;case"copy":case"cut":case"paste":ge=hl;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ge=yc;break;case"toggle":case"beforetoggle":ge=Xf}var et=(a&4)!==0,Ft=!et&&(s==="scroll"||s==="scrollend"),oe=et?pe!==null?pe+"Capture":null:pe;et=[];for(var ie=fe,de;ie!==null;){var Ie=ie;if(de=Ie.stateNode,Ie=Ie.tag,Ie!==5&&Ie!==26&&Ie!==27||de===null||oe===null||(Ie=Yo(ie,oe),Ie!=null&&et.push(Kc(ie,Ie,de))),Ft)break;ie=ie.return}0<et.length&&(pe=new ge(pe,nt,null,c,be),Ce.push({event:pe,listeners:et}))}}if((a&7)===0){e:{if(pe=s==="mouseover"||s==="pointerover",ge=s==="mouseout"||s==="pointerout",pe&&c!==is&&(nt=c.relatedTarget||c.fromElement)&&(Zr(nt)||nt[ui]))break e;if((ge||pe)&&(pe=be.window===be?be:(pe=be.ownerDocument)?pe.defaultView||pe.parentWindow:window,ge?(nt=c.relatedTarget||c.toElement,ge=fe,nt=nt?Zr(nt):null,nt!==null&&(Ft=o(nt),et=nt.tag,nt!==Ft||et!==5&&et!==27&&et!==6)&&(nt=null)):(ge=null,nt=fe),ge!==nt)){if(et=ji,Ie="onMouseLeave",oe="onMouseEnter",ie="mouse",(s==="pointerout"||s==="pointerover")&&(et=yc,Ie="onPointerLeave",oe="onPointerEnter",ie="pointer"),Ft=ge==null?pe:vr(ge),de=nt==null?pe:vr(nt),pe=new et(Ie,ie+"leave",ge,c,be),pe.target=Ft,pe.relatedTarget=de,Ie=null,Zr(be)===fe&&(et=new et(oe,ie+"enter",nt,c,be),et.target=de,et.relatedTarget=Ft,Ie=et),Ft=Ie,ge&&nt)t:{for(et=ge,oe=nt,ie=0,de=et;de;de=Bl(de))ie++;for(de=0,Ie=oe;Ie;Ie=Bl(Ie))de++;for(;0<ie-de;)et=Bl(et),ie--;for(;0<de-ie;)oe=Bl(oe),de--;for(;ie--;){if(et===oe||oe!==null&&et===oe.alternate)break t;et=Bl(et),oe=Bl(oe)}et=null}else et=null;ge!==null&&cE(Ce,pe,ge,et,!1),nt!==null&&Ft!==null&&cE(Ce,Ft,nt,et,!0)}}e:{if(pe=fe?vr(fe):window,ge=pe.nodeName&&pe.nodeName.toLowerCase(),ge==="select"||ge==="input"&&pe.type==="file")var He=RT;else if(In(pe))if(NT)He=gP;else{He=mP;var dt=hP}else ge=pe.nodeName,!ge||ge.toLowerCase()!=="input"||pe.type!=="checkbox"&&pe.type!=="radio"?fe&&cc(fe.elementType)&&(He=RT):He=pP;if(He&&(He=He(s,fe))){ls(Ce,He,c,be);break e}dt&&dt(s,pe,fe),s==="focusout"&&fe&&pe.type==="number"&&fe.memoizedProps.value!=null&&Fs(pe,"number",pe.value)}switch(dt=fe?vr(fe):window,s){case"focusin":(In(dt)||dt.contentEditable==="true")&&(gl=dt,lg=fe,Tc=null);break;case"focusout":Tc=lg=gl=null;break;case"mousedown":ug=!0;break;case"contextmenu":case"mouseup":case"dragend":ug=!1,OT(Ce,c,be);break;case"selectionchange":if(_P)break;case"keydown":case"keyup":OT(Ce,c,be)}var Ye;if(Ir)e:{switch(s){case"compositionstart":var tt="onCompositionStart";break e;case"compositionend":tt="onCompositionEnd";break e;case"compositionupdate":tt="onCompositionUpdate";break e}tt=void 0}else Tt?Te(s,c)&&(tt="onCompositionEnd"):s==="keydown"&&c.keyCode===229&&(tt="onCompositionStart");tt&&(N&&c.locale!=="ko"&&(Tt||tt!=="onCompositionStart"?tt==="onCompositionEnd"&&Tt&&(Ye=fc()):(xr=be,Bs="value"in xr?xr.value:xr.textContent,Tt=!0)),dt=Fh(fe,tt),0<dt.length&&(tt=new pc(tt,s,null,c,be),Ce.push({event:tt,listeners:dt}),Ye?tt.data=Ye:(Ye=Ue(c),Ye!==null&&(tt.data=Ye)))),(Ye=I?Sn(s,c):wt(s,c))&&(tt=Fh(fe,"onBeforeInput"),0<tt.length&&(dt=new pc("onBeforeInput","beforeinput",null,c,be),Ce.push({event:dt,listeners:tt}),dt.data=Ye)),ek(Ce,s,fe,c,be)}lE(Ce,a)})}function Kc(s,a,c){return{instance:s,listener:a,currentTarget:c}}function Fh(s,a){for(var c=a+"Capture",p=[];s!==null;){var T=s,x=T.stateNode;if(T=T.tag,T!==5&&T!==26&&T!==27||x===null||(T=Yo(s,c),T!=null&&p.unshift(Kc(s,T,x)),T=Yo(s,a),T!=null&&p.push(Kc(s,T,x))),s.tag===3)return p;s=s.return}return[]}function Bl(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function cE(s,a,c,p,T){for(var x=a._reactName,D=[];c!==null&&c!==p;){var B=c,ee=B.alternate,fe=B.stateNode;if(B=B.tag,ee!==null&&ee===p)break;B!==5&&B!==26&&B!==27||fe===null||(ee=fe,T?(fe=Yo(c,x),fe!=null&&D.unshift(Kc(c,fe,ee))):T||(fe=Yo(c,x),fe!=null&&D.push(Kc(c,fe,ee)))),c=c.return}D.length!==0&&s.push({event:a,listeners:D})}var rk=/\r\n?/g,sk=/\u0000|\uFFFD/g;function dE(s){return(typeof s=="string"?s:""+s).replace(rk,`
`).replace(sk,"")}function fE(s,a){return a=dE(a),dE(s)===a}function Bh(){}function Ot(s,a,c,p,T,x){switch(c){case"children":typeof p=="string"?a==="body"||a==="textarea"&&p===""||Bi(s,p):(typeof p=="number"||typeof p=="bigint")&&a!=="body"&&Bi(s,""+p);break;case"className":Tr(s,"class",p);break;case"tabIndex":Tr(s,"tabindex",p);break;case"dir":case"role":case"viewBox":case"width":case"height":Tr(s,c,p);break;case"style":uc(s,p,x);break;case"data":if(a!=="object"){Tr(s,"data",p);break}case"src":case"href":if(p===""&&(a!=="a"||c!=="href")){s.removeAttribute(c);break}if(p==null||typeof p=="function"||typeof p=="symbol"||typeof p=="boolean"){s.removeAttribute(c);break}p=al(""+p),s.setAttribute(c,p);break;case"action":case"formAction":if(typeof p=="function"){s.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof x=="function"&&(c==="formAction"?(a!=="input"&&Ot(s,a,"name",T.name,T,null),Ot(s,a,"formEncType",T.formEncType,T,null),Ot(s,a,"formMethod",T.formMethod,T,null),Ot(s,a,"formTarget",T.formTarget,T,null)):(Ot(s,a,"encType",T.encType,T,null),Ot(s,a,"method",T.method,T,null),Ot(s,a,"target",T.target,T,null)));if(p==null||typeof p=="symbol"||typeof p=="boolean"){s.removeAttribute(c);break}p=al(""+p),s.setAttribute(c,p);break;case"onClick":p!=null&&(s.onclick=Bh);break;case"onScroll":p!=null&&ht("scroll",s);break;case"onScrollEnd":p!=null&&ht("scrollend",s);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(i(61));if(c=p.__html,c!=null){if(T.children!=null)throw Error(i(60));s.innerHTML=c}}break;case"multiple":s.multiple=p&&typeof p!="function"&&typeof p!="symbol";break;case"muted":s.muted=p&&typeof p!="function"&&typeof p!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(p==null||typeof p=="function"||typeof p=="boolean"||typeof p=="symbol"){s.removeAttribute("xlink:href");break}c=al(""+p),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":p!=null&&typeof p!="function"&&typeof p!="symbol"?s.setAttribute(c,""+p):s.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":p&&typeof p!="function"&&typeof p!="symbol"?s.setAttribute(c,""):s.removeAttribute(c);break;case"capture":case"download":p===!0?s.setAttribute(c,""):p!==!1&&p!=null&&typeof p!="function"&&typeof p!="symbol"?s.setAttribute(c,p):s.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":p!=null&&typeof p!="function"&&typeof p!="symbol"&&!isNaN(p)&&1<=p?s.setAttribute(c,p):s.removeAttribute(c);break;case"rowSpan":case"start":p==null||typeof p=="function"||typeof p=="symbol"||isNaN(p)?s.removeAttribute(c):s.setAttribute(c,p);break;case"popover":ht("beforetoggle",s),ht("toggle",s),Os(s,"popover",p);break;case"xlinkActuate":qn(s,"http://www.w3.org/1999/xlink","xlink:actuate",p);break;case"xlinkArcrole":qn(s,"http://www.w3.org/1999/xlink","xlink:arcrole",p);break;case"xlinkRole":qn(s,"http://www.w3.org/1999/xlink","xlink:role",p);break;case"xlinkShow":qn(s,"http://www.w3.org/1999/xlink","xlink:show",p);break;case"xlinkTitle":qn(s,"http://www.w3.org/1999/xlink","xlink:title",p);break;case"xlinkType":qn(s,"http://www.w3.org/1999/xlink","xlink:type",p);break;case"xmlBase":qn(s,"http://www.w3.org/XML/1998/namespace","xml:base",p);break;case"xmlLang":qn(s,"http://www.w3.org/XML/1998/namespace","xml:lang",p);break;case"xmlSpace":qn(s,"http://www.w3.org/XML/1998/namespace","xml:space",p);break;case"is":Os(s,"is",p);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=tg.get(c)||c,Os(s,c,p))}}function ky(s,a,c,p,T,x){switch(c){case"style":uc(s,p,x);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(i(61));if(c=p.__html,c!=null){if(T.children!=null)throw Error(i(60));s.innerHTML=c}}break;case"children":typeof p=="string"?Bi(s,p):(typeof p=="number"||typeof p=="bigint")&&Bi(s,""+p);break;case"onScroll":p!=null&&ht("scroll",s);break;case"onScrollEnd":p!=null&&ht("scrollend",s);break;case"onClick":p!=null&&(s.onclick=Bh);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!nl.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(T=c.endsWith("Capture"),a=c.slice(2,T?c.length-7:void 0),x=s[jt]||null,x=x!=null?x[c]:null,typeof x=="function"&&s.removeEventListener(a,x,T),typeof p=="function")){typeof x!="function"&&x!==null&&(c in s?s[c]=null:s.hasAttribute(c)&&s.removeAttribute(c)),s.addEventListener(a,p,T);break e}c in s?s[c]=p:p===!0?s.setAttribute(c,""):Os(s,c,p)}}}function Hn(s,a,c){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ht("error",s),ht("load",s);var p=!1,T=!1,x;for(x in c)if(c.hasOwnProperty(x)){var D=c[x];if(D!=null)switch(x){case"src":p=!0;break;case"srcSet":T=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:Ot(s,a,x,D,c,null)}}T&&Ot(s,a,"srcSet",c.srcSet,c,null),p&&Ot(s,a,"src",c.src,c,null);return;case"input":ht("invalid",s);var B=x=D=T=null,ee=null,fe=null;for(p in c)if(c.hasOwnProperty(p)){var be=c[p];if(be!=null)switch(p){case"name":T=be;break;case"type":D=be;break;case"checked":ee=be;break;case"defaultChecked":fe=be;break;case"value":x=be;break;case"defaultValue":B=be;break;case"children":case"dangerouslySetInnerHTML":if(be!=null)throw Error(i(137,a));break;default:Ot(s,a,p,be,c,null)}}Wo(s,x,B,ee,fe,D,T,!1),ol(s);return;case"select":ht("invalid",s),p=D=x=null;for(T in c)if(c.hasOwnProperty(T)&&(B=c[T],B!=null))switch(T){case"value":x=B;break;case"defaultValue":D=B;break;case"multiple":p=B;default:Ot(s,a,T,B,c,null)}a=x,c=D,s.multiple=!!p,a!=null?ns(s,!!p,a,!1):c!=null&&ns(s,!!p,c,!0);return;case"textarea":ht("invalid",s),x=T=p=null;for(D in c)if(c.hasOwnProperty(D)&&(B=c[D],B!=null))switch(D){case"value":p=B;break;case"defaultValue":T=B;break;case"children":x=B;break;case"dangerouslySetInnerHTML":if(B!=null)throw Error(i(91));break;default:Ot(s,a,D,B,c,null)}Ko(s,p,T,x),ol(s);return;case"option":for(ee in c)if(c.hasOwnProperty(ee)&&(p=c[ee],p!=null))switch(ee){case"selected":s.selected=p&&typeof p!="function"&&typeof p!="symbol";break;default:Ot(s,a,ee,p,c,null)}return;case"dialog":ht("beforetoggle",s),ht("toggle",s),ht("cancel",s),ht("close",s);break;case"iframe":case"object":ht("load",s);break;case"video":case"audio":for(p=0;p<Wc.length;p++)ht(Wc[p],s);break;case"image":ht("error",s),ht("load",s);break;case"details":ht("toggle",s);break;case"embed":case"source":case"link":ht("error",s),ht("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(fe in c)if(c.hasOwnProperty(fe)&&(p=c[fe],p!=null))switch(fe){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:Ot(s,a,fe,p,c,null)}return;default:if(cc(a)){for(be in c)c.hasOwnProperty(be)&&(p=c[be],p!==void 0&&ky(s,a,be,p,c,void 0));return}}for(B in c)c.hasOwnProperty(B)&&(p=c[B],p!=null&&Ot(s,a,B,p,c,null))}function ok(s,a,c,p){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var T=null,x=null,D=null,B=null,ee=null,fe=null,be=null;for(ge in c){var Ce=c[ge];if(c.hasOwnProperty(ge)&&Ce!=null)switch(ge){case"checked":break;case"value":break;case"defaultValue":ee=Ce;default:p.hasOwnProperty(ge)||Ot(s,a,ge,null,p,Ce)}}for(var pe in p){var ge=p[pe];if(Ce=c[pe],p.hasOwnProperty(pe)&&(ge!=null||Ce!=null))switch(pe){case"type":x=ge;break;case"name":T=ge;break;case"checked":fe=ge;break;case"defaultChecked":be=ge;break;case"value":D=ge;break;case"defaultValue":B=ge;break;case"children":case"dangerouslySetInnerHTML":if(ge!=null)throw Error(i(137,a));break;default:ge!==Ce&&Ot(s,a,pe,ge,p,Ce)}}Ai(s,D,B,ee,fe,be,x,T);return;case"select":ge=D=B=pe=null;for(x in c)if(ee=c[x],c.hasOwnProperty(x)&&ee!=null)switch(x){case"value":break;case"multiple":ge=ee;default:p.hasOwnProperty(x)||Ot(s,a,x,null,p,ee)}for(T in p)if(x=p[T],ee=c[T],p.hasOwnProperty(T)&&(x!=null||ee!=null))switch(T){case"value":pe=x;break;case"defaultValue":B=x;break;case"multiple":D=x;default:x!==ee&&Ot(s,a,T,x,p,ee)}a=B,c=D,p=ge,pe!=null?ns(s,!!c,pe,!1):!!p!=!!c&&(a!=null?ns(s,!!c,a,!0):ns(s,!!c,c?[]:"",!1));return;case"textarea":ge=pe=null;for(B in c)if(T=c[B],c.hasOwnProperty(B)&&T!=null&&!p.hasOwnProperty(B))switch(B){case"value":break;case"children":break;default:Ot(s,a,B,null,p,T)}for(D in p)if(T=p[D],x=c[D],p.hasOwnProperty(D)&&(T!=null||x!=null))switch(D){case"value":pe=T;break;case"defaultValue":ge=T;break;case"children":break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(i(91));break;default:T!==x&&Ot(s,a,D,T,p,x)}Ut(s,pe,ge);return;case"option":for(var nt in c)if(pe=c[nt],c.hasOwnProperty(nt)&&pe!=null&&!p.hasOwnProperty(nt))switch(nt){case"selected":s.selected=!1;break;default:Ot(s,a,nt,null,p,pe)}for(ee in p)if(pe=p[ee],ge=c[ee],p.hasOwnProperty(ee)&&pe!==ge&&(pe!=null||ge!=null))switch(ee){case"selected":s.selected=pe&&typeof pe!="function"&&typeof pe!="symbol";break;default:Ot(s,a,ee,pe,p,ge)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var et in c)pe=c[et],c.hasOwnProperty(et)&&pe!=null&&!p.hasOwnProperty(et)&&Ot(s,a,et,null,p,pe);for(fe in p)if(pe=p[fe],ge=c[fe],p.hasOwnProperty(fe)&&pe!==ge&&(pe!=null||ge!=null))switch(fe){case"children":case"dangerouslySetInnerHTML":if(pe!=null)throw Error(i(137,a));break;default:Ot(s,a,fe,pe,p,ge)}return;default:if(cc(a)){for(var Ft in c)pe=c[Ft],c.hasOwnProperty(Ft)&&pe!==void 0&&!p.hasOwnProperty(Ft)&&ky(s,a,Ft,void 0,p,pe);for(be in p)pe=p[be],ge=c[be],!p.hasOwnProperty(be)||pe===ge||pe===void 0&&ge===void 0||ky(s,a,be,pe,p,ge);return}}for(var oe in c)pe=c[oe],c.hasOwnProperty(oe)&&pe!=null&&!p.hasOwnProperty(oe)&&Ot(s,a,oe,null,p,pe);for(Ce in p)pe=p[Ce],ge=c[Ce],!p.hasOwnProperty(Ce)||pe===ge||pe==null&&ge==null||Ot(s,a,Ce,pe,p,ge)}var Dy=null,My=null;function qh(s){return s.nodeType===9?s:s.ownerDocument}function hE(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function mE(s,a){if(s===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&a==="foreignObject"?0:s}function Vy(s,a){return s==="textarea"||s==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Uy=null;function ak(){var s=window.event;return s&&s.type==="popstate"?s===Uy?!1:(Uy=s,!0):(Uy=null,!1)}var pE=typeof setTimeout=="function"?setTimeout:void 0,lk=typeof clearTimeout=="function"?clearTimeout:void 0,gE=typeof Promise=="function"?Promise:void 0,uk=typeof queueMicrotask=="function"?queueMicrotask:typeof gE<"u"?function(s){return gE.resolve(null).then(s).catch(ck)}:pE;function ck(s){setTimeout(function(){throw s})}function no(s){return s==="head"}function yE(s,a){var c=a,p=0,T=0;do{var x=c.nextSibling;if(s.removeChild(c),x&&x.nodeType===8)if(c=x.data,c==="/$"){if(0<p&&8>p){c=p;var D=s.ownerDocument;if(c&1&&Jc(D.documentElement),c&2&&Jc(D.body),c&4)for(c=D.head,Jc(c),D=c.firstChild;D;){var B=D.nextSibling,ee=D.nodeName;D[jo]||ee==="SCRIPT"||ee==="STYLE"||ee==="LINK"&&D.rel.toLowerCase()==="stylesheet"||c.removeChild(D),D=B}}if(T===0){s.removeChild(x),id(a);return}T--}else c==="$"||c==="$?"||c==="$!"?T++:p=c.charCodeAt(0)-48;else p=0;c=x}while(c);id(a)}function Ly(s){var a=s.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var c=a;switch(a=a.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":Ly(c),Ls(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}s.removeChild(c)}}function dk(s,a,c,p){for(;s.nodeType===1;){var T=c;if(s.nodeName.toLowerCase()!==a.toLowerCase()){if(!p&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(p){if(!s[jo])switch(a){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(x=s.getAttribute("rel"),x==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(x!==T.rel||s.getAttribute("href")!==(T.href==null||T.href===""?null:T.href)||s.getAttribute("crossorigin")!==(T.crossOrigin==null?null:T.crossOrigin)||s.getAttribute("title")!==(T.title==null?null:T.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(x=s.getAttribute("src"),(x!==(T.src==null?null:T.src)||s.getAttribute("type")!==(T.type==null?null:T.type)||s.getAttribute("crossorigin")!==(T.crossOrigin==null?null:T.crossOrigin))&&x&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(a==="input"&&s.type==="hidden"){var x=T.name==null?null:""+T.name;if(T.type==="hidden"&&s.getAttribute("name")===x)return s}else return s;if(s=ur(s.nextSibling),s===null)break}return null}function fk(s,a,c){if(a==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!c||(s=ur(s.nextSibling),s===null))return null;return s}function Oy(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState==="complete"}function hk(s,a){var c=s.ownerDocument;if(s.data!=="$?"||c.readyState==="complete")a();else{var p=function(){a(),c.removeEventListener("DOMContentLoaded",p)};c.addEventListener("DOMContentLoaded",p),s._reactRetry=p}}function ur(s){for(;s!=null;s=s.nextSibling){var a=s.nodeType;if(a===1||a===3)break;if(a===8){if(a=s.data,a==="$"||a==="$!"||a==="$?"||a==="F!"||a==="F")break;if(a==="/$")return null}}return s}var Fy=null;function _E(s){s=s.previousSibling;for(var a=0;s;){if(s.nodeType===8){var c=s.data;if(c==="$"||c==="$!"||c==="$?"){if(a===0)return s;a--}else c==="/$"&&a++}s=s.previousSibling}return null}function vE(s,a,c){switch(a=qh(c),s){case"html":if(s=a.documentElement,!s)throw Error(i(452));return s;case"head":if(s=a.head,!s)throw Error(i(453));return s;case"body":if(s=a.body,!s)throw Error(i(454));return s;default:throw Error(i(451))}}function Jc(s){for(var a=s.attributes;a.length;)s.removeAttributeNode(a[0]);Ls(s)}var Yi=new Map,TE=new Set;function zh(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var ws=X.d;X.d={f:mk,r:pk,D:gk,C:yk,L:_k,m:vk,X:wk,S:Tk,M:xk};function mk(){var s=ws.f(),a=Dh();return s||a}function pk(s){var a=_r(s);a!==null&&a.tag===5&&a.type==="form"?Bw(a):ws.r(s)}var ql=typeof document>"u"?null:document;function wE(s,a,c){var p=ql;if(p&&typeof a=="string"&&a){var T=vn(a);T='link[rel="'+s+'"][href="'+T+'"]',typeof c=="string"&&(T+='[crossorigin="'+c+'"]'),TE.has(T)||(TE.add(T),s={rel:s,crossOrigin:c,href:a},p.querySelector(T)===null&&(a=p.createElement("link"),Hn(a,"link",s),fn(a),p.head.appendChild(a)))}}function gk(s){ws.D(s),wE("dns-prefetch",s,null)}function yk(s,a){ws.C(s,a),wE("preconnect",s,a)}function _k(s,a,c){ws.L(s,a,c);var p=ql;if(p&&s&&a){var T='link[rel="preload"][as="'+vn(a)+'"]';a==="image"&&c&&c.imageSrcSet?(T+='[imagesrcset="'+vn(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(T+='[imagesizes="'+vn(c.imageSizes)+'"]')):T+='[href="'+vn(s)+'"]';var x=T;switch(a){case"style":x=zl(s);break;case"script":x=jl(s)}Yi.has(x)||(s=y({rel:"preload",href:a==="image"&&c&&c.imageSrcSet?void 0:s,as:a},c),Yi.set(x,s),p.querySelector(T)!==null||a==="style"&&p.querySelector(Yc(x))||a==="script"&&p.querySelector(Qc(x))||(a=p.createElement("link"),Hn(a,"link",s),fn(a),p.head.appendChild(a)))}}function vk(s,a){ws.m(s,a);var c=ql;if(c&&s){var p=a&&typeof a.as=="string"?a.as:"script",T='link[rel="modulepreload"][as="'+vn(p)+'"][href="'+vn(s)+'"]',x=T;switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":x=jl(s)}if(!Yi.has(x)&&(s=y({rel:"modulepreload",href:s},a),Yi.set(x,s),c.querySelector(T)===null)){switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(Qc(x)))return}p=c.createElement("link"),Hn(p,"link",s),fn(p),c.head.appendChild(p)}}}function Tk(s,a,c){ws.S(s,a,c);var p=ql;if(p&&s){var T=ci(p).hoistableStyles,x=zl(s);a=a||"default";var D=T.get(x);if(!D){var B={loading:0,preload:null};if(D=p.querySelector(Yc(x)))B.loading=5;else{s=y({rel:"stylesheet",href:s,"data-precedence":a},c),(c=Yi.get(x))&&By(s,c);var ee=D=p.createElement("link");fn(ee),Hn(ee,"link",s),ee._p=new Promise(function(fe,be){ee.onload=fe,ee.onerror=be}),ee.addEventListener("load",function(){B.loading|=1}),ee.addEventListener("error",function(){B.loading|=2}),B.loading|=4,jh(D,a,p)}D={type:"stylesheet",instance:D,count:1,state:B},T.set(x,D)}}}function wk(s,a){ws.X(s,a);var c=ql;if(c&&s){var p=ci(c).hoistableScripts,T=jl(s),x=p.get(T);x||(x=c.querySelector(Qc(T)),x||(s=y({src:s,async:!0},a),(a=Yi.get(T))&&qy(s,a),x=c.createElement("script"),fn(x),Hn(x,"link",s),c.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},p.set(T,x))}}function xk(s,a){ws.M(s,a);var c=ql;if(c&&s){var p=ci(c).hoistableScripts,T=jl(s),x=p.get(T);x||(x=c.querySelector(Qc(T)),x||(s=y({src:s,async:!0,type:"module"},a),(a=Yi.get(T))&&qy(s,a),x=c.createElement("script"),fn(x),Hn(x,"link",s),c.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},p.set(T,x))}}function xE(s,a,c,p){var T=(T=ke.current)?zh(T):null;if(!T)throw Error(i(446));switch(s){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(a=zl(c.href),c=ci(T).hoistableStyles,p=c.get(a),p||(p={type:"style",instance:null,count:0,state:null},c.set(a,p)),p):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){s=zl(c.href);var x=ci(T).hoistableStyles,D=x.get(s);if(D||(T=T.ownerDocument||T,D={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},x.set(s,D),(x=T.querySelector(Yc(s)))&&!x._p&&(D.instance=x,D.state.loading=5),Yi.has(s)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},Yi.set(s,c),x||Ek(T,s,c,D.state))),a&&p===null)throw Error(i(528,""));return D}if(a&&p!==null)throw Error(i(529,""));return null;case"script":return a=c.async,c=c.src,typeof c=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=jl(c),c=ci(T).hoistableScripts,p=c.get(a),p||(p={type:"script",instance:null,count:0,state:null},c.set(a,p)),p):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,s))}}function zl(s){return'href="'+vn(s)+'"'}function Yc(s){return'link[rel="stylesheet"]['+s+"]"}function EE(s){return y({},s,{"data-precedence":s.precedence,precedence:null})}function Ek(s,a,c,p){s.querySelector('link[rel="preload"][as="style"]['+a+"]")?p.loading=1:(a=s.createElement("link"),p.preload=a,a.addEventListener("load",function(){return p.loading|=1}),a.addEventListener("error",function(){return p.loading|=2}),Hn(a,"link",c),fn(a),s.head.appendChild(a))}function jl(s){return'[src="'+vn(s)+'"]'}function Qc(s){return"script[async]"+s}function bE(s,a,c){if(a.count++,a.instance===null)switch(a.type){case"style":var p=s.querySelector('style[data-href~="'+vn(c.href)+'"]');if(p)return a.instance=p,fn(p),p;var T=y({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return p=(s.ownerDocument||s).createElement("style"),fn(p),Hn(p,"style",T),jh(p,c.precedence,s),a.instance=p;case"stylesheet":T=zl(c.href);var x=s.querySelector(Yc(T));if(x)return a.state.loading|=4,a.instance=x,fn(x),x;p=EE(c),(T=Yi.get(T))&&By(p,T),x=(s.ownerDocument||s).createElement("link"),fn(x);var D=x;return D._p=new Promise(function(B,ee){D.onload=B,D.onerror=ee}),Hn(x,"link",p),a.state.loading|=4,jh(x,c.precedence,s),a.instance=x;case"script":return x=jl(c.src),(T=s.querySelector(Qc(x)))?(a.instance=T,fn(T),T):(p=c,(T=Yi.get(x))&&(p=y({},c),qy(p,T)),s=s.ownerDocument||s,T=s.createElement("script"),fn(T),Hn(T,"link",p),s.head.appendChild(T),a.instance=T);case"void":return null;default:throw Error(i(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(p=a.instance,a.state.loading|=4,jh(p,c.precedence,s));return a.instance}function jh(s,a,c){for(var p=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),T=p.length?p[p.length-1]:null,x=T,D=0;D<p.length;D++){var B=p[D];if(B.dataset.precedence===a)x=B;else if(x!==T)break}x?x.parentNode.insertBefore(s,x.nextSibling):(a=c.nodeType===9?c.head:c,a.insertBefore(s,a.firstChild))}function By(s,a){s.crossOrigin==null&&(s.crossOrigin=a.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=a.referrerPolicy),s.title==null&&(s.title=a.title)}function qy(s,a){s.crossOrigin==null&&(s.crossOrigin=a.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=a.referrerPolicy),s.integrity==null&&(s.integrity=a.integrity)}var Gh=null;function SE(s,a,c){if(Gh===null){var p=new Map,T=Gh=new Map;T.set(c,p)}else T=Gh,p=T.get(c),p||(p=new Map,T.set(c,p));if(p.has(s))return p;for(p.set(s,null),c=c.getElementsByTagName(s),T=0;T<c.length;T++){var x=c[T];if(!(x[jo]||x[Yt]||s==="link"&&x.getAttribute("rel")==="stylesheet")&&x.namespaceURI!=="http://www.w3.org/2000/svg"){var D=x.getAttribute(a)||"";D=s+D;var B=p.get(D);B?B.push(x):p.set(D,[x])}}return p}function IE(s,a,c){s=s.ownerDocument||s,s.head.insertBefore(c,a==="title"?s.querySelector("head > title"):null)}function bk(s,a,c){if(c===1||a.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return s=a.disabled,typeof a.precedence=="string"&&s==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function AE(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}var Xc=null;function Sk(){}function Ik(s,a,c){if(Xc===null)throw Error(i(475));var p=Xc;if(a.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var T=zl(c.href),x=s.querySelector(Yc(T));if(x){s=x._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(p.count++,p=Hh.bind(p),s.then(p,p)),a.state.loading|=4,a.instance=x,fn(x);return}x=s.ownerDocument||s,c=EE(c),(T=Yi.get(T))&&By(c,T),x=x.createElement("link"),fn(x);var D=x;D._p=new Promise(function(B,ee){D.onload=B,D.onerror=ee}),Hn(x,"link",c),a.instance=x}p.stylesheets===null&&(p.stylesheets=new Map),p.stylesheets.set(a,s),(s=a.state.preload)&&(a.state.loading&3)===0&&(p.count++,a=Hh.bind(p),s.addEventListener("load",a),s.addEventListener("error",a))}}function Ak(){if(Xc===null)throw Error(i(475));var s=Xc;return s.stylesheets&&s.count===0&&zy(s,s.stylesheets),0<s.count?function(a){var c=setTimeout(function(){if(s.stylesheets&&zy(s,s.stylesheets),s.unsuspend){var p=s.unsuspend;s.unsuspend=null,p()}},6e4);return s.unsuspend=a,function(){s.unsuspend=null,clearTimeout(c)}}:null}function Hh(){if(this.count--,this.count===0){if(this.stylesheets)zy(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var $h=null;function zy(s,a){s.stylesheets=null,s.unsuspend!==null&&(s.count++,$h=new Map,a.forEach(Ck,s),$h=null,Hh.call(s))}function Ck(s,a){if(!(a.state.loading&4)){var c=$h.get(s);if(c)var p=c.get(null);else{c=new Map,$h.set(s,c);for(var T=s.querySelectorAll("link[data-precedence],style[data-precedence]"),x=0;x<T.length;x++){var D=T[x];(D.nodeName==="LINK"||D.getAttribute("media")!=="not all")&&(c.set(D.dataset.precedence,D),p=D)}p&&c.set(null,p)}T=a.instance,D=T.getAttribute("data-precedence"),x=c.get(D)||p,x===p&&c.set(null,T),c.set(D,T),this.count++,p=Hh.bind(this),T.addEventListener("load",p),T.addEventListener("error",p),x?x.parentNode.insertBefore(T,x.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(T,s.firstChild)),a.state.loading|=4}}var Zc={$$typeof:L,Provider:null,Consumer:null,_currentValue:_e,_currentValue2:_e,_threadCount:0};function Rk(s,a,c,p,T,x,D,B){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=je(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=je(0),this.hiddenUpdates=je(null),this.identifierPrefix=p,this.onUncaughtError=T,this.onCaughtError=x,this.onRecoverableError=D,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=B,this.incompleteTransitions=new Map}function CE(s,a,c,p,T,x,D,B,ee,fe,be,Ce){return s=new Rk(s,a,c,D,B,ee,fe,Ce),a=1,x===!0&&(a|=24),x=Ri(3,null,null,a),s.current=x,x.stateNode=s,a=Eg(),a.refCount++,s.pooledCache=a,a.refCount++,x.memoizedState={element:p,isDehydrated:c,cache:a},Ag(x),s}function RE(s){return s?(s=Tl,s):Tl}function NE(s,a,c,p,T,x){T=RE(T),p.context===null?p.context=T:p.pendingContext=T,p=js(a),p.payload={element:c},x=x===void 0?null:x,x!==null&&(p.callback=x),c=Gs(s,p,a),c!==null&&(Mi(c,s,a),Rc(c,s,a))}function PE(s,a){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var c=s.retryLane;s.retryLane=c!==0&&c<a?c:a}}function jy(s,a){PE(s,a),(s=s.alternate)&&PE(s,a)}function kE(s){if(s.tag===13){var a=vl(s,67108864);a!==null&&Mi(a,s,67108864),jy(s,67108864)}}var Wh=!0;function Nk(s,a,c,p){var T=te.T;te.T=null;var x=X.p;try{X.p=2,Gy(s,a,c,p)}finally{X.p=x,te.T=T}}function Pk(s,a,c,p){var T=te.T;te.T=null;var x=X.p;try{X.p=8,Gy(s,a,c,p)}finally{X.p=x,te.T=T}}function Gy(s,a,c,p){if(Wh){var T=Hy(p);if(T===null)Py(s,a,p,Kh,c),ME(s,p);else if(Dk(T,s,a,c,p))p.stopPropagation();else if(ME(s,p),a&4&&-1<kk.indexOf(s)){for(;T!==null;){var x=_r(T);if(x!==null)switch(x.tag){case 3:if(x=x.stateNode,x.current.memoizedState.isDehydrated){var D=Bn(x.pendingLanes);if(D!==0){var B=x;for(B.pendingLanes|=2,B.entangledLanes|=2;D;){var ee=1<<31-_t(D);B.entanglements[1]|=ee,D&=~ee}kr(x),(kt&6)===0&&(Ph=$()+500,$c(0))}}break;case 13:B=vl(x,2),B!==null&&Mi(B,x,2),Dh(),jy(x,2)}if(x=Hy(p),x===null&&Py(s,a,p,Kh,c),x===T)break;T=x}T!==null&&p.stopPropagation()}else Py(s,a,p,null,c)}}function Hy(s){return s=qi(s),$y(s)}var Kh=null;function $y(s){if(Kh=null,s=Zr(s),s!==null){var a=o(s);if(a===null)s=null;else{var c=a.tag;if(c===13){if(s=l(a),s!==null)return s;s=null}else if(c===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;s=null}else a!==s&&(s=null)}}return Kh=s,null}function DE(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(W()){case re:return 2;case Ee:return 8;case Ae:case ce:return 32;case Ne:return 268435456;default:return 32}default:return 32}}var Wy=!1,io=null,ro=null,so=null,ed=new Map,td=new Map,oo=[],kk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function ME(s,a){switch(s){case"focusin":case"focusout":io=null;break;case"dragenter":case"dragleave":ro=null;break;case"mouseover":case"mouseout":so=null;break;case"pointerover":case"pointerout":ed.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":td.delete(a.pointerId)}}function nd(s,a,c,p,T,x){return s===null||s.nativeEvent!==x?(s={blockedOn:a,domEventName:c,eventSystemFlags:p,nativeEvent:x,targetContainers:[T]},a!==null&&(a=_r(a),a!==null&&kE(a)),s):(s.eventSystemFlags|=p,a=s.targetContainers,T!==null&&a.indexOf(T)===-1&&a.push(T),s)}function Dk(s,a,c,p,T){switch(a){case"focusin":return io=nd(io,s,a,c,p,T),!0;case"dragenter":return ro=nd(ro,s,a,c,p,T),!0;case"mouseover":return so=nd(so,s,a,c,p,T),!0;case"pointerover":var x=T.pointerId;return ed.set(x,nd(ed.get(x)||null,s,a,c,p,T)),!0;case"gotpointercapture":return x=T.pointerId,td.set(x,nd(td.get(x)||null,s,a,c,p,T)),!0}return!1}function VE(s){var a=Zr(s.target);if(a!==null){var c=o(a);if(c!==null){if(a=c.tag,a===13){if(a=l(c),a!==null){s.blockedOn=a,Qr(s.priority,function(){if(c.tag===13){var p=Di();p=li(p);var T=vl(c,p);T!==null&&Mi(T,c,p),jy(c,p)}});return}}else if(a===3&&c.stateNode.current.memoizedState.isDehydrated){s.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Jh(s){if(s.blockedOn!==null)return!1;for(var a=s.targetContainers;0<a.length;){var c=Hy(s.nativeEvent);if(c===null){c=s.nativeEvent;var p=new c.constructor(c.type,c);is=p,c.target.dispatchEvent(p),is=null}else return a=_r(c),a!==null&&kE(a),s.blockedOn=c,!1;a.shift()}return!0}function UE(s,a,c){Jh(s)&&c.delete(a)}function Mk(){Wy=!1,io!==null&&Jh(io)&&(io=null),ro!==null&&Jh(ro)&&(ro=null),so!==null&&Jh(so)&&(so=null),ed.forEach(UE),td.forEach(UE)}function Yh(s,a){s.blockedOn===a&&(s.blockedOn=null,Wy||(Wy=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,Mk)))}var Qh=null;function LE(s){Qh!==s&&(Qh=s,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Qh===s&&(Qh=null);for(var a=0;a<s.length;a+=3){var c=s[a],p=s[a+1],T=s[a+2];if(typeof p!="function"){if($y(p||c)===null)continue;break}var x=_r(c);x!==null&&(s.splice(a,3),a-=3,$g(x,{pending:!0,data:T,method:c.method,action:p},p,T))}}))}function id(s){function a(ee){return Yh(ee,s)}io!==null&&Yh(io,s),ro!==null&&Yh(ro,s),so!==null&&Yh(so,s),ed.forEach(a),td.forEach(a);for(var c=0;c<oo.length;c++){var p=oo[c];p.blockedOn===s&&(p.blockedOn=null)}for(;0<oo.length&&(c=oo[0],c.blockedOn===null);)VE(c),c.blockedOn===null&&oo.shift();if(c=(s.ownerDocument||s).$$reactFormReplay,c!=null)for(p=0;p<c.length;p+=3){var T=c[p],x=c[p+1],D=T[jt]||null;if(typeof x=="function")D||LE(c);else if(D){var B=null;if(x&&x.hasAttribute("formAction")){if(T=x,D=x[jt]||null)B=D.formAction;else if($y(T)!==null)continue}else B=D.action;typeof B=="function"?c[p+1]=B:(c.splice(p,3),p-=3),LE(c)}}}function Ky(s){this._internalRoot=s}Xh.prototype.render=Ky.prototype.render=function(s){var a=this._internalRoot;if(a===null)throw Error(i(409));var c=a.current,p=Di();NE(c,p,s,a,null,null)},Xh.prototype.unmount=Ky.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var a=s.containerInfo;NE(s.current,2,null,s,null,null),Dh(),a[ui]=null}};function Xh(s){this._internalRoot=s}Xh.prototype.unstable_scheduleHydration=function(s){if(s){var a=Ii();s={blockedOn:null,target:s,priority:a};for(var c=0;c<oo.length&&a!==0&&a<oo[c].priority;c++);oo.splice(c,0,s),c===0&&VE(s)}};var OE=e.version;if(OE!=="19.1.1")throw Error(i(527,OE,"19.1.1"));X.findDOMNode=function(s){var a=s._reactInternals;if(a===void 0)throw typeof s.render=="function"?Error(i(188)):(s=Object.keys(s).join(","),Error(i(268,s)));return s=f(a),s=s!==null?m(s):null,s=s===null?null:s.stateNode,s};var Vk={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:te,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Zh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Zh.isDisabled&&Zh.supportsFiber)try{Oe=Zh.inject(Vk),Ke=Zh}catch{}}return sd.createRoot=function(s,a){if(!r(s))throw Error(i(299));var c=!1,p="",T=ex,x=tx,D=nx,B=null;return a!=null&&(a.unstable_strictMode===!0&&(c=!0),a.identifierPrefix!==void 0&&(p=a.identifierPrefix),a.onUncaughtError!==void 0&&(T=a.onUncaughtError),a.onCaughtError!==void 0&&(x=a.onCaughtError),a.onRecoverableError!==void 0&&(D=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(B=a.unstable_transitionCallbacks)),a=CE(s,1,!1,null,null,c,p,T,x,D,B,null),s[ui]=a.current,Ny(s),new Ky(a)},sd.hydrateRoot=function(s,a,c){if(!r(s))throw Error(i(299));var p=!1,T="",x=ex,D=tx,B=nx,ee=null,fe=null;return c!=null&&(c.unstable_strictMode===!0&&(p=!0),c.identifierPrefix!==void 0&&(T=c.identifierPrefix),c.onUncaughtError!==void 0&&(x=c.onUncaughtError),c.onCaughtError!==void 0&&(D=c.onCaughtError),c.onRecoverableError!==void 0&&(B=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&(ee=c.unstable_transitionCallbacks),c.formState!==void 0&&(fe=c.formState)),a=CE(s,1,!0,a,c??null,p,T,x,D,B,ee,fe),a.context=RE(null),c=a.current,p=Di(),p=li(p),T=js(p),T.callback=null,Gs(c,T,p),c=p,a.current.lanes=c,ot(a,c),kr(a),s[ui]=a.current,Ny(s),new Xh(a)},sd.version="19.1.1",sd}var KE;function Hk(){if(KE)return Qy.exports;KE=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Qy.exports=Gk(),Qy.exports}var Mv=Hk();const $k=kv(Mv),Wk=()=>{};var JE={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eC=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):(r&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},Kk=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const r=n[t++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const o=n[t++];e[i++]=String.fromCharCode((r&31)<<6|o&63)}else if(r>239&&r<365){const o=n[t++],l=n[t++],u=n[t++],f=((r&7)<<18|(o&63)<<12|(l&63)<<6|u&63)-65536;e[i++]=String.fromCharCode(55296+(f>>10)),e[i++]=String.fromCharCode(56320+(f&1023))}else{const o=n[t++],l=n[t++];e[i++]=String.fromCharCode((r&15)<<12|(o&63)<<6|l&63)}}return e.join("")},tC={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<n.length;r+=3){const o=n[r],l=r+1<n.length,u=l?n[r+1]:0,f=r+2<n.length,m=f?n[r+2]:0,y=o>>2,v=(o&3)<<4|u>>4;let w=(u&15)<<2|m>>6,E=m&63;f||(E=64,l||(w=64)),i.push(t[y],t[v],t[w],t[E])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(eC(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):Kk(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<n.length;){const o=t[n.charAt(r++)],u=r<n.length?t[n.charAt(r)]:0;++r;const m=r<n.length?t[n.charAt(r)]:64;++r;const v=r<n.length?t[n.charAt(r)]:64;if(++r,o==null||u==null||m==null||v==null)throw new Jk;const w=o<<2|u>>4;if(i.push(w),m!==64){const E=u<<4&240|m>>2;if(i.push(E),v!==64){const S=m<<6&192|v;i.push(S)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class Jk extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Yk=function(n){const e=eC(n);return tC.encodeByteArray(e,!0)},Dm=function(n){return Yk(n).replace(/\./g,"")},Vv=function(n){try{return tC.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Mm(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const t=e;return new Date(t.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!Qk(t)||(n[t]=Mm(n[t],e[t]));return n}function Qk(n){return n!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uv(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xk=()=>Uv().__FIREBASE_DEFAULTS__,Zk=()=>{if(typeof process>"u"||typeof JE>"u")return;const n=JE.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},eD=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Vv(n[1]);return e&&JSON.parse(e)},Lv=()=>{try{return Wk()||Xk()||Zk()||eD()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Ov=()=>{var n;return(n=Lv())==null?void 0:n.config},tD=n=>{var e;return(e=Lv())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nD{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fu(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function nC(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iD(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",r=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l={iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Dm(JSON.stringify(t)),Dm(JSON.stringify(l)),""].join(".")}const Ed={};function rD(){const n={prod:[],emulator:[]};for(const e of Object.keys(Ed))Ed[e]?n.emulator.push(e):n.prod.push(e);return n}function sD(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let YE=!1;function iC(n,e){if(typeof window>"u"||typeof document>"u"||!Fu(window.location.host)||Ed[n]===e||Ed[n]||YE)return;Ed[n]=e;function t(w){return`__firebase__banner__${w}`}const i="__firebase__banner",o=rD().prod.length>0;function l(){const w=document.getElementById(i);w&&w.remove()}function u(w){w.style.display="flex",w.style.background="#7faaf0",w.style.position="fixed",w.style.bottom="5px",w.style.left="5px",w.style.padding=".5em",w.style.borderRadius="5px",w.style.alignItems="center"}function f(w,E){w.setAttribute("width","24"),w.setAttribute("id",E),w.setAttribute("height","24"),w.setAttribute("viewBox","0 0 24 24"),w.setAttribute("fill","none"),w.style.marginLeft="-6px"}function m(){const w=document.createElement("span");return w.style.cursor="pointer",w.style.marginLeft="16px",w.style.fontSize="24px",w.innerHTML=" &times;",w.onclick=()=>{YE=!0,l()},w}function y(w,E){w.setAttribute("id",E),w.innerText="Learn more",w.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",w.setAttribute("target","__blank"),w.style.paddingLeft="5px",w.style.textDecoration="underline"}function v(){const w=sD(i),E=t("text"),S=document.getElementById(E)||document.createElement("span"),b=t("learnmore"),A=document.getElementById(b)||document.createElement("a"),C=t("preprendIcon"),R=document.getElementById(C)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(w.created){const L=w.element;u(L),y(A,b);const q=m();f(R,C),L.append(R,S,A,q),document.body.appendChild(L)}o?(S.innerText="Preview backend disconnected.",R.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(R.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,S.innerText="Preview backend running in this workspace."),S.setAttribute("id",E)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function oD(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(rn())}function fp(){var e;const n=(e=Lv())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function aD(){return typeof window<"u"||rC()}function rC(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function lD(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function sC(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function Fv(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function oC(){const n=rn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function aC(){return!fp()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function lC(){return!fp()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function Fd(){try{return typeof indexedDB=="object"}catch{return!1}}function uD(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},r.onupgradeneeded=()=>{t=!1},r.onerror=()=>{var o;e(((o=r.error)==null?void 0:o.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cD="FirebaseError";class gi extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=cD,Object.setPrototypeOf(this,gi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Wa.prototype.create)}}class Wa{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},r=`${this.service}/${e}`,o=this.errors[e],l=o?dD(o,i):"Error",u=`${this.serviceName}: ${l} (${r}).`;return new gi(r,u,i)}}function dD(n,e){return n.replace(fD,(t,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const fD=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QE(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function hD(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Eo(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const r of t){if(!i.includes(r))return!1;const o=n[r],l=e[r];if(XE(o)&&XE(l)){if(!Eo(o,l))return!1}else if(o!==l)return!1}for(const r of i)if(!t.includes(r))return!1;return!0}function XE(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bu(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function ru(n){const e={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[r,o]=i.split("=");e[decodeURIComponent(r)]=decodeURIComponent(o)}}),e}function gd(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function uC(n,e){const t=new mD(n,e);return t.subscribe.bind(t)}class mD{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let r;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");pD(e,["next","error","complete"])?r=e:r={next:e,error:t,complete:i},r.next===void 0&&(r.next=t_),r.error===void 0&&(r.error=t_),r.complete===void 0&&(r.complete=t_);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function pD(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function t_(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xe(n){return n&&n._delegate?n._delegate:n}class Hr{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const va="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gD{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new nD;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:t});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(r){if(i)return null;throw r}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(_D(e))try{this.getOrInitializeService({instanceIdentifier:va})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:r});i.resolve(o)}catch{}}}}clearInstance(e=va){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=va){return this.instances.has(e)}getOptions(e=va){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[o,l]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(o);i===u&&l.resolve(r)}return r}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),r=this.onInitCallbacks.get(i)??new Set;r.add(e),this.onInitCallbacks.set(i,r);const o=this.instances.get(i);return o&&e(o,i),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const r of i)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:yD(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=va){return this.component?this.component.multipleInstances?e:va:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function yD(n){return n===va?void 0:n}function _D(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cC{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new gD(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bv=[];var mt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(mt||(mt={}));const dC={debug:mt.DEBUG,verbose:mt.VERBOSE,info:mt.INFO,warn:mt.WARN,error:mt.ERROR,silent:mt.SILENT},vD=mt.INFO,TD={[mt.DEBUG]:"log",[mt.VERBOSE]:"log",[mt.INFO]:"info",[mt.WARN]:"warn",[mt.ERROR]:"error"},wD=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),r=TD[e];if(r)console[r](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class hp{constructor(e){this.name=e,this._logLevel=vD,this._logHandler=wD,this._userLogHandler=null,Bv.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in mt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?dC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,mt.DEBUG,...e),this._logHandler(this,mt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,mt.VERBOSE,...e),this._logHandler(this,mt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,mt.INFO,...e),this._logHandler(this,mt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,mt.WARN,...e),this._logHandler(this,mt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,mt.ERROR,...e),this._logHandler(this,mt.ERROR,...e)}}function xD(n){Bv.forEach(e=>{e.setLogLevel(n)})}function ED(n,e){for(const t of Bv){let i=null;e&&e.level&&(i=dC[e.level]),n===null?t.userLogHandler=null:t.userLogHandler=(r,o,...l)=>{const u=l.map(f=>{if(f==null)return null;if(typeof f=="string")return f;if(typeof f=="number"||typeof f=="boolean")return f.toString();if(f instanceof Error)return f.message;try{return JSON.stringify(f)}catch{return null}}).filter(f=>f).join(" ");o>=(i??r.logLevel)&&n({level:mt[o].toLowerCase(),message:u,args:l,type:r.name})}}}const bD=(n,e)=>e.some(t=>n instanceof t);let ZE,eb;function SD(){return ZE||(ZE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ID(){return eb||(eb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const fC=new WeakMap,P_=new WeakMap,hC=new WeakMap,n_=new WeakMap,qv=new WeakMap;function AD(n){const e=new Promise((t,i)=>{const r=()=>{n.removeEventListener("success",o),n.removeEventListener("error",l)},o=()=>{t(_o(n.result)),r()},l=()=>{i(n.error),r()};n.addEventListener("success",o),n.addEventListener("error",l)});return e.then(t=>{t instanceof IDBCursor&&fC.set(t,n)}).catch(()=>{}),qv.set(e,n),e}function CD(n){if(P_.has(n))return;const e=new Promise((t,i)=>{const r=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",l),n.removeEventListener("abort",l)},o=()=>{t(),r()},l=()=>{i(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",o),n.addEventListener("error",l),n.addEventListener("abort",l)});P_.set(n,e)}let k_={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return P_.get(n);if(e==="objectStoreNames")return n.objectStoreNames||hC.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return _o(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function RD(n){k_=n(k_)}function ND(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(i_(this),e,...t);return hC.set(i,e.sort?e.sort():[e]),_o(i)}:ID().includes(n)?function(...e){return n.apply(i_(this),e),_o(fC.get(this))}:function(...e){return _o(n.apply(i_(this),e))}}function PD(n){return typeof n=="function"?ND(n):(n instanceof IDBTransaction&&CD(n),bD(n,SD())?new Proxy(n,k_):n)}function _o(n){if(n instanceof IDBRequest)return AD(n);if(n_.has(n))return n_.get(n);const e=PD(n);return e!==n&&(n_.set(n,e),qv.set(e,n)),e}const i_=n=>qv.get(n);function kD(n,e,{blocked:t,upgrade:i,blocking:r,terminated:o}={}){const l=indexedDB.open(n,e),u=_o(l);return i&&l.addEventListener("upgradeneeded",f=>{i(_o(l.result),f.oldVersion,f.newVersion,_o(l.transaction),f)}),t&&l.addEventListener("blocked",f=>t(f.oldVersion,f.newVersion,f)),u.then(f=>{o&&f.addEventListener("close",()=>o()),r&&f.addEventListener("versionchange",m=>r(m.oldVersion,m.newVersion,m))}).catch(()=>{}),u}const DD=["get","getKey","getAll","getAllKeys","count"],MD=["put","add","delete","clear"],r_=new Map;function tb(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(r_.get(e))return r_.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,r=MD.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(r||DD.includes(t)))return;const o=async function(l,...u){const f=this.transaction(l,r?"readwrite":"readonly");let m=f.store;return i&&(m=m.index(u.shift())),(await Promise.all([m[t](...u),r&&f.done]))[0]};return r_.set(e,o),o}RD(n=>({...n,get:(e,t,i)=>tb(e,t)||n.get(e,t,i),has:(e,t)=>!!tb(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VD{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(UD(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function UD(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Vm="@firebase/app",D_="0.14.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Is=new hp("@firebase/app"),LD="@firebase/app-compat",OD="@firebase/analytics-compat",FD="@firebase/analytics",BD="@firebase/app-check-compat",qD="@firebase/app-check",zD="@firebase/auth",jD="@firebase/auth-compat",GD="@firebase/database",HD="@firebase/data-connect",$D="@firebase/database-compat",WD="@firebase/functions",KD="@firebase/functions-compat",JD="@firebase/installations",YD="@firebase/installations-compat",QD="@firebase/messaging",XD="@firebase/messaging-compat",ZD="@firebase/performance",eM="@firebase/performance-compat",tM="@firebase/remote-config",nM="@firebase/remote-config-compat",iM="@firebase/storage",rM="@firebase/storage-compat",sM="@firebase/firestore",oM="@firebase/ai",aM="@firebase/firestore-compat",lM="firebase",uM="12.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bo="[DEFAULT]",cM={[Vm]:"fire-core",[LD]:"fire-core-compat",[FD]:"fire-analytics",[OD]:"fire-analytics-compat",[qD]:"fire-app-check",[BD]:"fire-app-check-compat",[zD]:"fire-auth",[jD]:"fire-auth-compat",[GD]:"fire-rtdb",[HD]:"fire-data-connect",[$D]:"fire-rtdb-compat",[WD]:"fire-fn",[KD]:"fire-fn-compat",[JD]:"fire-iid",[YD]:"fire-iid-compat",[QD]:"fire-fcm",[XD]:"fire-fcm-compat",[ZD]:"fire-perf",[eM]:"fire-perf-compat",[tM]:"fire-rc",[nM]:"fire-rc-compat",[iM]:"fire-gcs",[rM]:"fire-gcs-compat",[sM]:"fire-fst",[aM]:"fire-fst-compat",[oM]:"fire-vertex","fire-js":"fire-js",[lM]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const So=new Map,pu=new Map,gu=new Map;function Bd(n,e){try{n.container.addComponent(e)}catch(t){Is.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function mC(n,e){n.container.addOrOverwriteComponent(e)}function Io(n){const e=n.name;if(gu.has(e))return Is.debug(`There were multiple attempts to register component ${e}.`),!1;gu.set(e,n);for(const t of So.values())Bd(t,n);for(const t of pu.values())Bd(t,n);return!0}function pC(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function dM(n,e,t=bo){pC(n,e).clearInstance(t)}function zv(n){return n.options!==void 0}function gC(n){return zv(n)?!1:"authIdToken"in n||"appCheckToken"in n||"releaseOnDeref"in n||"automaticDataCollectionEnabled"in n}function Zt(n){return n==null?!1:n.settings!==void 0}function fM(){gu.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hM={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Oi=new Wa("app","Firebase",hM);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yC=class{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Hr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Oi.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nb(n,e){const t=Vv(n.split(".")[1]);if(t===null){console.error(`FirebaseServerApp ${e} is invalid: second part could not be parsed.`);return}if(JSON.parse(t).exp===void 0){console.error(`FirebaseServerApp ${e} is invalid: expiration claim could not be parsed`);return}const r=JSON.parse(t).exp*1e3,o=new Date().getTime();r-o<=0&&console.error(`FirebaseServerApp ${e} is invalid: the token has expired.`)}class mM extends yC{constructor(e,t,i,r){const o=t.automaticDataCollectionEnabled!==void 0?t.automaticDataCollectionEnabled:!0,l={name:i,automaticDataCollectionEnabled:o};if(e.apiKey!==void 0)super(e,l,r);else{const u=e;super(u.options,l,r)}this._serverConfig={automaticDataCollectionEnabled:o,...t},this._serverConfig.authIdToken&&nb(this._serverConfig.authIdToken,"authIdToken"),this._serverConfig.appCheckToken&&nb(this._serverConfig.appCheckToken,"appCheckToken"),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,t.releaseOnDeref=void 0,fr(Vm,D_,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){Gv(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw Oi.create("server-app-deleted")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vo=uM;function jv(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i={name:bo,automaticDataCollectionEnabled:!0,...e},r=i.name;if(typeof r!="string"||!r)throw Oi.create("bad-app-name",{appName:String(r)});if(t||(t=Ov()),!t)throw Oi.create("no-options");const o=So.get(r);if(o){if(Eo(t,o.options)&&Eo(i,o.config))return o;throw Oi.create("duplicate-app",{appName:r})}const l=new cC(r);for(const f of gu.values())l.addComponent(f);const u=new yC(t,i,l);return So.set(r,u),u}function pM(n,e={}){if(aD()&&!rC())throw Oi.create("invalid-server-app-environment");let t,i=e||{};if(n&&(zv(n)?t=n.options:gC(n)?i=n:t=n),i.automaticDataCollectionEnabled===void 0&&(i.automaticDataCollectionEnabled=!0),t||(t=Ov()),!t)throw Oi.create("no-options");const r={...i,...t};r.releaseOnDeref!==void 0&&delete r.releaseOnDeref;const o=y=>[...y].reduce((v,w)=>Math.imul(31,v)+w.charCodeAt(0)|0,0);if(i.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw Oi.create("finalization-registry-not-supported",{});const l=""+o(JSON.stringify(r)),u=pu.get(l);if(u)return u.incRefCount(i.releaseOnDeref),u;const f=new cC(l);for(const y of gu.values())f.addComponent(y);const m=new mM(t,i,l,f);return pu.set(l,m),m}function gM(n=bo){const e=So.get(n);if(!e&&n===bo&&Ov())return jv();if(!e)throw Oi.create("no-app",{appName:n});return e}function yM(){return Array.from(So.values())}async function Gv(n){let e=!1;const t=n.name;So.has(t)?(e=!0,So.delete(t)):pu.has(t)&&n.decRefCount()<=0&&(pu.delete(t),e=!0),e&&(await Promise.all(n.container.getProviders().map(i=>i.delete())),n.isDeleted=!0)}function fr(n,e,t){let i=cM[n]??n;t&&(i+=`-${t}`);const r=i.match(/\s|\//),o=e.match(/\s|\//);if(r||o){const l=[`Unable to register library "${i}" with version "${e}":`];r&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),r&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Is.warn(l.join(" "));return}Io(new Hr(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}function _C(n,e){if(n!==null&&typeof n!="function")throw Oi.create("invalid-log-argument");ED(n,e)}function vC(n){xD(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _M="firebase-heartbeat-database",vM=1,qd="firebase-heartbeat-store";let s_=null;function TC(){return s_||(s_=kD(_M,vM,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(qd)}catch(t){console.warn(t)}}}}).catch(n=>{throw Oi.create("idb-open",{originalErrorMessage:n.message})})),s_}async function TM(n){try{const t=(await TC()).transaction(qd),i=await t.objectStore(qd).get(wC(n));return await t.done,i}catch(e){if(e instanceof gi)Is.warn(e.message);else{const t=Oi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Is.warn(t.message)}}}async function ib(n,e){try{const i=(await TC()).transaction(qd,"readwrite");await i.objectStore(qd).put(e,wC(n)),await i.done}catch(t){if(t instanceof gi)Is.warn(t.message);else{const i=Oi.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Is.warn(i.message)}}}function wC(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wM=1024,xM=30;class EM{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new SM(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=rb();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(l=>l.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:r}),this._heartbeatsCache.heartbeats.length>xM){const l=IM(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Is.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=rb(),{heartbeatsToSend:i,unsentEntries:r}=bM(this._heartbeatsCache.heartbeats),o=Dm(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return Is.warn(t),""}}}function rb(){return new Date().toISOString().substring(0,10)}function bM(n,e=wM){const t=[];let i=n.slice();for(const r of n){const o=t.find(l=>l.agent===r.agent);if(o){if(o.dates.push(r.date),sb(t)>e){o.dates.pop();break}}else if(t.push({agent:r.agent,dates:[r.date]}),sb(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class SM{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Fd()?uD().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await TM(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return ib(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return ib(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function sb(n){return Dm(JSON.stringify({version:2,heartbeats:n})).length}function IM(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AM(n){Io(new Hr("platform-logger",e=>new VD(e),"PRIVATE")),Io(new Hr("heartbeat",e=>new EM(e),"PRIVATE")),fr(Vm,D_,n),fr(Vm,D_,"esm2020"),fr("fire-js","")}AM("");const CM=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:gi,SDK_VERSION:Vo,_DEFAULT_ENTRY_NAME:bo,_addComponent:Bd,_addOrOverwriteComponent:mC,_apps:So,_clearComponents:fM,_components:gu,_getProvider:pC,_isFirebaseApp:zv,_isFirebaseServerApp:Zt,_isFirebaseServerAppSettings:gC,_registerComponent:Io,_removeServiceInstance:dM,_serverApps:pu,deleteApp:Gv,getApp:gM,getApps:yM,initializeApp:jv,initializeServerApp:pM,onLog:_C,registerVersion:fr,setLogLevel:vC},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RM{constructor(e,t){this._delegate=e,this.firebase=t,Bd(e,new Hr("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),Gv(this._delegate)))}_getService(e,t=bo){var r;this._delegate.checkDestroyed();const i=this._delegate.container.getProvider(e);return!i.isInitialized()&&((r=i.getComponent())==null?void 0:r.instantiationMode)==="EXPLICIT"&&i.initialize(),i.getImmediate({identifier:t})}_removeServiceInstance(e,t=bo){this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){Bd(this._delegate,e)}_addOrOverwriteComponent(e){mC(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NM={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},ob=new Wa("app-compat","Firebase",NM);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PM(n){const e={},t={__esModule:!0,initializeApp:o,app:r,registerVersion:fr,setLogLevel:vC,onLog:_C,apps:null,SDK_VERSION:Vo,INTERNAL:{registerComponent:u,removeApp:i,useAsService:f,modularAPIs:CM}};t.default=t,Object.defineProperty(t,"apps",{get:l});function i(m){delete e[m]}function r(m){if(m=m||bo,!QE(e,m))throw ob.create("no-app",{appName:m});return e[m]}r.App=n;function o(m,y={}){const v=jv(m,y);if(QE(e,v.name))return e[v.name];const w=new n(v,t);return e[v.name]=w,w}function l(){return Object.keys(e).map(m=>e[m])}function u(m){const y=m.name,v=y.replace("-compat","");if(Io(m)&&m.type==="PUBLIC"){const w=(E=r())=>{if(typeof E[v]!="function")throw ob.create("invalid-app-argument",{appName:y});return E[v]()};m.serviceProps!==void 0&&Mm(w,m.serviceProps),t[v]=w,n.prototype[v]=function(...E){return this._getService.bind(this,y).apply(this,m.multipleInstances?E:[])}}return m.type==="PUBLIC"?t[v]:null}function f(m,y){return y==="serverAuth"?null:y}return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xC(){const n=PM(RM);n.INTERNAL={...n.INTERNAL,createFirebaseNamespace:xC,extendNamespace:e,createSubscribe:uC,ErrorFactory:Wa,deepExtend:Mm};function e(t){Mm(n,t)}return n}const kM=xC();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ab=new hp("@firebase/app-compat"),DM="@firebase/app-compat",MM="0.5.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VM(n){fr(DM,MM,n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */try{const n=Uv();if(n.firebase!==void 0){ab.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);const e=n.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&ab.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}const Uo=kM;VM();var UM="firebase",LM="12.2.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Uo.registerVersion(UM,LM,"app-compat");var lb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var vo,EC;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(O,V){function U(){}U.prototype=V.prototype,O.D=V.prototype,O.prototype=new U,O.prototype.constructor=O,O.C=function(j,J,M){for(var F=Array(arguments.length-2),k=2;k<arguments.length;k++)F[k-2]=arguments[k];return V.prototype[J].apply(j,F)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(O,V,U){U||(U=0);var j=Array(16);if(typeof V=="string")for(var J=0;16>J;++J)j[J]=V.charCodeAt(U++)|V.charCodeAt(U++)<<8|V.charCodeAt(U++)<<16|V.charCodeAt(U++)<<24;else for(J=0;16>J;++J)j[J]=V[U++]|V[U++]<<8|V[U++]<<16|V[U++]<<24;V=O.g[0],U=O.g[1],J=O.g[2];var M=O.g[3],F=V+(M^U&(J^M))+j[0]+3614090360&4294967295;V=U+(F<<7&4294967295|F>>>25),F=M+(J^V&(U^J))+j[1]+3905402710&4294967295,M=V+(F<<12&4294967295|F>>>20),F=J+(U^M&(V^U))+j[2]+606105819&4294967295,J=M+(F<<17&4294967295|F>>>15),F=U+(V^J&(M^V))+j[3]+3250441966&4294967295,U=J+(F<<22&4294967295|F>>>10),F=V+(M^U&(J^M))+j[4]+4118548399&4294967295,V=U+(F<<7&4294967295|F>>>25),F=M+(J^V&(U^J))+j[5]+1200080426&4294967295,M=V+(F<<12&4294967295|F>>>20),F=J+(U^M&(V^U))+j[6]+2821735955&4294967295,J=M+(F<<17&4294967295|F>>>15),F=U+(V^J&(M^V))+j[7]+4249261313&4294967295,U=J+(F<<22&4294967295|F>>>10),F=V+(M^U&(J^M))+j[8]+1770035416&4294967295,V=U+(F<<7&4294967295|F>>>25),F=M+(J^V&(U^J))+j[9]+2336552879&4294967295,M=V+(F<<12&4294967295|F>>>20),F=J+(U^M&(V^U))+j[10]+4294925233&4294967295,J=M+(F<<17&4294967295|F>>>15),F=U+(V^J&(M^V))+j[11]+2304563134&4294967295,U=J+(F<<22&4294967295|F>>>10),F=V+(M^U&(J^M))+j[12]+1804603682&4294967295,V=U+(F<<7&4294967295|F>>>25),F=M+(J^V&(U^J))+j[13]+4254626195&4294967295,M=V+(F<<12&4294967295|F>>>20),F=J+(U^M&(V^U))+j[14]+2792965006&4294967295,J=M+(F<<17&4294967295|F>>>15),F=U+(V^J&(M^V))+j[15]+1236535329&4294967295,U=J+(F<<22&4294967295|F>>>10),F=V+(J^M&(U^J))+j[1]+4129170786&4294967295,V=U+(F<<5&4294967295|F>>>27),F=M+(U^J&(V^U))+j[6]+3225465664&4294967295,M=V+(F<<9&4294967295|F>>>23),F=J+(V^U&(M^V))+j[11]+643717713&4294967295,J=M+(F<<14&4294967295|F>>>18),F=U+(M^V&(J^M))+j[0]+3921069994&4294967295,U=J+(F<<20&4294967295|F>>>12),F=V+(J^M&(U^J))+j[5]+3593408605&4294967295,V=U+(F<<5&4294967295|F>>>27),F=M+(U^J&(V^U))+j[10]+38016083&4294967295,M=V+(F<<9&4294967295|F>>>23),F=J+(V^U&(M^V))+j[15]+3634488961&4294967295,J=M+(F<<14&4294967295|F>>>18),F=U+(M^V&(J^M))+j[4]+3889429448&4294967295,U=J+(F<<20&4294967295|F>>>12),F=V+(J^M&(U^J))+j[9]+568446438&4294967295,V=U+(F<<5&4294967295|F>>>27),F=M+(U^J&(V^U))+j[14]+3275163606&4294967295,M=V+(F<<9&4294967295|F>>>23),F=J+(V^U&(M^V))+j[3]+4107603335&4294967295,J=M+(F<<14&4294967295|F>>>18),F=U+(M^V&(J^M))+j[8]+1163531501&4294967295,U=J+(F<<20&4294967295|F>>>12),F=V+(J^M&(U^J))+j[13]+2850285829&4294967295,V=U+(F<<5&4294967295|F>>>27),F=M+(U^J&(V^U))+j[2]+4243563512&4294967295,M=V+(F<<9&4294967295|F>>>23),F=J+(V^U&(M^V))+j[7]+1735328473&4294967295,J=M+(F<<14&4294967295|F>>>18),F=U+(M^V&(J^M))+j[12]+2368359562&4294967295,U=J+(F<<20&4294967295|F>>>12),F=V+(U^J^M)+j[5]+4294588738&4294967295,V=U+(F<<4&4294967295|F>>>28),F=M+(V^U^J)+j[8]+2272392833&4294967295,M=V+(F<<11&4294967295|F>>>21),F=J+(M^V^U)+j[11]+1839030562&4294967295,J=M+(F<<16&4294967295|F>>>16),F=U+(J^M^V)+j[14]+4259657740&4294967295,U=J+(F<<23&4294967295|F>>>9),F=V+(U^J^M)+j[1]+2763975236&4294967295,V=U+(F<<4&4294967295|F>>>28),F=M+(V^U^J)+j[4]+1272893353&4294967295,M=V+(F<<11&4294967295|F>>>21),F=J+(M^V^U)+j[7]+4139469664&4294967295,J=M+(F<<16&4294967295|F>>>16),F=U+(J^M^V)+j[10]+3200236656&4294967295,U=J+(F<<23&4294967295|F>>>9),F=V+(U^J^M)+j[13]+681279174&4294967295,V=U+(F<<4&4294967295|F>>>28),F=M+(V^U^J)+j[0]+3936430074&4294967295,M=V+(F<<11&4294967295|F>>>21),F=J+(M^V^U)+j[3]+3572445317&4294967295,J=M+(F<<16&4294967295|F>>>16),F=U+(J^M^V)+j[6]+76029189&4294967295,U=J+(F<<23&4294967295|F>>>9),F=V+(U^J^M)+j[9]+3654602809&4294967295,V=U+(F<<4&4294967295|F>>>28),F=M+(V^U^J)+j[12]+3873151461&4294967295,M=V+(F<<11&4294967295|F>>>21),F=J+(M^V^U)+j[15]+530742520&4294967295,J=M+(F<<16&4294967295|F>>>16),F=U+(J^M^V)+j[2]+3299628645&4294967295,U=J+(F<<23&4294967295|F>>>9),F=V+(J^(U|~M))+j[0]+4096336452&4294967295,V=U+(F<<6&4294967295|F>>>26),F=M+(U^(V|~J))+j[7]+1126891415&4294967295,M=V+(F<<10&4294967295|F>>>22),F=J+(V^(M|~U))+j[14]+2878612391&4294967295,J=M+(F<<15&4294967295|F>>>17),F=U+(M^(J|~V))+j[5]+4237533241&4294967295,U=J+(F<<21&4294967295|F>>>11),F=V+(J^(U|~M))+j[12]+1700485571&4294967295,V=U+(F<<6&4294967295|F>>>26),F=M+(U^(V|~J))+j[3]+2399980690&4294967295,M=V+(F<<10&4294967295|F>>>22),F=J+(V^(M|~U))+j[10]+4293915773&4294967295,J=M+(F<<15&4294967295|F>>>17),F=U+(M^(J|~V))+j[1]+2240044497&4294967295,U=J+(F<<21&4294967295|F>>>11),F=V+(J^(U|~M))+j[8]+1873313359&4294967295,V=U+(F<<6&4294967295|F>>>26),F=M+(U^(V|~J))+j[15]+4264355552&4294967295,M=V+(F<<10&4294967295|F>>>22),F=J+(V^(M|~U))+j[6]+2734768916&4294967295,J=M+(F<<15&4294967295|F>>>17),F=U+(M^(J|~V))+j[13]+1309151649&4294967295,U=J+(F<<21&4294967295|F>>>11),F=V+(J^(U|~M))+j[4]+4149444226&4294967295,V=U+(F<<6&4294967295|F>>>26),F=M+(U^(V|~J))+j[11]+3174756917&4294967295,M=V+(F<<10&4294967295|F>>>22),F=J+(V^(M|~U))+j[2]+718787259&4294967295,J=M+(F<<15&4294967295|F>>>17),F=U+(M^(J|~V))+j[9]+3951481745&4294967295,O.g[0]=O.g[0]+V&4294967295,O.g[1]=O.g[1]+(J+(F<<21&4294967295|F>>>11))&4294967295,O.g[2]=O.g[2]+J&4294967295,O.g[3]=O.g[3]+M&4294967295}i.prototype.u=function(O,V){V===void 0&&(V=O.length);for(var U=V-this.blockSize,j=this.B,J=this.h,M=0;M<V;){if(J==0)for(;M<=U;)r(this,O,M),M+=this.blockSize;if(typeof O=="string"){for(;M<V;)if(j[J++]=O.charCodeAt(M++),J==this.blockSize){r(this,j),J=0;break}}else for(;M<V;)if(j[J++]=O[M++],J==this.blockSize){r(this,j),J=0;break}}this.h=J,this.o+=V},i.prototype.v=function(){var O=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);O[0]=128;for(var V=1;V<O.length-8;++V)O[V]=0;var U=8*this.o;for(V=O.length-8;V<O.length;++V)O[V]=U&255,U/=256;for(this.u(O),O=Array(16),V=U=0;4>V;++V)for(var j=0;32>j;j+=8)O[U++]=this.g[V]>>>j&255;return O};function o(O,V){var U=u;return Object.prototype.hasOwnProperty.call(U,O)?U[O]:U[O]=V(O)}function l(O,V){this.h=V;for(var U=[],j=!0,J=O.length-1;0<=J;J--){var M=O[J]|0;j&&M==V||(U[J]=M,j=!1)}this.g=U}var u={};function f(O){return-128<=O&&128>O?o(O,function(V){return new l([V|0],0>V?-1:0)}):new l([O|0],0>O?-1:0)}function m(O){if(isNaN(O)||!isFinite(O))return v;if(0>O)return A(m(-O));for(var V=[],U=1,j=0;O>=U;j++)V[j]=O/U|0,U*=4294967296;return new l(V,0)}function y(O,V){if(O.length==0)throw Error("number format error: empty string");if(V=V||10,2>V||36<V)throw Error("radix out of range: "+V);if(O.charAt(0)=="-")return A(y(O.substring(1),V));if(0<=O.indexOf("-"))throw Error('number format error: interior "-" character');for(var U=m(Math.pow(V,8)),j=v,J=0;J<O.length;J+=8){var M=Math.min(8,O.length-J),F=parseInt(O.substring(J,J+M),V);8>M?(M=m(Math.pow(V,M)),j=j.j(M).add(m(F))):(j=j.j(U),j=j.add(m(F)))}return j}var v=f(0),w=f(1),E=f(16777216);n=l.prototype,n.m=function(){if(b(this))return-A(this).m();for(var O=0,V=1,U=0;U<this.g.length;U++){var j=this.i(U);O+=(0<=j?j:4294967296+j)*V,V*=4294967296}return O},n.toString=function(O){if(O=O||10,2>O||36<O)throw Error("radix out of range: "+O);if(S(this))return"0";if(b(this))return"-"+A(this).toString(O);for(var V=m(Math.pow(O,6)),U=this,j="";;){var J=q(U,V).g;U=C(U,J.j(V));var M=((0<U.g.length?U.g[0]:U.h)>>>0).toString(O);if(U=J,S(U))return M+j;for(;6>M.length;)M="0"+M;j=M+j}},n.i=function(O){return 0>O?0:O<this.g.length?this.g[O]:this.h};function S(O){if(O.h!=0)return!1;for(var V=0;V<O.g.length;V++)if(O.g[V]!=0)return!1;return!0}function b(O){return O.h==-1}n.l=function(O){return O=C(this,O),b(O)?-1:S(O)?0:1};function A(O){for(var V=O.g.length,U=[],j=0;j<V;j++)U[j]=~O.g[j];return new l(U,~O.h).add(w)}n.abs=function(){return b(this)?A(this):this},n.add=function(O){for(var V=Math.max(this.g.length,O.g.length),U=[],j=0,J=0;J<=V;J++){var M=j+(this.i(J)&65535)+(O.i(J)&65535),F=(M>>>16)+(this.i(J)>>>16)+(O.i(J)>>>16);j=F>>>16,M&=65535,F&=65535,U[J]=F<<16|M}return new l(U,U[U.length-1]&-2147483648?-1:0)};function C(O,V){return O.add(A(V))}n.j=function(O){if(S(this)||S(O))return v;if(b(this))return b(O)?A(this).j(A(O)):A(A(this).j(O));if(b(O))return A(this.j(A(O)));if(0>this.l(E)&&0>O.l(E))return m(this.m()*O.m());for(var V=this.g.length+O.g.length,U=[],j=0;j<2*V;j++)U[j]=0;for(j=0;j<this.g.length;j++)for(var J=0;J<O.g.length;J++){var M=this.i(j)>>>16,F=this.i(j)&65535,k=O.i(J)>>>16,ne=O.i(J)&65535;U[2*j+2*J]+=F*ne,R(U,2*j+2*J),U[2*j+2*J+1]+=M*ne,R(U,2*j+2*J+1),U[2*j+2*J+1]+=F*k,R(U,2*j+2*J+1),U[2*j+2*J+2]+=M*k,R(U,2*j+2*J+2)}for(j=0;j<V;j++)U[j]=U[2*j+1]<<16|U[2*j];for(j=V;j<2*V;j++)U[j]=0;return new l(U,0)};function R(O,V){for(;(O[V]&65535)!=O[V];)O[V+1]+=O[V]>>>16,O[V]&=65535,V++}function L(O,V){this.g=O,this.h=V}function q(O,V){if(S(V))throw Error("division by zero");if(S(O))return new L(v,v);if(b(O))return V=q(A(O),V),new L(A(V.g),A(V.h));if(b(V))return V=q(O,A(V)),new L(A(V.g),V.h);if(30<O.g.length){if(b(O)||b(V))throw Error("slowDivide_ only works with positive integers.");for(var U=w,j=V;0>=j.l(O);)U=z(U),j=z(j);var J=H(U,1),M=H(j,1);for(j=H(j,2),U=H(U,2);!S(j);){var F=M.add(j);0>=F.l(O)&&(J=J.add(U),M=F),j=H(j,1),U=H(U,1)}return V=C(O,J.j(V)),new L(J,V)}for(J=v;0<=O.l(V);){for(U=Math.max(1,Math.floor(O.m()/V.m())),j=Math.ceil(Math.log(U)/Math.LN2),j=48>=j?1:Math.pow(2,j-48),M=m(U),F=M.j(V);b(F)||0<F.l(O);)U-=j,M=m(U),F=M.j(V);S(M)&&(M=w),J=J.add(M),O=C(O,F)}return new L(J,O)}n.A=function(O){return q(this,O).h},n.and=function(O){for(var V=Math.max(this.g.length,O.g.length),U=[],j=0;j<V;j++)U[j]=this.i(j)&O.i(j);return new l(U,this.h&O.h)},n.or=function(O){for(var V=Math.max(this.g.length,O.g.length),U=[],j=0;j<V;j++)U[j]=this.i(j)|O.i(j);return new l(U,this.h|O.h)},n.xor=function(O){for(var V=Math.max(this.g.length,O.g.length),U=[],j=0;j<V;j++)U[j]=this.i(j)^O.i(j);return new l(U,this.h^O.h)};function z(O){for(var V=O.g.length+1,U=[],j=0;j<V;j++)U[j]=O.i(j)<<1|O.i(j-1)>>>31;return new l(U,O.h)}function H(O,V){var U=V>>5;V%=32;for(var j=O.g.length-U,J=[],M=0;M<j;M++)J[M]=0<V?O.i(M+U)>>>V|O.i(M+U+1)<<32-V:O.i(M+U);return new l(J,O.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,EC=i,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.A,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=m,l.fromString=y,vo=l}).apply(typeof lb<"u"?lb:typeof self<"u"?self:typeof window<"u"?window:{});var tm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var bC,yd,SC,gm,M_,IC,AC,CC;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(_,I,N){return _==Array.prototype||_==Object.prototype||(_[I]=N.value),_};function t(_){_=[typeof globalThis=="object"&&globalThis,_,typeof window=="object"&&window,typeof self=="object"&&self,typeof tm=="object"&&tm];for(var I=0;I<_.length;++I){var N=_[I];if(N&&N.Math==Math)return N}throw Error("Cannot find global object")}var i=t(this);function r(_,I){if(I)e:{var N=i;_=_.split(".");for(var G=0;G<_.length-1;G++){var le=_[G];if(!(le in N))break e;N=N[le]}_=_[_.length-1],G=N[_],I=I(G),I!=G&&I!=null&&e(N,_,{configurable:!0,writable:!0,value:I})}}function o(_,I){_ instanceof String&&(_+="");var N=0,G=!1,le={next:function(){if(!G&&N<_.length){var Te=N++;return{value:I(Te,_[Te]),done:!1}}return G=!0,{done:!0,value:void 0}}};return le[Symbol.iterator]=function(){return le},le}r("Array.prototype.values",function(_){return _||function(){return o(this,function(I,N){return N})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},u=this||self;function f(_){var I=typeof _;return I=I!="object"?I:_?Array.isArray(_)?"array":I:"null",I=="array"||I=="object"&&typeof _.length=="number"}function m(_){var I=typeof _;return I=="object"&&_!=null||I=="function"}function y(_,I,N){return _.call.apply(_.bind,arguments)}function v(_,I,N){if(!_)throw Error();if(2<arguments.length){var G=Array.prototype.slice.call(arguments,2);return function(){var le=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(le,G),_.apply(I,le)}}return function(){return _.apply(I,arguments)}}function w(_,I,N){return w=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?y:v,w.apply(null,arguments)}function E(_,I){var N=Array.prototype.slice.call(arguments,1);return function(){var G=N.slice();return G.push.apply(G,arguments),_.apply(this,G)}}function S(_,I){function N(){}N.prototype=I.prototype,_.aa=I.prototype,_.prototype=new N,_.prototype.constructor=_,_.Qb=function(G,le,Te){for(var Ue=Array(arguments.length-2),Tt=2;Tt<arguments.length;Tt++)Ue[Tt-2]=arguments[Tt];return I.prototype[le].apply(G,Ue)}}function b(_){const I=_.length;if(0<I){const N=Array(I);for(let G=0;G<I;G++)N[G]=_[G];return N}return[]}function A(_,I){for(let N=1;N<arguments.length;N++){const G=arguments[N];if(f(G)){const le=_.length||0,Te=G.length||0;_.length=le+Te;for(let Ue=0;Ue<Te;Ue++)_[le+Ue]=G[Ue]}else _.push(G)}}class C{constructor(I,N){this.i=I,this.j=N,this.h=0,this.g=null}get(){let I;return 0<this.h?(this.h--,I=this.g,this.g=I.next,I.next=null):I=this.i(),I}}function R(_){return/^[\s\xa0]*$/.test(_)}function L(){var _=u.navigator;return _&&(_=_.userAgent)?_:""}function q(_){return q[" "](_),_}q[" "]=function(){};var z=L().indexOf("Gecko")!=-1&&!(L().toLowerCase().indexOf("webkit")!=-1&&L().indexOf("Edge")==-1)&&!(L().indexOf("Trident")!=-1||L().indexOf("MSIE")!=-1)&&L().indexOf("Edge")==-1;function H(_,I,N){for(const G in _)I.call(N,_[G],G,_)}function O(_,I){for(const N in _)I.call(void 0,_[N],N,_)}function V(_){const I={};for(const N in _)I[N]=_[N];return I}const U="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function j(_,I){let N,G;for(let le=1;le<arguments.length;le++){G=arguments[le];for(N in G)_[N]=G[N];for(let Te=0;Te<U.length;Te++)N=U[Te],Object.prototype.hasOwnProperty.call(G,N)&&(_[N]=G[N])}}function J(_){var I=1;_=_.split(":");const N=[];for(;0<I&&_.length;)N.push(_.shift()),I--;return _.length&&N.push(_.join(":")),N}function M(_){u.setTimeout(()=>{throw _},0)}function F(){var _=me;let I=null;return _.g&&(I=_.g,_.g=_.g.next,_.g||(_.h=null),I.next=null),I}class k{constructor(){this.h=this.g=null}add(I,N){const G=ne.get();G.set(I,N),this.h?this.h.next=G:this.g=G,this.h=G}}var ne=new C(()=>new te,_=>_.reset());class te{constructor(){this.next=this.g=this.h=null}set(I,N){this.h=I,this.g=N,this.next=null}reset(){this.next=this.g=this.h=null}}let X,_e=!1,me=new k,K=()=>{const _=u.Promise.resolve(void 0);X=()=>{_.then(Y)}};var Y=()=>{for(var _;_=F();){try{_.h.call(_.g)}catch(N){M(N)}var I=ne;I.j(_),100>I.h&&(I.h++,_.next=I.g,I.g=_)}_e=!1};function Z(){this.s=this.s,this.C=this.C}Z.prototype.s=!1,Z.prototype.ma=function(){this.s||(this.s=!0,this.N())},Z.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function he(_,I){this.type=_,this.g=this.target=I,this.defaultPrevented=!1}he.prototype.h=function(){this.defaultPrevented=!0};var ve=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var _=!1,I=Object.defineProperty({},"passive",{get:function(){_=!0}});try{const N=()=>{};u.addEventListener("test",N,I),u.removeEventListener("test",N,I)}catch{}return _})();function we(_,I){if(he.call(this,_?_.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,_){var N=this.type=_.type,G=_.changedTouches&&_.changedTouches.length?_.changedTouches[0]:null;if(this.target=_.target||_.srcElement,this.g=I,I=_.relatedTarget){if(z){e:{try{q(I.nodeName);var le=!0;break e}catch{}le=!1}le||(I=null)}}else N=="mouseover"?I=_.fromElement:N=="mouseout"&&(I=_.toElement);this.relatedTarget=I,G?(this.clientX=G.clientX!==void 0?G.clientX:G.pageX,this.clientY=G.clientY!==void 0?G.clientY:G.pageY,this.screenX=G.screenX||0,this.screenY=G.screenY||0):(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0),this.button=_.button,this.key=_.key||"",this.ctrlKey=_.ctrlKey,this.altKey=_.altKey,this.shiftKey=_.shiftKey,this.metaKey=_.metaKey,this.pointerId=_.pointerId||0,this.pointerType=typeof _.pointerType=="string"?_.pointerType:ke[_.pointerType]||"",this.state=_.state,this.i=_,_.defaultPrevented&&we.aa.h.call(this)}}S(we,he);var ke={2:"touch",3:"pen",4:"mouse"};we.prototype.h=function(){we.aa.h.call(this);var _=this.i;_.preventDefault?_.preventDefault():_.returnValue=!1};var it="closure_listenable_"+(1e6*Math.random()|0),Me=0;function st(_,I,N,G,le){this.listener=_,this.proxy=null,this.src=I,this.type=N,this.capture=!!G,this.ha=le,this.key=++Me,this.da=this.fa=!1}function yt(_){_.da=!0,_.listener=null,_.proxy=null,_.src=null,_.ha=null}function Ze(_){this.src=_,this.g={},this.h=0}Ze.prototype.add=function(_,I,N,G,le){var Te=_.toString();_=this.g[Te],_||(_=this.g[Te]=[],this.h++);var Ue=Pt(_,I,G,le);return-1<Ue?(I=_[Ue],N||(I.fa=!1)):(I=new st(I,this.src,Te,!!G,le),I.fa=N,_.push(I)),I};function Bt(_,I){var N=I.type;if(N in _.g){var G=_.g[N],le=Array.prototype.indexOf.call(G,I,void 0),Te;(Te=0<=le)&&Array.prototype.splice.call(G,le,1),Te&&(yt(I),_.g[N].length==0&&(delete _.g[N],_.h--))}}function Pt(_,I,N,G){for(var le=0;le<_.length;++le){var Te=_[le];if(!Te.da&&Te.listener==I&&Te.capture==!!N&&Te.ha==G)return le}return-1}var P="closure_lm_"+(1e6*Math.random()|0),xe={};function se(_,I,N,G,le){if(Array.isArray(I)){for(var Te=0;Te<I.length;Te++)se(_,I[Te],N,G,le);return null}return N=Ve(N),_&&_[it]?_.K(I,N,m(G)?!!G.capture:!1,le):$(_,I,N,!1,G,le)}function $(_,I,N,G,le,Te){if(!I)throw Error("Invalid event type");var Ue=m(le)?!!le.capture:!!le,Tt=Ne(_);if(Tt||(_[P]=Tt=new Ze(_)),N=Tt.add(I,N,G,Ue,Te),N.proxy)return N;if(G=W(),N.proxy=G,G.src=_,G.listener=N,_.addEventListener)ve||(le=Ue),le===void 0&&(le=!1),_.addEventListener(I.toString(),G,le);else if(_.attachEvent)_.attachEvent(Ae(I.toString()),G);else if(_.addListener&&_.removeListener)_.addListener(G);else throw Error("addEventListener and attachEvent are unavailable.");return N}function W(){function _(N){return I.call(_.src,_.listener,N)}const I=ce;return _}function re(_,I,N,G,le){if(Array.isArray(I))for(var Te=0;Te<I.length;Te++)re(_,I[Te],N,G,le);else G=m(G)?!!G.capture:!!G,N=Ve(N),_&&_[it]?(_=_.i,I=String(I).toString(),I in _.g&&(Te=_.g[I],N=Pt(Te,N,G,le),-1<N&&(yt(Te[N]),Array.prototype.splice.call(Te,N,1),Te.length==0&&(delete _.g[I],_.h--)))):_&&(_=Ne(_))&&(I=_.g[I.toString()],_=-1,I&&(_=Pt(I,N,G,le)),(N=-1<_?I[_]:null)&&Ee(N))}function Ee(_){if(typeof _!="number"&&_&&!_.da){var I=_.src;if(I&&I[it])Bt(I.i,_);else{var N=_.type,G=_.proxy;I.removeEventListener?I.removeEventListener(N,G,_.capture):I.detachEvent?I.detachEvent(Ae(N),G):I.addListener&&I.removeListener&&I.removeListener(G),(N=Ne(I))?(Bt(N,_),N.h==0&&(N.src=null,I[P]=null)):yt(_)}}}function Ae(_){return _ in xe?xe[_]:xe[_]="on"+_}function ce(_,I){if(_.da)_=!0;else{I=new we(I,this);var N=_.listener,G=_.ha||_.src;_.fa&&Ee(_),_=N.call(G,I)}return _}function Ne(_){return _=_[P],_ instanceof Ze?_:null}var Fe="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ve(_){return typeof _=="function"?_:(_[Fe]||(_[Fe]=function(I){return _.handleEvent(I)}),_[Fe])}function Oe(){Z.call(this),this.i=new Ze(this),this.M=this,this.F=null}S(Oe,Z),Oe.prototype[it]=!0,Oe.prototype.removeEventListener=function(_,I,N,G){re(this,_,I,N,G)};function Ke(_,I){var N,G=_.F;if(G)for(N=[];G;G=G.F)N.push(G);if(_=_.M,G=I.type||I,typeof I=="string")I=new he(I,_);else if(I instanceof he)I.target=I.target||_;else{var le=I;I=new he(G,_),j(I,le)}if(le=!0,N)for(var Te=N.length-1;0<=Te;Te--){var Ue=I.g=N[Te];le=We(Ue,G,!0,I)&&le}if(Ue=I.g=_,le=We(Ue,G,!0,I)&&le,le=We(Ue,G,!1,I)&&le,N)for(Te=0;Te<N.length;Te++)Ue=I.g=N[Te],le=We(Ue,G,!1,I)&&le}Oe.prototype.N=function(){if(Oe.aa.N.call(this),this.i){var _=this.i,I;for(I in _.g){for(var N=_.g[I],G=0;G<N.length;G++)yt(N[G]);delete _.g[I],_.h--}}this.F=null},Oe.prototype.K=function(_,I,N,G){return this.i.add(String(_),I,!1,N,G)},Oe.prototype.L=function(_,I,N,G){return this.i.add(String(_),I,!0,N,G)};function We(_,I,N,G){if(I=_.i.g[String(I)],!I)return!0;I=I.concat();for(var le=!0,Te=0;Te<I.length;++Te){var Ue=I[Te];if(Ue&&!Ue.da&&Ue.capture==N){var Tt=Ue.listener,Sn=Ue.ha||Ue.src;Ue.fa&&Bt(_.i,Ue),le=Tt.call(Sn,G)!==!1&&le}}return le&&!G.defaultPrevented}function _t(_,I,N){if(typeof _=="function")N&&(_=w(_,N));else if(_&&typeof _.handleEvent=="function")_=w(_.handleEvent,_);else throw Error("Invalid listener argument");return 2147483647<Number(I)?-1:u.setTimeout(_,I||0)}function si(_){_.g=_t(()=>{_.g=null,_.i&&(_.i=!1,si(_))},_.l);const I=_.h;_.h=null,_.m.apply(null,I)}class Yn extends Z{constructor(I,N){super(),this.m=I,this.l=N,this.h=null,this.i=!1,this.g=null}j(I){this.h=arguments,this.g?this.i=!0:si(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function oi(_){Z.call(this),this.h=_,this.g={}}S(oi,Z);var At=[];function ai(_){H(_.g,function(I,N){this.g.hasOwnProperty(N)&&Ee(I)},_),_.g={}}oi.prototype.N=function(){oi.aa.N.call(this),ai(this)},oi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Bn=u.JSON.stringify,Pn=u.JSON.parse,ir=class{stringify(_){return u.JSON.stringify(_,void 0)}parse(_){return u.JSON.parse(_,void 0)}};function Se(){}Se.prototype.h=null;function Qe(_){return _.h||(_.h=_.i())}function qe(){}var je={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ot(){he.call(this,"d")}S(ot,he);function vt(){he.call(this,"c")}S(vt,he);var Wt={},_n=null;function li(){return _n=_n||new Oe}Wt.La="serverreachability";function rr(_){he.call(this,Wt.La,_)}S(rr,he);function Ii(_){const I=li();Ke(I,new rr(I))}Wt.STAT_EVENT="statevent";function Qr(_,I){he.call(this,Wt.STAT_EVENT,_),this.stat=I}S(Qr,he);function ut(_){const I=li();Ke(I,new Qr(I,_))}Wt.Ma="timingevent";function Yt(_,I){he.call(this,Wt.Ma,_),this.size=I}S(Yt,he);function jt(_,I){if(typeof _!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){_()},I)}function ui(){this.g=!0}ui.prototype.xa=function(){this.g=!1};function Xr(_,I,N,G,le,Te){_.info(function(){if(_.g)if(Te)for(var Ue="",Tt=Te.split("&"),Sn=0;Sn<Tt.length;Sn++){var wt=Tt[Sn].split("=");if(1<wt.length){var Dn=wt[0];wt=wt[1];var In=Dn.split("_");Ue=2<=In.length&&In[1]=="type"?Ue+(Dn+"="+wt+"&"):Ue+(Dn+"=redacted&")}}else Ue=null;else Ue=Te;return"XMLHTTP REQ ("+G+") [attempt "+le+"]: "+I+`
`+N+`
`+Ue})}function rc(_,I,N,G,le,Te,Ue){_.info(function(){return"XMLHTTP RESP ("+G+") [ attempt "+le+"]: "+I+`
`+N+`
`+Te+" "+Ue})}function yr(_,I,N,G){_.info(function(){return"XMLHTTP TEXT ("+I+"): "+jo(_,N)+(G?" "+G:"")})}function tl(_,I){_.info(function(){return"TIMEOUT: "+I})}ui.prototype.info=function(){};function jo(_,I){if(!_.g)return I;if(!I)return null;try{var N=JSON.parse(I);if(N){for(_=0;_<N.length;_++)if(Array.isArray(N[_])){var G=N[_];if(!(2>G.length)){var le=G[1];if(Array.isArray(le)&&!(1>le.length)){var Te=le[0];if(Te!="noop"&&Te!="stop"&&Te!="close")for(var Ue=1;Ue<le.length;Ue++)le[Ue]=""}}}}return Bn(N)}catch{return I}}var Ls={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Zr={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},_r;function vr(){}S(vr,Se),vr.prototype.g=function(){return new XMLHttpRequest},vr.prototype.i=function(){return{}},_r=new vr;function ci(_,I,N,G){this.j=_,this.i=I,this.l=N,this.R=G||1,this.U=new oi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new fn}function fn(){this.i=null,this.g="",this.h=!1}var sc={},nl={};function sr(_,I,N){_.L=1,_.v=Ko(Ai(I)),_.m=N,_.P=!0,es(_,null)}function es(_,I){_.F=Date.now(),Go(_),_.A=Ai(_.v);var N=_.A,G=_.R;Array.isArray(G)||(G=[String(G)]),dc(N.i,"t",G),_.C=0,N=_.j.J,_.h=new fn,_.g=Yf(_.j,N?I:null,!_.m),0<_.O&&(_.M=new Yn(w(_.Y,_,_.g),_.O)),I=_.U,N=_.g,G=_.ca;var le="readystatechange";Array.isArray(le)||(le&&(At[0]=le.toString()),le=At);for(var Te=0;Te<le.length;Te++){var Ue=se(N,le[Te],G||I.handleEvent,!1,I.h||I);if(!Ue)break;I.g[Ue.key]=Ue}I=_.H?V(_.H):{},_.m?(_.u||(_.u="POST"),I["Content-Type"]="application/x-www-form-urlencoded",_.g.ea(_.A,_.u,_.m,I)):(_.u="GET",_.g.ea(_.A,_.u,null,I)),Ii(),Xr(_.i,_.u,_.A,_.l,_.R,_.m)}ci.prototype.ca=function(_){_=_.target;const I=this.M;I&&ji(_)==3?I.j():this.Y(_)},ci.prototype.Y=function(_){try{if(_==this.g)e:{const In=ji(this.g);var I=this.g.Ba();const ls=this.g.Z();if(!(3>In)&&(In!=3||this.g&&(this.h.h||this.g.oa()||zf(this.g)))){this.J||In!=4||I==7||(I==8||0>=ls?Ii(3):Ii(2)),Os(this);var N=this.g.Z();this.X=N;t:if(Vf(this)){var G=zf(this.g);_="";var le=G.length,Te=ji(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){qn(this),Tr(this);var Ue="";break t}this.h.i=new u.TextDecoder}for(I=0;I<le;I++)this.h.h=!0,_+=this.h.i.decode(G[I],{stream:!(Te&&I==le-1)});G.length=0,this.h.g+=_,this.C=0,Ue=this.h.g}else Ue=this.g.oa();if(this.o=N==200,rc(this.i,this.u,this.A,this.l,this.R,In,N),this.o){if(this.T&&!this.K){t:{if(this.g){var Tt,Sn=this.g;if((Tt=Sn.g?Sn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!R(Tt)){var wt=Tt;break t}}wt=null}if(N=wt)yr(this.i,this.l,N,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ho(this,N);else{this.o=!1,this.s=3,ut(12),qn(this),Tr(this);break e}}if(this.P){N=!0;let zn;for(;!this.J&&this.C<Ue.length;)if(zn=Uf(this,Ue),zn==nl){In==4&&(this.s=4,ut(14),N=!1),yr(this.i,this.l,null,"[Incomplete Response]");break}else if(zn==sc){this.s=4,ut(15),yr(this.i,this.l,Ue,"[Invalid Chunk]"),N=!1;break}else yr(this.i,this.l,zn,null),Ho(this,zn);if(Vf(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),In!=4||Ue.length!=0||this.h.h||(this.s=1,ut(16),N=!1),this.o=this.o&&N,!N)yr(this.i,this.l,Ue,"[Invalid Chunked Response]"),qn(this),Tr(this);else if(0<Ue.length&&!this.W){this.W=!0;var Dn=this.j;Dn.g==this&&Dn.ba&&!Dn.M&&(Dn.j.info("Great, no buffering proxy detected. Bytes received: "+Ue.length),na(Dn),Dn.M=!0,ut(11))}}else yr(this.i,this.l,Ue,null),Ho(this,Ue);In==4&&qn(this),this.o&&!this.J&&(In==4?Wf(this.j,this):(this.o=!1,Go(this)))}else ig(this.g),N==400&&0<Ue.indexOf("Unknown SID")?(this.s=3,ut(12)):(this.s=0,ut(13)),qn(this),Tr(this)}}}catch{}finally{}};function Vf(_){return _.g?_.u=="GET"&&_.L!=2&&_.j.Ca:!1}function Uf(_,I){var N=_.C,G=I.indexOf(`
`,N);return G==-1?nl:(N=Number(I.substring(N,G)),isNaN(N)?sc:(G+=1,G+N>I.length?nl:(I=I.slice(G,G+N),_.C=G+N,I)))}ci.prototype.cancel=function(){this.J=!0,qn(this)};function Go(_){_.S=Date.now()+_.I,Lf(_,_.I)}function Lf(_,I){if(_.B!=null)throw Error("WatchDog timer not null");_.B=jt(w(_.ba,_),I)}function Os(_){_.B&&(u.clearTimeout(_.B),_.B=null)}ci.prototype.ba=function(){this.B=null;const _=Date.now();0<=_-this.S?(tl(this.i,this.A),this.L!=2&&(Ii(),ut(17)),qn(this),this.s=2,Tr(this)):Lf(this,this.S-_)};function Tr(_){_.j.G==0||_.J||Wf(_.j,_)}function qn(_){Os(_);var I=_.M;I&&typeof I.ma=="function"&&I.ma(),_.M=null,ai(_.U),_.g&&(I=_.g,_.g=null,I.abort(),I.ma())}function Ho(_,I){try{var N=_.j;if(N.G!=0&&(N.g==_||oc(N.h,_))){if(!_.K&&oc(N.h,_)&&N.G==3){try{var G=N.Da.g.parse(I)}catch{G=null}if(Array.isArray(G)&&G.length==3){var le=G;if(le[0]==0){e:if(!N.u){if(N.g)if(N.g.F+3e3<_.F)ml(N),fl(N);else break e;gc(N),ut(18)}}else N.za=le[1],0<N.za-N.T&&37500>le[2]&&N.F&&N.v==0&&!N.C&&(N.C=jt(w(N.Za,N),6e3));if(1>=rl(N.h)&&N.ca){try{N.ca()}catch{}N.ca=void 0}}else as(N,11)}else if((_.K||N.g==_)&&ml(N),!R(I))for(le=N.Da.g.parse(I),I=0;I<le.length;I++){let wt=le[I];if(N.T=wt[0],wt=wt[1],N.G==2)if(wt[0]=="c"){N.K=wt[1],N.ia=wt[2];const Dn=wt[3];Dn!=null&&(N.la=Dn,N.j.info("VER="+N.la));const In=wt[4];In!=null&&(N.Aa=In,N.j.info("SVER="+N.Aa));const ls=wt[5];ls!=null&&typeof ls=="number"&&0<ls&&(G=1.5*ls,N.L=G,N.j.info("backChannelRequestTimeoutMs_="+G)),G=N;const zn=_.g;if(zn){const Ar=zn.g?zn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ar){var Te=G.h;Te.g||Ar.indexOf("spdy")==-1&&Ar.indexOf("quic")==-1&&Ar.indexOf("h2")==-1||(Te.j=Te.l,Te.g=new Set,Te.h&&(sl(Te,Te.h),Te.h=null))}if(G.D){const _c=zn.g?zn.g.getResponseHeader("X-HTTP-Session-Id"):null;_c&&(G.ya=_c,Ut(G.I,G.D,_c))}}N.G=3,N.l&&N.l.ua(),N.ba&&(N.R=Date.now()-_.F,N.j.info("Handshake RTT: "+N.R+"ms")),G=N;var Ue=_;if(G.qa=Jf(G,G.J?G.ia:null,G.W),Ue.K){di(G.h,Ue);var Tt=Ue,Sn=G.L;Sn&&(Tt.I=Sn),Tt.B&&(Os(Tt),Go(Tt)),G.g=Ue}else Hf(G);0<N.i.length&&hl(N)}else wt[0]!="stop"&&wt[0]!="close"||as(N,7);else N.G==3&&(wt[0]=="stop"||wt[0]=="close"?wt[0]=="stop"?as(N,7):mc(N):wt[0]!="noop"&&N.l&&N.l.ta(wt),N.v=0)}}Ii(4)}catch{}}var Of=class{constructor(_,I){this.g=_,this.map=I}};function ts(_){this.l=_||10,u.PerformanceNavigationTiming?(_=u.performance.getEntriesByType("navigation"),_=0<_.length&&(_[0].nextHopProtocol=="hq"||_[0].nextHopProtocol=="h2")):_=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=_?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function il(_){return _.h?!0:_.g?_.g.size>=_.j:!1}function rl(_){return _.h?1:_.g?_.g.size:0}function oc(_,I){return _.h?_.h==I:_.g?_.g.has(I):!1}function sl(_,I){_.g?_.g.add(I):_.h=I}function di(_,I){_.h&&_.h==I?_.h=null:_.g&&_.g.has(I)&&_.g.delete(I)}ts.prototype.cancel=function(){if(this.i=ac(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const _ of this.g.values())_.cancel();this.g.clear()}};function ac(_){if(_.h!=null)return _.i.concat(_.h.D);if(_.g!=null&&_.g.size!==0){let I=_.i;for(const N of _.g.values())I=I.concat(N.D);return I}return b(_.i)}function Zp(_){if(_.V&&typeof _.V=="function")return _.V();if(typeof Map<"u"&&_ instanceof Map||typeof Set<"u"&&_ instanceof Set)return Array.from(_.values());if(typeof _=="string")return _.split("");if(f(_)){for(var I=[],N=_.length,G=0;G<N;G++)I.push(_[G]);return I}I=[],N=0;for(G in _)I[N++]=_[G];return I}function ol(_){if(_.na&&typeof _.na=="function")return _.na();if(!_.V||typeof _.V!="function"){if(typeof Map<"u"&&_ instanceof Map)return Array.from(_.keys());if(!(typeof Set<"u"&&_ instanceof Set)){if(f(_)||typeof _=="string"){var I=[];_=_.length;for(var N=0;N<_;N++)I.push(N);return I}I=[],N=0;for(const G in _)I[N++]=G;return I}}}function lc(_,I){if(_.forEach&&typeof _.forEach=="function")_.forEach(I,void 0);else if(f(_)||typeof _=="string")Array.prototype.forEach.call(_,I,void 0);else for(var N=ol(_),G=Zp(_),le=G.length,Te=0;Te<le;Te++)I.call(void 0,G[Te],N&&N[Te],_)}var $o=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function eg(_,I){if(_){_=_.split("&");for(var N=0;N<_.length;N++){var G=_[N].indexOf("="),le=null;if(0<=G){var Te=_[N].substring(0,G);le=_[N].substring(G+1)}else Te=_[N];I(Te,le?decodeURIComponent(le.replace(/\+/g," ")):"")}}}function vn(_){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,_ instanceof vn){this.h=_.h,Wo(this,_.j),this.o=_.o,this.g=_.g,Fs(this,_.s),this.l=_.l;var I=_.i,N=new is;N.i=I.i,I.g&&(N.g=new Map(I.g),N.h=I.h),ns(this,N),this.m=_.m}else _&&(I=String(_).match($o))?(this.h=!1,Wo(this,I[1]||"",!0),this.o=Bi(I[2]||""),this.g=Bi(I[3]||"",!0),Fs(this,I[4]),this.l=Bi(I[5]||"",!0),ns(this,I[6]||"",!0),this.m=Bi(I[7]||"")):(this.h=!1,this.i=new is(null,this.h))}vn.prototype.toString=function(){var _=[],I=this.j;I&&_.push(Jo(I,uc,!0),":");var N=this.g;return(N||I=="file")&&(_.push("//"),(I=this.o)&&_.push(Jo(I,uc,!0),"@"),_.push(encodeURIComponent(String(N)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),N=this.s,N!=null&&_.push(":",String(N))),(N=this.l)&&(this.g&&N.charAt(0)!="/"&&_.push("/"),_.push(Jo(N,N.charAt(0)=="/"?tg:cc,!0))),(N=this.i.toString())&&_.push("?",N),(N=this.m)&&_.push("#",Jo(N,al)),_.join("")};function Ai(_){return new vn(_)}function Wo(_,I,N){_.j=N?Bi(I,!0):I,_.j&&(_.j=_.j.replace(/:$/,""))}function Fs(_,I){if(I){if(I=Number(I),isNaN(I)||0>I)throw Error("Bad port number "+I);_.s=I}else _.s=null}function ns(_,I,N){I instanceof is?(_.i=I,Bf(_.i,_.h)):(N||(I=Jo(I,ng)),_.i=new is(I,_.h))}function Ut(_,I,N){_.i.set(I,N)}function Ko(_){return Ut(_,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),_}function Bi(_,I){return _?I?decodeURI(_.replace(/%25/g,"%2525")):decodeURIComponent(_):""}function Jo(_,I,N){return typeof _=="string"?(_=encodeURI(_).replace(I,Ff),N&&(_=_.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_):null}function Ff(_){return _=_.charCodeAt(0),"%"+(_>>4&15).toString(16)+(_&15).toString(16)}var uc=/[#\/\?@]/g,cc=/[#\?:]/g,tg=/[#\?]/g,ng=/[#\?@]/g,al=/#/g;function is(_,I){this.h=this.g=null,this.i=_||null,this.j=!!I}function qi(_){_.g||(_.g=new Map,_.h=0,_.i&&eg(_.i,function(I,N){_.add(decodeURIComponent(I.replace(/\+/g," ")),N)}))}n=is.prototype,n.add=function(_,I){qi(this),this.i=null,_=wr(this,_);var N=this.g.get(_);return N||this.g.set(_,N=[]),N.push(I),this.h+=1,this};function rs(_,I){qi(_),I=wr(_,I),_.g.has(I)&&(_.i=null,_.h-=_.g.get(I).length,_.g.delete(I))}function ss(_,I){return qi(_),I=wr(_,I),_.g.has(I)}n.forEach=function(_,I){qi(this),this.g.forEach(function(N,G){N.forEach(function(le){_.call(I,le,G,this)},this)},this)},n.na=function(){qi(this);const _=Array.from(this.g.values()),I=Array.from(this.g.keys()),N=[];for(let G=0;G<I.length;G++){const le=_[G];for(let Te=0;Te<le.length;Te++)N.push(I[G])}return N},n.V=function(_){qi(this);let I=[];if(typeof _=="string")ss(this,_)&&(I=I.concat(this.g.get(wr(this,_))));else{_=Array.from(this.g.values());for(let N=0;N<_.length;N++)I=I.concat(_[N])}return I},n.set=function(_,I){return qi(this),this.i=null,_=wr(this,_),ss(this,_)&&(this.h-=this.g.get(_).length),this.g.set(_,[I]),this.h+=1,this},n.get=function(_,I){return _?(_=this.V(_),0<_.length?String(_[0]):I):I};function dc(_,I,N){rs(_,I),0<N.length&&(_.i=null,_.g.set(wr(_,I),b(N)),_.h+=N.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const _=[],I=Array.from(this.g.keys());for(var N=0;N<I.length;N++){var G=I[N];const Te=encodeURIComponent(String(G)),Ue=this.V(G);for(G=0;G<Ue.length;G++){var le=Te;Ue[G]!==""&&(le+="="+encodeURIComponent(String(Ue[G]))),_.push(le)}}return this.i=_.join("&")};function wr(_,I){return I=String(I),_.j&&(I=I.toLowerCase()),I}function Bf(_,I){I&&!_.j&&(qi(_),_.i=null,_.g.forEach(function(N,G){var le=G.toLowerCase();G!=le&&(rs(this,G),dc(this,le,N))},_)),_.j=I}function Yo(_,I){const N=new ui;if(u.Image){const G=new Image;G.onload=E(zi,N,"TestLoadImage: loaded",!0,I,G),G.onerror=E(zi,N,"TestLoadImage: error",!1,I,G),G.onabort=E(zi,N,"TestLoadImage: abort",!1,I,G),G.ontimeout=E(zi,N,"TestLoadImage: timeout",!1,I,G),u.setTimeout(function(){G.ontimeout&&G.ontimeout()},1e4),G.src=_}else I(!1)}function or(_,I){const N=new ui,G=new AbortController,le=setTimeout(()=>{G.abort(),zi(N,"TestPingServer: timeout",!1,I)},1e4);fetch(_,{signal:G.signal}).then(Te=>{clearTimeout(le),Te.ok?zi(N,"TestPingServer: ok",!0,I):zi(N,"TestPingServer: server error",!1,I)}).catch(()=>{clearTimeout(le),zi(N,"TestPingServer: error",!1,I)})}function zi(_,I,N,G,le){try{le&&(le.onload=null,le.onerror=null,le.onabort=null,le.ontimeout=null),G(N)}catch{}}function Qo(){this.g=new ir}function xr(_,I,N){const G=N||"";try{lc(_,function(le,Te){let Ue=le;m(le)&&(Ue=Bn(le)),I.push(G+Te+"="+encodeURIComponent(Ue))})}catch(le){throw I.push(G+"type="+encodeURIComponent("_badmap")),le}}function Bs(_){this.l=_.Ub||null,this.j=_.eb||!1}S(Bs,Se),Bs.prototype.g=function(){return new os(this.l,this.j)},Bs.prototype.i=(function(_){return function(){return _}})({});function os(_,I){Oe.call(this),this.D=_,this.o=I,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}S(os,Oe),n=os.prototype,n.open=function(_,I){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=_,this.A=I,this.readyState=1,br(this)},n.send=function(_){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const I={headers:this.u,method:this.B,credentials:this.m,cache:void 0};_&&(I.body=_),(this.D||u).fetch(new Request(this.A,I)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Er(this)),this.readyState=0},n.Sa=function(_){if(this.g&&(this.l=_,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=_.headers,this.readyState=2,br(this)),this.g&&(this.readyState=3,br(this),this.g)))if(this.responseType==="arraybuffer")_.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in _){if(this.j=_.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;fc(this)}else _.text().then(this.Ra.bind(this),this.ga.bind(this))};function fc(_){_.j.read().then(_.Pa.bind(_)).catch(_.ga.bind(_))}n.Pa=function(_){if(this.g){if(this.o&&_.value)this.response.push(_.value);else if(!this.o){var I=_.value?_.value:new Uint8Array(0);(I=this.v.decode(I,{stream:!_.done}))&&(this.response=this.responseText+=I)}_.done?Er(this):br(this),this.readyState==3&&fc(this)}},n.Ra=function(_){this.g&&(this.response=this.responseText=_,Er(this))},n.Qa=function(_){this.g&&(this.response=_,Er(this))},n.ga=function(){this.g&&Er(this)};function Er(_){_.readyState=4,_.l=null,_.j=null,_.v=null,br(_)}n.setRequestHeader=function(_,I){this.u.append(_,I)},n.getResponseHeader=function(_){return this.h&&this.h.get(_.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const _=[],I=this.h.entries();for(var N=I.next();!N.done;)N=N.value,_.push(N[0]+": "+N[1]),N=I.next();return _.join(`\r
`)};function br(_){_.onreadystatechange&&_.onreadystatechange.call(_)}Object.defineProperty(os.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(_){this.m=_?"include":"same-origin"}});function hc(_){let I="";return H(_,function(N,G){I+=G,I+=":",I+=N,I+=`\r
`}),I}function kn(_,I,N){e:{for(G in N){var G=!1;break e}G=!0}G||(N=hc(N),typeof _=="string"?N!=null&&encodeURIComponent(String(N)):Ut(_,I,N))}function Rt(_){Oe.call(this),this.headers=new Map,this.o=_||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}S(Rt,Oe);var ll=/^https?$/i,Xo=["POST","PUT"];n=Rt.prototype,n.Ha=function(_){this.J=_},n.ea=function(_,I,N,G){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+_);I=I?I.toUpperCase():"GET",this.D=_,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():_r.g(),this.v=this.o?Qe(this.o):Qe(_r),this.g.onreadystatechange=w(this.Ea,this);try{this.B=!0,this.g.open(I,String(_),!0),this.B=!1}catch(Te){qf(this,Te);return}if(_=N||"",N=new Map(this.headers),G)if(Object.getPrototypeOf(G)===Object.prototype)for(var le in G)N.set(le,G[le]);else if(typeof G.keys=="function"&&typeof G.get=="function")for(const Te of G.keys())N.set(Te,G.get(Te));else throw Error("Unknown input type for opt_headers: "+String(G));G=Array.from(N.keys()).find(Te=>Te.toLowerCase()=="content-type"),le=u.FormData&&_ instanceof u.FormData,!(0<=Array.prototype.indexOf.call(Xo,I,void 0))||G||le||N.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Te,Ue]of N)this.g.setRequestHeader(Te,Ue);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Zo(this),this.u=!0,this.g.send(_),this.u=!1}catch(Te){qf(this,Te)}};function qf(_,I){_.h=!1,_.g&&(_.j=!0,_.g.abort(),_.j=!1),_.l=I,_.m=5,ul(_),Sr(_)}function ul(_){_.A||(_.A=!0,Ke(_,"complete"),Ke(_,"error"))}n.abort=function(_){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=_||7,Ke(this,"complete"),Ke(this,"abort"),Sr(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Sr(this,!0)),Rt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?cl(this):this.bb())},n.bb=function(){cl(this)};function cl(_){if(_.h&&typeof l<"u"&&(!_.v[1]||ji(_)!=4||_.Z()!=2)){if(_.u&&ji(_)==4)_t(_.Ea,0,_);else if(Ke(_,"readystatechange"),ji(_)==4){_.h=!1;try{const Ue=_.Z();e:switch(Ue){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var I=!0;break e;default:I=!1}var N;if(!(N=I)){var G;if(G=Ue===0){var le=String(_.D).match($o)[1]||null;!le&&u.self&&u.self.location&&(le=u.self.location.protocol.slice(0,-1)),G=!ll.test(le?le.toLowerCase():"")}N=G}if(N)Ke(_,"complete"),Ke(_,"success");else{_.m=6;try{var Te=2<ji(_)?_.g.statusText:""}catch{Te=""}_.l=Te+" ["+_.Z()+"]",ul(_)}}finally{Sr(_)}}}}function Sr(_,I){if(_.g){Zo(_);const N=_.g,G=_.v[0]?()=>{}:null;_.g=null,_.v=null,I||Ke(_,"ready");try{N.onreadystatechange=G}catch{}}}function Zo(_){_.I&&(u.clearTimeout(_.I),_.I=null)}n.isActive=function(){return!!this.g};function ji(_){return _.g?_.g.readyState:0}n.Z=function(){try{return 2<ji(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(_){if(this.g){var I=this.g.responseText;return _&&I.indexOf(_)==0&&(I=I.substring(_.length)),Pn(I)}};function zf(_){try{if(!_.g)return null;if("response"in _.g)return _.g.response;switch(_.H){case"":case"text":return _.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in _.g)return _.g.mozResponseArrayBuffer}return null}catch{return null}}function ig(_){const I={};_=(_.g&&2<=ji(_)&&_.g.getAllResponseHeaders()||"").split(`\r
`);for(let G=0;G<_.length;G++){if(R(_[G]))continue;var N=J(_[G]);const le=N[0];if(N=N[1],typeof N!="string")continue;N=N.trim();const Te=I[le]||[];I[le]=Te,Te.push(N)}O(I,function(G){return G.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ea(_,I,N){return N&&N.internalChannelParams&&N.internalChannelParams[_]||I}function dl(_){this.Aa=0,this.i=[],this.j=new ui,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ea("failFast",!1,_),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ea("baseRetryDelayMs",5e3,_),this.cb=ea("retryDelaySeedMs",1e4,_),this.Wa=ea("forwardChannelMaxRetries",2,_),this.wa=ea("forwardChannelRequestTimeoutMs",2e4,_),this.pa=_&&_.xmlHttpFactory||void 0,this.Xa=_&&_.Tb||void 0,this.Ca=_&&_.useFetchStreams||!1,this.L=void 0,this.J=_&&_.supportsCrossDomainXhr||!1,this.K="",this.h=new ts(_&&_.concurrentRequestLimit),this.Da=new Qo,this.P=_&&_.fastHandshake||!1,this.O=_&&_.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=_&&_.Rb||!1,_&&_.xa&&this.j.xa(),_&&_.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&_&&_.detectBufferingProxy||!1,this.ja=void 0,_&&_.longPollingTimeout&&0<_.longPollingTimeout&&(this.ja=_.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=dl.prototype,n.la=8,n.G=1,n.connect=function(_,I,N,G){ut(0),this.W=_,this.H=I||{},N&&G!==void 0&&(this.H.OSID=N,this.H.OAID=G),this.F=this.X,this.I=Jf(this,null,this.W),hl(this)};function mc(_){if(jf(_),_.G==3){var I=_.U++,N=Ai(_.I);if(Ut(N,"SID",_.K),Ut(N,"RID",I),Ut(N,"TYPE","terminate"),ta(_,N),I=new ci(_,_.j,I),I.L=2,I.v=Ko(Ai(N)),N=!1,u.navigator&&u.navigator.sendBeacon)try{N=u.navigator.sendBeacon(I.v.toString(),"")}catch{}!N&&u.Image&&(new Image().src=I.v,N=!0),N||(I.g=Yf(I.j,null),I.g.ea(I.v)),I.F=Date.now(),Go(I)}Kf(_)}function fl(_){_.g&&(na(_),_.g.cancel(),_.g=null)}function jf(_){fl(_),_.u&&(u.clearTimeout(_.u),_.u=null),ml(_),_.h.cancel(),_.s&&(typeof _.s=="number"&&u.clearTimeout(_.s),_.s=null)}function hl(_){if(!il(_.h)&&!_.s){_.s=!0;var I=_.Ga;X||K(),_e||(X(),_e=!0),me.add(I,_),_.B=0}}function rg(_,I){return rl(_.h)>=_.h.j-(_.s?1:0)?!1:_.s?(_.i=I.D.concat(_.i),!0):_.G==1||_.G==2||_.B>=(_.Va?0:_.Wa)?!1:(_.s=jt(w(_.Ga,_,I),yc(_,_.B)),_.B++,!0)}n.Ga=function(_){if(this.s)if(this.s=null,this.G==1){if(!_){this.U=Math.floor(1e5*Math.random()),_=this.U++;const le=new ci(this,this.j,_);let Te=this.o;if(this.S&&(Te?(Te=V(Te),j(Te,this.S)):Te=this.S),this.m!==null||this.O||(le.H=Te,Te=null),this.P)e:{for(var I=0,N=0;N<this.i.length;N++){t:{var G=this.i[N];if("__data__"in G.map&&(G=G.map.__data__,typeof G=="string")){G=G.length;break t}G=void 0}if(G===void 0)break;if(I+=G,4096<I){I=N;break e}if(I===4096||N===this.i.length-1){I=N+1;break e}}I=1e3}else I=1e3;I=Gf(this,le,I),N=Ai(this.I),Ut(N,"RID",_),Ut(N,"CVER",22),this.D&&Ut(N,"X-HTTP-Session-Id",this.D),ta(this,N),Te&&(this.O?I="headers="+encodeURIComponent(String(hc(Te)))+"&"+I:this.m&&kn(N,this.m,Te)),sl(this.h,le),this.Ua&&Ut(N,"TYPE","init"),this.P?(Ut(N,"$req",I),Ut(N,"SID","null"),le.T=!0,sr(le,N,null)):sr(le,N,I),this.G=2}}else this.G==3&&(_?pc(this,_):this.i.length==0||il(this.h)||pc(this))};function pc(_,I){var N;I?N=I.l:N=_.U++;const G=Ai(_.I);Ut(G,"SID",_.K),Ut(G,"RID",N),Ut(G,"AID",_.T),ta(_,G),_.m&&_.o&&kn(G,_.m,_.o),N=new ci(_,_.j,N,_.B+1),_.m===null&&(N.H=_.o),I&&(_.i=I.D.concat(_.i)),I=Gf(_,N,1e3),N.I=Math.round(.5*_.wa)+Math.round(.5*_.wa*Math.random()),sl(_.h,N),sr(N,G,I)}function ta(_,I){_.H&&H(_.H,function(N,G){Ut(I,G,N)}),_.l&&lc({},function(N,G){Ut(I,G,N)})}function Gf(_,I,N){N=Math.min(_.i.length,N);var G=_.l?w(_.l.Na,_.l,_):null;e:{var le=_.i;let Te=-1;for(;;){const Ue=["count="+N];Te==-1?0<N?(Te=le[0].g,Ue.push("ofs="+Te)):Te=0:Ue.push("ofs="+Te);let Tt=!0;for(let Sn=0;Sn<N;Sn++){let wt=le[Sn].g;const Dn=le[Sn].map;if(wt-=Te,0>wt)Te=Math.max(0,le[Sn].g-100),Tt=!1;else try{xr(Dn,Ue,"req"+wt+"_")}catch{G&&G(Dn)}}if(Tt){G=Ue.join("&");break e}}}return _=_.i.splice(0,N),I.D=_,G}function Hf(_){if(!_.g&&!_.u){_.Y=1;var I=_.Fa;X||K(),_e||(X(),_e=!0),me.add(I,_),_.v=0}}function gc(_){return _.g||_.u||3<=_.v?!1:(_.Y++,_.u=jt(w(_.Fa,_),yc(_,_.v)),_.v++,!0)}n.Fa=function(){if(this.u=null,$f(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var _=2*this.R;this.j.info("BP detection timer enabled: "+_),this.A=jt(w(this.ab,this),_)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ut(10),fl(this),$f(this))};function na(_){_.A!=null&&(u.clearTimeout(_.A),_.A=null)}function $f(_){_.g=new ci(_,_.j,"rpc",_.Y),_.m===null&&(_.g.H=_.o),_.g.O=0;var I=Ai(_.qa);Ut(I,"RID","rpc"),Ut(I,"SID",_.K),Ut(I,"AID",_.T),Ut(I,"CI",_.F?"0":"1"),!_.F&&_.ja&&Ut(I,"TO",_.ja),Ut(I,"TYPE","xmlhttp"),ta(_,I),_.m&&_.o&&kn(I,_.m,_.o),_.L&&(_.g.I=_.L);var N=_.g;_=_.ia,N.L=1,N.v=Ko(Ai(I)),N.m=null,N.P=!0,es(N,_)}n.Za=function(){this.C!=null&&(this.C=null,fl(this),gc(this),ut(19))};function ml(_){_.C!=null&&(u.clearTimeout(_.C),_.C=null)}function Wf(_,I){var N=null;if(_.g==I){ml(_),na(_),_.g=null;var G=2}else if(oc(_.h,I))N=I.D,di(_.h,I),G=1;else return;if(_.G!=0){if(I.o)if(G==1){N=I.m?I.m.length:0,I=Date.now()-I.F;var le=_.B;G=li(),Ke(G,new Yt(G,N)),hl(_)}else Hf(_);else if(le=I.s,le==3||le==0&&0<I.X||!(G==1&&rg(_,I)||G==2&&gc(_)))switch(N&&0<N.length&&(I=_.h,I.i=I.i.concat(N)),le){case 1:as(_,5);break;case 4:as(_,10);break;case 3:as(_,6);break;default:as(_,2)}}}function yc(_,I){let N=_.Ta+Math.floor(Math.random()*_.cb);return _.isActive()||(N*=2),N*I}function as(_,I){if(_.j.info("Error code "+I),I==2){var N=w(_.fb,_),G=_.Xa;const le=!G;G=new vn(G||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||Wo(G,"https"),Ko(G),le?Yo(G.toString(),N):or(G.toString(),N)}else ut(2);_.G=0,_.l&&_.l.sa(I),Kf(_),jf(_)}n.fb=function(_){_?(this.j.info("Successfully pinged google.com"),ut(2)):(this.j.info("Failed to ping google.com"),ut(1))};function Kf(_){if(_.G=0,_.ka=[],_.l){const I=ac(_.h);(I.length!=0||_.i.length!=0)&&(A(_.ka,I),A(_.ka,_.i),_.h.i.length=0,b(_.i),_.i.length=0),_.l.ra()}}function Jf(_,I,N){var G=N instanceof vn?Ai(N):new vn(N);if(G.g!="")I&&(G.g=I+"."+G.g),Fs(G,G.s);else{var le=u.location;G=le.protocol,I=I?I+"."+le.hostname:le.hostname,le=+le.port;var Te=new vn(null);G&&Wo(Te,G),I&&(Te.g=I),le&&Fs(Te,le),N&&(Te.l=N),G=Te}return N=_.D,I=_.ya,N&&I&&Ut(G,N,I),Ut(G,"VER",_.la),ta(_,G),G}function Yf(_,I,N){if(I&&!_.J)throw Error("Can't create secondary domain capable XhrIo object.");return I=_.Ca&&!_.pa?new Rt(new Bs({eb:N})):new Rt(_.pa),I.Ha(_.J),I}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Qf(){}n=Qf.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function pl(){}pl.prototype.g=function(_,I){return new fi(_,I)};function fi(_,I){Oe.call(this),this.g=new dl(I),this.l=_,this.h=I&&I.messageUrlParams||null,_=I&&I.messageHeaders||null,I&&I.clientProtocolHeaderRequired&&(_?_["X-Client-Protocol"]="webchannel":_={"X-Client-Protocol":"webchannel"}),this.g.o=_,_=I&&I.initMessageHeaders||null,I&&I.messageContentType&&(_?_["X-WebChannel-Content-Type"]=I.messageContentType:_={"X-WebChannel-Content-Type":I.messageContentType}),I&&I.va&&(_?_["X-WebChannel-Client-Profile"]=I.va:_={"X-WebChannel-Client-Profile":I.va}),this.g.S=_,(_=I&&I.Sb)&&!R(_)&&(this.g.m=_),this.v=I&&I.supportsCrossDomainXhr||!1,this.u=I&&I.sendRawJson||!1,(I=I&&I.httpSessionIdParam)&&!R(I)&&(this.g.D=I,_=this.h,_!==null&&I in _&&(_=this.h,I in _&&delete _[I])),this.j=new Ir(this)}S(fi,Oe),fi.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},fi.prototype.close=function(){mc(this.g)},fi.prototype.o=function(_){var I=this.g;if(typeof _=="string"){var N={};N.__data__=_,_=N}else this.u&&(N={},N.__data__=Bn(_),_=N);I.i.push(new Of(I.Ya++,_)),I.G==3&&hl(I)},fi.prototype.N=function(){this.g.l=null,delete this.j,mc(this.g),delete this.g,fi.aa.N.call(this)};function Xf(_){ot.call(this),_.__headers__&&(this.headers=_.__headers__,this.statusCode=_.__status__,delete _.__headers__,delete _.__status__);var I=_.__sm__;if(I){e:{for(const N in I){_=N;break e}_=void 0}(this.i=_)&&(_=this.i,I=I!==null&&_ in I?I[_]:void 0),this.data=I}else this.data=_}S(Xf,ot);function Zf(){vt.call(this),this.status=1}S(Zf,vt);function Ir(_){this.g=_}S(Ir,Qf),Ir.prototype.ua=function(){Ke(this.g,"a")},Ir.prototype.ta=function(_){Ke(this.g,new Xf(_))},Ir.prototype.sa=function(_){Ke(this.g,new Zf)},Ir.prototype.ra=function(){Ke(this.g,"b")},pl.prototype.createWebChannel=pl.prototype.g,fi.prototype.send=fi.prototype.o,fi.prototype.open=fi.prototype.m,fi.prototype.close=fi.prototype.close,CC=function(){return new pl},AC=function(){return li()},IC=Wt,M_={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ls.NO_ERROR=0,Ls.TIMEOUT=8,Ls.HTTP_ERROR=6,gm=Ls,Zr.COMPLETE="complete",SC=Zr,qe.EventType=je,je.OPEN="a",je.CLOSE="b",je.ERROR="c",je.MESSAGE="d",Oe.prototype.listen=Oe.prototype.K,yd=qe,Rt.prototype.listenOnce=Rt.prototype.L,Rt.prototype.getLastError=Rt.prototype.Ka,Rt.prototype.getLastErrorCode=Rt.prototype.Ba,Rt.prototype.getStatus=Rt.prototype.Z,Rt.prototype.getResponseJson=Rt.prototype.Oa,Rt.prototype.getResponseText=Rt.prototype.oa,Rt.prototype.send=Rt.prototype.ea,Rt.prototype.setWithCredentials=Rt.prototype.Ha,bC=Rt}).apply(typeof tm<"u"?tm:typeof self<"u"?self:typeof window<"u"?window:{});const ub="@firebase/firestore",cb="4.9.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let On=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};On.UNAUTHENTICATED=new On(null),On.GOOGLE_CREDENTIALS=new On("google-credentials-uid"),On.FIRST_PARTY=new On("first-party-uid"),On.MOCK_USER=new On("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qu="12.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ao=new hp("@firebase/firestore");function Xl(){return Ao.logLevel}function OM(n){Ao.setLogLevel(n)}function Pe(n,...e){if(Ao.logLevel<=mt.DEBUG){const t=e.map(Hv);Ao.debug(`Firestore (${qu}): ${n}`,...t)}}function pn(n,...e){if(Ao.logLevel<=mt.ERROR){const t=e.map(Hv);Ao.error(`Firestore (${qu}): ${n}`,...t)}}function $r(n,...e){if(Ao.logLevel<=mt.WARN){const t=e.map(Hv);Ao.warn(`Firestore (${qu}): ${n}`,...t)}}function Hv(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ze(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,RC(n,i,t)}function RC(n,e,t){let i=`FIRESTORE (${qu}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw pn(i),new Error(i)}function $e(n,e,t,i){let r="Unexpected state";typeof t=="string"?r=t:i=t,n||RC(e,r,i)}function FM(n,e){n||ze(57014,e)}function Be(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ye={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Re extends gi{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NC{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class BM{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(On.UNAUTHENTICATED)))}shutdown(){}}class qM{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class zM{constructor(e){this.t=e,this.currentUser=On.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){$e(this.o===void 0,42304);let i=this.i;const r=f=>this.i!==i?(i=this.i,t(f)):Promise.resolve();let o=new Kn;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Kn,e.enqueueRetryable((()=>r(this.currentUser)))};const l=()=>{const f=o;e.enqueueRetryable((async()=>{await f.promise,await r(this.currentUser)}))},u=f=>{Pe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit((f=>u(f))),setTimeout((()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?u(f):(Pe("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Kn)}}),0),l()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(Pe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?($e(typeof i.accessToken=="string",31837,{l:i}),new NC(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return $e(e===null||typeof e=="string",2055,{h:e}),new On(e)}}class jM{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=On.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class GM{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new jM(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(On.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class db{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class HM{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Zt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){$e(this.o===void 0,3512);const i=o=>{o.error!=null&&Pe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.m;return this.m=o.token,Pe("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable((()=>i(o)))};const r=o=>{Pe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((o=>r(o))),setTimeout((()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?r(o):Pe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new db(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?($e(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new db(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $M(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $v{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const r=$M(40);for(let o=0;o<r.length;++o)i.length<20&&r[o]<t&&(i+=e.charAt(r[o]%62))}return i}}function rt(n,e){return n<e?-1:n>e?1:0}function V_(n,e){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++){const r=n.charAt(i),o=e.charAt(i);if(r!==o)return o_(r)===o_(o)?rt(r,o):o_(r)?1:-1}return rt(n.length,e.length)}const WM=55296,KM=57343;function o_(n){const e=n.charCodeAt(0);return e>=WM&&e<=KM}function yu(n,e,t){return n.length===e.length&&n.every(((i,r)=>t(i,e[r])))}function PC(n){return n+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fb="__name__";class Dr{constructor(e,t,i){t===void 0?t=0:t>e.length&&ze(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&ze(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return Dr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Dr?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let r=0;r<i;r++){const o=Dr.compareSegments(e.get(r),t.get(r));if(o!==0)return o}return rt(e.length,t.length)}static compareSegments(e,t){const i=Dr.isNumericId(e),r=Dr.isNumericId(t);return i&&!r?-1:!i&&r?1:i&&r?Dr.extractNumericId(e).compare(Dr.extractNumericId(t)):V_(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return vo.fromString(e.substring(4,e.length-2))}}class pt extends Dr{construct(e,t,i){return new pt(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new Re(ye.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((r=>r.length>0)))}return new pt(t)}static emptyPath(){return new pt([])}}const JM=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class en extends Dr{construct(e,t,i){return new en(e,t,i)}static isValidIdentifier(e){return JM.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),en.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===fb}static keyField(){return new en([fb])}static fromServerFormat(e){const t=[];let i="",r=0;const o=()=>{if(i.length===0)throw new Re(ye.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let l=!1;for(;r<e.length;){const u=e[r];if(u==="\\"){if(r+1===e.length)throw new Re(ye.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[r+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new Re(ye.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=f,r+=2}else u==="`"?(l=!l,r++):u!=="."||l?(i+=u,r++):(o(),r++)}if(o(),l)throw new Re(ye.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new en(t)}static emptyPath(){return new en([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Le{constructor(e){this.path=e}static fromPath(e){return new Le(pt.fromString(e))}static fromName(e){return new Le(pt.fromString(e).popFirst(5))}static empty(){return new Le(pt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&pt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return pt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Le(new pt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wv(n,e,t){if(!t)throw new Re(ye.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function kC(n,e,t,i){if(e===!0&&i===!0)throw new Re(ye.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function hb(n){if(!Le.isDocumentKey(n))throw new Re(ye.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function mb(n){if(Le.isDocumentKey(n))throw new Re(ye.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function DC(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function mp(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":ze(12329,{type:typeof n})}function St(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Re(ye.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=mp(n);throw new Re(ye.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function MC(n,e){if(e<=0)throw new Re(ye.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bn(n,e){const t={typeString:n};return e&&(t.value=e),t}function uf(n,e){if(!DC(n))throw new Re(ye.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const r=e[i].typeString,o="value"in e[i]?{value:e[i].value}:void 0;if(!(i in n)){t=`JSON missing required field: '${i}'`;break}const l=n[i];if(r&&typeof l!==r){t=`JSON field '${i}' must be a ${r}.`;break}if(o!==void 0&&l!==o.value){t=`Expected '${i}' field to equal '${o.value}'`;break}}if(t)throw new Re(ye.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pb=-62135596800,gb=1e6;class Nt{static now(){return Nt.fromMillis(Date.now())}static fromDate(e){return Nt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*gb);return new Nt(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Re(ye.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Re(ye.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<pb)throw new Re(ye.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Re(ye.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/gb}_compareTo(e){return this.seconds===e.seconds?rt(this.nanoseconds,e.nanoseconds):rt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Nt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(uf(e,Nt._jsonSchema))return new Nt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-pb;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Nt._jsonSchemaVersion="firestore/timestamp/1.0",Nt._jsonSchema={type:bn("string",Nt._jsonSchemaVersion),seconds:bn("number"),nanoseconds:bn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{static fromTimestamp(e){return new Je(e)}static min(){return new Je(new Nt(0,0))}static max(){return new Je(new Nt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _u=-1;class Um{constructor(e,t,i,r){this.indexId=e,this.collectionGroup=t,this.fields=i,this.indexState=r}}function U_(n){return n.fields.find((e=>e.kind===2))}function Ta(n){return n.fields.filter((e=>e.kind!==2))}Um.UNKNOWN_ID=-1;class ym{constructor(e,t){this.fieldPath=e,this.kind=t}}class zd{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new zd(0,Fi.min())}}function VC(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=Je.fromTimestamp(i===1e9?new Nt(t+1,0):new Nt(t,i));return new Fi(r,Le.empty(),e)}function UC(n){return new Fi(n.readTime,n.key,_u)}class Fi{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Fi(Je.min(),Le.empty(),_u)}static max(){return new Fi(Je.max(),Le.empty(),_u)}}function Kv(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Le.comparator(n.documentKey,e.documentKey),t!==0?t:rt(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class OC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lo(n){if(n.code!==ye.FAILED_PRECONDITION||n.message!==LC)throw n;Pe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ze(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ue(((i,r)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,r)},this.catchCallback=o=>{this.wrapFailure(t,o).next(i,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ue?t:ue.resolve(t)}catch(t){return ue.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ue.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ue.reject(t)}static resolve(e){return new ue(((t,i)=>{t(e)}))}static reject(e){return new ue(((t,i)=>{i(e)}))}static waitFor(e){return new ue(((t,i)=>{let r=0,o=0,l=!1;e.forEach((u=>{++r,u.next((()=>{++o,l&&o===r&&t()}),(f=>i(f)))})),l=!0,o===r&&t()}))}static or(e){let t=ue.resolve(!1);for(const i of e)t=t.next((r=>r?ue.resolve(r):i()));return t}static forEach(e,t){const i=[];return e.forEach(((r,o)=>{i.push(t.call(this,r,o))})),this.waitFor(i)}static mapArray(e,t){return new ue(((i,r)=>{const o=e.length,l=new Array(o);let u=0;for(let f=0;f<o;f++){const m=f;t(e[m]).next((y=>{l[m]=y,++u,u===o&&i(l)}),(y=>r(y)))}}))}static doWhile(e,t){return new ue(((i,r)=>{const o=()=>{e()===!0?t().next((()=>{o()}),r):i()};o()}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vi="SimpleDb";class pp{static open(e,t,i,r){try{return new pp(t,e.transaction(r,i))}catch(o){throw new bd(t,o)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new Kn,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new bd(e,t.error)):this.S.resolve()},this.transaction.onerror=i=>{const r=Jv(i.target.error);this.S.reject(new bd(e,r))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(Pe(Vi,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new QM(t)}}class zr{static delete(e){return Pe(Vi,"Removing database:",e),xa(Uv().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!Fd())return!1;if(zr.F())return!0;const e=rn(),t=zr.M(e),i=0<t&&t<10,r=FC(e),o=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||o)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)==null?void 0:e.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(i)}constructor(e,t,i){this.name=e,this.version=t,this.N=i,this.B=null,zr.M(rn())===12.2&&pn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(Pe(Vi,"Opening database:",this.name),this.db=await new Promise(((t,i)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=o=>{const l=o.target.result;t(l)},r.onblocked=()=>{i(new bd(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=o=>{const l=o.target.error;l.name==="VersionError"?i(new Re(ye.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):l.name==="InvalidStateError"?i(new Re(ye.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+l)):i(new bd(e,l))},r.onupgradeneeded=o=>{Pe(Vi,'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);const l=o.target.result;this.N.k(l,r.transaction,o.oldVersion,this.version).next((()=>{Pe(Vi,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=t=>this.q(t)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,i,r){const o=t==="readonly";let l=0;for(;;){++l;try{this.db=await this.L(e);const u=pp.open(this.db,e,o?"readonly":"readwrite",i),f=r(u).next((m=>(u.C(),m))).catch((m=>(u.abort(m),ue.reject(m)))).toPromise();return f.catch((()=>{})),await u.D,f}catch(u){const f=u,m=f.name!=="FirebaseError"&&l<3;if(Pe(Vi,"Transaction failed with error:",f.message,"Retrying:",m),this.close(),!m)return Promise.reject(f)}}}close(){this.db&&this.db.close(),this.db=void 0}}function FC(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class YM{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return xa(this.U.delete())}}class bd extends Re{constructor(e,t){super(ye.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Oo(n){return n.name==="IndexedDbTransactionError"}class QM{constructor(e){this.store=e}put(e,t){let i;return t!==void 0?(Pe(Vi,"PUT",this.store.name,e,t),i=this.store.put(t,e)):(Pe(Vi,"PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),xa(i)}add(e){return Pe(Vi,"ADD",this.store.name,e,e),xa(this.store.add(e))}get(e){return xa(this.store.get(e)).next((t=>(t===void 0&&(t=null),Pe(Vi,"GET",this.store.name,e,t),t)))}delete(e){return Pe(Vi,"DELETE",this.store.name,e),xa(this.store.delete(e))}count(){return Pe(Vi,"COUNT",this.store.name),xa(this.store.count())}J(e,t){const i=this.options(e,t),r=i.index?this.store.index(i.index):this.store;if(typeof r.getAll=="function"){const o=r.getAll(i.range);return new ue(((l,u)=>{o.onerror=f=>{u(f.target.error)},o.onsuccess=f=>{l(f.target.result)}}))}{const o=this.cursor(i),l=[];return this.H(o,((u,f)=>{l.push(f)})).next((()=>l))}}Y(e,t){const i=this.store.getAll(e,t===null?void 0:t);return new ue(((r,o)=>{i.onerror=l=>{o(l.target.error)},i.onsuccess=l=>{r(l.target.result)}}))}Z(e,t){Pe(Vi,"DELETE ALL",this.store.name);const i=this.options(e,t);i.X=!1;const r=this.cursor(i);return this.H(r,((o,l,u)=>u.delete()))}ee(e,t){let i;t?i=e:(i={},t=e);const r=this.cursor(i);return this.H(r,t)}te(e){const t=this.cursor({});return new ue(((i,r)=>{t.onerror=o=>{const l=Jv(o.target.error);r(l)},t.onsuccess=o=>{const l=o.target.result;l?e(l.primaryKey,l.value).next((u=>{u?l.continue():i()})):i()}}))}H(e,t){const i=[];return new ue(((r,o)=>{e.onerror=l=>{o(l.target.error)},e.onsuccess=l=>{const u=l.target.result;if(!u)return void r();const f=new YM(u),m=t(u.primaryKey,u.value,f);if(m instanceof ue){const y=m.catch((v=>(f.done(),ue.reject(v))));i.push(y)}f.isDone?r():f.G===null?u.continue():u.continue(f.G)}})).next((()=>ue.waitFor(i)))}options(e,t){let i;return e!==void 0&&(typeof e=="string"?i=e:t=e),{index:i,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const i=this.store.index(e.index);return e.X?i.openKeyCursor(e.range,t):i.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function xa(n){return new ue(((e,t)=>{n.onsuccess=i=>{const r=i.target.result;e(r)},n.onerror=i=>{const r=Jv(i.target.error);t(r)}}))}let yb=!1;function Jv(n){const e=zr.M(rn());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const i=new Re("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return yb||(yb=!0,setTimeout((()=>{throw i}),0)),i}}return n}const Sd="IndexBackfiller";class XM{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){Pe(Sd,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.ne.ie();Pe(Sd,`Documents written: ${t}`)}catch(t){Oo(t)?Pe(Sd,"Ignoring IndexedDB error during index backfill: ",t):await Lo(t)}await this.re(6e4)}))}}class ZM{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.se(t,e)))}se(e,t){const i=new Set;let r=t,o=!0;return ue.doWhile((()=>o===!0&&r>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((l=>{if(l!==null&&!i.has(l))return Pe(Sd,`Processing collection: ${l}`),this.oe(e,l,r).next((u=>{r-=u,i.add(l)}));o=!1})))).next((()=>t-r))}oe(e,t,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((r=>this.localStore.localDocuments.getNextDocuments(e,t,r,i).next((o=>{const l=o.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next((()=>this._e(r,o))).next((u=>(Pe(Sd,`Updating offset: ${u}`),this.localStore.indexManager.updateCollectionGroup(e,t,u)))).next((()=>l.size))}))))}_e(e,t){let i=e;return t.changes.forEach(((r,o)=>{const l=UC(o);Kv(l,i)>0&&(i=l)})),new Fi(i.readTime,i.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Ei.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const To=-1;function cf(n){return n==null}function jd(n){return n===0&&1/n==-1/0}function BC(n){return typeof n=="number"&&Number.isInteger(n)&&!jd(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lm="";function ii(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=_b(e)),e=e5(n.get(t),e);return _b(e)}function e5(n,e){let t=e;const i=n.length;for(let r=0;r<i;r++){const o=n.charAt(r);switch(o){case"\0":t+="";break;case Lm:t+="";break;default:t+=o}}return t}function _b(n){return n+Lm+""}function Fr(n){const e=n.length;if($e(e>=2,64408,{path:n}),e===2)return $e(n.charAt(0)===Lm&&n.charAt(1)==="",56145,{path:n}),pt.emptyPath();const t=e-2,i=[];let r="";for(let o=0;o<e;){const l=n.indexOf(Lm,o);switch((l<0||l>t)&&ze(50515,{path:n}),n.charAt(l+1)){case"":const u=n.substring(o,l);let f;r.length===0?f=u:(r+=u,f=r,r=""),i.push(f);break;case"":r+=n.substring(o,l),r+="\0";break;case"":r+=n.substring(o,l+1);break;default:ze(61167,{path:n})}o=l+2}return new pt(i)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wa="remoteDocuments",df="owner",Gl="owner",Gd="mutationQueues",t5="userId",cr="mutations",vb="batchId",Aa="userMutationsIndex",Tb=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _m(n,e){return[n,ii(e)]}function qC(n,e,t){return[n,ii(e),t]}const n5={},vu="documentMutations",Om="remoteDocumentsV14",i5=["prefixPath","collectionGroup","readTime","documentId"],vm="documentKeyIndex",r5=["prefixPath","collectionGroup","documentId"],zC="collectionGroupIndex",s5=["collectionGroup","readTime","prefixPath","documentId"],Hd="remoteDocumentGlobal",L_="remoteDocumentGlobalKey",Tu="targets",jC="queryTargetsIndex",o5=["canonicalId","targetId"],wu="targetDocuments",a5=["targetId","path"],Yv="documentTargetsIndex",l5=["path","targetId"],Fm="targetGlobalKey",Pa="targetGlobal",$d="collectionParents",u5=["collectionId","parent"],xu="clientMetadata",c5="clientId",gp="bundles",d5="bundleId",yp="namedQueries",f5="name",Qv="indexConfiguration",h5="indexId",O_="collectionGroupIndex",m5="collectionGroup",Id="indexState",p5=["indexId","uid"],GC="sequenceNumberIndex",g5=["uid","sequenceNumber"],Ad="indexEntries",y5=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],HC="documentKeyIndex",_5=["indexId","uid","orderedDocumentKey"],_p="documentOverlays",v5=["userId","collectionPath","documentId"],F_="collectionPathOverlayIndex",T5=["userId","collectionPath","largestBatchId"],$C="collectionGroupOverlayIndex",w5=["userId","collectionGroup","largestBatchId"],Xv="globals",x5="name",WC=[Gd,cr,vu,wa,Tu,df,Pa,wu,xu,Hd,$d,gp,yp],E5=[...WC,_p],KC=[Gd,cr,vu,Om,Tu,df,Pa,wu,xu,Hd,$d,gp,yp,_p],JC=KC,Zv=[...JC,Qv,Id,Ad],b5=Zv,YC=[...Zv,Xv],S5=YC;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B_ extends OC{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function Nn(n,e){const t=Be(n);return zr.O(t.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wb(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Fo(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function QC(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e,t){this.comparator=e,this.root=t||$n.EMPTY}insert(e,t){return new $t(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,$n.BLACK,null,null))}remove(e){return new $t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,$n.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return t+i.left.size;r<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new nm(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new nm(this.root,e,this.comparator,!1)}getReverseIterator(){return new nm(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new nm(this.root,e,this.comparator,!0)}}class nm{constructor(e,t,i,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?i(e.key,t):1,t&&r&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class $n{constructor(e,t,i,r,o){this.key=e,this.value=t,this.color=i??$n.RED,this.left=r??$n.EMPTY,this.right=o??$n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,r,o){return new $n(e??this.key,t??this.value,i??this.color,r??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let r=this;const o=i(e,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(e,t,i),null):o===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return $n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),t(e,r.key)===0){if(r.right.isEmpty())return $n.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,$n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,$n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ze(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ze(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ze(27949);return e+(this.isRed()?0:1)}}$n.EMPTY=null,$n.RED=!0,$n.BLACK=!1;$n.EMPTY=new class{constructor(){this.size=0}get key(){throw ze(57766)}get value(){throw ze(16141)}get color(){throw ze(16727)}get left(){throw ze(29726)}get right(){throw ze(36894)}copy(e,t,i,r,o){return this}insert(e,t,i){return new $n(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e){this.comparator=e,this.data=new $t(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new xb(this.data.getIterator())}getIteratorFrom(e){return new xb(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof Vt)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const r=t.getNext().key,o=i.getNext().key;if(this.comparator(r,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Vt(this.comparator);return t.data=e,t}}class xb{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Hl(n){return n.hasNext()?n.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi{constructor(e){this.fields=e,e.sort(en.comparator)}static empty(){return new bi([])}unionWith(e){let t=new Vt(en.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new bi(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return yu(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XC extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I5(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(r){try{return atob(r)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new XC("Invalid base64 string: "+o):o}})(e);return new un(t)}static fromUint8Array(e){const t=(function(r){let o="";for(let l=0;l<r.length;++l)o+=String.fromCharCode(r[l]);return o})(e);return new un(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return rt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}un.EMPTY_BYTE_STRING=new un("");const A5=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function As(n){if($e(!!n,39018),typeof n=="string"){let e=0;const t=A5.exec(n);if($e(!!t,46558,{timestamp:n}),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Xt(n.seconds),nanos:Xt(n.nanos)}}function Xt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Cs(n){return typeof n=="string"?un.fromBase64String(n):un.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZC="server_timestamp",e1="__type__",t1="__previous_value__",n1="__local_write_time__";function vp(n){var t,i;return((i=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[e1])==null?void 0:i.stringValue)===ZC}function Tp(n){const e=n.mapValue.fields[t1];return vp(e)?Tp(e):e}function Wd(n){const e=As(n.mapValue.fields[n1].timestampValue);return new Nt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C5{constructor(e,t,i,r,o,l,u,f,m,y){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=r,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=u,this.longPollingOptions=f,this.useFetchStreams=m,this.isUsingEmulator=y}}const q_="(default)";class Co{constructor(e,t){this.projectId=e,this.database=t||q_}static empty(){return new Co("","")}get isDefaultDatabase(){return this.database===q_}isEqual(e){return e instanceof Co&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e0="__type__",i1="__max__",po={mapValue:{fields:{__type__:{stringValue:i1}}}},t0="__vector__",Eu="value",Tm={nullValue:"NULL_VALUE"};function Ro(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?vp(n)?4:r1(n)?9007199254740991:wp(n)?10:11:ze(28295,{value:n})}function Wr(n,e){if(n===e)return!0;const t=Ro(n);if(t!==Ro(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Wd(n).isEqual(Wd(e));case 3:return(function(r,o){if(typeof r.timestampValue=="string"&&typeof o.timestampValue=="string"&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const l=As(r.timestampValue),u=As(o.timestampValue);return l.seconds===u.seconds&&l.nanos===u.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(r,o){return Cs(r.bytesValue).isEqual(Cs(o.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(r,o){return Xt(r.geoPointValue.latitude)===Xt(o.geoPointValue.latitude)&&Xt(r.geoPointValue.longitude)===Xt(o.geoPointValue.longitude)})(n,e);case 2:return(function(r,o){if("integerValue"in r&&"integerValue"in o)return Xt(r.integerValue)===Xt(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const l=Xt(r.doubleValue),u=Xt(o.doubleValue);return l===u?jd(l)===jd(u):isNaN(l)&&isNaN(u)}return!1})(n,e);case 9:return yu(n.arrayValue.values||[],e.arrayValue.values||[],Wr);case 10:case 11:return(function(r,o){const l=r.mapValue.fields||{},u=o.mapValue.fields||{};if(wb(l)!==wb(u))return!1;for(const f in l)if(l.hasOwnProperty(f)&&(u[f]===void 0||!Wr(l[f],u[f])))return!1;return!0})(n,e);default:return ze(52216,{left:n})}}function Kd(n,e){return(n.values||[]).find((t=>Wr(t,e)))!==void 0}function No(n,e){if(n===e)return 0;const t=Ro(n),i=Ro(e);if(t!==i)return rt(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return rt(n.booleanValue,e.booleanValue);case 2:return(function(o,l){const u=Xt(o.integerValue||o.doubleValue),f=Xt(l.integerValue||l.doubleValue);return u<f?-1:u>f?1:u===f?0:isNaN(u)?isNaN(f)?0:-1:1})(n,e);case 3:return Eb(n.timestampValue,e.timestampValue);case 4:return Eb(Wd(n),Wd(e));case 5:return V_(n.stringValue,e.stringValue);case 6:return(function(o,l){const u=Cs(o),f=Cs(l);return u.compareTo(f)})(n.bytesValue,e.bytesValue);case 7:return(function(o,l){const u=o.split("/"),f=l.split("/");for(let m=0;m<u.length&&m<f.length;m++){const y=rt(u[m],f[m]);if(y!==0)return y}return rt(u.length,f.length)})(n.referenceValue,e.referenceValue);case 8:return(function(o,l){const u=rt(Xt(o.latitude),Xt(l.latitude));return u!==0?u:rt(Xt(o.longitude),Xt(l.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return bb(n.arrayValue,e.arrayValue);case 10:return(function(o,l){var w,E,S,b;const u=o.fields||{},f=l.fields||{},m=(w=u[Eu])==null?void 0:w.arrayValue,y=(E=f[Eu])==null?void 0:E.arrayValue,v=rt(((S=m==null?void 0:m.values)==null?void 0:S.length)||0,((b=y==null?void 0:y.values)==null?void 0:b.length)||0);return v!==0?v:bb(m,y)})(n.mapValue,e.mapValue);case 11:return(function(o,l){if(o===po.mapValue&&l===po.mapValue)return 0;if(o===po.mapValue)return 1;if(l===po.mapValue)return-1;const u=o.fields||{},f=Object.keys(u),m=l.fields||{},y=Object.keys(m);f.sort(),y.sort();for(let v=0;v<f.length&&v<y.length;++v){const w=V_(f[v],y[v]);if(w!==0)return w;const E=No(u[f[v]],m[y[v]]);if(E!==0)return E}return rt(f.length,y.length)})(n.mapValue,e.mapValue);default:throw ze(23264,{he:t})}}function Eb(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return rt(n,e);const t=As(n),i=As(e),r=rt(t.seconds,i.seconds);return r!==0?r:rt(t.nanos,i.nanos)}function bb(n,e){const t=n.values||[],i=e.values||[];for(let r=0;r<t.length&&r<i.length;++r){const o=No(t[r],i[r]);if(o)return o}return rt(t.length,i.length)}function bu(n){return z_(n)}function z_(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const i=As(t);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Cs(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Le.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let i="[",r=!0;for(const o of t.values||[])r?r=!1:i+=",",i+=z_(o);return i+"]"})(n.arrayValue):"mapValue"in n?(function(t){const i=Object.keys(t.fields||{}).sort();let r="{",o=!0;for(const l of i)o?o=!1:r+=",",r+=`${l}:${z_(t.fields[l])}`;return r+"}"})(n.mapValue):ze(61005,{value:n})}function wm(n){switch(Ro(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Tp(n);return e?16+wm(e):16;case 5:return 2*n.stringValue.length;case 6:return Cs(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((r,o)=>r+wm(o)),0)})(n.arrayValue);case 10:case 11:return(function(i){let r=0;return Fo(i.fields,((o,l)=>{r+=o.length+wm(l)})),r})(n.mapValue);default:throw ze(13486,{value:n})}}function Ma(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function j_(n){return!!n&&"integerValue"in n}function Jd(n){return!!n&&"arrayValue"in n}function Sb(n){return!!n&&"nullValue"in n}function Ib(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function xm(n){return!!n&&"mapValue"in n}function wp(n){var t,i;return((i=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[e0])==null?void 0:i.stringValue)===t0}function Cd(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Fo(n.mapValue.fields,((t,i)=>e.mapValue.fields[t]=Cd(i))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Cd(n.arrayValue.values[t]);return e}return{...n}}function r1(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===i1}const s1={mapValue:{fields:{[e0]:{stringValue:t0},[Eu]:{arrayValue:{}}}}};function R5(n){return"nullValue"in n?Tm:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Ma(Co.empty(),Le.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?wp(n)?s1:{mapValue:{}}:ze(35942,{value:n})}function N5(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Ma(Co.empty(),Le.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?s1:"mapValue"in n?wp(n)?{mapValue:{}}:po:ze(61959,{value:n})}function Ab(n,e){const t=No(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function Cb(n,e){const t=No(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn{constructor(e){this.value=e}static empty(){return new Wn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!xm(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Cd(t)}setAll(e){let t=en.emptyPath(),i={},r=[];e.forEach(((l,u)=>{if(!t.isImmediateParentOf(u)){const f=this.getFieldsMap(t);this.applyChanges(f,i,r),i={},r=[],t=u.popLast()}l?i[u.lastSegment()]=Cd(l):r.push(u.lastSegment())}));const o=this.getFieldsMap(t);this.applyChanges(o,i,r)}delete(e){const t=this.field(e.popLast());xm(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Wr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=t.mapValue.fields[e.get(i)];xm(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,i){Fo(t,((r,o)=>e[r]=o));for(const r of i)delete e[r]}clone(){return new Wn(Cd(this.value))}}function o1(n){const e=[];return Fo(n.fields,((t,i)=>{const r=new en([t]);if(xm(i)){const o=o1(i.mapValue).fields;if(o.length===0)e.push(r);else for(const l of o)e.push(r.child(l))}else e.push(r)})),new bi(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e,t,i,r,o,l,u){this.key=e,this.documentType=t,this.version=i,this.readTime=r,this.createTime=o,this.data=l,this.documentState=u}static newInvalidDocument(e){return new Jt(e,0,Je.min(),Je.min(),Je.min(),Wn.empty(),0)}static newFoundDocument(e,t,i,r){return new Jt(e,1,t,Je.min(),i,r,0)}static newNoDocument(e,t){return new Jt(e,2,t,Je.min(),Je.min(),Wn.empty(),0)}static newUnknownDocument(e,t){return new Jt(e,3,t,Je.min(),Je.min(),Wn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Je.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Wn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Wn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Je.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Jt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Jt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po{constructor(e,t){this.position=e,this.inclusive=t}}function Rb(n,e,t){let i=0;for(let r=0;r<n.position.length;r++){const o=e[r],l=n.position[r];if(o.field.isKeyField()?i=Le.comparator(Le.fromName(l.referenceValue),t.key):i=No(l,t.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function Nb(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Wr(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yd{constructor(e,t="asc"){this.field=e,this.dir=t}}function P5(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a1{}class gt extends a1{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new k5(e,t,i):t==="array-contains"?new V5(e,i):t==="in"?new h1(e,i):t==="not-in"?new U5(e,i):t==="array-contains-any"?new L5(e,i):new gt(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new D5(e,i):new M5(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(No(t,this.value)):t!==null&&Ro(this.value)===Ro(t)&&this.matchesComparison(No(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ze(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Mt extends a1{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Mt(e,t)}matches(e){return Su(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Su(n){return n.op==="and"}function G_(n){return n.op==="or"}function n0(n){return l1(n)&&Su(n)}function l1(n){for(const e of n.filters)if(e instanceof Mt)return!1;return!0}function H_(n){if(n instanceof gt)return n.field.canonicalString()+n.op.toString()+bu(n.value);if(n0(n))return n.filters.map((e=>H_(e))).join(",");{const e=n.filters.map((t=>H_(t))).join(",");return`${n.op}(${e})`}}function u1(n,e){return n instanceof gt?(function(i,r){return r instanceof gt&&i.op===r.op&&i.field.isEqual(r.field)&&Wr(i.value,r.value)})(n,e):n instanceof Mt?(function(i,r){return r instanceof Mt&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce(((o,l,u)=>o&&u1(l,r.filters[u])),!0):!1})(n,e):void ze(19439)}function c1(n,e){const t=n.filters.concat(e);return Mt.create(t,n.op)}function d1(n){return n instanceof gt?(function(t){return`${t.field.canonicalString()} ${t.op} ${bu(t.value)}`})(n):n instanceof Mt?(function(t){return t.op.toString()+" {"+t.getFilters().map(d1).join(" ,")+"}"})(n):"Filter"}class k5 extends gt{constructor(e,t,i){super(e,t,i),this.key=Le.fromName(i.referenceValue)}matches(e){const t=Le.comparator(e.key,this.key);return this.matchesComparison(t)}}class D5 extends gt{constructor(e,t){super(e,"in",t),this.keys=f1("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class M5 extends gt{constructor(e,t){super(e,"not-in",t),this.keys=f1("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function f1(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((i=>Le.fromName(i.referenceValue)))}class V5 extends gt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Jd(t)&&Kd(t.arrayValue,this.value)}}class h1 extends gt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Kd(this.value.arrayValue,t)}}class U5 extends gt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Kd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Kd(this.value.arrayValue,t)}}class L5 extends gt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Jd(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>Kd(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O5{constructor(e,t=null,i=[],r=[],o=null,l=null,u=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=r,this.limit=o,this.startAt=l,this.endAt=u,this.Te=null}}function $_(n,e=null,t=[],i=[],r=null,o=null,l=null){return new O5(n,e,t,i,r,o,l)}function Va(n){const e=Be(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>H_(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(o){return o.field.canonicalString()+o.dir})(i))).join(","),cf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>bu(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>bu(i))).join(",")),e.Te=t}return e.Te}function ff(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!P5(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!u1(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Nb(n.startAt,e.startAt)&&Nb(n.endAt,e.endAt)}function Bm(n){return Le.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function qm(n,e){return n.filters.filter((t=>t instanceof gt&&t.field.isEqual(e)))}function Pb(n,e,t){let i=Tm,r=!0;for(const o of qm(n,e)){let l=Tm,u=!0;switch(o.op){case"<":case"<=":l=R5(o.value);break;case"==":case"in":case">=":l=o.value;break;case">":l=o.value,u=!1;break;case"!=":case"not-in":l=Tm}Ab({value:i,inclusive:r},{value:l,inclusive:u})<0&&(i=l,r=u)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const l=t.position[o];Ab({value:i,inclusive:r},{value:l,inclusive:t.inclusive})<0&&(i=l,r=t.inclusive);break}}return{value:i,inclusive:r}}function kb(n,e,t){let i=po,r=!0;for(const o of qm(n,e)){let l=po,u=!0;switch(o.op){case">=":case">":l=N5(o.value),u=!1;break;case"==":case"in":case"<=":l=o.value;break;case"<":l=o.value,u=!1;break;case"!=":case"not-in":l=po}Cb({value:i,inclusive:r},{value:l,inclusive:u})>0&&(i=l,r=u)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const l=t.position[o];Cb({value:i,inclusive:r},{value:l,inclusive:t.inclusive})>0&&(i=l,r=t.inclusive);break}}return{value:i,inclusive:r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns{constructor(e,t=null,i=[],r=[],o=null,l="F",u=null,f=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=r,this.limit=o,this.limitType=l,this.startAt=u,this.endAt=f,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function m1(n,e,t,i,r,o,l,u){return new Ns(n,e,t,i,r,o,l,u)}function zu(n){return new Ns(n)}function Db(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function i0(n){return n.collectionGroup!==null}function ou(n){const e=Be(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),t.add(o.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let u=new Vt(en.comparator);return l.filters.forEach((f=>{f.getFlattenedFilters().forEach((m=>{m.isInequality()&&(u=u.add(m.field))}))})),u})(e).forEach((o=>{t.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new Yd(o,i))})),t.has(en.keyField().canonicalString())||e.Ie.push(new Yd(en.keyField(),i))}return e.Ie}function yi(n){const e=Be(n);return e.Ee||(e.Ee=F5(e,ou(n))),e.Ee}function F5(n,e){if(n.limitType==="F")return $_(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((r=>{const o=r.dir==="desc"?"asc":"desc";return new Yd(r.field,o)}));const t=n.endAt?new Po(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new Po(n.startAt.position,n.startAt.inclusive):null;return $_(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function W_(n,e){const t=n.filters.concat([e]);return new Ns(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function zm(n,e,t){return new Ns(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function hf(n,e){return ff(yi(n),yi(e))&&n.limitType===e.limitType}function p1(n){return`${Va(yi(n))}|lt:${n.limitType}`}function Zl(n){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((r=>d1(r))).join(", ")}]`),cf(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((r=>(function(l){return`${l.field.canonicalString()} (${l.dir})`})(r))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((r=>bu(r))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((r=>bu(r))).join(",")),`Target(${i})`})(yi(n))}; limitType=${n.limitType})`}function mf(n,e){return e.isFoundDocument()&&(function(i,r){const o=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):Le.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)})(n,e)&&(function(i,r){for(const o of ou(i))if(!o.field.isKeyField()&&r.data.field(o.field)===null)return!1;return!0})(n,e)&&(function(i,r){for(const o of i.filters)if(!o.matches(r))return!1;return!0})(n,e)&&(function(i,r){return!(i.startAt&&!(function(l,u,f){const m=Rb(l,u,f);return l.inclusive?m<=0:m<0})(i.startAt,ou(i),r)||i.endAt&&!(function(l,u,f){const m=Rb(l,u,f);return l.inclusive?m>=0:m>0})(i.endAt,ou(i),r))})(n,e)}function g1(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function y1(n){return(e,t)=>{let i=!1;for(const r of ou(n)){const o=B5(r,e,t);if(o!==0)return o;i=i||r.field.isKeyField()}return 0}}function B5(n,e,t){const i=n.field.isKeyField()?Le.comparator(e.key,t.key):(function(o,l,u){const f=l.data.field(o),m=u.data.field(o);return f!==null&&m!==null?No(f,m):ze(42886)})(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return ze(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[r,o]of i)if(this.equalsFn(r,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return void(r[o]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[t]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Fo(this.inner,((t,i)=>{for(const[r,o]of i)e(r,o)}))}isEmpty(){return QC(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q5=new $t(Le.comparator);function Si(){return q5}const _1=new $t(Le.comparator);function _d(...n){let e=_1;for(const t of n)e=e.insert(t.key,t);return e}function v1(n){let e=_1;return n.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function Br(){return Rd()}function T1(){return Rd()}function Rd(){return new Ps((n=>n.toString()),((n,e)=>n.isEqual(e)))}const z5=new $t(Le.comparator),j5=new Vt(Le.comparator);function at(...n){let e=j5;for(const t of n)e=e.add(t);return e}const G5=new Vt(rt);function r0(){return G5}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s0(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:jd(e)?"-0":e}}function w1(n){return{integerValue:""+n}}function x1(n,e){return BC(e)?w1(e):s0(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xp{constructor(){this._=void 0}}function H5(n,e,t){return n instanceof Iu?(function(r,o){const l={fields:{[e1]:{stringValue:ZC},[n1]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&vp(o)&&(o=Tp(o)),o&&(l.fields[t1]=o),{mapValue:l}})(t,e):n instanceof Ua?b1(n,e):n instanceof La?S1(n,e):(function(r,o){const l=E1(r,o),u=Mb(l)+Mb(r.Ae);return j_(l)&&j_(r.Ae)?w1(u):s0(r.serializer,u)})(n,e)}function $5(n,e,t){return n instanceof Ua?b1(n,e):n instanceof La?S1(n,e):t}function E1(n,e){return n instanceof Au?(function(i){return j_(i)||(function(o){return!!o&&"doubleValue"in o})(i)})(e)?e:{integerValue:0}:null}class Iu extends xp{}class Ua extends xp{constructor(e){super(),this.elements=e}}function b1(n,e){const t=I1(e);for(const i of n.elements)t.some((r=>Wr(r,i)))||t.push(i);return{arrayValue:{values:t}}}class La extends xp{constructor(e){super(),this.elements=e}}function S1(n,e){let t=I1(e);for(const i of n.elements)t=t.filter((r=>!Wr(r,i)));return{arrayValue:{values:t}}}class Au extends xp{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Mb(n){return Xt(n.integerValue||n.doubleValue)}function I1(n){return Jd(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pf{constructor(e,t){this.field=e,this.transform=t}}function W5(n,e){return n.field.isEqual(e.field)&&(function(i,r){return i instanceof Ua&&r instanceof Ua||i instanceof La&&r instanceof La?yu(i.elements,r.elements,Wr):i instanceof Au&&r instanceof Au?Wr(i.Ae,r.Ae):i instanceof Iu&&r instanceof Iu})(n.transform,e.transform)}class K5{constructor(e,t){this.version=e,this.transformResults=t}}class tn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new tn}static exists(e){return new tn(void 0,e)}static updateTime(e){return new tn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Em(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Ep{}function A1(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Gu(n.key,tn.none()):new ju(n.key,n.data,tn.none());{const t=n.data,i=Wn.empty();let r=new Vt(en.comparator);for(let o of e.fields)if(!r.has(o)){let l=t.field(o);l===null&&o.length>1&&(o=o.popLast(),l=t.field(o)),l===null?i.delete(o):i.set(o,l),r=r.add(o)}return new ks(n.key,i,new bi(r.toArray()),tn.none())}}function J5(n,e,t){n instanceof ju?(function(r,o,l){const u=r.value.clone(),f=Ub(r.fieldTransforms,o,l.transformResults);u.setAll(f),o.convertToFoundDocument(l.version,u).setHasCommittedMutations()})(n,e,t):n instanceof ks?(function(r,o,l){if(!Em(r.precondition,o))return void o.convertToUnknownDocument(l.version);const u=Ub(r.fieldTransforms,o,l.transformResults),f=o.data;f.setAll(C1(r)),f.setAll(u),o.convertToFoundDocument(l.version,f).setHasCommittedMutations()})(n,e,t):(function(r,o,l){o.convertToNoDocument(l.version).setHasCommittedMutations()})(0,e,t)}function Nd(n,e,t,i){return n instanceof ju?(function(o,l,u,f){if(!Em(o.precondition,l))return u;const m=o.value.clone(),y=Lb(o.fieldTransforms,f,l);return m.setAll(y),l.convertToFoundDocument(l.version,m).setHasLocalMutations(),null})(n,e,t,i):n instanceof ks?(function(o,l,u,f){if(!Em(o.precondition,l))return u;const m=Lb(o.fieldTransforms,f,l),y=l.data;return y.setAll(C1(o)),y.setAll(m),l.convertToFoundDocument(l.version,y).setHasLocalMutations(),u===null?null:u.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map((v=>v.field)))})(n,e,t,i):(function(o,l,u){return Em(o.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):u})(n,e,t)}function Y5(n,e){let t=null;for(const i of n.fieldTransforms){const r=e.data.field(i.field),o=E1(i.transform,r||null);o!=null&&(t===null&&(t=Wn.empty()),t.set(i.field,o))}return t||null}function Vb(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&yu(i,r,((o,l)=>W5(o,l)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class ju extends Ep{constructor(e,t,i,r=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class ks extends Ep{constructor(e,t,i,r,o=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function C1(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}})),e}function Ub(n,e,t){const i=new Map;$e(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let r=0;r<t.length;r++){const o=n[r],l=o.transform,u=e.data.field(o.field);i.set(o.field,$5(l,u,t[r]))}return i}function Lb(n,e,t){const i=new Map;for(const r of n){const o=r.transform,l=t.data.field(r.field);i.set(r.field,H5(o,l,e))}return i}class Gu extends Ep{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class o0 extends Ep{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a0{constructor(e,t,i,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const o=this.mutations[r];o.key.isEqual(e.key)&&J5(o,e,i[r])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=Nd(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=Nd(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=T1();return this.mutations.forEach((r=>{const o=e.get(r.key),l=o.overlayedDocument;let u=this.applyToLocalView(l,o.mutatedFields);u=t.has(r.key)?null:u;const f=A1(l,u);f!==null&&i.set(r.key,f),l.isValidDocument()||l.convertToNoDocument(Je.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),at())}isEqual(e){return this.batchId===e.batchId&&yu(this.mutations,e.mutations,((t,i)=>Vb(t,i)))&&yu(this.baseMutations,e.baseMutations,((t,i)=>Vb(t,i)))}}class l0{constructor(e,t,i,r){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=r}static from(e,t,i){$e(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let r=(function(){return z5})();const o=e.mutations;for(let l=0;l<o.length;l++)r=r.insert(o[l].key,i[l].version);return new l0(e,t,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u0{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q5{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xn,Et;function R1(n){switch(n){case ye.OK:return ze(64938);case ye.CANCELLED:case ye.UNKNOWN:case ye.DEADLINE_EXCEEDED:case ye.RESOURCE_EXHAUSTED:case ye.INTERNAL:case ye.UNAVAILABLE:case ye.UNAUTHENTICATED:return!1;case ye.INVALID_ARGUMENT:case ye.NOT_FOUND:case ye.ALREADY_EXISTS:case ye.PERMISSION_DENIED:case ye.FAILED_PRECONDITION:case ye.ABORTED:case ye.OUT_OF_RANGE:case ye.UNIMPLEMENTED:case ye.DATA_LOSS:return!0;default:return ze(15467,{code:n})}}function N1(n){if(n===void 0)return pn("GRPC error has no .code"),ye.UNKNOWN;switch(n){case xn.OK:return ye.OK;case xn.CANCELLED:return ye.CANCELLED;case xn.UNKNOWN:return ye.UNKNOWN;case xn.DEADLINE_EXCEEDED:return ye.DEADLINE_EXCEEDED;case xn.RESOURCE_EXHAUSTED:return ye.RESOURCE_EXHAUSTED;case xn.INTERNAL:return ye.INTERNAL;case xn.UNAVAILABLE:return ye.UNAVAILABLE;case xn.UNAUTHENTICATED:return ye.UNAUTHENTICATED;case xn.INVALID_ARGUMENT:return ye.INVALID_ARGUMENT;case xn.NOT_FOUND:return ye.NOT_FOUND;case xn.ALREADY_EXISTS:return ye.ALREADY_EXISTS;case xn.PERMISSION_DENIED:return ye.PERMISSION_DENIED;case xn.FAILED_PRECONDITION:return ye.FAILED_PRECONDITION;case xn.ABORTED:return ye.ABORTED;case xn.OUT_OF_RANGE:return ye.OUT_OF_RANGE;case xn.UNIMPLEMENTED:return ye.UNIMPLEMENTED;case xn.DATA_LOSS:return ye.DATA_LOSS;default:return ze(39323,{code:n})}}(Et=xn||(xn={}))[Et.OK=0]="OK",Et[Et.CANCELLED=1]="CANCELLED",Et[Et.UNKNOWN=2]="UNKNOWN",Et[Et.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Et[Et.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Et[Et.NOT_FOUND=5]="NOT_FOUND",Et[Et.ALREADY_EXISTS=6]="ALREADY_EXISTS",Et[Et.PERMISSION_DENIED=7]="PERMISSION_DENIED",Et[Et.UNAUTHENTICATED=16]="UNAUTHENTICATED",Et[Et.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Et[Et.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Et[Et.ABORTED=10]="ABORTED",Et[Et.OUT_OF_RANGE=11]="OUT_OF_RANGE",Et[Et.UNIMPLEMENTED=12]="UNIMPLEMENTED",Et[Et.INTERNAL=13]="INTERNAL",Et[Et.UNAVAILABLE=14]="UNAVAILABLE",Et[Et.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P1(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X5=new vo([4294967295,4294967295],0);function Ob(n){const e=P1().encode(n),t=new EC;return t.update(e),new Uint8Array(t.digest())}function Fb(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new vo([t,i],0),new vo([r,o],0)]}class c0{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new vd(`Invalid padding: ${t}`);if(i<0)throw new vd(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new vd(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new vd(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=vo.fromNumber(this.ge)}ye(e,t,i){let r=e.add(t.multiply(vo.fromNumber(i)));return r.compare(X5)===1&&(r=new vo([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=Ob(e),[i,r]=Fb(t);for(let o=0;o<this.hashCount;o++){const l=this.ye(i,r,o);if(!this.we(l))return!1}return!0}static create(e,t,i){const r=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),l=new c0(o,r,t);return i.forEach((u=>l.insert(u))),l}insert(e){if(this.ge===0)return;const t=Ob(e),[i,r]=Fb(t);for(let o=0;o<this.hashCount;o++){const l=this.ye(i,r,o);this.Se(l)}}Se(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class vd extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gf{constructor(e,t,i,r,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const r=new Map;return r.set(e,yf.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new gf(Je.min(),r,new $t(rt),Si(),at())}}class yf{constructor(e,t,i,r,o){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new yf(i,t,at(),at(),at())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bm{constructor(e,t,i,r){this.be=e,this.removedTargetIds=t,this.key=i,this.De=r}}class k1{constructor(e,t){this.targetId=e,this.Ce=t}}class D1{constructor(e,t,i=un.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=r}}class Bb{constructor(){this.ve=0,this.Fe=qb(),this.Me=un.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=at(),t=at(),i=at();return this.Fe.forEach(((r,o)=>{switch(o){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:i=i.add(r);break;default:ze(38017,{changeType:o})}})),new yf(this.Me,this.xe,e,t,i)}qe(){this.Oe=!1,this.Fe=qb()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,$e(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class Z5{constructor(e){this.Ge=e,this.ze=new Map,this.je=Si(),this.Je=im(),this.He=im(),this.Ye=new $t(rt)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:ze(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,r)=>{this.rt(r)&&t(r)}))}st(e){const t=e.targetId,i=e.Ce.count,r=this.ot(t);if(r){const o=r.target;if(Bm(o))if(i===0){const l=new Le(o.path);this.et(t,l,Jt.newNoDocument(l,Je.min()))}else $e(i===1,20013,{expectedCount:i});else{const l=this._t(t);if(l!==i){const u=this.ut(e),f=u?this.ct(u,e,l):1;if(f!==0){this.it(t);const m=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,m)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:o=0}=t;let l,u;try{l=Cs(i).toUint8Array()}catch(f){if(f instanceof XC)return $r("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{u=new c0(l,r,o)}catch(f){return $r(f instanceof vd?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return u.ge===0?null:u}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let r=0;return i.forEach((o=>{const l=this.Ge.ht(),u=`projects/${l.projectId}/databases/${l.database}/documents/${o.path.canonicalString()}`;e.mightContain(u)||(this.et(t,o,null),r++)})),r}Tt(e){const t=new Map;this.ze.forEach(((o,l)=>{const u=this.ot(l);if(u){if(o.current&&Bm(u.target)){const f=new Le(u.target.path);this.It(f).has(l)||this.Et(l,f)||this.et(l,f,Jt.newNoDocument(f,e))}o.Be&&(t.set(l,o.ke()),o.qe())}}));let i=at();this.He.forEach(((o,l)=>{let u=!0;l.forEachWhile((f=>{const m=this.ot(f);return!m||m.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)})),u&&(i=i.add(o))})),this.je.forEach(((o,l)=>l.setReadTime(e)));const r=new gf(e,t,this.Ye,this.je,i);return this.je=Si(),this.Je=im(),this.He=im(),this.Ye=new $t(rt),r}Xe(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,i),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,t)?r.Qe(t,1):r.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new Bb,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Vt(rt),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Vt(rt),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||Pe("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Bb),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function im(){return new $t(Le.comparator)}function qb(){return new $t(Le.comparator)}const eV={asc:"ASCENDING",desc:"DESCENDING"},tV={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},nV={and:"AND",or:"OR"};class iV{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function K_(n,e){return n.useProto3Json||cf(e)?e:{value:e}}function Cu(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function M1(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function rV(n,e){return Cu(n,e.toTimestamp())}function gn(n){return $e(!!n,49232),Je.fromTimestamp((function(t){const i=As(t);return new Nt(i.seconds,i.nanos)})(n))}function d0(n,e){return J_(n,e).canonicalString()}function J_(n,e){const t=(function(r){return new pt(["projects",r.projectId,"databases",r.database])})(n).child("documents");return e===void 0?t:t.child(e)}function V1(n){const e=pt.fromString(n);return $e(H1(e),10190,{key:e.toString()}),e}function Qd(n,e){return d0(n.databaseId,e.path)}function jr(n,e){const t=V1(e);if(t.get(1)!==n.databaseId.projectId)throw new Re(ye.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Re(ye.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Le(O1(t))}function U1(n,e){return d0(n.databaseId,e)}function L1(n){const e=V1(n);return e.length===4?pt.emptyPath():O1(e)}function Y_(n){return new pt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function O1(n){return $e(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function zb(n,e,t){return{name:Qd(n,e),fields:t.value.mapValue.fields}}function F1(n,e,t){const i=jr(n,e.name),r=gn(e.updateTime),o=e.createTime?gn(e.createTime):Je.min(),l=new Wn({mapValue:{fields:e.fields}}),u=Jt.newFoundDocument(i,r,o,l);return t&&u.setHasCommittedMutations(),t?u.setHasCommittedMutations():u}function sV(n,e){return"found"in e?(function(i,r){$e(!!r.found,43571),r.found.name,r.found.updateTime;const o=jr(i,r.found.name),l=gn(r.found.updateTime),u=r.found.createTime?gn(r.found.createTime):Je.min(),f=new Wn({mapValue:{fields:r.found.fields}});return Jt.newFoundDocument(o,l,u,f)})(n,e):"missing"in e?(function(i,r){$e(!!r.missing,3894),$e(!!r.readTime,22933);const o=jr(i,r.missing),l=gn(r.readTime);return Jt.newNoDocument(o,l)})(n,e):ze(7234,{result:e})}function oV(n,e){let t;if("targetChange"in e){e.targetChange;const i=(function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:ze(39313,{state:m})})(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],o=(function(m,y){return m.useProto3Json?($e(y===void 0||typeof y=="string",58123),un.fromBase64String(y||"")):($e(y===void 0||y instanceof Buffer||y instanceof Uint8Array,16193),un.fromUint8Array(y||new Uint8Array))})(n,e.targetChange.resumeToken),l=e.targetChange.cause,u=l&&(function(m){const y=m.code===void 0?ye.UNKNOWN:N1(m.code);return new Re(y,m.message||"")})(l);t=new D1(i,r,o,u||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=jr(n,i.document.name),o=gn(i.document.updateTime),l=i.document.createTime?gn(i.document.createTime):Je.min(),u=new Wn({mapValue:{fields:i.document.fields}}),f=Jt.newFoundDocument(r,o,l,u),m=i.targetIds||[],y=i.removedTargetIds||[];t=new bm(m,y,f.key,f)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=jr(n,i.document),o=i.readTime?gn(i.readTime):Je.min(),l=Jt.newNoDocument(r,o),u=i.removedTargetIds||[];t=new bm([],u,l.key,l)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=jr(n,i.document),o=i.removedTargetIds||[];t=new bm([],o,r,null)}else{if(!("filter"in e))return ze(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:o}=i,l=new Q5(r,o),u=i.targetId;t=new k1(u,l)}}return t}function Xd(n,e){let t;if(e instanceof ju)t={update:zb(n,e.key,e.value)};else if(e instanceof Gu)t={delete:Qd(n,e.key)};else if(e instanceof ks)t={update:zb(n,e.key,e.data),updateMask:fV(e.fieldMask)};else{if(!(e instanceof o0))return ze(16599,{Vt:e.type});t={verify:Qd(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(o,l){const u=l.transform;if(u instanceof Iu)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof Ua)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof La)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Au)return{fieldPath:l.field.canonicalString(),increment:u.Ae};throw ze(20930,{transform:l.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(r,o){return o.updateTime!==void 0?{updateTime:rV(r,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:ze(27497)})(n,e.precondition)),t}function Q_(n,e){const t=e.currentDocument?(function(o){return o.updateTime!==void 0?tn.updateTime(gn(o.updateTime)):o.exists!==void 0?tn.exists(o.exists):tn.none()})(e.currentDocument):tn.none(),i=e.updateTransforms?e.updateTransforms.map((r=>(function(l,u){let f=null;if("setToServerValue"in u)$e(u.setToServerValue==="REQUEST_TIME",16630,{proto:u}),f=new Iu;else if("appendMissingElements"in u){const y=u.appendMissingElements.values||[];f=new Ua(y)}else if("removeAllFromArray"in u){const y=u.removeAllFromArray.values||[];f=new La(y)}else"increment"in u?f=new Au(l,u.increment):ze(16584,{proto:u});const m=en.fromServerFormat(u.fieldPath);return new pf(m,f)})(n,r))):[];if(e.update){e.update.name;const r=jr(n,e.update.name),o=new Wn({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=(function(f){const m=f.fieldPaths||[];return new bi(m.map((y=>en.fromServerFormat(y))))})(e.updateMask);return new ks(r,o,l,t,i)}return new ju(r,o,t,i)}if(e.delete){const r=jr(n,e.delete);return new Gu(r,t)}if(e.verify){const r=jr(n,e.verify);return new o0(r,t)}return ze(1463,{proto:e})}function aV(n,e){return n&&n.length>0?($e(e!==void 0,14353),n.map((t=>(function(r,o){let l=r.updateTime?gn(r.updateTime):gn(o);return l.isEqual(Je.min())&&(l=gn(o)),new K5(l,r.transformResults||[])})(t,e)))):[]}function B1(n,e){return{documents:[U1(n,e.path)]}}function q1(n,e){const t={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=U1(n,r);const o=(function(m){if(m.length!==0)return G1(Mt.create(m,"and"))})(e.filters);o&&(t.structuredQuery.where=o);const l=(function(m){if(m.length!==0)return m.map((y=>(function(w){return{field:eu(w.field),direction:uV(w.dir)}})(y)))})(e.orderBy);l&&(t.structuredQuery.orderBy=l);const u=K_(n,e.limit);return u!==null&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt=(function(m){return{before:m.inclusive,values:m.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(m){return{before:!m.inclusive,values:m.position}})(e.endAt)),{ft:t,parent:r}}function z1(n){let e=L1(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let r=null;if(i>0){$e(i===1,65062);const y=t.from[0];y.allDescendants?r=y.collectionId:e=e.child(y.collectionId)}let o=[];t.where&&(o=(function(v){const w=j1(v);return w instanceof Mt&&n0(w)?w.getFilters():[w]})(t.where));let l=[];t.orderBy&&(l=(function(v){return v.map((w=>(function(S){return new Yd(tu(S.field),(function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(S.direction))})(w)))})(t.orderBy));let u=null;t.limit&&(u=(function(v){let w;return w=typeof v=="object"?v.value:v,cf(w)?null:w})(t.limit));let f=null;t.startAt&&(f=(function(v){const w=!!v.before,E=v.values||[];return new Po(E,w)})(t.startAt));let m=null;return t.endAt&&(m=(function(v){const w=!v.before,E=v.values||[];return new Po(E,w)})(t.endAt)),m1(e,r,l,o,u,"F",f,m)}function lV(n,e){const t=(function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ze(28987,{purpose:r})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function j1(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=tu(t.unaryFilter.field);return gt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=tu(t.unaryFilter.field);return gt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=tu(t.unaryFilter.field);return gt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=tu(t.unaryFilter.field);return gt.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ze(61313);default:return ze(60726)}})(n):n.fieldFilter!==void 0?(function(t){return gt.create(tu(t.fieldFilter.field),(function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ze(58110);default:return ze(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Mt.create(t.compositeFilter.filters.map((i=>j1(i))),(function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return ze(1026)}})(t.compositeFilter.op))})(n):ze(30097,{filter:n})}function uV(n){return eV[n]}function cV(n){return tV[n]}function dV(n){return nV[n]}function eu(n){return{fieldPath:n.canonicalString()}}function tu(n){return en.fromServerFormat(n.fieldPath)}function G1(n){return n instanceof gt?(function(t){if(t.op==="=="){if(Ib(t.value))return{unaryFilter:{field:eu(t.field),op:"IS_NAN"}};if(Sb(t.value))return{unaryFilter:{field:eu(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Ib(t.value))return{unaryFilter:{field:eu(t.field),op:"IS_NOT_NAN"}};if(Sb(t.value))return{unaryFilter:{field:eu(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:eu(t.field),op:cV(t.op),value:t.value}}})(n):n instanceof Mt?(function(t){const i=t.getFilters().map((r=>G1(r)));return i.length===1?i[0]:{compositeFilter:{op:dV(t.op),filters:i}}})(n):ze(54877,{filter:n})}function fV(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function H1(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xs{constructor(e,t,i,r,o=Je.min(),l=Je.min(),u=un.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=u,this.expectedCount=f}withSequenceNumber(e){return new xs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new xs(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new xs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new xs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $1{constructor(e){this.yt=e}}function hV(n,e){let t;if(e.document)t=F1(n.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const i=Le.fromSegments(e.noDocument.path),r=Fa(e.noDocument.readTime);t=Jt.newNoDocument(i,r),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ze(56709);{const i=Le.fromSegments(e.unknownDocument.path),r=Fa(e.unknownDocument.version);t=Jt.newUnknownDocument(i,r)}}return e.readTime&&t.setReadTime((function(r){const o=new Nt(r[0],r[1]);return Je.fromTimestamp(o)})(e.readTime)),t}function jb(n,e){const t=e.key,i={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:jm(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document=(function(o,l){return{name:Qd(o,l.key),fields:l.data.value.mapValue.fields,updateTime:Cu(o,l.version.toTimestamp()),createTime:Cu(o,l.createTime.toTimestamp())}})(n.yt,e);else if(e.isNoDocument())i.noDocument={path:t.path.toArray(),readTime:Oa(e.version)};else{if(!e.isUnknownDocument())return ze(57904,{document:e});i.unknownDocument={path:t.path.toArray(),version:Oa(e.version)}}return i}function jm(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Oa(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Fa(n){const e=new Nt(n.seconds,n.nanoseconds);return Je.fromTimestamp(e)}function Ea(n,e){const t=(e.baseMutations||[]).map((o=>Q_(n.yt,o)));for(let o=0;o<e.mutations.length-1;++o){const l=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){const u=e.mutations[o+1];l.updateTransforms=u.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}const i=e.mutations.map((o=>Q_(n.yt,o))),r=Nt.fromMillis(e.localWriteTimeMs);return new a0(e.batchId,r,t,i)}function Td(n){const e=Fa(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?Fa(n.lastLimboFreeSnapshotVersion):Je.min();let i;return i=(function(o){return o.documents!==void 0})(n.query)?(function(o){const l=o.documents.length;return $e(l===1,1966,{count:l}),yi(zu(L1(o.documents[0])))})(n.query):(function(o){return yi(z1(o))})(n.query),new xs(i,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,un.fromBase64String(n.resumeToken))}function W1(n,e){const t=Oa(e.snapshotVersion),i=Oa(e.lastLimboFreeSnapshotVersion);let r;r=Bm(e.target)?B1(n.yt,e.target):q1(n.yt,e.target).ft;const o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Va(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:r}}function f0(n){const e=z1({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?zm(e,e.limit,"L"):e}function a_(n,e){return new u0(e.largestBatchId,Q_(n.yt,e.overlayMutation))}function Gb(n,e){const t=e.path.lastSegment();return[n,ii(e.path.popLast()),t]}function Hb(n,e,t,i){return{indexId:n,uid:e,sequenceNumber:t,readTime:Oa(i.readTime),documentKey:ii(i.documentKey.path),largestBatchId:i.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mV{getBundleMetadata(e,t){return $b(e).get(t).next((i=>{if(i)return(function(o){return{id:o.bundleId,createTime:Fa(o.createTime),version:o.version}})(i)}))}saveBundleMetadata(e,t){return $b(e).put((function(r){return{bundleId:r.id,createTime:Oa(gn(r.createTime)),version:r.version}})(t))}getNamedQuery(e,t){return Wb(e).get(t).next((i=>{if(i)return(function(o){return{name:o.name,query:f0(o.bundledQuery),readTime:Fa(o.readTime)}})(i)}))}saveNamedQuery(e,t){return Wb(e).put((function(r){return{name:r.name,readTime:Oa(gn(r.readTime)),bundledQuery:r.bundledQuery}})(t))}}function $b(n){return Nn(n,gp)}function Wb(n){return Nn(n,yp)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bp{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const i=t.uid||"";return new bp(e,i)}getOverlay(e,t){return od(e).get(Gb(this.userId,t)).next((i=>i?a_(this.serializer,i):null))}getOverlays(e,t){const i=Br();return ue.forEach(t,(r=>this.getOverlay(e,r).next((o=>{o!==null&&i.set(r,o)})))).next((()=>i))}saveOverlays(e,t,i){const r=[];return i.forEach(((o,l)=>{const u=new u0(t,l);r.push(this.St(e,u))})),ue.waitFor(r)}removeOverlaysForBatchId(e,t,i){const r=new Set;t.forEach((l=>r.add(ii(l.getCollectionPath()))));const o=[];return r.forEach((l=>{const u=IDBKeyRange.bound([this.userId,l,i],[this.userId,l,i+1],!1,!0);o.push(od(e).Z(F_,u))})),ue.waitFor(o)}getOverlaysForCollection(e,t,i){const r=Br(),o=ii(t),l=IDBKeyRange.bound([this.userId,o,i],[this.userId,o,Number.POSITIVE_INFINITY],!0);return od(e).J(F_,l).next((u=>{for(const f of u){const m=a_(this.serializer,f);r.set(m.getKey(),m)}return r}))}getOverlaysForCollectionGroup(e,t,i,r){const o=Br();let l;const u=IDBKeyRange.bound([this.userId,t,i],[this.userId,t,Number.POSITIVE_INFINITY],!0);return od(e).ee({index:$C,range:u},((f,m,y)=>{const v=a_(this.serializer,m);o.size()<r||v.largestBatchId===l?(o.set(v.getKey(),v),l=v.largestBatchId):y.done()})).next((()=>o))}St(e,t){return od(e).put((function(r,o,l){const[u,f,m]=Gb(o,l.mutation.key);return{userId:o,collectionPath:f,documentId:m,collectionGroup:l.mutation.key.getCollectionGroup(),largestBatchId:l.largestBatchId,overlayMutation:Xd(r.yt,l.mutation)}})(this.serializer,this.userId,t))}}function od(n){return Nn(n,_p)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pV{bt(e){return Nn(e,Xv)}getSessionToken(e){return this.bt(e).get("sessionToken").next((t=>{const i=t==null?void 0:t.value;return i?un.fromUint8Array(i):un.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.bt(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(Xt(e.integerValue));else if("doubleValue"in e){const i=Xt(e.doubleValue);isNaN(i)?this.Ft(t,13):(this.Ft(t,15),jd(i)?t.Mt(0):t.Mt(i))}else if("timestampValue"in e){let i=e.timestampValue;this.Ft(t,20),typeof i=="string"&&(i=As(i)),t.xt(`${i.seconds||""}`),t.Mt(i.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(Cs(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const i=e.geoPointValue;this.Ft(t,45),t.Mt(i.latitude||0),t.Mt(i.longitude||0)}else"mapValue"in e?r1(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):wp(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):ze(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const i=e.fields||{};this.Ft(t,55);for(const r of Object.keys(i))this.Ot(r,t),this.Ct(i[r],t)}kt(e,t){var l,u;const i=e.fields||{};this.Ft(t,53);const r=Eu,o=((u=(l=i[r].arrayValue)==null?void 0:l.values)==null?void 0:u.length)||0;this.Ft(t,15),t.Mt(Xt(o)),this.Ot(r,t),this.Ct(i[r],t)}Qt(e,t){const i=e.values||[];this.Ft(t,50);for(const r of i)this.Ct(r,t)}Lt(e,t){this.Ft(t,37),Le.fromName(e).path.forEach((i=>{this.Ft(t,60),this.Ut(i,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}ba.Kt=new ba;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $l=255;function gV(n){if(n===0)return 8;let e=0;return n>>4||(e+=4,n<<=4),n>>6||(e+=2,n<<=2),n>>7||(e+=1),e}function Kb(n){const e=64-(function(i){let r=0;for(let o=0;o<8;++o){const l=gV(255&i[o]);if(r+=l,l!==8)break}return r})(n);return Math.ceil(e/8)}class yV{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Gt(i.value),i=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Jt(i.value),i=t.next();this.Ht()}Yt(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Gt(i);else if(i<2048)this.Gt(960|i>>>6),this.Gt(128|63&i);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i);else{const r=t.codePointAt(0);this.Gt(240|r>>>18),this.Gt(128|63&r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r)}}this.zt()}Zt(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Jt(i);else if(i<2048)this.Jt(960|i>>>6),this.Jt(128|63&i);else if(t<"\uD800"||"\uDBFF"<t)this.Jt(480|i>>>12),this.Jt(128|63&i>>>6),this.Jt(128|63&i);else{const r=t.codePointAt(0);this.Jt(240|r>>>18),this.Jt(128|63&r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r)}}this.Ht()}Xt(e){const t=this.en(e),i=Kb(t);this.tn(1+i),this.buffer[this.position++]=255&i;for(let r=t.length-i;r<t.length;++r)this.buffer[this.position++]=255&t[r]}nn(e){const t=this.en(e),i=Kb(t);this.tn(1+i),this.buffer[this.position++]=~(255&i);for(let r=t.length-i;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}rn(){this.sn($l),this.sn(255)}_n(){this.an($l),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=(function(o){const l=new DataView(new ArrayBuffer(8));return l.setFloat64(0,o,!1),new Uint8Array(l.buffer)})(e),i=!!(128&t[0]);t[0]^=i?255:128;for(let r=1;r<t.length;++r)t[r]^=i?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===$l?(this.sn($l),this.sn(0)):this.sn(t)}Jt(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===$l?(this.an($l),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let i=2*this.buffer.length;i<t&&(i=t);const r=new Uint8Array(i);r.set(this.buffer),this.buffer=r}}class _V{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class vV{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class ad{constructor(){this.cn=new yV,this.ln=new _V(this.cn),this.hn=new vV(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa{constructor(e,t,i,r){this.Tn=e,this.In=t,this.En=i,this.dn=r}An(){const e=this.dn.length,t=e===0||this.dn[e-1]===255?e+1:e,i=new Uint8Array(t);return i.set(this.dn,0),t!==e?i.set([0],this.dn.length):++i[i.length-1],new Sa(this.Tn,this.In,this.En,i)}Rn(e,t,i){return{indexId:this.Tn,uid:e,arrayValue:Sm(this.En),directionalValue:Sm(this.dn),orderedDocumentKey:Sm(t),documentKey:i.path.toArray()}}Vn(e,t,i){const r=this.Rn(e,t,i);return[r.indexId,r.uid,r.arrayValue,r.directionalValue,r.orderedDocumentKey,r.documentKey]}}function lo(n,e){let t=n.Tn-e.Tn;return t!==0?t:(t=Jb(n.En,e.En),t!==0?t:(t=Jb(n.dn,e.dn),t!==0?t:Le.comparator(n.In,e.In)))}function Jb(n,e){for(let t=0;t<n.length&&t<e.length;++t){const i=n[t]-e[t];if(i!==0)return i}return n.length-e.length}function Sm(n){return lC()?(function(t){let i="";for(let r=0;r<t.length;r++)i+=String.fromCharCode(t[r]);return i})(n):n}function Yb(n){return typeof n!="string"?n:(function(t){const i=new Uint8Array(t.length);for(let r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return i})(n)}class Qb{constructor(e){this.mn=new Vt(((t,i)=>en.comparator(t.field,i.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const t of e.filters){const i=t;i.isInequality()?this.mn=this.mn.add(i):this.gn.push(i)}}get pn(){return this.mn.size>1}yn(e){if($e(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const t=U_(e);if(t!==void 0&&!this.wn(t))return!1;const i=Ta(e);let r=new Set,o=0,l=0;for(;o<i.length&&this.wn(i[o]);++o)r=r.add(i[o].fieldPath.canonicalString());if(o===i.length)return!0;if(this.mn.size>0){const u=this.mn.getIterator().getNext();if(!r.has(u.field.canonicalString())){const f=i[o];if(!this.Sn(u,f)||!this.bn(this.fn[l++],f))return!1}++o}for(;o<i.length;++o){const u=i[o];if(l>=this.fn.length||!this.bn(this.fn[l++],u))return!1}return!0}Dn(){if(this.pn)return null;let e=new Vt(en.comparator);const t=[];for(const i of this.gn)if(!i.field.isKeyField())if(i.op==="array-contains"||i.op==="array-contains-any")t.push(new ym(i.field,2));else{if(e.has(i.field))continue;e=e.add(i.field),t.push(new ym(i.field,0))}for(const i of this.fn)i.field.isKeyField()||e.has(i.field)||(e=e.add(i.field),t.push(new ym(i.field,i.dir==="asc"?0:1)));return new Um(Um.UNKNOWN_ID,this.collectionId,t,zd.empty())}wn(e){for(const t of this.gn)if(this.Sn(t,e))return!0;return!1}Sn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const i=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===i}bn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K1(n){var t,i;if($e(n instanceof gt||n instanceof Mt,20012),n instanceof gt){if(n instanceof h1){const r=((i=(t=n.value.arrayValue)==null?void 0:t.values)==null?void 0:i.map((o=>gt.create(n.field,"==",o))))||[];return Mt.create(r,"or")}return n}const e=n.filters.map((r=>K1(r)));return Mt.create(e,n.op)}function TV(n){if(n.getFilters().length===0)return[];const e=ev(K1(n));return $e(J1(e),7391),X_(e)||Z_(e)?[e]:e.getFilters()}function X_(n){return n instanceof gt}function Z_(n){return n instanceof Mt&&n0(n)}function J1(n){return X_(n)||Z_(n)||(function(t){if(t instanceof Mt&&G_(t)){for(const i of t.getFilters())if(!X_(i)&&!Z_(i))return!1;return!0}return!1})(n)}function ev(n){if($e(n instanceof gt||n instanceof Mt,34018),n instanceof gt)return n;if(n.filters.length===1)return ev(n.filters[0]);const e=n.filters.map((i=>ev(i)));let t=Mt.create(e,n.op);return t=Gm(t),J1(t)?t:($e(t instanceof Mt,64498),$e(Su(t),40251),$e(t.filters.length>1,57927),t.filters.reduce(((i,r)=>h0(i,r))))}function h0(n,e){let t;return $e(n instanceof gt||n instanceof Mt,38388),$e(e instanceof gt||e instanceof Mt,25473),t=n instanceof gt?e instanceof gt?(function(r,o){return Mt.create([r,o],"and")})(n,e):Xb(n,e):e instanceof gt?Xb(e,n):(function(r,o){if($e(r.filters.length>0&&o.filters.length>0,48005),Su(r)&&Su(o))return c1(r,o.getFilters());const l=G_(r)?r:o,u=G_(r)?o:r,f=l.filters.map((m=>h0(m,u)));return Mt.create(f,"or")})(n,e),Gm(t)}function Xb(n,e){if(Su(e))return c1(e,n.getFilters());{const t=e.filters.map((i=>h0(n,i)));return Mt.create(t,"or")}}function Gm(n){if($e(n instanceof gt||n instanceof Mt,11850),n instanceof gt)return n;const e=n.getFilters();if(e.length===1)return Gm(e[0]);if(l1(n))return n;const t=e.map((r=>Gm(r))),i=[];return t.forEach((r=>{r instanceof gt?i.push(r):r instanceof Mt&&(r.op===n.op?i.push(...r.filters):i.push(r))})),i.length===1?i[0]:Mt.create(i,n.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wV{constructor(){this.Cn=new m0}addToCollectionParentIndex(e,t){return this.Cn.add(t),ue.resolve()}getCollectionParents(e,t){return ue.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return ue.resolve()}deleteFieldIndex(e,t){return ue.resolve()}deleteAllFieldIndexes(e){return ue.resolve()}createTargetIndexes(e,t){return ue.resolve()}getDocumentsMatchingTarget(e,t){return ue.resolve(null)}getIndexType(e,t){return ue.resolve(0)}getFieldIndexes(e,t){return ue.resolve([])}getNextCollectionGroupToUpdate(e){return ue.resolve(null)}getMinOffset(e,t){return ue.resolve(Fi.min())}getMinOffsetFromCollectionGroup(e,t){return ue.resolve(Fi.min())}updateCollectionGroup(e,t,i){return ue.resolve()}updateIndexEntries(e,t){return ue.resolve()}}class m0{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t]||new Vt(pt.comparator),o=!r.has(i);return this.index[t]=r.add(i),o}has(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t];return r&&r.has(i)}getEntries(e){return(this.index[e]||new Vt(pt.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zb="IndexedDbIndexManager",rm=new Uint8Array(0);class xV{constructor(e,t){this.databaseId=t,this.vn=new m0,this.Fn=new Ps((i=>Va(i)),((i,r)=>ff(i,r))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){const i=t.lastSegment(),r=t.popLast();e.addOnCommittedListener((()=>{this.vn.add(t)}));const o={collectionId:i,parent:ii(r)};return eS(e).put(o)}return ue.resolve()}getCollectionParents(e,t){const i=[],r=IDBKeyRange.bound([t,""],[PC(t),""],!1,!0);return eS(e).J(r).next((o=>{for(const l of o){if(l.collectionId!==t)break;i.push(Fr(l.parent))}return i}))}addFieldIndex(e,t){const i=ld(e),r=(function(u){return{indexId:u.indexId,collectionGroup:u.collectionGroup,fields:u.fields.map((f=>[f.fieldPath.canonicalString(),f.kind]))}})(t);delete r.indexId;const o=i.add(r);if(t.indexState){const l=Kl(e);return o.next((u=>{l.put(Hb(u,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return o.next()}deleteFieldIndex(e,t){const i=ld(e),r=Kl(e),o=Wl(e);return i.delete(t.indexId).next((()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=ld(e),i=Wl(e),r=Kl(e);return t.Z().next((()=>i.Z())).next((()=>r.Z()))}createTargetIndexes(e,t){return ue.forEach(this.Mn(t),(i=>this.getIndexType(e,i).next((r=>{if(r===0||r===1){const o=new Qb(i).Dn();if(o!=null)return this.addFieldIndex(e,o)}}))))}getDocumentsMatchingTarget(e,t){const i=Wl(e);let r=!0;const o=new Map;return ue.forEach(this.Mn(t),(l=>this.xn(e,l).next((u=>{r&&(r=!!u),o.set(l,u)})))).next((()=>{if(r){let l=at();const u=[];return ue.forEach(o,((f,m)=>{Pe(Zb,`Using index ${(function(L){return`id=${L.indexId}|cg=${L.collectionGroup}|f=${L.fields.map((q=>`${q.fieldPath}:${q.kind}`)).join(",")}`})(f)} to execute ${Va(t)}`);const y=(function(L,q){const z=U_(q);if(z===void 0)return null;for(const H of qm(L,z.fieldPath))switch(H.op){case"array-contains-any":return H.value.arrayValue.values||[];case"array-contains":return[H.value]}return null})(m,f),v=(function(L,q){const z=new Map;for(const H of Ta(q))for(const O of qm(L,H.fieldPath))switch(O.op){case"==":case"in":z.set(H.fieldPath.canonicalString(),O.value);break;case"not-in":case"!=":return z.set(H.fieldPath.canonicalString(),O.value),Array.from(z.values())}return null})(m,f),w=(function(L,q){const z=[];let H=!0;for(const O of Ta(q)){const V=O.kind===0?Pb(L,O.fieldPath,L.startAt):kb(L,O.fieldPath,L.startAt);z.push(V.value),H&&(H=V.inclusive)}return new Po(z,H)})(m,f),E=(function(L,q){const z=[];let H=!0;for(const O of Ta(q)){const V=O.kind===0?kb(L,O.fieldPath,L.endAt):Pb(L,O.fieldPath,L.endAt);z.push(V.value),H&&(H=V.inclusive)}return new Po(z,H)})(m,f),S=this.On(f,m,w),b=this.On(f,m,E),A=this.Nn(f,m,v),C=this.Bn(f.indexId,y,S,w.inclusive,b,E.inclusive,A);return ue.forEach(C,(R=>i.Y(R,t.limit).next((L=>{L.forEach((q=>{const z=Le.fromSegments(q.documentKey);l.has(z)||(l=l.add(z),u.push(z))}))}))))})).next((()=>u))}return ue.resolve(null)}))}Mn(e){let t=this.Fn.get(e);return t||(e.filters.length===0?t=[e]:t=TV(Mt.create(e.filters,"and")).map((i=>$_(e.path,e.collectionGroup,e.orderBy,i.getFilters(),e.limit,e.startAt,e.endAt))),this.Fn.set(e,t),t)}Bn(e,t,i,r,o,l,u){const f=(t!=null?t.length:1)*Math.max(i.length,o.length),m=f/(t!=null?t.length:1),y=[];for(let v=0;v<f;++v){const w=t?this.Ln(t[v/m]):rm,E=this.kn(e,w,i[v%m],r),S=this.qn(e,w,o[v%m],l),b=u.map((A=>this.kn(e,w,A,!0)));y.push(...this.createRange(E,S,b))}return y}kn(e,t,i,r){const o=new Sa(e,Le.empty(),t,i);return r?o:o.An()}qn(e,t,i,r){const o=new Sa(e,Le.empty(),t,i);return r?o.An():o}xn(e,t){const i=new Qb(t),r=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((o=>{let l=null;for(const u of o)i.yn(u)&&(!l||u.fields.length>l.fields.length)&&(l=u);return l}))}getIndexType(e,t){let i=2;const r=this.Mn(t);return ue.forEach(r,(o=>this.xn(e,o).next((l=>{l?i!==0&&l.fields.length<(function(f){let m=new Vt(en.comparator),y=!1;for(const v of f.filters)for(const w of v.getFlattenedFilters())w.field.isKeyField()||(w.op==="array-contains"||w.op==="array-contains-any"?y=!0:m=m.add(w.field));for(const v of f.orderBy)v.field.isKeyField()||(m=m.add(v.field));return m.size+(y?1:0)})(o)&&(i=1):i=0})))).next((()=>(function(l){return l.limit!==null})(t)&&r.length>1&&i===2?1:i))}Qn(e,t){const i=new ad;for(const r of Ta(e)){const o=t.data.field(r.fieldPath);if(o==null)return null;const l=i.Pn(r.kind);ba.Kt.Dt(o,l)}return i.un()}Ln(e){const t=new ad;return ba.Kt.Dt(e,t.Pn(0)),t.un()}$n(e,t){const i=new ad;return ba.Kt.Dt(Ma(this.databaseId,t),i.Pn((function(o){const l=Ta(o);return l.length===0?0:l[l.length-1].kind})(e))),i.un()}Nn(e,t,i){if(i===null)return[];let r=[];r.push(new ad);let o=0;for(const l of Ta(e)){const u=i[o++];for(const f of r)if(this.Un(t,l.fieldPath)&&Jd(u))r=this.Kn(r,l,u);else{const m=f.Pn(l.kind);ba.Kt.Dt(u,m)}}return this.Wn(r)}On(e,t,i){return this.Nn(e,t,i.position)}Wn(e){const t=[];for(let i=0;i<e.length;++i)t[i]=e[i].un();return t}Kn(e,t,i){const r=[...e],o=[];for(const l of i.arrayValue.values||[])for(const u of r){const f=new ad;f.seed(u.un()),ba.Kt.Dt(l,f.Pn(t.kind)),o.push(f)}return o}Un(e,t){return!!e.filters.find((i=>i instanceof gt&&i.field.isEqual(t)&&(i.op==="in"||i.op==="not-in")))}getFieldIndexes(e,t){const i=ld(e),r=Kl(e);return(t?i.J(O_,IDBKeyRange.bound(t,t)):i.J()).next((o=>{const l=[];return ue.forEach(o,(u=>r.get([u.indexId,this.uid]).next((f=>{l.push((function(y,v){const w=v?new zd(v.sequenceNumber,new Fi(Fa(v.readTime),new Le(Fr(v.documentKey)),v.largestBatchId)):zd.empty(),E=y.fields.map((([S,b])=>new ym(en.fromServerFormat(S),b)));return new Um(y.indexId,y.collectionGroup,E,w)})(u,f))})))).next((()=>l))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((i,r)=>{const o=i.indexState.sequenceNumber-r.indexState.sequenceNumber;return o!==0?o:rt(i.collectionGroup,r.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,i){const r=ld(e),o=Kl(e);return this.Gn(e).next((l=>r.J(O_,IDBKeyRange.bound(t,t)).next((u=>ue.forEach(u,(f=>o.put(Hb(f.indexId,this.uid,l,i))))))))}updateIndexEntries(e,t){const i=new Map;return ue.forEach(t,((r,o)=>{const l=i.get(r.collectionGroup);return(l?ue.resolve(l):this.getFieldIndexes(e,r.collectionGroup)).next((u=>(i.set(r.collectionGroup,u),ue.forEach(u,(f=>this.zn(e,r,f).next((m=>{const y=this.jn(o,f);return m.isEqual(y)?ue.resolve():this.Jn(e,o,f,m,y)})))))))}))}Hn(e,t,i,r){return Wl(e).put(r.Rn(this.uid,this.$n(i,t.key),t.key))}Yn(e,t,i,r){return Wl(e).delete(r.Vn(this.uid,this.$n(i,t.key),t.key))}zn(e,t,i){const r=Wl(e);let o=new Vt(lo);return r.ee({index:HC,range:IDBKeyRange.only([i.indexId,this.uid,Sm(this.$n(i,t))])},((l,u)=>{o=o.add(new Sa(i.indexId,t,Yb(u.arrayValue),Yb(u.directionalValue)))})).next((()=>o))}jn(e,t){let i=new Vt(lo);const r=this.Qn(t,e);if(r==null)return i;const o=U_(t);if(o!=null){const l=e.data.field(o.fieldPath);if(Jd(l))for(const u of l.arrayValue.values||[])i=i.add(new Sa(t.indexId,e.key,this.Ln(u),r))}else i=i.add(new Sa(t.indexId,e.key,rm,r));return i}Jn(e,t,i,r,o){Pe(Zb,"Updating index entries for document '%s'",t.key);const l=[];return(function(f,m,y,v,w){const E=f.getIterator(),S=m.getIterator();let b=Hl(E),A=Hl(S);for(;b||A;){let C=!1,R=!1;if(b&&A){const L=y(b,A);L<0?R=!0:L>0&&(C=!0)}else b!=null?R=!0:C=!0;C?(v(A),A=Hl(S)):R?(w(b),b=Hl(E)):(b=Hl(E),A=Hl(S))}})(r,o,lo,(u=>{l.push(this.Hn(e,t,i,u))}),(u=>{l.push(this.Yn(e,t,i,u))})),ue.waitFor(l)}Gn(e){let t=1;return Kl(e).ee({index:GC,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((i,r,o)=>{o.done(),t=r.sequenceNumber+1})).next((()=>t))}createRange(e,t,i){i=i.sort(((l,u)=>lo(l,u))).filter(((l,u,f)=>!u||lo(l,f[u-1])!==0));const r=[];r.push(e);for(const l of i){const u=lo(l,e),f=lo(l,t);if(u===0)r[0]=e.An();else if(u>0&&f<0)r.push(l),r.push(l.An());else if(f>0)break}r.push(t);const o=[];for(let l=0;l<r.length;l+=2){if(this.Zn(r[l],r[l+1]))return[];const u=r[l].Vn(this.uid,rm,Le.empty()),f=r[l+1].Vn(this.uid,rm,Le.empty());o.push(IDBKeyRange.bound(u,f))}return o}Zn(e,t){return lo(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(tS)}getMinOffset(e,t){return ue.mapArray(this.Mn(t),(i=>this.xn(e,i).next((r=>r||ze(44426))))).next(tS)}}function eS(n){return Nn(n,$d)}function Wl(n){return Nn(n,Ad)}function ld(n){return Nn(n,Qv)}function Kl(n){return Nn(n,Id)}function tS(n){$e(n.length!==0,28825);let e=n[0].indexState.offset,t=e.largestBatchId;for(let i=1;i<n.length;i++){const r=n[i].indexState.offset;Kv(r,e)<0&&(e=r),t<r.largestBatchId&&(t=r.largestBatchId)}return new Fi(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Y1=41943040;class ei{static withCacheSize(e){return new ei(e,ei.DEFAULT_COLLECTION_PERCENTILE,ei.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q1(n,e,t){const i=n.store(cr),r=n.store(vu),o=[],l=IDBKeyRange.only(t.batchId);let u=0;const f=i.ee({range:l},((y,v,w)=>(u++,w.delete())));o.push(f.next((()=>{$e(u===1,47070,{batchId:t.batchId})})));const m=[];for(const y of t.mutations){const v=qC(e,y.key.path,t.batchId);o.push(r.delete(v)),m.push(y.key)}return ue.waitFor(o).next((()=>m))}function Hm(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw ze(14731);e=n.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ei.DEFAULT_COLLECTION_PERCENTILE=10,ei.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ei.DEFAULT=new ei(Y1,ei.DEFAULT_COLLECTION_PERCENTILE,ei.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ei.DISABLED=new ei(-1,0,0);class Sp{constructor(e,t,i,r){this.userId=e,this.serializer=t,this.indexManager=i,this.referenceDelegate=r,this.Xn={}}static wt(e,t,i,r){$e(e.uid!=="",64387);const o=e.isAuthenticated()?e.uid:"";return new Sp(o,t,i,r)}checkEmpty(e){let t=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return uo(e).ee({index:Aa,range:i},((r,o,l)=>{t=!1,l.done()})).next((()=>t))}addMutationBatch(e,t,i,r){const o=nu(e),l=uo(e);return l.add({}).next((u=>{$e(typeof u=="number",49019);const f=new a0(u,t,i,r),m=(function(E,S,b){const A=b.baseMutations.map((R=>Xd(E.yt,R))),C=b.mutations.map((R=>Xd(E.yt,R)));return{userId:S,batchId:b.batchId,localWriteTimeMs:b.localWriteTime.toMillis(),baseMutations:A,mutations:C}})(this.serializer,this.userId,f),y=[];let v=new Vt(((w,E)=>rt(w.canonicalString(),E.canonicalString())));for(const w of r){const E=qC(this.userId,w.key.path,u);v=v.add(w.key.path.popLast()),y.push(l.put(m)),y.push(o.put(E,n5))}return v.forEach((w=>{y.push(this.indexManager.addToCollectionParentIndex(e,w))})),e.addOnCommittedListener((()=>{this.Xn[u]=f.keys()})),ue.waitFor(y).next((()=>f))}))}lookupMutationBatch(e,t){return uo(e).get(t).next((i=>i?($e(i.userId===this.userId,48,"Unexpected user for mutation batch",{userId:i.userId,batchId:t}),Ea(this.serializer,i)):null))}er(e,t){return this.Xn[t]?ue.resolve(this.Xn[t]):this.lookupMutationBatch(e,t).next((i=>{if(i){const r=i.keys();return this.Xn[t]=r,r}return null}))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,r=IDBKeyRange.lowerBound([this.userId,i]);let o=null;return uo(e).ee({index:Aa,range:r},((l,u,f)=>{u.userId===this.userId&&($e(u.batchId>=i,47524,{tr:i}),o=Ea(this.serializer,u)),f.done()})).next((()=>o))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=To;return uo(e).ee({index:Aa,range:t,reverse:!0},((r,o,l)=>{i=o.batchId,l.done()})).next((()=>i))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,To],[this.userId,Number.POSITIVE_INFINITY]);return uo(e).J(Aa,t).next((i=>i.map((r=>Ea(this.serializer,r)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const i=_m(this.userId,t.path),r=IDBKeyRange.lowerBound(i),o=[];return nu(e).ee({range:r},((l,u,f)=>{const[m,y,v]=l,w=Fr(y);if(m===this.userId&&t.path.isEqual(w))return uo(e).get(v).next((E=>{if(!E)throw ze(61480,{nr:l,batchId:v});$e(E.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:E.userId,batchId:v}),o.push(Ea(this.serializer,E))}));f.done()})).next((()=>o))}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Vt(rt);const r=[];return t.forEach((o=>{const l=_m(this.userId,o.path),u=IDBKeyRange.lowerBound(l),f=nu(e).ee({range:u},((m,y,v)=>{const[w,E,S]=m,b=Fr(E);w===this.userId&&o.path.isEqual(b)?i=i.add(S):v.done()}));r.push(f)})),ue.waitFor(r).next((()=>this.rr(e,i)))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,r=i.length+1,o=_m(this.userId,i),l=IDBKeyRange.lowerBound(o);let u=new Vt(rt);return nu(e).ee({range:l},((f,m,y)=>{const[v,w,E]=f,S=Fr(w);v===this.userId&&i.isPrefixOf(S)?S.length===r&&(u=u.add(E)):y.done()})).next((()=>this.rr(e,u)))}rr(e,t){const i=[],r=[];return t.forEach((o=>{r.push(uo(e).get(o).next((l=>{if(l===null)throw ze(35274,{batchId:o});$e(l.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:l.userId,batchId:o}),i.push(Ea(this.serializer,l))})))})),ue.waitFor(r).next((()=>i))}removeMutationBatch(e,t){return Q1(e.le,this.userId,t).next((i=>(e.addOnCommittedListener((()=>{this.ir(t.batchId)})),ue.forEach(i,(r=>this.referenceDelegate.markPotentiallyOrphaned(e,r))))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return ue.resolve();const i=IDBKeyRange.lowerBound((function(l){return[l]})(this.userId)),r=[];return nu(e).ee({range:i},((o,l,u)=>{if(o[0]===this.userId){const f=Fr(o[1]);r.push(f)}else u.done()})).next((()=>{$e(r.length===0,56720,{sr:r.map((o=>o.canonicalString()))})}))}))}containsKey(e,t){return X1(e,this.userId,t)}_r(e){return Z1(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:To,lastStreamToken:""}))}}function X1(n,e,t){const i=_m(e,t.path),r=i[1],o=IDBKeyRange.lowerBound(i);let l=!1;return nu(n).ee({range:o,X:!0},((u,f,m)=>{const[y,v,w]=u;y===e&&v===r&&(l=!0),m.done()})).next((()=>l))}function uo(n){return Nn(n,cr)}function nu(n){return Nn(n,vu)}function Z1(n){return Nn(n,Gd)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Ba(0)}static cr(){return new Ba(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EV{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.lr(e).next((t=>{const i=new Ba(t.highestTargetId);return t.highestTargetId=i.next(),this.hr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.lr(e).next((t=>Je.fromTimestamp(new Nt(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.lr(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,i){return this.lr(e).next((r=>(r.highestListenSequenceNumber=t,i&&(r.lastRemoteSnapshotVersion=i.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.hr(e,r))))}addTargetData(e,t){return this.Pr(e,t).next((()=>this.lr(e).next((i=>(i.targetCount+=1,this.Tr(t,i),this.hr(e,i))))))}updateTargetData(e,t){return this.Pr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>Jl(e).delete(t.targetId))).next((()=>this.lr(e))).next((i=>($e(i.targetCount>0,8065),i.targetCount-=1,this.hr(e,i))))}removeTargets(e,t,i){let r=0;const o=[];return Jl(e).ee(((l,u)=>{const f=Td(u);f.sequenceNumber<=t&&i.get(f.targetId)===null&&(r++,o.push(this.removeTargetData(e,f)))})).next((()=>ue.waitFor(o))).next((()=>r))}forEachTarget(e,t){return Jl(e).ee(((i,r)=>{const o=Td(r);t(o)}))}lr(e){return iS(e).get(Fm).next((t=>($e(t!==null,2888),t)))}hr(e,t){return iS(e).put(Fm,t)}Pr(e,t){return Jl(e).put(W1(this.serializer,t))}Tr(e,t){let i=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,i=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,i=!0),i}getTargetCount(e){return this.lr(e).next((t=>t.targetCount))}getTargetData(e,t){const i=Va(t),r=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let o=null;return Jl(e).ee({range:r,index:jC},((l,u,f)=>{const m=Td(u);ff(t,m.target)&&(o=m,f.done())})).next((()=>o))}addMatchingKeys(e,t,i){const r=[],o=mo(e);return t.forEach((l=>{const u=ii(l.path);r.push(o.put({targetId:i,path:u})),r.push(this.referenceDelegate.addReference(e,i,l))})),ue.waitFor(r)}removeMatchingKeys(e,t,i){const r=mo(e);return ue.forEach(t,(o=>{const l=ii(o.path);return ue.waitFor([r.delete([i,l]),this.referenceDelegate.removeReference(e,i,o)])}))}removeMatchingKeysForTargetId(e,t){const i=mo(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return i.delete(r)}getMatchingKeysForTargetId(e,t){const i=IDBKeyRange.bound([t],[t+1],!1,!0),r=mo(e);let o=at();return r.ee({range:i,X:!0},((l,u,f)=>{const m=Fr(l[1]),y=new Le(m);o=o.add(y)})).next((()=>o))}containsKey(e,t){const i=ii(t.path),r=IDBKeyRange.bound([i],[PC(i)],!1,!0);let o=0;return mo(e).ee({index:Yv,X:!0,range:r},(([l,u],f,m)=>{l!==0&&(o++,m.done())})).next((()=>o>0))}At(e,t){return Jl(e).get(t).next((i=>i?Td(i):null))}}function Jl(n){return Nn(n,Tu)}function iS(n){return Nn(n,Pa)}function mo(n){return Nn(n,wu)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rS="LruGarbageCollector",bV=1048576;function sS([n,e],[t,i]){const r=rt(n,t);return r===0?rt(e,i):r}class SV{constructor(e){this.Ir=e,this.buffer=new Vt(sS),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();sS(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class e2{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Pe(rS,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Oo(t)?Pe(rS,"Ignoring IndexedDB error during garbage collection: ",t):await Lo(t)}await this.Vr(3e5)}))}}class IV{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return ue.resolve(Ei.ce);const i=new SV(t);return this.mr.forEachTarget(e,(r=>i.Ar(r.sequenceNumber))).next((()=>this.mr.pr(e,(r=>i.Ar(r))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.mr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Pe("LruGarbageCollector","Garbage collection skipped; disabled"),ue.resolve(nS)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(Pe("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),nS):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let i,r,o,l,u,f,m;const y=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((v=>(v>this.params.maximumSequenceNumbersToCollect?(Pe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),r=this.params.maximumSequenceNumbersToCollect):r=v,l=Date.now(),this.nthSequenceNumber(e,r)))).next((v=>(i=v,u=Date.now(),this.removeTargets(e,i,t)))).next((v=>(o=v,f=Date.now(),this.removeOrphanedDocuments(e,i)))).next((v=>(m=Date.now(),Xl()<=mt.DEBUG&&Pe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-y}ms
	Determined least recently used ${r} in `+(u-l)+`ms
	Removed ${o} targets in `+(f-u)+`ms
	Removed ${v} documents in `+(m-f)+`ms
Total Duration: ${m-y}ms`),ue.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:o,documentsRemoved:v}))))}}function t2(n,e){return new IV(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AV{constructor(e,t){this.db=e,this.garbageCollector=t2(this,t)}gr(e){const t=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next((i=>t.next((r=>i+r))))}wr(e){let t=0;return this.pr(e,(i=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pr(e,t){return this.Sr(e,((i,r)=>t(r)))}addReference(e,t,i){return sm(e,i)}removeReference(e,t,i){return sm(e,i)}removeTargets(e,t,i){return this.db.getTargetCache().removeTargets(e,t,i)}markPotentiallyOrphaned(e,t){return sm(e,t)}br(e,t){return(function(r,o){let l=!1;return Z1(r).te((u=>X1(r,u,o).next((f=>(f&&(l=!0),ue.resolve(!f)))))).next((()=>l))})(e,t)}removeOrphanedDocuments(e,t){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let o=0;return this.Sr(e,((l,u)=>{if(u<=t){const f=this.br(e,l).next((m=>{if(!m)return o++,i.getEntry(e,l).next((()=>(i.removeEntry(l,Je.min()),mo(e).delete((function(v){return[0,ii(v.path)]})(l)))))}));r.push(f)}})).next((()=>ue.waitFor(r))).next((()=>i.apply(e))).next((()=>o))}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)}updateLimboDocument(e,t){return sm(e,t)}Sr(e,t){const i=mo(e);let r,o=Ei.ce;return i.ee({index:Yv},(([l,u],{path:f,sequenceNumber:m})=>{l===0?(o!==Ei.ce&&t(new Le(Fr(r)),o),o=m,r=f):o=Ei.ce})).next((()=>{o!==Ei.ce&&t(new Le(Fr(r)),o)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function sm(n,e){return mo(n).put((function(i,r){return{targetId:0,path:ii(i.path),sequenceNumber:r}})(e,n.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n2{constructor(){this.changes=new Ps((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Jt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?ue.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CV{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,i){return _a(e).put(i)}removeEntry(e,t,i){return _a(e).delete((function(o,l){const u=o.path.toArray();return[u.slice(0,u.length-2),u[u.length-2],jm(l),u[u.length-1]]})(t,i))}updateMetadata(e,t){return this.getMetadata(e).next((i=>(i.byteSize+=t,this.Dr(e,i))))}getEntry(e,t){let i=Jt.newInvalidDocument(t);return _a(e).ee({index:vm,range:IDBKeyRange.only(ud(t))},((r,o)=>{i=this.Cr(t,o)})).next((()=>i))}vr(e,t){let i={size:0,document:Jt.newInvalidDocument(t)};return _a(e).ee({index:vm,range:IDBKeyRange.only(ud(t))},((r,o)=>{i={document:this.Cr(t,o),size:Hm(o)}})).next((()=>i))}getEntries(e,t){let i=Si();return this.Fr(e,t,((r,o)=>{const l=this.Cr(r,o);i=i.insert(r,l)})).next((()=>i))}Mr(e,t){let i=Si(),r=new $t(Le.comparator);return this.Fr(e,t,((o,l)=>{const u=this.Cr(o,l);i=i.insert(o,u),r=r.insert(o,Hm(l))})).next((()=>({documents:i,Or:r})))}Fr(e,t,i){if(t.isEmpty())return ue.resolve();let r=new Vt(lS);t.forEach((f=>r=r.add(f)));const o=IDBKeyRange.bound(ud(r.first()),ud(r.last())),l=r.getIterator();let u=l.getNext();return _a(e).ee({index:vm,range:o},((f,m,y)=>{const v=Le.fromSegments([...m.prefixPath,m.collectionGroup,m.documentId]);for(;u&&lS(u,v)<0;)i(u,null),u=l.getNext();u&&u.isEqual(v)&&(i(u,m),u=l.hasNext()?l.getNext():null),u?y.j(ud(u)):y.done()})).next((()=>{for(;u;)i(u,null),u=l.hasNext()?l.getNext():null}))}getDocumentsMatchingQuery(e,t,i,r,o){const l=t.path,u=[l.popLast().toArray(),l.lastSegment(),jm(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],f=[l.popLast().toArray(),l.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return _a(e).J(IDBKeyRange.bound(u,f,!0)).next((m=>{o==null||o.incrementDocumentReadCount(m.length);let y=Si();for(const v of m){const w=this.Cr(Le.fromSegments(v.prefixPath.concat(v.collectionGroup,v.documentId)),v);w.isFoundDocument()&&(mf(t,w)||r.has(w.key))&&(y=y.insert(w.key,w))}return y}))}getAllFromCollectionGroup(e,t,i,r){let o=Si();const l=aS(t,i),u=aS(t,Fi.max());return _a(e).ee({index:zC,range:IDBKeyRange.bound(l,u,!0)},((f,m,y)=>{const v=this.Cr(Le.fromSegments(m.prefixPath.concat(m.collectionGroup,m.documentId)),m);o=o.insert(v.key,v),o.size===r&&y.done()})).next((()=>o))}newChangeBuffer(e){return new RV(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return oS(e).get(L_).next((t=>($e(!!t,20021),t)))}Dr(e,t){return oS(e).put(L_,t)}Cr(e,t){if(t){const i=hV(this.serializer,t);if(!(i.isNoDocument()&&i.version.isEqual(Je.min())))return i}return Jt.newInvalidDocument(e)}}function i2(n){return new CV(n)}class RV extends n2{constructor(e,t){super(),this.Nr=e,this.trackRemovals=t,this.Br=new Ps((i=>i.toString()),((i,r)=>i.isEqual(r)))}applyChanges(e){const t=[];let i=0,r=new Vt(((o,l)=>rt(o.canonicalString(),l.canonicalString())));return this.changes.forEach(((o,l)=>{const u=this.Br.get(o);if(t.push(this.Nr.removeEntry(e,o,u.readTime)),l.isValidDocument()){const f=jb(this.Nr.serializer,l);r=r.add(o.path.popLast());const m=Hm(f);i+=m-u.size,t.push(this.Nr.addEntry(e,o,f))}else if(i-=u.size,this.trackRemovals){const f=jb(this.Nr.serializer,l.convertToNoDocument(Je.min()));t.push(this.Nr.addEntry(e,o,f))}})),r.forEach((o=>{t.push(this.Nr.indexManager.addToCollectionParentIndex(e,o))})),t.push(this.Nr.updateMetadata(e,i)),ue.waitFor(t)}getFromCache(e,t){return this.Nr.vr(e,t).next((i=>(this.Br.set(t,{size:i.size,readTime:i.document.readTime}),i.document)))}getAllFromCache(e,t){return this.Nr.Mr(e,t).next((({documents:i,Or:r})=>(r.forEach(((o,l)=>{this.Br.set(o,{size:l,readTime:i.get(o).readTime})})),i)))}}function oS(n){return Nn(n,Hd)}function _a(n){return Nn(n,Om)}function ud(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function aS(n,e){const t=e.documentKey.path.toArray();return[n,jm(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function lS(n,e){const t=n.path.toArray(),i=e.path.toArray();let r=0;for(let o=0;o<t.length-2&&o<i.length-2;++o)if(r=rt(t[o],i[o]),r)return r;return r=rt(t.length,i.length),r||(r=rt(t[t.length-2],i[i.length-2]),r||rt(t[t.length-1],i[i.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NV{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r2{constructor(e,t,i,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(i=r,this.remoteDocumentCache.getEntry(e,t)))).next((r=>(i!==null&&Nd(i.mutation,r,bi.empty(),Nt.now()),r)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,at()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=at()){const r=Br();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,i).next((o=>{let l=_d();return o.forEach(((u,f)=>{l=l.insert(u,f.overlayedDocument)})),l}))))}getOverlayedDocuments(e,t){const i=Br();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,at())))}populateOverlays(e,t,i){const r=[];return i.forEach((o=>{t.has(o)||r.push(o)})),this.documentOverlayCache.getOverlays(e,r).next((o=>{o.forEach(((l,u)=>{t.set(l,u)}))}))}computeViews(e,t,i,r){let o=Si();const l=Rd(),u=(function(){return Rd()})();return t.forEach(((f,m)=>{const y=i.get(m.key);r.has(m.key)&&(y===void 0||y.mutation instanceof ks)?o=o.insert(m.key,m):y!==void 0?(l.set(m.key,y.mutation.getFieldMask()),Nd(y.mutation,m,y.mutation.getFieldMask(),Nt.now())):l.set(m.key,bi.empty())})),this.recalculateAndSaveOverlays(e,o).next((f=>(f.forEach(((m,y)=>l.set(m,y))),t.forEach(((m,y)=>u.set(m,new NV(y,l.get(m)??null)))),u)))}recalculateAndSaveOverlays(e,t){const i=Rd();let r=new $t(((l,u)=>l-u)),o=at();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((l=>{for(const u of l)u.keys().forEach((f=>{const m=t.get(f);if(m===null)return;let y=i.get(f)||bi.empty();y=u.applyToLocalView(m,y),i.set(f,y);const v=(r.get(u.batchId)||at()).add(f);r=r.insert(u.batchId,v)}))})).next((()=>{const l=[],u=r.getReverseIterator();for(;u.hasNext();){const f=u.getNext(),m=f.key,y=f.value,v=T1();y.forEach((w=>{if(!o.has(w)){const E=A1(t.get(w),i.get(w));E!==null&&v.set(w,E),o=o.add(w)}})),l.push(this.documentOverlayCache.saveOverlays(e,m,v))}return ue.waitFor(l)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,r){return(function(l){return Le.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):i0(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,r):this.getDocumentsMatchingCollectionQuery(e,t,i,r)}getNextDocuments(e,t,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,r).next((o=>{const l=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,r-o.size):ue.resolve(Br());let u=_u,f=o;return l.next((m=>ue.forEach(m,((y,v)=>(u<v.largestBatchId&&(u=v.largestBatchId),o.get(y)?ue.resolve():this.remoteDocumentCache.getEntry(e,y).next((w=>{f=f.insert(y,w)}))))).next((()=>this.populateOverlays(e,m,o))).next((()=>this.computeViews(e,f,m,at()))).next((y=>({batchId:u,changes:v1(y)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Le(t)).next((i=>{let r=_d();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,r){const o=t.collectionGroup;let l=_d();return this.indexManager.getCollectionParents(e,o).next((u=>ue.forEach(u,(f=>{const m=(function(v,w){return new Ns(w,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)})(t,f.child(o));return this.getDocumentsMatchingCollectionQuery(e,m,i,r).next((y=>{y.forEach(((v,w)=>{l=l.insert(v,w)}))}))})).next((()=>l))))}getDocumentsMatchingCollectionQuery(e,t,i,r){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((l=>(o=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,o,r)))).next((l=>{o.forEach(((f,m)=>{const y=m.getKey();l.get(y)===null&&(l=l.insert(y,Jt.newInvalidDocument(y)))}));let u=_d();return l.forEach(((f,m)=>{const y=o.get(f);y!==void 0&&Nd(y.mutation,m,bi.empty(),Nt.now()),mf(t,m)&&(u=u.insert(f,m))})),u}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PV{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return ue.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(r){return{id:r.id,version:r.version,createTime:gn(r.createTime)}})(t)),ue.resolve()}getNamedQuery(e,t){return ue.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(r){return{name:r.name,query:f0(r.bundledQuery),readTime:gn(r.readTime)}})(t)),ue.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kV{constructor(){this.overlays=new $t(Le.comparator),this.qr=new Map}getOverlay(e,t){return ue.resolve(this.overlays.get(t))}getOverlays(e,t){const i=Br();return ue.forEach(t,(r=>this.getOverlay(e,r).next((o=>{o!==null&&i.set(r,o)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((r,o)=>{this.St(e,t,o)})),ue.resolve()}removeOverlaysForBatchId(e,t,i){const r=this.qr.get(i);return r!==void 0&&(r.forEach((o=>this.overlays=this.overlays.remove(o))),this.qr.delete(i)),ue.resolve()}getOverlaysForCollection(e,t,i){const r=Br(),o=t.length+1,l=new Le(t.child("")),u=this.overlays.getIteratorFrom(l);for(;u.hasNext();){const f=u.getNext().value,m=f.getKey();if(!t.isPrefixOf(m.path))break;m.path.length===o&&f.largestBatchId>i&&r.set(f.getKey(),f)}return ue.resolve(r)}getOverlaysForCollectionGroup(e,t,i,r){let o=new $t(((m,y)=>m-y));const l=this.overlays.getIterator();for(;l.hasNext();){const m=l.getNext().value;if(m.getKey().getCollectionGroup()===t&&m.largestBatchId>i){let y=o.get(m.largestBatchId);y===null&&(y=Br(),o=o.insert(m.largestBatchId,y)),y.set(m.getKey(),m)}}const u=Br(),f=o.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach(((m,y)=>u.set(m,y))),!(u.size()>=r)););return ue.resolve(u)}St(e,t,i){const r=this.overlays.get(i.key);if(r!==null){const l=this.qr.get(r.largestBatchId).delete(i.key);this.qr.set(r.largestBatchId,l)}this.overlays=this.overlays.insert(i.key,new u0(t,i));let o=this.qr.get(t);o===void 0&&(o=at(),this.qr.set(t,o)),this.qr.set(t,o.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DV{constructor(){this.sessionToken=un.EMPTY_BYTE_STRING}getSessionToken(e){return ue.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ue.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p0{constructor(){this.Qr=new Vt(Ln.$r),this.Ur=new Vt(Ln.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const i=new Ln(e,t);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Gr(new Ln(e,t))}zr(e,t){e.forEach((i=>this.removeReference(i,t)))}jr(e){const t=new Le(new pt([])),i=new Ln(t,e),r=new Ln(t,e+1),o=[];return this.Ur.forEachInRange([i,r],(l=>{this.Gr(l),o.push(l.key)})),o}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Le(new pt([])),i=new Ln(t,e),r=new Ln(t,e+1);let o=at();return this.Ur.forEachInRange([i,r],(l=>{o=o.add(l.key)})),o}containsKey(e){const t=new Ln(e,0),i=this.Qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class Ln{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Le.comparator(e.key,t.key)||rt(e.Yr,t.Yr)}static Kr(e,t){return rt(e.Yr,t.Yr)||Le.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MV{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Vt(Ln.$r)}checkEmpty(e){return ue.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,r){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new a0(o,t,i,r);this.mutationQueue.push(l);for(const u of r)this.Zr=this.Zr.add(new Ln(u.key,o)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return ue.resolve(l)}lookupMutationBatch(e,t){return ue.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,r=this.ei(i),o=r<0?0:r;return ue.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return ue.resolve(this.mutationQueue.length===0?To:this.tr-1)}getAllMutationBatches(e){return ue.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Ln(t,0),r=new Ln(t,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([i,r],(l=>{const u=this.Xr(l.Yr);o.push(u)})),ue.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Vt(rt);return t.forEach((r=>{const o=new Ln(r,0),l=new Ln(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,l],(u=>{i=i.add(u.Yr)}))})),ue.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,r=i.length+1;let o=i;Le.isDocumentKey(o)||(o=o.child(""));const l=new Ln(new Le(o),0);let u=new Vt(rt);return this.Zr.forEachWhile((f=>{const m=f.key.path;return!!i.isPrefixOf(m)&&(m.length===r&&(u=u.add(f.Yr)),!0)}),l),ue.resolve(this.ti(u))}ti(e){const t=[];return e.forEach((i=>{const r=this.Xr(i);r!==null&&t.push(r)})),t}removeMutationBatch(e,t){$e(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return ue.forEach(t.mutations,(r=>{const o=new Ln(r.key,t.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Zr=i}))}ir(e){}containsKey(e,t){const i=new Ln(t,0),r=this.Zr.firstAfterOrEqual(i);return ue.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,ue.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VV{constructor(e){this.ri=e,this.docs=(function(){return new $t(Le.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,r=this.docs.get(i),o=r?r.size:0,l=this.ri(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:l}),this.size+=l-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return ue.resolve(i?i.document.mutableCopy():Jt.newInvalidDocument(t))}getEntries(e,t){let i=Si();return t.forEach((r=>{const o=this.docs.get(r);i=i.insert(r,o?o.document.mutableCopy():Jt.newInvalidDocument(r))})),ue.resolve(i)}getDocumentsMatchingQuery(e,t,i,r){let o=Si();const l=t.path,u=new Le(l.child("__id-9223372036854775808__")),f=this.docs.getIteratorFrom(u);for(;f.hasNext();){const{key:m,value:{document:y}}=f.getNext();if(!l.isPrefixOf(m.path))break;m.path.length>l.length+1||Kv(UC(y),i)<=0||(r.has(y.key)||mf(t,y))&&(o=o.insert(y.key,y.mutableCopy()))}return ue.resolve(o)}getAllFromCollectionGroup(e,t,i,r){ze(9500)}ii(e,t){return ue.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new UV(this)}getSize(e){return ue.resolve(this.size)}}class UV extends n2{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,r)=>{r.isValidDocument()?t.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(i)})),ue.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LV{constructor(e){this.persistence=e,this.si=new Ps((t=>Va(t)),ff),this.lastRemoteSnapshotVersion=Je.min(),this.highestTargetId=0,this.oi=0,this._i=new p0,this.targetCount=0,this.ai=Ba.ur()}forEachTarget(e,t){return this.si.forEach(((i,r)=>t(r))),ue.resolve()}getLastRemoteSnapshotVersion(e){return ue.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ue.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ue.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.oi&&(this.oi=t),ue.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Ba(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,ue.resolve()}updateTargetData(e,t){return this.Pr(t),ue.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,ue.resolve()}removeTargets(e,t,i){let r=0;const o=[];return this.si.forEach(((l,u)=>{u.sequenceNumber<=t&&i.get(u.targetId)===null&&(this.si.delete(l),o.push(this.removeMatchingKeysForTargetId(e,u.targetId)),r++)})),ue.waitFor(o).next((()=>r))}getTargetCount(e){return ue.resolve(this.targetCount)}getTargetData(e,t){const i=this.si.get(t)||null;return ue.resolve(i)}addMatchingKeys(e,t,i){return this._i.Wr(t,i),ue.resolve()}removeMatchingKeys(e,t,i){this._i.zr(t,i);const r=this.persistence.referenceDelegate,o=[];return r&&t.forEach((l=>{o.push(r.markPotentiallyOrphaned(e,l))})),ue.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),ue.resolve()}getMatchingKeysForTargetId(e,t){const i=this._i.Hr(t);return ue.resolve(i)}containsKey(e,t){return ue.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g0{constructor(e,t){this.ui={},this.overlays={},this.ci=new Ei(0),this.li=!1,this.li=!0,this.hi=new DV,this.referenceDelegate=e(this),this.Pi=new LV(this),this.indexManager=new wV,this.remoteDocumentCache=(function(r){return new VV(r)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new $1(t),this.Ii=new PV(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new kV,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ui[e.toKey()];return i||(i=new MV(t,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,i){Pe("MemoryPersistence","Starting transaction:",e);const r=new OV(this.ci.next());return this.referenceDelegate.Ei(),i(r).next((o=>this.referenceDelegate.di(r).next((()=>o)))).toPromise().then((o=>(r.raiseOnCommittedEvent(),o)))}Ai(e,t){return ue.or(Object.values(this.ui).map((i=>()=>i.containsKey(e,t))))}}class OV extends OC{constructor(e){super(),this.currentSequenceNumber=e}}class Ip{constructor(e){this.persistence=e,this.Ri=new p0,this.Vi=null}static mi(e){return new Ip(e)}get fi(){if(this.Vi)return this.Vi;throw ze(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.fi.delete(i.toString()),ue.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.fi.add(i.toString()),ue.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),ue.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((r=>this.fi.add(r.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((r=>{r.forEach((o=>this.fi.add(o.toString())))})).next((()=>i.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ue.forEach(this.fi,(i=>{const r=Le.fromPath(i);return this.gi(e,r).next((o=>{o||t.removeEntry(r,Je.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((i=>{i?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return ue.or([()=>ue.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class $m{constructor(e,t){this.persistence=e,this.pi=new Ps((i=>ii(i.path)),((i,r)=>i.isEqual(r))),this.garbageCollector=t2(this,t)}static mi(e,t){return new $m(e,t)}Ei(){}di(e){return ue.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((r=>i+r))))}wr(e){let t=0;return this.pr(e,(i=>{t++})).next((()=>t))}pr(e,t){return ue.forEach(this.pi,((i,r)=>this.br(e,i,r).next((o=>o?ue.resolve():t(r)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const r=this.persistence.getRemoteDocumentCache(),o=r.newChangeBuffer();return r.ii(e,(l=>this.br(e,l,t).next((u=>{u||(i++,o.removeEntry(l,Je.min()))})))).next((()=>o.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),ue.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),ue.resolve()}removeReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),ue.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),ue.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=wm(e.data.value)),t}br(e,t,i){return ue.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const r=this.pi.get(t);return ue.resolve(r!==void 0&&r>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FV{constructor(e){this.serializer=e}k(e,t,i,r){const o=new pp("createOrUpgrade",t);i<1&&r>=1&&((function(f){f.createObjectStore(df)})(e),(function(f){f.createObjectStore(Gd,{keyPath:t5}),f.createObjectStore(cr,{keyPath:vb,autoIncrement:!0}).createIndex(Aa,Tb,{unique:!0}),f.createObjectStore(vu)})(e),uS(e),(function(f){f.createObjectStore(wa)})(e));let l=ue.resolve();return i<3&&r>=3&&(i!==0&&((function(f){f.deleteObjectStore(wu),f.deleteObjectStore(Tu),f.deleteObjectStore(Pa)})(e),uS(e)),l=l.next((()=>(function(f){const m=f.store(Pa),y={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Je.min().toTimestamp(),targetCount:0};return m.put(Fm,y)})(o)))),i<4&&r>=4&&(i!==0&&(l=l.next((()=>(function(f,m){return m.store(cr).J().next((v=>{f.deleteObjectStore(cr),f.createObjectStore(cr,{keyPath:vb,autoIncrement:!0}).createIndex(Aa,Tb,{unique:!0});const w=m.store(cr),E=v.map((S=>w.put(S)));return ue.waitFor(E)}))})(e,o)))),l=l.next((()=>{(function(f){f.createObjectStore(xu,{keyPath:c5})})(e)}))),i<5&&r>=5&&(l=l.next((()=>this.yi(o)))),i<6&&r>=6&&(l=l.next((()=>((function(f){f.createObjectStore(Hd)})(e),this.wi(o))))),i<7&&r>=7&&(l=l.next((()=>this.Si(o)))),i<8&&r>=8&&(l=l.next((()=>this.bi(e,o)))),i<9&&r>=9&&(l=l.next((()=>{(function(f){f.objectStoreNames.contains("remoteDocumentChanges")&&f.deleteObjectStore("remoteDocumentChanges")})(e)}))),i<10&&r>=10&&(l=l.next((()=>this.Di(o)))),i<11&&r>=11&&(l=l.next((()=>{(function(f){f.createObjectStore(gp,{keyPath:d5})})(e),(function(f){f.createObjectStore(yp,{keyPath:f5})})(e)}))),i<12&&r>=12&&(l=l.next((()=>{(function(f){const m=f.createObjectStore(_p,{keyPath:v5});m.createIndex(F_,T5,{unique:!1}),m.createIndex($C,w5,{unique:!1})})(e)}))),i<13&&r>=13&&(l=l.next((()=>(function(f){const m=f.createObjectStore(Om,{keyPath:i5});m.createIndex(vm,r5),m.createIndex(zC,s5)})(e))).next((()=>this.Ci(e,o))).next((()=>e.deleteObjectStore(wa)))),i<14&&r>=14&&(l=l.next((()=>this.Fi(e,o)))),i<15&&r>=15&&(l=l.next((()=>(function(f){f.createObjectStore(Qv,{keyPath:h5,autoIncrement:!0}).createIndex(O_,m5,{unique:!1}),f.createObjectStore(Id,{keyPath:p5}).createIndex(GC,g5,{unique:!1}),f.createObjectStore(Ad,{keyPath:y5}).createIndex(HC,_5,{unique:!1})})(e)))),i<16&&r>=16&&(l=l.next((()=>{t.objectStore(Id).clear()})).next((()=>{t.objectStore(Ad).clear()}))),i<17&&r>=17&&(l=l.next((()=>{(function(f){f.createObjectStore(Xv,{keyPath:x5})})(e)}))),i<18&&r>=18&&lC()&&(l=l.next((()=>{t.objectStore(Id).clear()})).next((()=>{t.objectStore(Ad).clear()}))),l}wi(e){let t=0;return e.store(wa).ee(((i,r)=>{t+=Hm(r)})).next((()=>{const i={byteSize:t};return e.store(Hd).put(L_,i)}))}yi(e){const t=e.store(Gd),i=e.store(cr);return t.J().next((r=>ue.forEach(r,(o=>{const l=IDBKeyRange.bound([o.userId,To],[o.userId,o.lastAcknowledgedBatchId]);return i.J(Aa,l).next((u=>ue.forEach(u,(f=>{$e(f.userId===o.userId,18650,"Cannot process batch from unexpected user",{batchId:f.batchId});const m=Ea(this.serializer,f);return Q1(e,o.userId,m).next((()=>{}))}))))}))))}Si(e){const t=e.store(wu),i=e.store(wa);return e.store(Pa).get(Fm).next((r=>{const o=[];return i.ee(((l,u)=>{const f=new pt(l),m=(function(v){return[0,ii(v)]})(f);o.push(t.get(m).next((y=>y?ue.resolve():(v=>t.put({targetId:0,path:ii(v),sequenceNumber:r.highestListenSequenceNumber}))(f))))})).next((()=>ue.waitFor(o)))}))}bi(e,t){e.createObjectStore($d,{keyPath:u5});const i=t.store($d),r=new m0,o=l=>{if(r.add(l)){const u=l.lastSegment(),f=l.popLast();return i.put({collectionId:u,parent:ii(f)})}};return t.store(wa).ee({X:!0},((l,u)=>{const f=new pt(l);return o(f.popLast())})).next((()=>t.store(vu).ee({X:!0},(([l,u,f],m)=>{const y=Fr(u);return o(y.popLast())}))))}Di(e){const t=e.store(Tu);return t.ee(((i,r)=>{const o=Td(r),l=W1(this.serializer,o);return t.put(l)}))}Ci(e,t){const i=t.store(wa),r=[];return i.ee(((o,l)=>{const u=t.store(Om),f=(function(v){return v.document?new Le(pt.fromString(v.document.name).popFirst(5)):v.noDocument?Le.fromSegments(v.noDocument.path):v.unknownDocument?Le.fromSegments(v.unknownDocument.path):ze(36783)})(l).path.toArray(),m={prefixPath:f.slice(0,f.length-2),collectionGroup:f[f.length-2],documentId:f[f.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};r.push(u.put(m))})).next((()=>ue.waitFor(r)))}Fi(e,t){const i=t.store(cr),r=i2(this.serializer),o=new g0(Ip.mi,this.serializer.yt);return i.J().next((l=>{const u=new Map;return l.forEach((f=>{let m=u.get(f.userId)??at();Ea(this.serializer,f).keys().forEach((y=>m=m.add(y))),u.set(f.userId,m)})),ue.forEach(u,((f,m)=>{const y=new On(m),v=bp.wt(this.serializer,y),w=o.getIndexManager(y),E=Sp.wt(y,this.serializer,w,o.referenceDelegate);return new r2(r,E,v,w).recalculateAndSaveOverlaysForDocumentKeys(new B_(t,Ei.ce),f).next()}))}))}}function uS(n){n.createObjectStore(wu,{keyPath:a5}).createIndex(Yv,l5,{unique:!0}),n.createObjectStore(Tu,{keyPath:"targetId"}).createIndex(jC,o5,{unique:!0}),n.createObjectStore(Pa)}const co="IndexedDbPersistence",l_=18e5,u_=5e3,c_="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",s2="main";class y0{constructor(e,t,i,r,o,l,u,f,m,y,v=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=i,this.Mi=o,this.window=l,this.document=u,this.xi=m,this.Oi=y,this.Ni=v,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=w=>Promise.resolve(),!y0.v())throw new Re(ye.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new AV(this,r),this.$i=t+s2,this.serializer=new $1(f),this.Ui=new zr(this.$i,this.Ni,new FV(this.serializer)),this.hi=new pV,this.Pi=new EV(this.referenceDelegate,this.serializer),this.remoteDocumentCache=i2(this.serializer),this.Ii=new mV,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,y===!1&&pn(co,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Re(ye.FAILED_PRECONDITION,c_);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Pi.getHighestSequenceNumber(e)))})).then((e=>{this.ci=new Ei(e,this.xi)})).then((()=>{this.li=!0})).catch((e=>(this.Ui&&this.Ui.close(),Promise.reject(e))))}Ji(e){return this.Qi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>om(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(e).next((t=>{t||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(e))).next((t=>this.isPrimary&&!t?this.Zi(e).next((()=>!1)):!!t&&this.Xi(e).next((()=>!0)))))).catch((e=>{if(Oo(e))return Pe(co,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Pe(co,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable((()=>this.Qi(e))),this.isPrimary=e}))}Hi(e){return cd(e).get(Gl).next((t=>ue.resolve(this.es(t))))}ts(e){return om(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,l_)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const i=Nn(t,xu);return i.J().next((r=>{const o=this.ss(r,l_),l=r.filter((u=>o.indexOf(u)===-1));return ue.forEach(l,(u=>i.delete(u.clientId))).next((()=>l))}))})).catch((()=>[]));if(this.Ki)for(const t of e)this.Ki.removeItem(this._s(t.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?ue.resolve(!0):cd(e).get(Gl).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,u_)&&!this.us(t.ownerId)){if(this.es(t)&&this.networkEnabled)return!0;if(!this.es(t)){if(!t.allowTabSynchronization)throw new Re(ye.FAILED_PRECONDITION,c_);return!1}}return!(!this.networkEnabled||!this.inForeground)||om(e).J().next((i=>this.ss(i,u_).find((r=>{if(this.clientId!==r.clientId){const o=!this.networkEnabled&&r.networkEnabled,l=!this.inForeground&&r.inForeground,u=this.networkEnabled===r.networkEnabled;if(o||l&&u)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&Pe(co,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[df,xu],(e=>{const t=new B_(e,Ei.ce);return this.Zi(t).next((()=>this.ts(t)))})),this.Ui.close(),this.Ps()}ss(e,t){return e.filter((i=>this.rs(i.updateTimeMs,t)&&!this.us(i.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(e=>om(e).J().next((t=>this.ss(t,l_).map((i=>i.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,t){return Sp.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new xV(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return bp.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,t,i){Pe(co,"Starting transaction:",e);const r=t==="readonly"?"readonly":"readwrite",o=(function(f){return f===18?S5:f===17?YC:f===16?b5:f===15?Zv:f===14?JC:f===13?KC:f===12?E5:f===11?WC:void ze(60245)})(this.Ni);let l;return this.Ui.runTransaction(e,r,o,(u=>(l=new B_(u,this.ci?this.ci.next():Ei.ce),t==="readwrite-primary"?this.Hi(l).next((f=>!!f||this.Yi(l))).next((f=>{if(!f)throw pn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new Re(ye.FAILED_PRECONDITION,LC);return i(l)})).next((f=>this.Xi(l).next((()=>f)))):this.Is(l).next((()=>i(l)))))).then((u=>(l.raiseOnCommittedEvent(),u)))}Is(e){return cd(e).get(Gl).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,u_)&&!this.us(t.ownerId)&&!this.es(t)&&!(this.Oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Re(ye.FAILED_PRECONDITION,c_)}))}Xi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return cd(e).put(Gl,t)}static v(){return zr.v()}Zi(e){const t=cd(e);return t.get(Gl).next((i=>this.es(i)?(Pe(co,"Releasing primary lease."),t.delete(Gl)):ue.resolve()))}rs(e,t){const i=Date.now();return!(e<i-t)&&(!(e>i)||(pn(`Detected an update time that is in the future: ${e} > ${i}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){var e;typeof((e=this.window)==null?void 0:e.addEventListener)=="function"&&(this.Bi=()=>{this.cs();const t=/(?:Version|Mobile)\/1[456]/;aC()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){var t;try{const i=((t=this.Ki)==null?void 0:t.getItem(this._s(e)))!==null;return Pe(co,`Client '${e}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return pn(co,"Failed to get zombied client id.",i),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){pn("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function cd(n){return Nn(n,df)}function om(n){return Nn(n,xu)}function _0(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v0{constructor(e,t,i,r){this.targetId=e,this.fromCache=t,this.Es=i,this.ds=r}static As(e,t){let i=at(),r=at();for(const o of t.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new v0(e,t.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BV{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o2{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return aC()?8:FC(rn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,r){const o={result:null};return this.ys(e,t).next((l=>{o.result=l})).next((()=>{if(!o.result)return this.ws(e,t,r,i).next((l=>{o.result=l}))})).next((()=>{if(o.result)return;const l=new BV;return this.Ss(e,t,l).next((u=>{if(o.result=u,this.Vs)return this.bs(e,t,l,u.size)}))})).next((()=>o.result))}bs(e,t,i,r){return i.documentReadCount<this.fs?(Xl()<=mt.DEBUG&&Pe("QueryEngine","SDK will not create cache indexes for query:",Zl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ue.resolve()):(Xl()<=mt.DEBUG&&Pe("QueryEngine","Query:",Zl(t),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.gs*r?(Xl()<=mt.DEBUG&&Pe("QueryEngine","The SDK decides to create cache indexes for query:",Zl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,yi(t))):ue.resolve())}ys(e,t){if(Db(t))return ue.resolve(null);let i=yi(t);return this.indexManager.getIndexType(e,i).next((r=>r===0?null:(t.limit!==null&&r===1&&(t=zm(t,null,"F"),i=yi(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((o=>{const l=at(...o);return this.ps.getDocuments(e,l).next((u=>this.indexManager.getMinOffset(e,i).next((f=>{const m=this.Ds(t,u);return this.Cs(t,m,l,f.readTime)?this.ys(e,zm(t,null,"F")):this.vs(e,m,t,f)}))))})))))}ws(e,t,i,r){return Db(t)||r.isEqual(Je.min())?ue.resolve(null):this.ps.getDocuments(e,i).next((o=>{const l=this.Ds(t,o);return this.Cs(t,l,i,r)?ue.resolve(null):(Xl()<=mt.DEBUG&&Pe("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Zl(t)),this.vs(e,l,t,VC(r,_u)).next((u=>u)))}))}Ds(e,t){let i=new Vt(y1(e));return t.forEach(((r,o)=>{mf(e,o)&&(i=i.add(o))})),i}Cs(e,t,i,r){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}Ss(e,t,i){return Xl()<=mt.DEBUG&&Pe("QueryEngine","Using full collection scan to execute query:",Zl(t)),this.ps.getDocumentsMatchingQuery(e,t,Fi.min(),i)}vs(e,t,i,r){return this.ps.getDocumentsMatchingQuery(e,i,r).next((o=>(t.forEach((l=>{o=o.insert(l.key,l)})),o)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T0="LocalStore",qV=3e8;class zV{constructor(e,t,i,r){this.persistence=e,this.Fs=t,this.serializer=r,this.Ms=new $t(rt),this.xs=new Ps((o=>Va(o)),ff),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new r2(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function a2(n,e,t,i){return new zV(n,e,t,i)}async function l2(n,e){const t=Be(n);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let r;return t.mutationQueue.getAllMutationBatches(i).next((o=>(r=o,t.Bs(e),t.mutationQueue.getAllMutationBatches(i)))).next((o=>{const l=[],u=[];let f=at();for(const m of r){l.push(m.batchId);for(const y of m.mutations)f=f.add(y.key)}for(const m of o){u.push(m.batchId);for(const y of m.mutations)f=f.add(y.key)}return t.localDocuments.getDocuments(i,f).next((m=>({Ls:m,removedBatchIds:l,addedBatchIds:u})))}))}))}function jV(n,e){const t=Be(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const r=e.batch.keys(),o=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(u,f,m,y){const v=m.batch,w=v.keys();let E=ue.resolve();return w.forEach((S=>{E=E.next((()=>y.getEntry(f,S))).next((b=>{const A=m.docVersions.get(S);$e(A!==null,48541),b.version.compareTo(A)<0&&(v.applyToRemoteDocument(b,m),b.isValidDocument()&&(b.setReadTime(m.commitVersion),y.addEntry(b)))}))})),E.next((()=>u.mutationQueue.removeMutationBatch(f,v)))})(t,i,e,o).next((()=>o.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(u){let f=at();for(let m=0;m<u.mutationResults.length;++m)u.mutationResults[m].transformResults.length>0&&(f=f.add(u.batch.mutations[m].key));return f})(e)))).next((()=>t.localDocuments.getDocuments(i,r)))}))}function u2(n){const e=Be(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function GV(n,e){const t=Be(n),i=e.snapshotVersion;let r=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(o=>{const l=t.Ns.newChangeBuffer({trackRemovals:!0});r=t.Ms;const u=[];e.targetChanges.forEach(((y,v)=>{const w=r.get(v);if(!w)return;u.push(t.Pi.removeMatchingKeys(o,y.removedDocuments,v).next((()=>t.Pi.addMatchingKeys(o,y.addedDocuments,v))));let E=w.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(v)!==null?E=E.withResumeToken(un.EMPTY_BYTE_STRING,Je.min()).withLastLimboFreeSnapshotVersion(Je.min()):y.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(y.resumeToken,i)),r=r.insert(v,E),(function(b,A,C){return b.resumeToken.approximateByteSize()===0||A.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=qV?!0:C.addedDocuments.size+C.modifiedDocuments.size+C.removedDocuments.size>0})(w,E,y)&&u.push(t.Pi.updateTargetData(o,E))}));let f=Si(),m=at();if(e.documentUpdates.forEach((y=>{e.resolvedLimboDocuments.has(y)&&u.push(t.persistence.referenceDelegate.updateLimboDocument(o,y))})),u.push(c2(o,l,e.documentUpdates).next((y=>{f=y.ks,m=y.qs}))),!i.isEqual(Je.min())){const y=t.Pi.getLastRemoteSnapshotVersion(o).next((v=>t.Pi.setTargetsMetadata(o,o.currentSequenceNumber,i)));u.push(y)}return ue.waitFor(u).next((()=>l.apply(o))).next((()=>t.localDocuments.getLocalViewOfDocuments(o,f,m))).next((()=>f))})).then((o=>(t.Ms=r,o)))}function c2(n,e,t){let i=at(),r=at();return t.forEach((o=>i=i.add(o))),e.getEntries(n,i).next((o=>{let l=Si();return t.forEach(((u,f)=>{const m=o.get(u);f.isFoundDocument()!==m.isFoundDocument()&&(r=r.add(u)),f.isNoDocument()&&f.version.isEqual(Je.min())?(e.removeEntry(u,f.readTime),l=l.insert(u,f)):!m.isValidDocument()||f.version.compareTo(m.version)>0||f.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(f),l=l.insert(u,f)):Pe(T0,"Ignoring outdated watch update for ",u,". Current version:",m.version," Watch version:",f.version)})),{ks:l,qs:r}}))}function HV(n,e){const t=Be(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=To),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function Ru(n,e){const t=Be(n);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let r;return t.Pi.getTargetData(i,e).next((o=>o?(r=o,ue.resolve(r)):t.Pi.allocateTargetId(i).next((l=>(r=new xs(e,l,"TargetPurposeListen",i.currentSequenceNumber),t.Pi.addTargetData(i,r).next((()=>r)))))))})).then((i=>{const r=t.Ms.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(i.targetId,i),t.xs.set(e,i.targetId)),i}))}async function Nu(n,e,t){const i=Be(n),r=i.Ms.get(e),o=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",o,(l=>i.persistence.referenceDelegate.removeTarget(l,r)))}catch(l){if(!Oo(l))throw l;Pe(T0,`Failed to update sequence numbers for target ${e}: ${l}`)}i.Ms=i.Ms.remove(e),i.xs.delete(r.target)}function Wm(n,e,t){const i=Be(n);let r=Je.min(),o=at();return i.persistence.runTransaction("Execute query","readwrite",(l=>(function(f,m,y){const v=Be(f),w=v.xs.get(y);return w!==void 0?ue.resolve(v.Ms.get(w)):v.Pi.getTargetData(m,y)})(i,l,yi(e)).next((u=>{if(u)return r=u.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(l,u.targetId).next((f=>{o=f}))})).next((()=>i.Fs.getDocumentsMatchingQuery(l,e,t?r:Je.min(),t?o:at()))).next((u=>(h2(i,g1(e),u),{documents:u,Qs:o})))))}function d2(n,e){const t=Be(n),i=Be(t.Pi),r=t.Ms.get(e);return r?Promise.resolve(r.target):t.persistence.runTransaction("Get target data","readonly",(o=>i.At(o,e).next((l=>l?l.target:null))))}function f2(n,e){const t=Be(n),i=t.Os.get(e)||Je.min();return t.persistence.runTransaction("Get new document changes","readonly",(r=>t.Ns.getAllFromCollectionGroup(r,e,VC(i,_u),Number.MAX_SAFE_INTEGER))).then((r=>(h2(t,e,r),r)))}function h2(n,e,t){let i=n.Os.get(e)||Je.min();t.forEach(((r,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)})),n.Os.set(e,i)}async function $V(n,e,t,i){const r=Be(n);let o=at(),l=Si();for(const m of t){const y=e.$s(m.metadata.name);m.document&&(o=o.add(y));const v=e.Us(m);v.setReadTime(e.Ks(m.metadata.readTime)),l=l.insert(y,v)}const u=r.Ns.newChangeBuffer({trackRemovals:!0}),f=await Ru(r,(function(y){return yi(zu(pt.fromString(`__bundle__/docs/${y}`)))})(i));return r.persistence.runTransaction("Apply bundle documents","readwrite",(m=>c2(m,u,l).next((y=>(u.apply(m),y))).next((y=>r.Pi.removeMatchingKeysForTargetId(m,f.targetId).next((()=>r.Pi.addMatchingKeys(m,o,f.targetId))).next((()=>r.localDocuments.getLocalViewOfDocuments(m,y.ks,y.qs))).next((()=>y.ks))))))}async function WV(n,e,t=at()){const i=await Ru(n,yi(f0(e.bundledQuery))),r=Be(n);return r.persistence.runTransaction("Save named query","readwrite",(o=>{const l=gn(e.readTime);if(i.snapshotVersion.compareTo(l)>=0)return r.Ii.saveNamedQuery(o,e);const u=i.withResumeToken(un.EMPTY_BYTE_STRING,l);return r.Ms=r.Ms.insert(u.targetId,u),r.Pi.updateTargetData(o,u).next((()=>r.Pi.removeMatchingKeysForTargetId(o,i.targetId))).next((()=>r.Pi.addMatchingKeys(o,t,i.targetId))).next((()=>r.Ii.saveNamedQuery(o,e)))}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m2="firestore_clients";function cS(n,e){return`${m2}_${n}_${e}`}const p2="firestore_mutations";function dS(n,e,t){let i=`${p2}_${n}_${t}`;return e.isAuthenticated()&&(i+=`_${e.uid}`),i}const g2="firestore_targets";function d_(n,e){return`${g2}_${n}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mr="SharedClientState";class Km{constructor(e,t,i,r){this.user=e,this.batchId=t,this.state=i,this.error=r}static Ws(e,t,i){const r=JSON.parse(i);let o,l=typeof r=="object"&&["pending","acknowledged","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return l&&r.error&&(l=typeof r.error.message=="string"&&typeof r.error.code=="string",l&&(o=new Re(r.error.code,r.error.message))),l?new Km(e,t,r.state,o):(pn(Mr,`Failed to parse mutation state for ID '${t}': ${i}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Pd{constructor(e,t,i){this.targetId=e,this.state=t,this.error=i}static Ws(e,t){const i=JSON.parse(t);let r,o=typeof i=="object"&&["not-current","current","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(r=new Re(i.error.code,i.error.message))),o?new Pd(e,i.state,r):(pn(Mr,`Failed to parse target state for ID '${e}': ${t}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Jm{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ws(e,t){const i=JSON.parse(t);let r=typeof i=="object"&&i.activeTargetIds instanceof Array,o=r0();for(let l=0;r&&l<i.activeTargetIds.length;++l)r=BC(i.activeTargetIds[l]),o=o.add(i.activeTargetIds[l]);return r?new Jm(e,o):(pn(Mr,`Failed to parse client data for instance '${e}': ${t}`),null)}}class w0{constructor(e,t){this.clientId=e,this.onlineState=t}static Ws(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new w0(t.clientId,t.onlineState):(pn(Mr,`Failed to parse online state: ${e}`),null)}}class tv{constructor(){this.activeTargetIds=r0()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class f_{constructor(e,t,i,r,o){this.window=e,this.Mi=t,this.persistenceKey=i,this.Js=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new $t(rt),this.started=!1,this.Xs=[];const l=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.eo=cS(this.persistenceKey,this.Js),this.no=(function(f){return`firestore_sequence_number_${f}`})(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new tv),this.ro=new RegExp(`^${m2}_${l}_([^_]*)$`),this.io=new RegExp(`^${p2}_${l}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${g2}_${l}_(\\d+)$`),this.oo=(function(f){return`firestore_online_state_${f}`})(this.persistenceKey),this._o=(function(f){return`firestore_bundle_loaded_v2_${f}`})(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ts();for(const i of e){if(i===this.Js)continue;const r=this.getItem(cS(this.persistenceKey,i));if(r){const o=Jm.Ws(i,r);o&&(this.Zs=this.Zs.insert(o.clientId,o))}}this.ao();const t=this.storage.getItem(this.oo);if(t){const i=this.uo(t);i&&this.co(i)}for(const i of this.Xs)this.Ys(i);this.Xs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.no,JSON.stringify(e))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(e){let t=!1;return this.Zs.forEach(((i,r)=>{r.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.ho(e,"pending")}updateMutationState(e,t,i){this.ho(e,t,i),this.Po(e)}addLocalQueryTarget(e,t=!0){let i="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(d_(this.persistenceKey,e));if(r){const o=Pd.Ws(e,r);o&&(i=o.state)}}return t&&this.To.zs(e),this.ao(),i}removeLocalQueryTarget(e){this.To.js(e),this.ao()}isLocalQueryTarget(e){return this.To.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(d_(this.persistenceKey,e))}updateQueryState(e,t,i){this.Io(e,t,i)}handleUserChange(e,t,i){t.forEach((r=>{this.Po(r)})),this.currentUser=e,i.forEach((r=>{this.addPendingMutation(r)}))}setOnlineState(e){this.Eo(e)}notifyBundleLoaded(e){this.Ao(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Pe(Mr,"READ",e,t),t}setItem(e,t){Pe(Mr,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){Pe(Mr,"REMOVE",e),this.storage.removeItem(e)}Ys(e){const t=e;if(t.storageArea===this.storage){if(Pe(Mr,"EVENT",t.key,t.newValue),t.key===this.eo)return void pn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable((async()=>{if(this.started){if(t.key!==null){if(this.ro.test(t.key)){if(t.newValue==null){const i=this.Ro(t.key);return this.Vo(i,null)}{const i=this.mo(t.key,t.newValue);if(i)return this.Vo(i.clientId,i)}}else if(this.io.test(t.key)){if(t.newValue!==null){const i=this.fo(t.key,t.newValue);if(i)return this.po(i)}}else if(this.so.test(t.key)){if(t.newValue!==null){const i=this.yo(t.key,t.newValue);if(i)return this.wo(i)}}else if(t.key===this.oo){if(t.newValue!==null){const i=this.uo(t.newValue);if(i)return this.co(i)}}else if(t.key===this.no){const i=(function(o){let l=Ei.ce;if(o!=null)try{const u=JSON.parse(o);$e(typeof u=="number",30636,{So:o}),l=u}catch(u){pn(Mr,"Failed to read sequence number from WebStorage",u)}return l})(t.newValue);i!==Ei.ce&&this.sequenceNumberHandler(i)}else if(t.key===this._o){const i=this.bo(t.newValue);await Promise.all(i.map((r=>this.syncEngine.Do(r))))}}}else this.Xs.push(t)}))}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(e,t,i){const r=new Km(this.currentUser,e,t,i),o=dS(this.persistenceKey,this.currentUser,e);this.setItem(o,r.Gs())}Po(e){const t=dS(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Eo(e){const t={clientId:this.Js,onlineState:e};this.storage.setItem(this.oo,JSON.stringify(t))}Io(e,t,i){const r=d_(this.persistenceKey,e),o=new Pd(e,t,i);this.setItem(r,o.Gs())}Ao(e){const t=JSON.stringify(Array.from(e));this.setItem(this._o,t)}Ro(e){const t=this.ro.exec(e);return t?t[1]:null}mo(e,t){const i=this.Ro(e);return Jm.Ws(i,t)}fo(e,t){const i=this.io.exec(e),r=Number(i[1]),o=i[2]!==void 0?i[2]:null;return Km.Ws(new On(o),r,t)}yo(e,t){const i=this.so.exec(e),r=Number(i[1]);return Pd.Ws(r,t)}uo(e){return w0.Ws(e)}bo(e){return JSON.parse(e)}async po(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);Pe(Mr,`Ignoring mutation for non-active user ${e.user.uid}`)}wo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Vo(e,t){const i=t?this.Zs.insert(e,t):this.Zs.remove(e),r=this.lo(this.Zs),o=this.lo(i),l=[],u=[];return o.forEach((f=>{r.has(f)||l.push(f)})),r.forEach((f=>{o.has(f)||u.push(f)})),this.syncEngine.Fo(l,u).then((()=>{this.Zs=i}))}co(e){this.Zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}lo(e){let t=r0();return e.forEach(((i,r)=>{t=t.unionWith(r.activeTargetIds)})),t}}class y2{constructor(){this.Mo=new tv,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,i){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new tv,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KV{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fS="ConnectivityMonitor";class hS{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Pe(fS,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Pe(fS,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let am=null;function nv(){return am===null?am=(function(){return 268435456+Math.round(2147483648*Math.random())})():am++,"0x"+am.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h_="RestConnection",JV={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class YV{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${i}/databases/${r}`,this.Wo=this.databaseId.database===q_?`project_id=${i}`:`project_id=${i}&database_id=${r}`}Go(e,t,i,r,o){const l=nv(),u=this.zo(e,t.toUriEncodedString());Pe(h_,`Sending RPC '${e}' ${l}:`,u,i);const f={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(f,r,o);const{host:m}=new URL(u),y=Fu(m);return this.Jo(e,u,f,i,y).then((v=>(Pe(h_,`Received RPC '${e}' ${l}: `,v),v)),(v=>{throw $r(h_,`RPC '${e}' ${l} failed with error: `,v,"url: ",u,"request:",i),v}))}Ho(e,t,i,r,o,l){return this.Go(e,t,i,r,o)}jo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+qu})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((r,o)=>e[o]=r)),i&&i.headers.forEach(((r,o)=>e[o]=r))}zo(e,t){const i=JV[e];return`${this.Uo}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QV{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zn="WebChannelConnection";class XV extends YV{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,i,r,o){const l=nv();return new Promise(((u,f)=>{const m=new bC;m.setWithCredentials(!0),m.listenOnce(SC.COMPLETE,(()=>{try{switch(m.getLastErrorCode()){case gm.NO_ERROR:const v=m.getResponseJson();Pe(Zn,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(v)),u(v);break;case gm.TIMEOUT:Pe(Zn,`RPC '${e}' ${l} timed out`),f(new Re(ye.DEADLINE_EXCEEDED,"Request time out"));break;case gm.HTTP_ERROR:const w=m.getStatus();if(Pe(Zn,`RPC '${e}' ${l} failed with status:`,w,"response text:",m.getResponseText()),w>0){let E=m.getResponseJson();Array.isArray(E)&&(E=E[0]);const S=E==null?void 0:E.error;if(S&&S.status&&S.message){const b=(function(C){const R=C.toLowerCase().replace(/_/g,"-");return Object.values(ye).indexOf(R)>=0?R:ye.UNKNOWN})(S.status);f(new Re(b,S.message))}else f(new Re(ye.UNKNOWN,"Server responded with status "+m.getStatus()))}else f(new Re(ye.UNAVAILABLE,"Connection failed."));break;default:ze(9055,{l_:e,streamId:l,h_:m.getLastErrorCode(),P_:m.getLastError()})}}finally{Pe(Zn,`RPC '${e}' ${l} completed.`)}}));const y=JSON.stringify(r);Pe(Zn,`RPC '${e}' ${l} sending request:`,r),m.send(t,"POST",y,i,15)}))}T_(e,t,i){const r=nv(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=CC(),u=AC(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(f.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(f.useFetchStreams=!0),this.jo(f.initMessageHeaders,t,i),f.encodeInitMessageHeaders=!0;const y=o.join("");Pe(Zn,`Creating RPC '${e}' stream ${r}: ${y}`,f);const v=l.createWebChannel(y,f);this.I_(v);let w=!1,E=!1;const S=new QV({Yo:A=>{E?Pe(Zn,`Not sending because RPC '${e}' stream ${r} is closed:`,A):(w||(Pe(Zn,`Opening RPC '${e}' stream ${r} transport.`),v.open(),w=!0),Pe(Zn,`RPC '${e}' stream ${r} sending:`,A),v.send(A))},Zo:()=>v.close()}),b=(A,C,R)=>{A.listen(C,(L=>{try{R(L)}catch(q){setTimeout((()=>{throw q}),0)}}))};return b(v,yd.EventType.OPEN,(()=>{E||(Pe(Zn,`RPC '${e}' stream ${r} transport opened.`),S.o_())})),b(v,yd.EventType.CLOSE,(()=>{E||(E=!0,Pe(Zn,`RPC '${e}' stream ${r} transport closed`),S.a_(),this.E_(v))})),b(v,yd.EventType.ERROR,(A=>{E||(E=!0,$r(Zn,`RPC '${e}' stream ${r} transport errored. Name:`,A.name,"Message:",A.message),S.a_(new Re(ye.UNAVAILABLE,"The operation could not be completed")))})),b(v,yd.EventType.MESSAGE,(A=>{var C;if(!E){const R=A.data[0];$e(!!R,16349);const L=R,q=(L==null?void 0:L.error)||((C=L[0])==null?void 0:C.error);if(q){Pe(Zn,`RPC '${e}' stream ${r} received error:`,q);const z=q.status;let H=(function(U){const j=xn[U];if(j!==void 0)return N1(j)})(z),O=q.message;H===void 0&&(H=ye.INTERNAL,O="Unknown error status: "+z+" with message "+q.message),E=!0,S.a_(new Re(H,O)),v.close()}else Pe(Zn,`RPC '${e}' stream ${r} received:`,R),S.u_(R)}})),b(u,IC.STAT_EVENT,(A=>{A.stat===M_.PROXY?Pe(Zn,`RPC '${e}' stream ${r} detected buffering proxy`):A.stat===M_.NOPROXY&&Pe(Zn,`RPC '${e}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{S.__()}),0),S}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _2(){return typeof window<"u"?window:null}function Im(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _f(n){return new iV(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x0{constructor(e,t,i=1e3,r=1.5,o=6e4){this.Mi=e,this.timerId=t,this.d_=i,this.A_=r,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-i);r>0&&Pe("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mS="PersistentStream";class v2{constructor(e,t,i,r,o,l,u,f){this.Mi=e,this.S_=i,this.b_=r,this.connection=o,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=u,this.listener=f,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new x0(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ye.RESOURCE_EXHAUSTED?(pn(t.toString()),pn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ye.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,r])=>{this.D_===t&&this.G_(i,r)}),(i=>{e((()=>{const r=new Re(ye.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(r)}))}))}G_(e,t){const i=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((r=>{i((()=>this.z_(r)))})),this.stream.onMessage((r=>{i((()=>++this.F_==1?this.J_(r):this.onNext(r)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Pe(mS,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(Pe(mS,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class ZV extends v2{constructor(e,t,i,r,o,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,r,l),this.serializer=o}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=oV(this.serializer,e),i=(function(o){if(!("targetChange"in o))return Je.min();const l=o.targetChange;return l.targetIds&&l.targetIds.length?Je.min():l.readTime?gn(l.readTime):Je.min()})(e);return this.listener.H_(t,i)}Y_(e){const t={};t.database=Y_(this.serializer),t.addTarget=(function(o,l){let u;const f=l.target;if(u=Bm(f)?{documents:B1(o,f)}:{query:q1(o,f).ft},u.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){u.resumeToken=M1(o,l.resumeToken);const m=K_(o,l.expectedCount);m!==null&&(u.expectedCount=m)}else if(l.snapshotVersion.compareTo(Je.min())>0){u.readTime=Cu(o,l.snapshotVersion.toTimestamp());const m=K_(o,l.expectedCount);m!==null&&(u.expectedCount=m)}return u})(this.serializer,e);const i=lV(this.serializer,e);i&&(t.labels=i),this.q_(t)}Z_(e){const t={};t.database=Y_(this.serializer),t.removeTarget=e,this.q_(t)}}class e4 extends v2{constructor(e,t,i,r,o,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,r,l),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return $e(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,$e(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){$e(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=aV(e.writeResults,e.commitTime),i=gn(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=Y_(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>Xd(this.serializer,i)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t4{}class n4 extends t4{constructor(e,t,i,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new Re(ye.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,i,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,l])=>this.connection.Go(e,J_(t,i),r,o,l))).catch((o=>{throw o.name==="FirebaseError"?(o.code===ye.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Re(ye.UNKNOWN,o.toString())}))}Ho(e,t,i,r,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,u])=>this.connection.Ho(e,J_(t,i),r,l,u,o))).catch((l=>{throw l.name==="FirebaseError"?(l.code===ye.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Re(ye.UNKNOWN,l.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class i4{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(pn(t),this.aa=!1):Pe("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qa="RemoteStore";class r4{constructor(e,t,i,r,o){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo((l=>{i.enqueueAndForget((async()=>{Bo(this)&&(Pe(qa,"Restarting streams for network reachability change."),await(async function(f){const m=Be(f);m.Ea.add(4),await Hu(m),m.Ra.set("Unknown"),m.Ea.delete(4),await vf(m)})(this))}))})),this.Ra=new i4(i,r)}}async function vf(n){if(Bo(n))for(const e of n.da)await e(!0)}async function Hu(n){for(const e of n.da)await e(!1)}function Ap(n,e){const t=Be(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),S0(t)?b0(t):Wu(t).O_()&&E0(t,e))}function Pu(n,e){const t=Be(n),i=Wu(t);t.Ia.delete(e),i.O_()&&T2(t,e),t.Ia.size===0&&(i.O_()?i.L_():Bo(t)&&t.Ra.set("Unknown"))}function E0(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Je.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Wu(n).Y_(e)}function T2(n,e){n.Va.Ue(e),Wu(n).Z_(e)}function b0(n){n.Va=new Z5({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Wu(n).start(),n.Ra.ua()}function S0(n){return Bo(n)&&!Wu(n).x_()&&n.Ia.size>0}function Bo(n){return Be(n).Ea.size===0}function w2(n){n.Va=void 0}async function s4(n){n.Ra.set("Online")}async function o4(n){n.Ia.forEach(((e,t)=>{E0(n,e)}))}async function a4(n,e){w2(n),S0(n)?(n.Ra.ha(e),b0(n)):n.Ra.set("Unknown")}async function l4(n,e,t){if(n.Ra.set("Online"),e instanceof D1&&e.state===2&&e.cause)try{await(async function(r,o){const l=o.cause;for(const u of o.targetIds)r.Ia.has(u)&&(await r.remoteSyncer.rejectListen(u,l),r.Ia.delete(u),r.Va.removeTarget(u))})(n,e)}catch(i){Pe(qa,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Ym(n,i)}else if(e instanceof bm?n.Va.Ze(e):e instanceof k1?n.Va.st(e):n.Va.tt(e),!t.isEqual(Je.min()))try{const i=await u2(n.localStore);t.compareTo(i)>=0&&await(function(o,l){const u=o.Va.Tt(l);return u.targetChanges.forEach(((f,m)=>{if(f.resumeToken.approximateByteSize()>0){const y=o.Ia.get(m);y&&o.Ia.set(m,y.withResumeToken(f.resumeToken,l))}})),u.targetMismatches.forEach(((f,m)=>{const y=o.Ia.get(f);if(!y)return;o.Ia.set(f,y.withResumeToken(un.EMPTY_BYTE_STRING,y.snapshotVersion)),T2(o,f);const v=new xs(y.target,f,m,y.sequenceNumber);E0(o,v)})),o.remoteSyncer.applyRemoteEvent(u)})(n,t)}catch(i){Pe(qa,"Failed to raise snapshot:",i),await Ym(n,i)}}async function Ym(n,e,t){if(!Oo(e))throw e;n.Ea.add(1),await Hu(n),n.Ra.set("Offline"),t||(t=()=>u2(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{Pe(qa,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await vf(n)}))}function x2(n,e){return e().catch((t=>Ym(n,t,e)))}async function $u(n){const e=Be(n),t=ko(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:To;for(;u4(e);)try{const r=await HV(e.localStore,i);if(r===null){e.Ta.length===0&&t.L_();break}i=r.batchId,c4(e,r)}catch(r){await Ym(e,r)}E2(e)&&b2(e)}function u4(n){return Bo(n)&&n.Ta.length<10}function c4(n,e){n.Ta.push(e);const t=ko(n);t.O_()&&t.X_&&t.ea(e.mutations)}function E2(n){return Bo(n)&&!ko(n).x_()&&n.Ta.length>0}function b2(n){ko(n).start()}async function d4(n){ko(n).ra()}async function f4(n){const e=ko(n);for(const t of n.Ta)e.ea(t.mutations)}async function h4(n,e,t){const i=n.Ta.shift(),r=l0.from(i,e,t);await x2(n,(()=>n.remoteSyncer.applySuccessfulWrite(r))),await $u(n)}async function m4(n,e){e&&ko(n).X_&&await(async function(i,r){if((function(l){return R1(l)&&l!==ye.ABORTED})(r.code)){const o=i.Ta.shift();ko(i).B_(),await x2(i,(()=>i.remoteSyncer.rejectFailedWrite(o.batchId,r))),await $u(i)}})(n,e),E2(n)&&b2(n)}async function pS(n,e){const t=Be(n);t.asyncQueue.verifyOperationInProgress(),Pe(qa,"RemoteStore received new credentials");const i=Bo(t);t.Ea.add(3),await Hu(t),i&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await vf(t)}async function iv(n,e){const t=Be(n);e?(t.Ea.delete(2),await vf(t)):e||(t.Ea.add(2),await Hu(t),t.Ra.set("Unknown"))}function Wu(n){return n.ma||(n.ma=(function(t,i,r){const o=Be(t);return o.sa(),new ZV(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)})(n.datastore,n.asyncQueue,{Xo:s4.bind(null,n),t_:o4.bind(null,n),r_:a4.bind(null,n),H_:l4.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),S0(n)?b0(n):n.Ra.set("Unknown")):(await n.ma.stop(),w2(n))}))),n.ma}function ko(n){return n.fa||(n.fa=(function(t,i,r){const o=Be(t);return o.sa(),new e4(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:d4.bind(null,n),r_:m4.bind(null,n),ta:f4.bind(null,n),na:h4.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await $u(n)):(await n.fa.stop(),n.Ta.length>0&&(Pe(qa,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I0{constructor(e,t,i,r,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=r,this.removalCallback=o,this.deferred=new Kn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((l=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,r,o){const l=Date.now()+i,u=new I0(e,t,l,r,o);return u.start(i),u}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Re(ye.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ku(n,e){if(pn("AsyncQueue",`${e}: ${n}`),Oo(n))return new Re(ye.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class au{static emptySet(e){return new au(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||Le.comparator(t.key,i.key):(t,i)=>Le.comparator(t.key,i.key),this.keyedMap=_d(),this.sortedSet=new $t(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof au)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const r=t.getNext().key,o=i.getNext().key;if(!r.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new au;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gS{constructor(){this.ga=new $t(Le.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):ze(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class ku{constructor(e,t,i,r,o,l,u,f,m){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=o,this.fromCache=l,this.syncStateChanged=u,this.excludesMetadataChanges=f,this.hasCachedResults=m}static fromInitialDocuments(e,t,i,r,o){const l=[];return t.forEach((u=>{l.push({type:0,doc:u})})),new ku(e,t,au.emptySet(t),l,i,r,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&hf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==i[r].type||!t[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p4{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class g4{constructor(){this.queries=yS(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const r=Be(t),o=r.queries;r.queries=yS(),o.forEach(((l,u)=>{for(const f of u.Sa)f.onError(i)}))})(this,new Re(ye.ABORTED,"Firestore shutting down"))}}function yS(){return new Ps((n=>p1(n)),hf)}async function A0(n,e){const t=Be(n);let i=3;const r=e.query;let o=t.queries.get(r);o?!o.ba()&&e.Da()&&(i=2):(o=new p4,i=e.Da()?0:1);try{switch(i){case 0:o.wa=await t.onListen(r,!0);break;case 1:o.wa=await t.onListen(r,!1);break;case 2:await t.onFirstRemoteStoreListen(r)}}catch(l){const u=Ku(l,`Initialization of query '${Zl(e.query)}' failed`);return void e.onError(u)}t.queries.set(r,o),o.Sa.push(e),e.va(t.onlineState),o.wa&&e.Fa(o.wa)&&R0(t)}async function C0(n,e){const t=Be(n),i=e.query;let r=3;const o=t.queries.get(i);if(o){const l=o.Sa.indexOf(e);l>=0&&(o.Sa.splice(l,1),o.Sa.length===0?r=e.Da()?0:1:!o.ba()&&e.Da()&&(r=2))}switch(r){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function y4(n,e){const t=Be(n);let i=!1;for(const r of e){const o=r.query,l=t.queries.get(o);if(l){for(const u of l.Sa)u.Fa(r)&&(i=!0);l.wa=r}}i&&R0(t)}function _4(n,e,t){const i=Be(n),r=i.queries.get(e);if(r)for(const o of r.Sa)o.onError(t);i.queries.delete(e)}function R0(n){n.Ca.forEach((e=>{e.next()}))}var rv,_S;(_S=rv||(rv={})).Ma="default",_S.Cache="cache";class N0{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new ku(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=ku.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==rv.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v4{constructor(e,t){this.Qa=e,this.byteLength=t}$a(){return"metadata"in this.Qa}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vS{constructor(e){this.serializer=e}$s(e){return jr(this.serializer,e)}Us(e){return e.metadata.exists?F1(this.serializer,e.document,!1):Jt.newNoDocument(this.$s(e.metadata.name),this.Ks(e.metadata.readTime))}Ks(e){return gn(e)}}class T4{constructor(e,t){this.Ua=e,this.serializer=t,this.Ka=[],this.Wa=[],this.collectionGroups=new Set,this.progress=S2(e)}get queries(){return this.Ka}get documents(){return this.Wa}Ga(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Qa.namedQuery)this.Ka.push(e.Qa.namedQuery);else if(e.Qa.documentMetadata){this.Wa.push({metadata:e.Qa.documentMetadata}),e.Qa.documentMetadata.exists||++t;const i=pt.fromString(e.Qa.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else e.Qa.document&&(this.Wa[this.Wa.length-1].document=e.Qa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,{...this.progress}):null}za(e){const t=new Map,i=new vS(this.serializer);for(const r of e)if(r.metadata.queries){const o=i.$s(r.metadata.name);for(const l of r.metadata.queries){const u=(t.get(l)||at()).add(o);t.set(l,u)}}return t}async ja(e){const t=await $V(e,new vS(this.serializer),this.Wa,this.Ua.id),i=this.za(this.documents);for(const r of this.Ka)await WV(e,r,i.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Ja:this.collectionGroups,Ha:t}}}function S2(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I2{constructor(e){this.key=e}}class A2{constructor(e){this.key=e}}class C2{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=at(),this.mutatedKeys=at(),this.eu=y1(e),this.tu=new au(this.eu)}get nu(){return this.Ya}ru(e,t){const i=t?t.iu:new gS,r=t?t.tu:this.tu;let o=t?t.mutatedKeys:this.mutatedKeys,l=r,u=!1;const f=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,m=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((y,v)=>{const w=r.get(y),E=mf(this.query,v)?v:null,S=!!w&&this.mutatedKeys.has(w.key),b=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations);let A=!1;w&&E?w.data.isEqual(E.data)?S!==b&&(i.track({type:3,doc:E}),A=!0):this.su(w,E)||(i.track({type:2,doc:E}),A=!0,(f&&this.eu(E,f)>0||m&&this.eu(E,m)<0)&&(u=!0)):!w&&E?(i.track({type:0,doc:E}),A=!0):w&&!E&&(i.track({type:1,doc:w}),A=!0,(f||m)&&(u=!0)),A&&(E?(l=l.add(E),o=b?o.add(y):o.delete(y)):(l=l.delete(y),o=o.delete(y)))})),this.query.limit!==null)for(;l.size>this.query.limit;){const y=this.query.limitType==="F"?l.last():l.first();l=l.delete(y.key),o=o.delete(y.key),i.track({type:1,doc:y})}return{tu:l,iu:i,Cs:u,mutatedKeys:o}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,r){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const l=e.iu.ya();l.sort(((y,v)=>(function(E,S){const b=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ze(20277,{Rt:A})}};return b(E)-b(S)})(y.type,v.type)||this.eu(y.doc,v.doc))),this.ou(i),r=r??!1;const u=t&&!r?this._u():[],f=this.Xa.size===0&&this.current&&!r?1:0,m=f!==this.Za;return this.Za=f,l.length!==0||m?{snapshot:new ku(this.query,e.tu,o,l,e.mutatedKeys,f===0,m,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:u}:{au:u}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new gS,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=at(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const t=[];return e.forEach((i=>{this.Xa.has(i)||t.push(new A2(i))})),this.Xa.forEach((i=>{e.has(i)||t.push(new I2(i))})),t}cu(e){this.Ya=e.Qs,this.Xa=at();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return ku.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const qo="SyncEngine";class w4{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class x4{constructor(e){this.key=e,this.hu=!1}}class E4{constructor(e,t,i,r,o,l){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.Pu={},this.Tu=new Ps((u=>p1(u)),hf),this.Iu=new Map,this.Eu=new Set,this.du=new $t(Le.comparator),this.Au=new Map,this.Ru=new p0,this.Vu={},this.mu=new Map,this.fu=Ba.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function b4(n,e,t=!0){const i=Cp(n);let r;const o=i.Tu.get(e);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),r=o.view.lu()):r=await R2(i,e,t,!0),r}async function S4(n,e){const t=Cp(n);await R2(t,e,!0,!1)}async function R2(n,e,t,i){const r=await Ru(n.localStore,yi(e)),o=r.targetId,l=n.sharedClientState.addLocalQueryTarget(o,t);let u;return i&&(u=await P0(n,e,o,l==="current",r.resumeToken)),n.isPrimaryClient&&t&&Ap(n.remoteStore,r),u}async function P0(n,e,t,i,r){n.pu=(v,w,E)=>(async function(b,A,C,R){let L=A.view.ru(C);L.Cs&&(L=await Wm(b.localStore,A.query,!1).then((({documents:O})=>A.view.ru(O,L))));const q=R&&R.targetChanges.get(A.targetId),z=R&&R.targetMismatches.get(A.targetId)!=null,H=A.view.applyChanges(L,b.isPrimaryClient,q,z);return sv(b,A.targetId,H.au),H.snapshot})(n,v,w,E);const o=await Wm(n.localStore,e,!0),l=new C2(e,o.Qs),u=l.ru(o.documents),f=yf.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",r),m=l.applyChanges(u,n.isPrimaryClient,f);sv(n,t,m.au);const y=new w4(e,t,l);return n.Tu.set(e,y),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),m.snapshot}async function I4(n,e,t){const i=Be(n),r=i.Tu.get(e),o=i.Iu.get(r.targetId);if(o.length>1)return i.Iu.set(r.targetId,o.filter((l=>!hf(l,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await Nu(i.localStore,r.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(r.targetId),t&&Pu(i.remoteStore,r.targetId),Du(i,r.targetId)})).catch(Lo)):(Du(i,r.targetId),await Nu(i.localStore,r.targetId,!0))}async function A4(n,e){const t=Be(n),i=t.Tu.get(e),r=t.Iu.get(i.targetId);t.isPrimaryClient&&r.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),Pu(t.remoteStore,i.targetId))}async function C4(n,e,t){const i=V0(n);try{const r=await(function(l,u){const f=Be(l),m=Nt.now(),y=u.reduce(((E,S)=>E.add(S.key)),at());let v,w;return f.persistence.runTransaction("Locally write mutations","readwrite",(E=>{let S=Si(),b=at();return f.Ns.getEntries(E,y).next((A=>{S=A,S.forEach(((C,R)=>{R.isValidDocument()||(b=b.add(C))}))})).next((()=>f.localDocuments.getOverlayedDocuments(E,S))).next((A=>{v=A;const C=[];for(const R of u){const L=Y5(R,v.get(R.key).overlayedDocument);L!=null&&C.push(new ks(R.key,L,o1(L.value.mapValue),tn.exists(!0)))}return f.mutationQueue.addMutationBatch(E,m,C,u)})).next((A=>{w=A;const C=A.applyToLocalDocumentSet(v,b);return f.documentOverlayCache.saveOverlays(E,A.batchId,C)}))})).then((()=>({batchId:w.batchId,changes:v1(v)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),(function(l,u,f){let m=l.Vu[l.currentUser.toKey()];m||(m=new $t(rt)),m=m.insert(u,f),l.Vu[l.currentUser.toKey()]=m})(i,r.batchId,t),await Ds(i,r.changes),await $u(i.remoteStore)}catch(r){const o=Ku(r,"Failed to persist write");t.reject(o)}}async function N2(n,e){const t=Be(n);try{const i=await GV(t.localStore,e);e.targetChanges.forEach(((r,o)=>{const l=t.Au.get(o);l&&($e(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?l.hu=!0:r.modifiedDocuments.size>0?$e(l.hu,14607):r.removedDocuments.size>0&&($e(l.hu,42227),l.hu=!1))})),await Ds(t,i,e)}catch(i){await Lo(i)}}function TS(n,e,t){const i=Be(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const r=[];i.Tu.forEach(((o,l)=>{const u=l.view.va(e);u.snapshot&&r.push(u.snapshot)})),(function(l,u){const f=Be(l);f.onlineState=u;let m=!1;f.queries.forEach(((y,v)=>{for(const w of v.Sa)w.va(u)&&(m=!0)})),m&&R0(f)})(i.eventManager,e),r.length&&i.Pu.H_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function R4(n,e,t){const i=Be(n);i.sharedClientState.updateQueryState(e,"rejected",t);const r=i.Au.get(e),o=r&&r.key;if(o){let l=new $t(Le.comparator);l=l.insert(o,Jt.newNoDocument(o,Je.min()));const u=at().add(o),f=new gf(Je.min(),new Map,new $t(rt),l,u);await N2(i,f),i.du=i.du.remove(o),i.Au.delete(e),M0(i)}else await Nu(i.localStore,e,!1).then((()=>Du(i,e,t))).catch(Lo)}async function N4(n,e){const t=Be(n),i=e.batch.batchId;try{const r=await jV(t.localStore,e);D0(t,i,null),k0(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Ds(t,r)}catch(r){await Lo(r)}}async function P4(n,e,t){const i=Be(n);try{const r=await(function(l,u){const f=Be(l);return f.persistence.runTransaction("Reject batch","readwrite-primary",(m=>{let y;return f.mutationQueue.lookupMutationBatch(m,u).next((v=>($e(v!==null,37113),y=v.keys(),f.mutationQueue.removeMutationBatch(m,v)))).next((()=>f.mutationQueue.performConsistencyCheck(m))).next((()=>f.documentOverlayCache.removeOverlaysForBatchId(m,y,u))).next((()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,y))).next((()=>f.localDocuments.getDocuments(m,y)))}))})(i.localStore,e);D0(i,e,t),k0(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Ds(i,r)}catch(r){await Lo(r)}}async function k4(n,e){const t=Be(n);Bo(t.remoteStore)||Pe(qo,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const i=await(function(l){const u=Be(l);return u.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(f=>u.mutationQueue.getHighestUnacknowledgedBatchId(f)))})(t.localStore);if(i===To)return void e.resolve();const r=t.mu.get(i)||[];r.push(e),t.mu.set(i,r)}catch(i){const r=Ku(i,"Initialization of waitForPendingWrites() operation failed");e.reject(r)}}function k0(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function D0(n,e,t){const i=Be(n);let r=i.Vu[i.currentUser.toKey()];if(r){const o=r.get(e);o&&(t?o.reject(t):o.resolve(),r=r.remove(e)),i.Vu[i.currentUser.toKey()]=r}}function Du(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Iu.get(e))n.Tu.delete(i),t&&n.Pu.yu(i,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((i=>{n.Ru.containsKey(i)||P2(n,i)}))}function P2(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Pu(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),M0(n))}function sv(n,e,t){for(const i of t)i instanceof I2?(n.Ru.addReference(i.key,e),D4(n,i)):i instanceof A2?(Pe(qo,"Document no longer in limbo: "+i.key),n.Ru.removeReference(i.key,e),n.Ru.containsKey(i.key)||P2(n,i.key)):ze(19791,{wu:i})}function D4(n,e){const t=e.key,i=t.path.canonicalString();n.du.get(t)||n.Eu.has(i)||(Pe(qo,"New document in limbo: "+t),n.Eu.add(i),M0(n))}function M0(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Le(pt.fromString(e)),i=n.fu.next();n.Au.set(i,new x4(t)),n.du=n.du.insert(t,i),Ap(n.remoteStore,new xs(yi(zu(t.path)),i,"TargetPurposeLimboResolution",Ei.ce))}}async function Ds(n,e,t){const i=Be(n),r=[],o=[],l=[];i.Tu.isEmpty()||(i.Tu.forEach(((u,f)=>{l.push(i.pu(f,e,t).then((m=>{var y;if((m||t)&&i.isPrimaryClient){const v=m?!m.fromCache:(y=t==null?void 0:t.targetChanges.get(f.targetId))==null?void 0:y.current;i.sharedClientState.updateQueryState(f.targetId,v?"current":"not-current")}if(m){r.push(m);const v=v0.As(f.targetId,m);o.push(v)}})))})),await Promise.all(l),i.Pu.H_(r),await(async function(f,m){const y=Be(f);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",(v=>ue.forEach(m,(w=>ue.forEach(w.Es,(E=>y.persistence.referenceDelegate.addReference(v,w.targetId,E))).next((()=>ue.forEach(w.ds,(E=>y.persistence.referenceDelegate.removeReference(v,w.targetId,E)))))))))}catch(v){if(!Oo(v))throw v;Pe(T0,"Failed to update sequence numbers: "+v)}for(const v of m){const w=v.targetId;if(!v.fromCache){const E=y.Ms.get(w),S=E.snapshotVersion,b=E.withLastLimboFreeSnapshotVersion(S);y.Ms=y.Ms.insert(w,b)}}})(i.localStore,o))}async function M4(n,e){const t=Be(n);if(!t.currentUser.isEqual(e)){Pe(qo,"User change. New user:",e.toKey());const i=await l2(t.localStore,e);t.currentUser=e,(function(o,l){o.mu.forEach((u=>{u.forEach((f=>{f.reject(new Re(ye.CANCELLED,l))}))})),o.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Ds(t,i.Ls)}}function V4(n,e){const t=Be(n),i=t.Au.get(e);if(i&&i.hu)return at().add(i.key);{let r=at();const o=t.Iu.get(e);if(!o)return r;for(const l of o){const u=t.Tu.get(l);r=r.unionWith(u.view.nu)}return r}}async function U4(n,e){const t=Be(n),i=await Wm(t.localStore,e.query,!0),r=e.view.cu(i);return t.isPrimaryClient&&sv(t,e.targetId,r.au),r}async function L4(n,e){const t=Be(n);return f2(t.localStore,e).then((i=>Ds(t,i)))}async function O4(n,e,t,i){const r=Be(n),o=await(function(u,f){const m=Be(u),y=Be(m.mutationQueue);return m.persistence.runTransaction("Lookup mutation documents","readonly",(v=>y.er(v,f).next((w=>w?m.localDocuments.getDocuments(v,w):ue.resolve(null)))))})(r.localStore,e);o!==null?(t==="pending"?await $u(r.remoteStore):t==="acknowledged"||t==="rejected"?(D0(r,e,i||null),k0(r,e),(function(u,f){Be(Be(u).mutationQueue).ir(f)})(r.localStore,e)):ze(6720,"Unknown batchState",{Su:t}),await Ds(r,o)):Pe(qo,"Cannot apply mutation batch with id: "+e)}async function F4(n,e){const t=Be(n);if(Cp(t),V0(t),e===!0&&t.gu!==!0){const i=t.sharedClientState.getAllActiveQueryTargets(),r=await wS(t,i.toArray());t.gu=!0,await iv(t.remoteStore,!0);for(const o of r)Ap(t.remoteStore,o)}else if(e===!1&&t.gu!==!1){const i=[];let r=Promise.resolve();t.Iu.forEach(((o,l)=>{t.sharedClientState.isLocalQueryTarget(l)?i.push(l):r=r.then((()=>(Du(t,l),Nu(t.localStore,l,!0)))),Pu(t.remoteStore,l)})),await r,await wS(t,i),(function(l){const u=Be(l);u.Au.forEach(((f,m)=>{Pu(u.remoteStore,m)})),u.Ru.Jr(),u.Au=new Map,u.du=new $t(Le.comparator)})(t),t.gu=!1,await iv(t.remoteStore,!1)}}async function wS(n,e,t){const i=Be(n),r=[],o=[];for(const l of e){let u;const f=i.Iu.get(l);if(f&&f.length!==0){u=await Ru(i.localStore,yi(f[0]));for(const m of f){const y=i.Tu.get(m),v=await U4(i,y);v.snapshot&&o.push(v.snapshot)}}else{const m=await d2(i.localStore,l);u=await Ru(i.localStore,m),await P0(i,k2(m),l,!1,u.resumeToken)}r.push(u)}return i.Pu.H_(o),r}function k2(n){return m1(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function B4(n){return(function(t){return Be(Be(t).persistence).Ts()})(Be(n).localStore)}async function q4(n,e,t,i){const r=Be(n);if(r.gu)return void Pe(qo,"Ignoring unexpected query state notification.");const o=r.Iu.get(e);if(o&&o.length>0)switch(t){case"current":case"not-current":{const l=await f2(r.localStore,g1(o[0])),u=gf.createSynthesizedRemoteEventForCurrentChange(e,t==="current",un.EMPTY_BYTE_STRING);await Ds(r,l,u);break}case"rejected":await Nu(r.localStore,e,!0),Du(r,e,i);break;default:ze(64155,t)}}async function z4(n,e,t){const i=Cp(n);if(i.gu){for(const r of e){if(i.Iu.has(r)&&i.sharedClientState.isActiveQueryTarget(r)){Pe(qo,"Adding an already active target "+r);continue}const o=await d2(i.localStore,r),l=await Ru(i.localStore,o);await P0(i,k2(o),l.targetId,!1,l.resumeToken),Ap(i.remoteStore,l)}for(const r of t)i.Iu.has(r)&&await Nu(i.localStore,r,!1).then((()=>{Pu(i.remoteStore,r),Du(i,r)})).catch(Lo)}}function Cp(n){const e=Be(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=N2.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=V4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=R4.bind(null,e),e.Pu.H_=y4.bind(null,e.eventManager),e.Pu.yu=_4.bind(null,e.eventManager),e}function V0(n){const e=Be(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=N4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=P4.bind(null,e),e}function j4(n,e,t){const i=Be(n);(async function(o,l,u){try{const f=await l.getMetadata();if(await(function(E,S){const b=Be(E),A=gn(S.createTime);return b.persistence.runTransaction("hasNewerBundle","readonly",(C=>b.Ii.getBundleMetadata(C,S.id))).then((C=>!!C&&C.createTime.compareTo(A)>=0))})(o.localStore,f))return await l.close(),u._completeWith((function(E){return{taskState:"Success",documentsLoaded:E.totalDocuments,bytesLoaded:E.totalBytes,totalDocuments:E.totalDocuments,totalBytes:E.totalBytes}})(f)),Promise.resolve(new Set);u._updateProgress(S2(f));const m=new T4(f,l.serializer);let y=await l.bu();for(;y;){const w=await m.Ga(y);w&&u._updateProgress(w),y=await l.bu()}const v=await m.ja(o.localStore);return await Ds(o,v.Ha,void 0),await(function(E,S){const b=Be(E);return b.persistence.runTransaction("Save bundle","readwrite",(A=>b.Ii.saveBundleMetadata(A,S)))})(o.localStore,f),u._completeWith(v.progress),Promise.resolve(v.Ja)}catch(f){return $r(qo,`Loading bundle failed with ${f}`),u._failWith(f),Promise.resolve(new Set)}})(i,e,t).then((r=>{i.sharedClientState.notifyBundleLoaded(r)}))}class Zd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=_f(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return a2(this.persistence,new o2,e.initialUser,this.serializer)}Cu(e){return new g0(Ip.mi,this.serializer)}Du(e){return new y2}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Zd.provider={build:()=>new Zd};class G4 extends Zd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){$e(this.persistence.referenceDelegate instanceof $m,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new e2(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?ei.withCacheSize(this.cacheSizeBytes):ei.DEFAULT;return new g0((i=>$m.mi(i,t)),this.serializer)}}class D2 extends Zd{constructor(e,t,i){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=i,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await V0(this.xu.syncEngine),await $u(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return a2(this.persistence,new o2,e.initialUser,this.serializer)}Fu(e,t){const i=this.persistence.referenceDelegate.garbageCollector;return new e2(i,e.asyncQueue,t)}Mu(e,t){const i=new ZM(t,this.persistence);return new XM(e.asyncQueue,i)}Cu(e){const t=_0(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),i=this.cacheSizeBytes!==void 0?ei.withCacheSize(this.cacheSizeBytes):ei.DEFAULT;return new y0(this.synchronizeTabs,t,e.clientId,i,e.asyncQueue,_2(),Im(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new y2}}class H4 extends D2{constructor(e,t){super(e,t,!1),this.xu=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.xu.syncEngine;this.sharedClientState instanceof f_&&(this.sharedClientState.syncEngine={Co:O4.bind(null,t),vo:q4.bind(null,t),Fo:z4.bind(null,t),Ts:B4.bind(null,t),Do:L4.bind(null,t)},await this.sharedClientState.start()),await this.persistence.Ji((async i=>{await F4(this.xu.syncEngine,i),this.gcScheduler&&(i&&!this.gcScheduler.started?this.gcScheduler.start():i||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(i&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():i||this.indexBackfillerScheduler.stop())}))}Du(e){const t=_2();if(!f_.v(t))throw new Re(ye.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=_0(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new f_(t,e.asyncQueue,i,e.clientId,e.initialUser)}}class ef{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>TS(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=M4.bind(null,this.syncEngine),await iv(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new g4})()}createDatastore(e){const t=_f(e.databaseInfo.databaseId),i=(function(o){return new XV(o)})(e.databaseInfo);return(function(o,l,u,f){return new n4(o,l,u,f)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,r,o,l,u){return new r4(i,r,o,l,u)})(this.localStore,this.datastore,e.asyncQueue,(t=>TS(this.syncEngine,t,0)),(function(){return hS.v()?new hS:new KV})())}createSyncEngine(e,t){return(function(r,o,l,u,f,m,y){const v=new E4(r,o,l,u,f,m);return y&&(v.gu=!0),v})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(r){const o=Be(r);Pe(qa,"RemoteStore shutting down."),o.Ea.add(5),await Hu(o),o.Aa.shutdown(),o.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}ef.provider={build:()=>new ef};function xS(n,e=10240){let t=0;return{async read(){if(t<n.byteLength){const i={value:n.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rp{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):pn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $4{constructor(e,t){this.Bu=e,this.serializer=t,this.metadata=new Kn,this.buffer=new Uint8Array,this.Lu=(function(){return new TextDecoder("utf-8")})(),this.ku().then((i=>{i&&i.$a()?this.metadata.resolve(i.Qa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(i==null?void 0:i.Qa)}`))}),(i=>this.metadata.reject(i)))}close(){return this.Bu.cancel()}async getMetadata(){return this.metadata.promise}async bu(){return await this.getMetadata(),this.ku()}async ku(){const e=await this.qu();if(e===null)return null;const t=this.Lu.decode(e),i=Number(t);isNaN(i)&&this.Qu(`length string (${t}) is not valid number`);const r=await this.$u(i);return new v4(JSON.parse(r),e.length+i)}Uu(){return this.buffer.findIndex((e=>e===123))}async qu(){for(;this.Uu()<0&&!await this.Ku(););if(this.buffer.length===0)return null;const e=this.Uu();e<0&&this.Qu("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async $u(e){for(;this.buffer.length<e;)await this.Ku()&&this.Qu("Reached the end of bundle when more is expected.");const t=this.Lu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}Qu(e){throw this.Bu.cancel(),new Error(`Invalid bundle format: ${e}`)}async Ku(){const e=await this.Bu.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W4{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new Re(ye.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await(async function(r,o){const l=Be(r),u={documents:o.map((v=>Qd(l.serializer,v)))},f=await l.Ho("BatchGetDocuments",l.serializer.databaseId,pt.emptyPath(),u,o.length),m=new Map;f.forEach((v=>{const w=sV(l.serializer,v);m.set(w.key.toString(),w)}));const y=[];return o.forEach((v=>{const w=m.get(v.toString());$e(!!w,55234,{key:v}),y.push(w)})),y})(this.datastore,e);return t.forEach((i=>this.recordVersion(i))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastTransactionError=i}this.writtenDocs.add(e.toString())}delete(e){this.write(new Gu(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((t,i)=>{const r=Le.fromPath(i);this.mutations.push(new o0(r,this.precondition(r)))})),await(async function(i,r){const o=Be(i),l={writes:r.map((u=>Xd(o.serializer,u)))};await o.Go("Commit",o.serializer.databaseId,pt.emptyPath(),l)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ze(50498,{Gu:e.constructor.name});t=Je.min()}const i=this.readVersions.get(e.key.toString());if(i){if(!t.isEqual(i))throw new Re(ye.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Je.min())?tn.exists(!1):tn.updateTime(t):tn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Je.min()))throw new Re(ye.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return tn.updateTime(t)}return tn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K4{constructor(e,t,i,r,o){this.asyncQueue=e,this.datastore=t,this.options=i,this.updateFunction=r,this.deferred=o,this.zu=i.maxAttempts,this.M_=new x0(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_((async()=>{const e=new W4(this.datastore),t=this.Hu(e);t&&t.then((i=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(i)})).catch((r=>{this.Yu(r)}))))})).catch((i=>{this.Yu(i)}))}))}Hu(e){try{const t=this.updateFunction(e);return!cf(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ju(),Promise.resolve())))):this.deferred.reject(e)}Zu(e){if((e==null?void 0:e.name)==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!R1(t)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Do="FirestoreClient";class J4{constructor(e,t,i,r,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=r,this.user=On.UNAUTHENTICATED,this.clientId=$v.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,(async l=>{Pe(Do,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l})),this.appCheckCredentials.start(i,(l=>(Pe(Do,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Kn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=Ku(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function m_(n,e){n.asyncQueue.verifyOperationInProgress(),Pe(Do,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener((async r=>{i.isEqual(r)||(await l2(e.localStore,r),i=r)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function ES(n,e){n.asyncQueue.verifyOperationInProgress();const t=await U0(n);Pe(Do,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((i=>pS(e.remoteStore,i))),n.setAppCheckTokenChangeListener(((i,r)=>pS(e.remoteStore,r))),n._onlineComponents=e}async function U0(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Pe(Do,"Using user provided OfflineComponentProvider");try{await m_(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(r){return r.name==="FirebaseError"?r.code===ye.FAILED_PRECONDITION||r.code===ye.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11})(t))throw t;$r("Error using user provided cache. Falling back to memory cache: "+t),await m_(n,new Zd)}}else Pe(Do,"Using default OfflineComponentProvider"),await m_(n,new G4(void 0));return n._offlineComponents}async function Np(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Pe(Do,"Using user provided OnlineComponentProvider"),await ES(n,n._uninitializedComponentsProvider._online)):(Pe(Do,"Using default OnlineComponentProvider"),await ES(n,new ef))),n._onlineComponents}function M2(n){return U0(n).then((e=>e.persistence))}function L0(n){return U0(n).then((e=>e.localStore))}function V2(n){return Np(n).then((e=>e.remoteStore))}function O0(n){return Np(n).then((e=>e.syncEngine))}function Y4(n){return Np(n).then((e=>e.datastore))}async function Mu(n){const e=await Np(n),t=e.eventManager;return t.onListen=b4.bind(null,e.syncEngine),t.onUnlisten=I4.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=S4.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=A4.bind(null,e.syncEngine),t}function Q4(n){return n.asyncQueue.enqueue((async()=>{const e=await M2(n),t=await V2(n);return e.setNetworkEnabled(!0),(function(r){const o=Be(r);return o.Ea.delete(0),vf(o)})(t)}))}function X4(n){return n.asyncQueue.enqueue((async()=>{const e=await M2(n),t=await V2(n);return e.setNetworkEnabled(!1),(async function(r){const o=Be(r);o.Ea.add(0),await Hu(o),o.Ra.set("Offline")})(t)}))}function Z4(n,e){const t=new Kn;return n.asyncQueue.enqueueAndForget((async()=>(async function(r,o,l){try{const u=await(function(m,y){const v=Be(m);return v.persistence.runTransaction("read document","readonly",(w=>v.localDocuments.getDocument(w,y)))})(r,o);u.isFoundDocument()?l.resolve(u):u.isNoDocument()?l.resolve(null):l.reject(new Re(ye.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(u){const f=Ku(u,`Failed to get document '${o} from cache`);l.reject(f)}})(await L0(n),e,t))),t.promise}function U2(n,e,t={}){const i=new Kn;return n.asyncQueue.enqueueAndForget((async()=>(function(o,l,u,f,m){const y=new Rp({next:w=>{y.Nu(),l.enqueueAndForget((()=>C0(o,v)));const E=w.docs.has(u);!E&&w.fromCache?m.reject(new Re(ye.UNAVAILABLE,"Failed to get document because the client is offline.")):E&&w.fromCache&&f&&f.source==="server"?m.reject(new Re(ye.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(w)},error:w=>m.reject(w)}),v=new N0(zu(u.path),y,{includeMetadataChanges:!0,qa:!0});return A0(o,v)})(await Mu(n),n.asyncQueue,e,t,i))),i.promise}function e3(n,e){const t=new Kn;return n.asyncQueue.enqueueAndForget((async()=>(async function(r,o,l){try{const u=await Wm(r,o,!0),f=new C2(o,u.Qs),m=f.ru(u.documents),y=f.applyChanges(m,!1);l.resolve(y.snapshot)}catch(u){const f=Ku(u,`Failed to execute query '${o} against cache`);l.reject(f)}})(await L0(n),e,t))),t.promise}function L2(n,e,t={}){const i=new Kn;return n.asyncQueue.enqueueAndForget((async()=>(function(o,l,u,f,m){const y=new Rp({next:w=>{y.Nu(),l.enqueueAndForget((()=>C0(o,v))),w.fromCache&&f.source==="server"?m.reject(new Re(ye.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(w)},error:w=>m.reject(w)}),v=new N0(u,y,{includeMetadataChanges:!0,qa:!0});return A0(o,v)})(await Mu(n),n.asyncQueue,e,t,i))),i.promise}function t3(n,e){const t=new Rp(e);return n.asyncQueue.enqueueAndForget((async()=>(function(r,o){Be(r).Ca.add(o),o.next()})(await Mu(n),t))),()=>{t.Nu(),n.asyncQueue.enqueueAndForget((async()=>(function(r,o){Be(r).Ca.delete(o)})(await Mu(n),t)))}}function n3(n,e,t,i){const r=(function(l,u){let f;return f=typeof l=="string"?P1().encode(l):l,(function(y,v){return new $4(y,v)})((function(y,v){if(y instanceof Uint8Array)return xS(y,v);if(y instanceof ArrayBuffer)return xS(new Uint8Array(y),v);if(y instanceof ReadableStream)return y.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")})(f),u)})(t,_f(e));n.asyncQueue.enqueueAndForget((async()=>{j4(await O0(n),r,i)}))}function i3(n,e){return n.asyncQueue.enqueue((async()=>(function(i,r){const o=Be(i);return o.persistence.runTransaction("Get named query","readonly",(l=>o.Ii.getNamedQuery(l,r)))})(await L0(n),e)))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O2(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bS=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F2="firestore.googleapis.com",SS=!0;class IS{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Re(ye.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=F2,this.ssl=SS}else this.host=e.host,this.ssl=e.ssl??SS;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Y1;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<bV)throw new Re(ye.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}kC("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=O2(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Re(ye.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Re(ye.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Re(ye.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,r){return i.timeoutSeconds===r.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Tf{constructor(e,t,i,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new IS({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Re(ye.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Re(ye.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new IS(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new BM;switch(i.type){case"firstParty":return new GM(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Re(ye.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=bS.get(t);i&&(Pe("ComponentProvider","Removing Datastore"),bS.delete(t),i.terminate())})(this),Promise.resolve()}}function r3(n,e,t,i={}){var m;n=St(n,Tf);const r=Fu(e),o=n._getSettings(),l={...o,emulatorOptions:n._getEmulatorOptions()},u=`${e}:${t}`;r&&(nC(`https://${u}`),iC("Firestore",!0)),o.host!==F2&&o.host!==u&&$r("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const f={...o,host:u,ssl:r,emulatorOptions:i};if(!Eo(f,l)&&(n._setSettings(f),i.mockUserToken)){let y,v;if(typeof i.mockUserToken=="string")y=i.mockUserToken,v=On.MOCK_USER;else{y=iD(i.mockUserToken,(m=n._app)==null?void 0:m.options.projectId);const w=i.mockUserToken.sub||i.mockUserToken.user_id;if(!w)throw new Re(ye.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new On(w)}n._authCredentials=new qM(new NC(y,v))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _i=class B2{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new B2(this.firestore,e,this._query)}},Ht=class wd{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new wo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new wd(this.firestore,e,this._key)}toJSON(){return{type:wd._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(uf(t,wd._jsonSchema))return new wd(e,i||null,new Le(pt.fromString(t.referencePath)))}};Ht._jsonSchemaVersion="firestore/documentReference/1.0",Ht._jsonSchema={type:bn("string",Ht._jsonSchemaVersion),referencePath:bn("string")};let wo=class q2 extends _i{constructor(e,t,i){super(e,t,zu(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ht(this.firestore,null,new Le(e))}withConverter(e){return new q2(this.firestore,e,this._path)}};function z2(n,e,...t){if(n=Xe(n),Wv("collection","path",e),n instanceof Tf){const i=pt.fromString(e,...t);return mb(i),new wo(n,null,i)}{if(!(n instanceof Ht||n instanceof wo))throw new Re(ye.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(pt.fromString(e,...t));return mb(i),new wo(n.firestore,null,i)}}function s3(n,e){if(n=St(n,Tf),Wv("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Re(ye.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new _i(n,null,(function(i){return new Ns(pt.emptyPath(),i)})(e))}function Qm(n,e,...t){if(n=Xe(n),arguments.length===1&&(e=$v.newId()),Wv("doc","path",e),n instanceof Tf){const i=pt.fromString(e,...t);return hb(i),new Ht(n,null,new Le(i))}{if(!(n instanceof Ht||n instanceof wo))throw new Re(ye.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(pt.fromString(e,...t));return hb(i),new Ht(n.firestore,n instanceof wo?n.converter:null,new Le(i))}}function j2(n,e){return n=Xe(n),e=Xe(e),(n instanceof Ht||n instanceof wo)&&(e instanceof Ht||e instanceof wo)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function G2(n,e){return n=Xe(n),e=Xe(e),n instanceof _i&&e instanceof _i&&n.firestore===e.firestore&&hf(n._query,e._query)&&n.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AS="AsyncQueue";class CS{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new x0(this,"async_queue_retry"),this._c=()=>{const i=Im();i&&Pe(AS,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=Im();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Im();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Kn;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Oo(e))throw e;Pe(AS,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,pn("INTERNAL UNHANDLED ERROR: ",RS(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const r=I0.createAndSchedule(this,e,t,i,(o=>this.hc(o)));return this.tc.push(r),r}uc(){this.nc&&ze(47125,{Pc:RS(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function RS(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ov(n){return(function(t,i){if(typeof t!="object"||t===null)return!1;const r=t;for(const o of i)if(o in r&&typeof r[o]=="function")return!0;return!1})(n,["next","error","complete"])}class o3{constructor(){this._progressObserver={},this._taskCompletionResolver=new Kn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,i){this._progressObserver={next:e,error:t,complete:i}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a3=-1;let yn=class extends Tf{constructor(e,t,i,r){super(e,t,i,r),this.type="firestore",this._queue=new CS,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new CS(e),this._firestoreClient=void 0,await e}}};function ri(n){if(n._terminated)throw new Re(ye.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||H2(n),n._firestoreClient}function H2(n){var i,r,o;const e=n._freezeSettings(),t=(function(u,f,m,y){return new C5(u,f,m,y.host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,O2(y.experimentalLongPollingOptions),y.useFetchStreams,y.isUsingEmulator)})(n._databaseId,((i=n._app)==null?void 0:i.options.appId)||"",n._persistenceKey,e);n._componentsProvider||(r=e.localCache)!=null&&r._offlineComponentProvider&&((o=e.localCache)!=null&&o._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new J4(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(u){const f=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(f),_online:f}})(n._componentsProvider))}function l3(n,e){$r("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings();return $2(n,ef.provider,{build:i=>new D2(i,t.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function u3(n){$r("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=n._freezeSettings();$2(n,ef.provider,{build:t=>new H4(t,e.cacheSizeBytes)})}function $2(n,e,t){if((n=St(n,yn))._firestoreClient||n._terminated)throw new Re(ye.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new Re(ye.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},H2(n)}function c3(n){if(n._initialized&&!n._terminated)throw new Re(ye.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Kn;return n._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await(async function(i){if(!zr.v())return Promise.resolve();const r=i+s2;await zr.delete(r)})(_0(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}})),e.promise}function d3(n){return(function(t){const i=new Kn;return t.asyncQueue.enqueueAndForget((async()=>k4(await O0(t),i))),i.promise})(ri(n=St(n,yn)))}function f3(n){return Q4(ri(n=St(n,yn)))}function h3(n){return X4(ri(n=St(n,yn)))}function m3(n,e){const t=ri(n=St(n,yn)),i=new o3;return n3(t,n._databaseId,e,i),i}function p3(n,e){return i3(ri(n=St(n,yn)),e).then((t=>t?new _i(n,null,t.query):null))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ti(un.fromBase64String(e))}catch(t){throw new Re(ye.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ti(un.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ti._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(uf(e,ti._jsonSchema))return ti.fromBase64String(e.bytes)}}ti._jsonSchemaVersion="firestore/bytes/1.0",ti._jsonSchema={type:bn("string",ti._jsonSchemaVersion),bytes:bn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mo=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Re(ye.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new en(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ka=class{constructor(e){this._methodName=e}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Re(ye.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Re(ye.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return rt(this._lat,e._lat)||rt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:hr._jsonSchemaVersion}}static fromJSON(e){if(uf(e,hr._jsonSchema))return new hr(e.latitude,e.longitude)}}hr._jsonSchemaVersion="firestore/geoPoint/1.0",hr._jsonSchema={type:bn("string",hr._jsonSchemaVersion),latitude:bn("number"),longitude:bn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gr{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,r){if(i.length!==r.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==r[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Gr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(uf(e,Gr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Gr(e.vectorValues);throw new Re(ye.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Gr._jsonSchemaVersion="firestore/vectorValue/1.0",Gr._jsonSchema={type:bn("string",Gr._jsonSchemaVersion),vectorValues:bn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g3=/^__.*__$/;class y3{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new ks(e,this.data,this.fieldMask,t,this.fieldTransforms):new ju(e,this.data,t,this.fieldTransforms)}}class W2{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new ks(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function K2(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ze(40011,{Ac:n})}}class Pp{constructor(e,t,i,r,o,l){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=r,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Pp({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var r;const t=(r=this.path)==null?void 0:r.child(e),i=this.Vc({path:t,fc:!1});return i.gc(e),i}yc(e){var r;const t=(r=this.path)==null?void 0:r.child(e),i=this.Vc({path:t,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Xm(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(K2(this.Ac)&&g3.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class _3{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||_f(e)}Cc(e,t,i,r=!1){return new Pp({Ac:e,methodName:t,Dc:i,path:en.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ja(n){const e=n._freezeSettings(),t=_f(n._databaseId);return new _3(n._databaseId,!!e.ignoreUndefinedProperties,t)}function kp(n,e,t,i,r,o={}){const l=n.Cc(o.merge||o.mergeFields?2:0,e,t,r);H0("Data must be an object, but it was:",l,i);const u=Q2(i,l);let f,m;if(o.merge)f=new bi(l.fieldMask),m=l.fieldTransforms;else if(o.mergeFields){const y=[];for(const v of o.mergeFields){const w=av(e,v,t);if(!l.contains(w))throw new Re(ye.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);Z2(y,w)||y.push(w)}f=new bi(y),m=l.fieldTransforms.filter((v=>f.covers(v.field)))}else f=null,m=l.fieldTransforms;return new y3(new Wn(u),f,m)}class wf extends Ka{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof wf}}function J2(n,e,t){return new Pp({Ac:3,Dc:e.settings.Dc,methodName:n._methodName,fc:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class F0 extends Ka{_toFieldTransform(e){return new pf(e.path,new Iu)}isEqual(e){return e instanceof F0}}class B0 extends Ka{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=J2(this,e,!0),i=this.vc.map((o=>Ya(o,t))),r=new Ua(i);return new pf(e.path,r)}isEqual(e){return e instanceof B0&&Eo(this.vc,e.vc)}}class q0 extends Ka{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=J2(this,e,!0),i=this.vc.map((o=>Ya(o,t))),r=new La(i);return new pf(e.path,r)}isEqual(e){return e instanceof q0&&Eo(this.vc,e.vc)}}class z0 extends Ka{constructor(e,t){super(e),this.Fc=t}_toFieldTransform(e){const t=new Au(e.serializer,x1(e.serializer,this.Fc));return new pf(e.path,t)}isEqual(e){return e instanceof z0&&this.Fc===e.Fc}}function j0(n,e,t,i){const r=n.Cc(1,e,t);H0("Data must be an object, but it was:",r,i);const o=[],l=Wn.empty();Fo(i,((f,m)=>{const y=$0(e,f,t);m=Xe(m);const v=r.yc(y);if(m instanceof wf)o.push(y);else{const w=Ya(m,v);w!=null&&(o.push(y),l.set(y,w))}}));const u=new bi(o);return new W2(l,u,r.fieldTransforms)}function G0(n,e,t,i,r,o){const l=n.Cc(1,e,t),u=[av(e,i,t)],f=[r];if(o.length%2!=0)throw new Re(ye.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let w=0;w<o.length;w+=2)u.push(av(e,o[w])),f.push(o[w+1]);const m=[],y=Wn.empty();for(let w=u.length-1;w>=0;--w)if(!Z2(m,u[w])){const E=u[w];let S=f[w];S=Xe(S);const b=l.yc(E);if(S instanceof wf)m.push(E);else{const A=Ya(S,b);A!=null&&(m.push(E),y.set(E,A))}}const v=new bi(m);return new W2(y,v,l.fieldTransforms)}function Y2(n,e,t,i=!1){return Ya(t,n.Cc(i?4:3,e))}function Ya(n,e){if(X2(n=Xe(n)))return H0("Unsupported field value:",e,n),Q2(n,e);if(n instanceof Ka)return(function(i,r){if(!K2(r.Ac))throw r.Sc(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${i._methodName}() is not currently supported inside arrays`);const o=i._toFieldTransform(r);o&&r.fieldTransforms.push(o)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(i,r){const o=[];let l=0;for(const u of i){let f=Ya(u,r.wc(l));f==null&&(f={nullValue:"NULL_VALUE"}),o.push(f),l++}return{arrayValue:{values:o}}})(n,e)}return(function(i,r){if((i=Xe(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return x1(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const o=Nt.fromDate(i);return{timestampValue:Cu(r.serializer,o)}}if(i instanceof Nt){const o=new Nt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Cu(r.serializer,o)}}if(i instanceof hr)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof ti)return{bytesValue:M1(r.serializer,i._byteString)};if(i instanceof Ht){const o=r.databaseId,l=i.firestore._databaseId;if(!l.isEqual(o))throw r.Sc(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:d0(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof Gr)return(function(l,u){return{mapValue:{fields:{[e0]:{stringValue:t0},[Eu]:{arrayValue:{values:l.toArray().map((m=>{if(typeof m!="number")throw u.Sc("VectorValues must only contain numeric values.");return s0(u.serializer,m)}))}}}}}})(i,r);throw r.Sc(`Unsupported field value: ${mp(i)}`)})(n,e)}function Q2(n,e){const t={};return QC(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Fo(n,((i,r)=>{const o=Ya(r,e.mc(i));o!=null&&(t[i]=o)})),{mapValue:{fields:t}}}function X2(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Nt||n instanceof hr||n instanceof ti||n instanceof Ht||n instanceof Ka||n instanceof Gr)}function H0(n,e,t){if(!X2(t)||!DC(t)){const i=mp(t);throw i==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+i)}}function av(n,e,t){if((e=Xe(e))instanceof Mo)return e._internalPath;if(typeof e=="string")return $0(n,e);throw Xm("Field path arguments must be of type string or ",n,!1,void 0,t)}const v3=new RegExp("[~\\*/\\[\\]]");function $0(n,e,t){if(e.search(v3)>=0)throw Xm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Mo(...e.split("."))._internalPath}catch{throw Xm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Xm(n,e,t,i,r){const o=i&&!i.isEmpty(),l=r!==void 0;let u=`Function ${e}() called with invalid data`;t&&(u+=" (via `toFirestore()`)"),u+=". ";let f="";return(o||l)&&(f+=" (found",o&&(f+=` in field ${i}`),l&&(f+=` in document ${r}`),f+=")"),new Re(ye.INVALID_ARGUMENT,u+n+f)}function Z2(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tf{constructor(e,t,i,r,o){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Ht(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new T3(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Dp("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class T3 extends tf{data(){return super.data()}}function Dp(n,e){return typeof e=="string"?$0(n,e):e instanceof Mo?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eR(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Re(ye.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class W0{}class xf extends W0{}function fo(n,e,...t){let i=[];e instanceof W0&&i.push(e),i=i.concat(t),(function(o){const l=o.filter((f=>f instanceof K0)).length,u=o.filter((f=>f instanceof Mp)).length;if(l>1||l>0&&u>0)throw new Re(ye.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const r of i)n=r._apply(n);return n}class Mp extends xf{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new Mp(e,t,i)}_apply(e){const t=this._parse(e);return nR(e._query,t),new _i(e.firestore,e.converter,W_(e._query,t))}_parse(e){const t=Ja(e.firestore);return(function(o,l,u,f,m,y,v){let w;if(m.isKeyField()){if(y==="array-contains"||y==="array-contains-any")throw new Re(ye.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if(y==="in"||y==="not-in"){PS(v,y);const S=[];for(const b of v)S.push(NS(f,o,b));w={arrayValue:{values:S}}}else w=NS(f,o,v)}else y!=="in"&&y!=="not-in"&&y!=="array-contains-any"||PS(v,y),w=Y2(u,l,v,y==="in"||y==="not-in");return gt.create(m,y,w)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function w3(n,e,t){const i=e,r=Dp("where",n);return Mp._create(r,i,t)}class K0 extends W0{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new K0(e,t)}_parse(e){const t=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return t.length===1?t[0]:Mt.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(r,o){let l=r;const u=o.getFlattenedFilters();for(const f of u)nR(l,f),l=W_(l,f)})(e._query,t),new _i(e.firestore,e.converter,W_(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class J0 extends xf{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new J0(e,t)}_apply(e){const t=(function(r,o,l){if(r.startAt!==null)throw new Re(ye.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new Re(ye.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Yd(o,l)})(e._query,this._field,this._direction);return new _i(e.firestore,e.converter,(function(r,o){const l=r.explicitOrderBy.concat([o]);return new Ns(r.path,r.collectionGroup,l,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)})(e._query,t))}}function x3(n,e="asc"){const t=e,i=Dp("orderBy",n);return J0._create(i,t)}class Vp extends xf{constructor(e,t,i){super(),this.type=e,this._limit=t,this._limitType=i}static _create(e,t,i){return new Vp(e,t,i)}_apply(e){return new _i(e.firestore,e.converter,zm(e._query,this._limit,this._limitType))}}function E3(n){return MC("limit",n),Vp._create("limit",n,"F")}function b3(n){return MC("limitToLast",n),Vp._create("limitToLast",n,"L")}class Up extends xf{constructor(e,t,i){super(),this.type=e,this._docOrFields=t,this._inclusive=i}static _create(e,t,i){return new Up(e,t,i)}_apply(e){const t=tR(e,this.type,this._docOrFields,this._inclusive);return new _i(e.firestore,e.converter,(function(r,o){return new Ns(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)})(e._query,t))}}function S3(...n){return Up._create("startAt",n,!0)}function I3(...n){return Up._create("startAfter",n,!1)}class Lp extends xf{constructor(e,t,i){super(),this.type=e,this._docOrFields=t,this._inclusive=i}static _create(e,t,i){return new Lp(e,t,i)}_apply(e){const t=tR(e,this.type,this._docOrFields,this._inclusive);return new _i(e.firestore,e.converter,(function(r,o){return new Ns(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)})(e._query,t))}}function A3(...n){return Lp._create("endBefore",n,!1)}function C3(...n){return Lp._create("endAt",n,!0)}function tR(n,e,t,i){if(t[0]=Xe(t[0]),t[0]instanceof tf)return(function(o,l,u,f,m){if(!f)throw new Re(ye.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${u}().`);const y=[];for(const v of ou(o))if(v.field.isKeyField())y.push(Ma(l,f.key));else{const w=f.data.field(v.field);if(vp(w))throw new Re(ye.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+v.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(w===null){const E=v.field.canonicalString();throw new Re(ye.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${E}' (used as the orderBy) does not exist.`)}y.push(w)}return new Po(y,m)})(n._query,n.firestore._databaseId,e,t[0]._document,i);{const r=Ja(n.firestore);return(function(l,u,f,m,y,v){const w=l.explicitOrderBy;if(y.length>w.length)throw new Re(ye.INVALID_ARGUMENT,`Too many arguments provided to ${m}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const E=[];for(let S=0;S<y.length;S++){const b=y[S];if(w[S].field.isKeyField()){if(typeof b!="string")throw new Re(ye.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${m}(), but got a ${typeof b}`);if(!i0(l)&&b.indexOf("/")!==-1)throw new Re(ye.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${m}() must be a plain document ID, but '${b}' contains a slash.`);const A=l.path.child(pt.fromString(b));if(!Le.isDocumentKey(A))throw new Re(ye.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${m}() must result in a valid document path, but '${A}' is not because it contains an odd number of segments.`);const C=new Le(A);E.push(Ma(u,C))}else{const A=Y2(f,m,b);E.push(A)}}return new Po(E,v)})(n._query,n.firestore._databaseId,r,e,t,i)}}function NS(n,e,t){if(typeof(t=Xe(t))=="string"){if(t==="")throw new Re(ye.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!i0(e)&&t.indexOf("/")!==-1)throw new Re(ye.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(pt.fromString(t));if(!Le.isDocumentKey(i))throw new Re(ye.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Ma(n,new Le(i))}if(t instanceof Ht)return Ma(n,t._key);throw new Re(ye.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${mp(t)}.`)}function PS(n,e){if(!Array.isArray(n)||n.length===0)throw new Re(ye.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function nR(n,e){const t=(function(r,o){for(const l of r)for(const u of l.getFlattenedFilters())if(o.indexOf(u.op)>=0)return u.op;return null})(n.filters,(function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new Re(ye.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Re(ye.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class Y0{convertValue(e,t="none"){switch(Ro(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Xt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Cs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ze(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Fo(e,((r,o)=>{i[r]=this.convertValue(o,t)})),i}convertVectorValue(e){var i,r,o;const t=(o=(r=(i=e.fields)==null?void 0:i[Eu].arrayValue)==null?void 0:r.values)==null?void 0:o.map((l=>Xt(l.doubleValue)));return new Gr(t)}convertGeoPoint(e){return new hr(Xt(e.latitude),Xt(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Tp(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Wd(e));default:return null}}convertTimestamp(e){const t=As(e);return new Nt(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=pt.fromString(e);$e(H1(i),9688,{name:e});const r=new Co(i.get(1),i.get(3)),o=new Le(i.popFirst(5));return r.isEqual(t)||pn(`Document ${o} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Op(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}class R3 extends Y0{constructor(e){super(),this.firestore=e}convertBytes(e){return new ti(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ht(this.firestore,null,t)}}class Ca{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}let Xi=class iR extends tf{constructor(e,t,i,r,o,l){super(e,t,i,r,l),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new kd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(Dp("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Re(ye.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=iR._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};Xi._jsonSchemaVersion="firestore/documentSnapshot/1.0",Xi._jsonSchema={type:bn("string",Xi._jsonSchemaVersion),bundleSource:bn("string","DocumentSnapshot"),bundleName:bn("string"),bundle:bn("string")};let kd=class extends Xi{data(e={}){return super.data(e)}},mr=class rR{constructor(e,t,i,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Ca(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new kd(this._firestore,this._userDataWriter,i.key,i,new Ca(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Re(ye.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(r,o){if(r._snapshot.oldDocs.isEmpty()){let l=0;return r._snapshot.docChanges.map((u=>{const f=new kd(r._firestore,r._userDataWriter,u.doc.key,u.doc,new Ca(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);return u.doc,{type:"added",doc:f,oldIndex:-1,newIndex:l++}}))}{let l=r._snapshot.oldDocs;return r._snapshot.docChanges.filter((u=>o||u.type!==3)).map((u=>{const f=new kd(r._firestore,r._userDataWriter,u.doc.key,u.doc,new Ca(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);let m=-1,y=-1;return u.type!==0&&(m=l.indexOf(u.doc.key),l=l.delete(u.doc.key)),u.type!==1&&(l=l.add(u.doc),y=l.indexOf(u.doc.key)),{type:N3(u.type),doc:f,oldIndex:m,newIndex:y}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Re(ye.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=rR._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=$v.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],r=[];return this.docs.forEach((o=>{o._document!==null&&(t.push(o._document),i.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),r.push(o.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function N3(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ze(61501,{type:n})}}function sR(n,e){return n instanceof Xi&&e instanceof Xi?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(n._document===null?e._document===null:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof mr&&e instanceof mr&&n._firestore===e._firestore&&G2(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P3(n){n=St(n,Ht);const e=St(n.firestore,yn);return U2(ri(e),n._key).then((t=>Q0(e,n,t)))}mr._jsonSchemaVersion="firestore/querySnapshot/1.0",mr._jsonSchema={type:bn("string",mr._jsonSchemaVersion),bundleSource:bn("string","QuerySnapshot"),bundleName:bn("string"),bundle:bn("string")};class Qa extends Y0{constructor(e){super(),this.firestore=e}convertBytes(e){return new ti(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ht(this.firestore,null,t)}}function k3(n){n=St(n,Ht);const e=St(n.firestore,yn),t=ri(e),i=new Qa(e);return Z4(t,n._key).then((r=>new Xi(e,i,n._key,r,new Ca(r!==null&&r.hasLocalMutations,!0),n.converter)))}function D3(n){n=St(n,Ht);const e=St(n.firestore,yn);return U2(ri(e),n._key,{source:"server"}).then((t=>Q0(e,n,t)))}function M3(n){n=St(n,_i);const e=St(n.firestore,yn),t=ri(e),i=new Qa(e);return eR(n._query),L2(t,n._query).then((r=>new mr(e,i,n,r)))}function V3(n){n=St(n,_i);const e=St(n.firestore,yn),t=ri(e),i=new Qa(e);return e3(t,n._query).then((r=>new mr(e,i,n,r)))}function U3(n){n=St(n,_i);const e=St(n.firestore,yn),t=ri(e),i=new Qa(e);return L2(t,n._query,{source:"server"}).then((r=>new mr(e,i,n,r)))}function kS(n,e,t){n=St(n,Ht);const i=St(n.firestore,yn),r=Op(n.converter,e,t);return Ef(i,[kp(Ja(i),"setDoc",n._key,r,n.converter!==null,t).toMutation(n._key,tn.none())])}function DS(n,e,t,...i){n=St(n,Ht);const r=St(n.firestore,yn),o=Ja(r);let l;return l=typeof(e=Xe(e))=="string"||e instanceof Mo?G0(o,"updateDoc",n._key,e,t,i):j0(o,"updateDoc",n._key,e),Ef(r,[l.toMutation(n._key,tn.exists(!0))])}function L3(n){return Ef(St(n.firestore,yn),[new Gu(n._key,tn.none())])}function O3(n,e){const t=St(n.firestore,yn),i=Qm(n),r=Op(n.converter,e);return Ef(t,[kp(Ja(n.firestore),"addDoc",i._key,r,n.converter!==null,{}).toMutation(i._key,tn.exists(!1))]).then((()=>i))}function oR(n,...e){var f,m,y;n=Xe(n);let t={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||ov(e[i])||(t=e[i++]);const r={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(ov(e[i])){const v=e[i];e[i]=(f=v.next)==null?void 0:f.bind(v),e[i+1]=(m=v.error)==null?void 0:m.bind(v),e[i+2]=(y=v.complete)==null?void 0:y.bind(v)}let o,l,u;if(n instanceof Ht)l=St(n.firestore,yn),u=zu(n._key.path),o={next:v=>{e[i]&&e[i](Q0(l,n,v))},error:e[i+1],complete:e[i+2]};else{const v=St(n,_i);l=St(v.firestore,yn),u=v._query;const w=new Qa(l);o={next:E=>{e[i]&&e[i](new mr(l,w,v,E))},error:e[i+1],complete:e[i+2]},eR(n._query)}return(function(w,E,S,b){const A=new Rp(b),C=new N0(E,A,S);return w.asyncQueue.enqueueAndForget((async()=>A0(await Mu(w),C))),()=>{A.Nu(),w.asyncQueue.enqueueAndForget((async()=>C0(await Mu(w),C)))}})(ri(l),u,r,o)}function F3(n,e){return t3(ri(n=St(n,yn)),ov(e)?e:{next:e})}function Ef(n,e){return(function(i,r){const o=new Kn;return i.asyncQueue.enqueueAndForget((async()=>C4(await O0(i),r,o))),o.promise})(ri(n),e)}function Q0(n,e,t){const i=t.docs.get(e._key),r=new Qa(n);return new Xi(n,r,e._key,i,new Ca(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B3={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let q3=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Ja(e)}set(e,t,i){this._verifyNotCommitted();const r=go(e,this._firestore),o=Op(r.converter,t,i),l=kp(this._dataReader,"WriteBatch.set",r._key,o,r.converter!==null,i);return this._mutations.push(l.toMutation(r._key,tn.none())),this}update(e,t,i,...r){this._verifyNotCommitted();const o=go(e,this._firestore);let l;return l=typeof(t=Xe(t))=="string"||t instanceof Mo?G0(this._dataReader,"WriteBatch.update",o._key,t,i,r):j0(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(l.toMutation(o._key,tn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=go(e,this._firestore);return this._mutations=this._mutations.concat(new Gu(t._key,tn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Re(ye.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function go(n,e){if((n=Xe(n)).firestore!==e)throw new Re(ye.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z3{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Ja(e)}get(e){const t=go(e,this._firestore),i=new R3(this._firestore);return this._transaction.lookup([t._key]).then((r=>{if(!r||r.length!==1)return ze(24041);const o=r[0];if(o.isFoundDocument())return new tf(this._firestore,i,o.key,o,t.converter);if(o.isNoDocument())return new tf(this._firestore,i,t._key,null,t.converter);throw ze(18433,{doc:o})}))}set(e,t,i){const r=go(e,this._firestore),o=Op(r.converter,t,i),l=kp(this._dataReader,"Transaction.set",r._key,o,r.converter!==null,i);return this._transaction.set(r._key,l),this}update(e,t,i,...r){const o=go(e,this._firestore);let l;return l=typeof(t=Xe(t))=="string"||t instanceof Mo?G0(this._dataReader,"Transaction.update",o._key,t,i,r):j0(this._dataReader,"Transaction.update",o._key,t),this._transaction.update(o._key,l),this}delete(e){const t=go(e,this._firestore);return this._transaction.delete(t._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let j3=class extends z3{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=go(e,this._firestore),i=new Qa(this._firestore);return super.get(e).then((r=>new Xi(this._firestore,i,t._key,r._document,new Ca(!1,!1),t.converter)))}};function G3(n,e,t){n=St(n,yn);const i={...B3,...t};return(function(o){if(o.maxAttempts<1)throw new Re(ye.INVALID_ARGUMENT,"Max attempts must be at least 1")})(i),(function(o,l,u){const f=new Kn;return o.asyncQueue.enqueueAndForget((async()=>{const m=await Y4(o);new K4(o.asyncQueue,m,u,l,f).ju()})),f.promise})(ri(n),(r=>e(new j3(n,r))),i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H3(){return new wf("deleteField")}function $3(){return new F0("serverTimestamp")}function W3(...n){return new B0("arrayUnion",n)}function K3(...n){return new q0("arrayRemove",n)}function J3(n){return new z0("increment",n)}(function(e,t=!0){(function(r){qu=r})(Vo),Io(new Hr("firestore",((i,{instanceIdentifier:r,options:o})=>{const l=i.getProvider("app").getImmediate(),u=new yn(new zM(i.getProvider("auth-internal")),new HM(l,i.getProvider("app-check-internal")),(function(m,y){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new Re(ye.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Co(m.options.projectId,y)})(l,r),l);return o={useFetchStreams:t,...o},u._setSettings(o),u}),"PUBLIC").setMultipleInstances(!0)),fr(ub,cb,e),fr(ub,cb,"esm2020")})();const Y3="@firebase/firestore-compat",Q3="0.4.1";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X0(n,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new Re("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MS(){if(typeof Uint8Array>"u")throw new Re("unimplemented","Uint8Arrays are not available in this environment.")}function VS(){if(!I5())throw new Re("unimplemented","Blobs are unavailable in Firestore in this environment.")}let aR=class lv{constructor(e){this._delegate=e}static fromBase64String(e){return VS(),new lv(ti.fromBase64String(e))}static fromUint8Array(e){return MS(),new lv(ti.fromUint8Array(e))}toBase64(){return VS(),this._delegate.toBase64()}toUint8Array(){return MS(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uv(n){return X3(n,["next","error","complete"])}function X3(n,e){if(typeof n!="object"||n===null)return!1;const t=n;for(const i of e)if(i in t&&typeof t[i]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z3{enableIndexedDbPersistence(e,t){return l3(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return u3(e._delegate)}clearIndexedDbPersistence(e){return c3(e._delegate)}}class lR{constructor(e,t,i){this._delegate=t,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},e instanceof Co||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&$r("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e={...t,...e},delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,i={}){r3(this._delegate,e,t,i)}enableNetwork(){return f3(this._delegate)}disableNetwork(){return h3(this._delegate)}enablePersistence(e){let t=!1,i=!1;return e&&(t=!!e.synchronizeTabs,i=!!e.experimentalForceOwningTab,kC("synchronizeTabs",t,"experimentalForceOwningTab",i)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return d3(this._delegate)}onSnapshotsInSync(e){return F3(this._delegate,e)}get app(){if(!this._appCompat)throw new Re("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Vu(this,z2(this._delegate,e))}catch(t){throw pi(t,"collection()","Firestore.collection()")}}doc(e){try{return new Qi(this,Qm(this._delegate,e))}catch(t){throw pi(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new mi(this,s3(this._delegate,e))}catch(t){throw pi(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return G3(this._delegate,t=>e(new uR(this,t)))}batch(){return ri(this._delegate),new cR(new q3(this._delegate,e=>Ef(this._delegate,e)))}loadBundle(e){return m3(this._delegate,e)}namedQuery(e){return p3(this._delegate,e).then(t=>t?new mi(this,t):null)}}class Fp extends Y0{constructor(e){super(),this.firestore=e}convertBytes(e){return new aR(new ti(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Qi.forKey(t,this.firestore,null)}}function e6(n){OM(n)}class uR{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Fp(e)}get(e){const t=Ra(e);return this._delegate.get(t).then(i=>new nf(this._firestore,new Xi(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,t.converter)))}set(e,t,i){const r=Ra(e);return i?(X0("Transaction.set",i),this._delegate.set(r,t,i)):this._delegate.set(r,t),this}update(e,t,i,...r){const o=Ra(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,i,...r),this}delete(e){const t=Ra(e);return this._delegate.delete(t),this}}class cR{constructor(e){this._delegate=e}set(e,t,i){const r=Ra(e);return i?(X0("WriteBatch.set",i),this._delegate.set(r,t,i)):this._delegate.set(r,t),this}update(e,t,i,...r){const o=Ra(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,i,...r),this}delete(e){const t=Ra(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class za{constructor(e,t,i){this._firestore=e,this._userDataWriter=t,this._delegate=i}fromFirestore(e,t){const i=new kd(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new rf(this._firestore,i),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const i=za.INSTANCES;let r=i.get(e);r||(r=new WeakMap,i.set(e,r));let o=r.get(t);return o||(o=new za(e,new Fp(e),t),r.set(t,o)),o}}za.INSTANCES=new WeakMap;class Qi{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Fp(e)}static forPath(e,t,i){if(e.length%2!==0)throw new Re("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Qi(t,new Ht(t._delegate,i,new Le(e)))}static forKey(e,t,i){return new Qi(t,new Ht(t._delegate,i,e))}get id(){return this._delegate.id}get parent(){return new Vu(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Vu(this.firestore,z2(this._delegate,e))}catch(t){throw pi(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=Xe(e),e instanceof Ht?j2(this._delegate,e):!1}set(e,t){t=X0("DocumentReference.set",t);try{return t?kS(this._delegate,e,t):kS(this._delegate,e)}catch(i){throw pi(i,"setDoc()","DocumentReference.set()")}}update(e,t,...i){try{return arguments.length===1?DS(this._delegate,e):DS(this._delegate,e,t,...i)}catch(r){throw pi(r,"updateDoc()","DocumentReference.update()")}}delete(){return L3(this._delegate)}onSnapshot(...e){const t=dR(e),i=fR(e,r=>new nf(this.firestore,new Xi(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)));return oR(this._delegate,t,i)}get(e){let t;return(e==null?void 0:e.source)==="cache"?t=k3(this._delegate):(e==null?void 0:e.source)==="server"?t=D3(this._delegate):t=P3(this._delegate),t.then(i=>new nf(this.firestore,new Xi(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(e){return new Qi(this.firestore,e?this._delegate.withConverter(za.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function pi(n,e,t){return n.message=n.message.replace(e,t),n}function dR(n){for(const e of n)if(typeof e=="object"&&!uv(e))return e;return{}}function fR(n,e){var i,r;let t;return uv(n[0])?t=n[0]:uv(n[1])?t=n[1]:typeof n[0]=="function"?t={next:n[0],error:n[1],complete:n[2]}:t={next:n[1],error:n[2],complete:n[3]},{next:o=>{t.next&&t.next(e(o))},error:(i=t.error)==null?void 0:i.bind(t),complete:(r=t.complete)==null?void 0:r.bind(t)}}class nf{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Qi(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return sR(this._delegate,e._delegate)}}class rf extends nf{data(e){const t=this._delegate.data(e);return this._delegate._converter||FM(t!==void 0,"Document in a QueryDocumentSnapshot should exist"),t}}class mi{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Fp(e)}where(e,t,i){try{return new mi(this.firestore,fo(this._delegate,w3(e,t,i)))}catch(r){throw pi(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new mi(this.firestore,fo(this._delegate,x3(e,t)))}catch(i){throw pi(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new mi(this.firestore,fo(this._delegate,E3(e)))}catch(t){throw pi(t,"limit()","Query.limit()")}}limitToLast(e){try{return new mi(this.firestore,fo(this._delegate,b3(e)))}catch(t){throw pi(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new mi(this.firestore,fo(this._delegate,S3(...e)))}catch(t){throw pi(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new mi(this.firestore,fo(this._delegate,I3(...e)))}catch(t){throw pi(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new mi(this.firestore,fo(this._delegate,A3(...e)))}catch(t){throw pi(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new mi(this.firestore,fo(this._delegate,C3(...e)))}catch(t){throw pi(t,"endAt()","Query.endAt()")}}isEqual(e){return G2(this._delegate,e._delegate)}get(e){let t;return(e==null?void 0:e.source)==="cache"?t=V3(this._delegate):(e==null?void 0:e.source)==="server"?t=U3(this._delegate):t=M3(this._delegate),t.then(i=>new cv(this.firestore,new mr(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...e){const t=dR(e),i=fR(e,r=>new cv(this.firestore,new mr(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)));return oR(this._delegate,t,i)}withConverter(e){return new mi(this.firestore,e?this._delegate.withConverter(za.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class t6{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new rf(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class cv{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new mi(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new rf(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new t6(this._firestore,t))}forEach(e,t){this._delegate.forEach(i=>{e.call(t,new rf(this._firestore,i))})}isEqual(e){return sR(this._delegate,e._delegate)}}class Vu extends mi{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Qi(this.firestore,e):null}doc(e){try{return e===void 0?new Qi(this.firestore,Qm(this._delegate)):new Qi(this.firestore,Qm(this._delegate,e))}catch(t){throw pi(t,"doc()","CollectionReference.doc()")}}add(e){return O3(this._delegate,e).then(t=>new Qi(this.firestore,t))}isEqual(e){return j2(this._delegate,e._delegate)}withConverter(e){return new Vu(this.firestore,e?this._delegate.withConverter(za.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Ra(n){return St(n,Ht)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z0{constructor(...e){this._delegate=new Mo(...e)}static documentId(){return new Z0(en.keyField().canonicalString())}isEqual(e){return e=Xe(e),e instanceof Mo?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia{static serverTimestamp(){const e=$3();return e._methodName="FieldValue.serverTimestamp",new Ia(e)}static delete(){const e=H3();return e._methodName="FieldValue.delete",new Ia(e)}static arrayUnion(...e){const t=W3(...e);return t._methodName="FieldValue.arrayUnion",new Ia(t)}static arrayRemove(...e){const t=K3(...e);return t._methodName="FieldValue.arrayRemove",new Ia(t)}static increment(e){const t=J3(e);return t._methodName="FieldValue.increment",new Ia(t)}constructor(e){this._delegate=e}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n6={Firestore:lR,GeoPoint:hr,Timestamp:Nt,Blob:aR,Transaction:uR,WriteBatch:cR,DocumentReference:Qi,DocumentSnapshot:nf,Query:mi,QueryDocumentSnapshot:rf,QuerySnapshot:cv,CollectionReference:Vu,FieldPath:Z0,FieldValue:Ia,setLogLevel:e6,CACHE_SIZE_UNLIMITED:a3};function i6(n,e){n.INTERNAL.registerComponent(new Hr("firestore-compat",t=>{const i=t.getProvider("app-compat").getImmediate(),r=t.getProvider("firestore").getImmediate();return e(i,r)},"PUBLIC").setServiceProps({...n6}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r6(n){i6(n,(e,t)=>new lR(e,t,new Z3)),n.registerVersion(Y3,Q3)}r6(Uo);const dd={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",TWITTER:"twitter.com"},Yl={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s6(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements.","invalid-hosting-link-domain":"The provided Hosting link domain is not configured in Firebase Hosting or is not owned by the current project. This cannot be a default Hosting domain (`web.app` or `firebaseapp.com`)."}}function hR(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const o6=s6,a6=hR,mR=new Wa("auth","Firebase",hR());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zm=new hp("@firebase/auth");function l6(n,...e){Zm.logLevel<=mt.WARN&&Zm.warn(`Auth (${Vo}): ${n}`,...e)}function Am(n,...e){Zm.logLevel<=mt.ERROR&&Zm.error(`Auth (${Vo}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jn(n,...e){throw tT(n,...e)}function Rn(n,...e){return tT(n,...e)}function eT(n,e,t){const i={...a6(),[e]:t};return new Wa("auth","Firebase",i).create(e,{appName:n.name})}function Fn(n){return eT(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ju(n,e,t){const i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&Jn(n,"argument-error"),eT(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function tT(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return mR.create(n,...e)}function De(n,e,...t){if(!n)throw tT(e,...t)}function qr(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Am(e),new Error(e)}function pr(n,e){n||qr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sf(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function nT(){return US()==="http:"||US()==="https:"}function US(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u6(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(nT()||sC()||"connection"in navigator)?navigator.onLine:!0}function c6(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bf{constructor(e,t){this.shortDelay=e,this.longDelay=t,pr(t>e,"Short delay should be less than long delay!"),this.isMobile=oD()||Fv()}get(){return u6()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iT(n,e){pr(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pR{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;qr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;qr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;qr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d6={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f6=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],h6=new bf(3e4,6e4);function cn(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function dn(n,e,t,i,r={}){return gR(n,r,async()=>{let o={},l={};i&&(e==="GET"?l=i:o={body:JSON.stringify(i)});const u=Bu({key:n.config.apiKey,...l}).slice(1),f=await n._getAdditionalHeaders();f["Content-Type"]="application/json",n.languageCode&&(f["X-Firebase-Locale"]=n.languageCode);const m={method:e,headers:f,...o};return lD()||(m.referrerPolicy="no-referrer"),n.emulatorConfig&&Fu(n.emulatorConfig.host)&&(m.credentials="include"),pR.fetch()(await yR(n,n.config.apiHost,t,u),m)})}async function gR(n,e,t){n._canInitEmulator=!1;const i={...d6,...e};try{const r=new p6(n),o=await Promise.race([t(),r.promise]);r.clearNetworkTimeout();const l=await o.json();if("needConfirmation"in l)throw xd(n,"account-exists-with-different-credential",l);if(o.ok&&!("errorMessage"in l))return l;{const u=o.ok?l.errorMessage:l.error.message,[f,m]=u.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw xd(n,"credential-already-in-use",l);if(f==="EMAIL_EXISTS")throw xd(n,"email-already-in-use",l);if(f==="USER_DISABLED")throw xd(n,"user-disabled",l);const y=i[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw eT(n,y,m);Jn(n,y)}}catch(r){if(r instanceof gi)throw r;Jn(n,"network-request-failed",{message:String(r)})}}async function Ms(n,e,t,i,r={}){const o=await dn(n,e,t,i,r);return"mfaPendingCredential"in o&&Jn(n,"multi-factor-auth-required",{_serverResponse:o}),o}async function yR(n,e,t,i){const r=`${e}${t}?${i}`,o=n,l=o.config.emulator?iT(n.config,r):`${n.config.apiScheme}://${r}`;return f6.includes(t)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(l).toString():l}function m6(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class p6{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Rn(this.auth,"network-request-failed")),h6.get())})}}function xd(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const r=Rn(n,e,i);return r.customData._tokenResponse=t,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LS(n){return n!==void 0&&n.getResponse!==void 0}function OS(n){return n!==void 0&&n.enterprise!==void 0}class _R{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return m6(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function g6(n){return(await dn(n,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function vR(n,e){return dn(n,"GET","/v2/recaptchaConfig",cn(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function y6(n,e){return dn(n,"POST","/v1/accounts:delete",e)}async function _6(n,e){return dn(n,"POST","/v1/accounts:update",e)}async function ep(n,e){return dn(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dd(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function v6(n,e=!1){const t=Xe(n),i=await t.getIdToken(e),r=Bp(i);De(r&&r.exp&&r.auth_time&&r.iat,t.auth,"internal-error");const o=typeof r.firebase=="object"?r.firebase:void 0,l=o==null?void 0:o.sign_in_provider;return{claims:r,token:i,authTime:Dd(p_(r.auth_time)),issuedAtTime:Dd(p_(r.iat)),expirationTime:Dd(p_(r.exp)),signInProvider:l||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function p_(n){return Number(n)*1e3}function Bp(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return Am("JWT malformed, contained fewer than 3 sections"),null;try{const r=Vv(t);return r?JSON.parse(r):(Am("Failed to decode base64 JWT payload"),null)}catch(r){return Am("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function FS(n){const e=Bp(n);return De(e,"internal-error"),De(typeof e.exp<"u","internal-error"),De(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rs(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof gi&&T6(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function T6({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w6{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dv{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Dd(this.lastLoginAt),this.creationTime=Dd(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function of(n){var v;const e=n.auth,t=await n.getIdToken(),i=await Rs(n,ep(e,{idToken:t}));De(i==null?void 0:i.users.length,e,"internal-error");const r=i.users[0];n._notifyReloadListener(r);const o=(v=r.providerUserInfo)!=null&&v.length?TR(r.providerUserInfo):[],l=E6(n.providerData,o),u=n.isAnonymous,f=!(n.email&&r.passwordHash)&&!(l!=null&&l.length),m=u?f:!1,y={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:l,metadata:new dv(r.createdAt,r.lastLoginAt),isAnonymous:m};Object.assign(n,y)}async function x6(n){const e=Xe(n);await of(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function E6(n,e){return[...n.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function TR(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function b6(n,e){const t=await gR(n,{},async()=>{const i=Bu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:o}=n.config,l=await yR(n,r,"/v1/token",`key=${o}`),u=await n._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";const f={method:"POST",headers:u,body:i};return n.emulatorConfig&&Fu(n.emulatorConfig.host)&&(f.credentials="include"),pR.fetch()(l,f)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function S6(n,e){return dn(n,"POST","/v2/accounts:revokeToken",cn(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lu{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){De(e.idToken,"internal-error"),De(typeof e.idToken<"u","internal-error"),De(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):FS(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){De(e.length!==0,"internal-error");const t=FS(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(De(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:r,expiresIn:o}=await b6(e,t);this.updateTokensAndExpiration(i,r,Number(o))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:r,expirationTime:o}=t,l=new lu;return i&&(De(typeof i=="string","internal-error",{appName:e}),l.refreshToken=i),r&&(De(typeof r=="string","internal-error",{appName:e}),l.accessToken=r),o&&(De(typeof o=="number","internal-error",{appName:e}),l.expirationTime=o),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new lu,this.toJSON())}_performRefresh(){return qr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ho(n,e){De(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class dr{constructor({uid:e,auth:t,stsTokenManager:i,...r}){this.providerId="firebase",this.proactiveRefresh=new w6(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new dv(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const t=await Rs(this,this.stsTokenManager.getToken(this.auth,e));return De(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return v6(this,e)}reload(){return x6(this)}_assign(e){this!==e&&(De(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new dr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){De(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await of(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Zt(this.auth.app))return Promise.reject(Fn(this.auth));const e=await this.getIdToken();return await Rs(this,y6(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,r=t.email??void 0,o=t.phoneNumber??void 0,l=t.photoURL??void 0,u=t.tenantId??void 0,f=t._redirectEventId??void 0,m=t.createdAt??void 0,y=t.lastLoginAt??void 0,{uid:v,emailVerified:w,isAnonymous:E,providerData:S,stsTokenManager:b}=t;De(v&&b,e,"internal-error");const A=lu.fromJSON(this.name,b);De(typeof v=="string",e,"internal-error"),ho(i,e.name),ho(r,e.name),De(typeof w=="boolean",e,"internal-error"),De(typeof E=="boolean",e,"internal-error"),ho(o,e.name),ho(l,e.name),ho(u,e.name),ho(f,e.name),ho(m,e.name),ho(y,e.name);const C=new dr({uid:v,auth:e,email:r,emailVerified:w,displayName:i,isAnonymous:E,photoURL:l,phoneNumber:o,tenantId:u,stsTokenManager:A,createdAt:m,lastLoginAt:y});return S&&Array.isArray(S)&&(C.providerData=S.map(R=>({...R}))),f&&(C._redirectEventId=f),C}static async _fromIdTokenResponse(e,t,i=!1){const r=new lu;r.updateFromServerResponse(t);const o=new dr({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await of(o),o}static async _fromGetAccountInfoResponse(e,t,i){const r=t.users[0];De(r.localId!==void 0,"internal-error");const o=r.providerUserInfo!==void 0?TR(r.providerUserInfo):[],l=!(r.email&&r.passwordHash)&&!(o!=null&&o.length),u=new lu;u.updateFromIdToken(i);const f=new dr({uid:r.localId,auth:e,stsTokenManager:u,isAnonymous:l}),m={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new dv(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(o!=null&&o.length)};return Object.assign(f,m),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BS=new Map;function Li(n){pr(n instanceof Function,"Expected a class definition");let e=BS.get(n);return e?(pr(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,BS.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wR{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}wR.type="NONE";const Uu=wR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ka(n,e,t){return`firebase:${n}:${e}:${t}`}class uu{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:r,name:o}=this.auth;this.fullUserKey=ka(this.userKey,r.apiKey,o),this.fullPersistenceKey=ka("persistence",r.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await ep(this.auth,{idToken:e}).catch(()=>{});return t?dr._fromGetAccountInfoResponse(this.auth,t,e):null}return dr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new uu(Li(Uu),e,i);const r=(await Promise.all(t.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let o=r[0]||Li(Uu);const l=ka(i,e.config.apiKey,e.name);let u=null;for(const m of t)try{const y=await m._get(l);if(y){let v;if(typeof y=="string"){const w=await ep(e,{idToken:y}).catch(()=>{});if(!w)break;v=await dr._fromGetAccountInfoResponse(e,w,y)}else v=dr._fromJSON(e,y);m!==o&&(u=v),o=m;break}}catch{}const f=r.filter(m=>m._shouldAllowMigration);return!o._shouldAllowMigration||!f.length?new uu(o,e,i):(o=f[0],u&&await o._set(l,u.toJSON()),await Promise.all(t.map(async m=>{if(m!==o)try{await m._remove(l)}catch{}})),new uu(o,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qS(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(SR(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(xR(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(IR(e))return"Blackberry";if(AR(e))return"Webos";if(ER(e))return"Safari";if((e.includes("chrome/")||bR(e))&&!e.includes("edge/"))return"Chrome";if(Sf(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function xR(n=rn()){return/firefox\//i.test(n)}function ER(n=rn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function bR(n=rn()){return/crios\//i.test(n)}function SR(n=rn()){return/iemobile/i.test(n)}function Sf(n=rn()){return/android/i.test(n)}function IR(n=rn()){return/blackberry/i.test(n)}function AR(n=rn()){return/webos/i.test(n)}function If(n=rn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function I6(n=rn()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(n)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(n)}function A6(n=rn()){var e;return If(n)&&!!((e=window.navigator)!=null&&e.standalone)}function C6(){return oC()&&document.documentMode===10}function CR(n=rn()){return If(n)||Sf(n)||AR(n)||IR(n)||/windows phone/i.test(n)||SR(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RR(n,e=[]){let t;switch(n){case"Browser":t=qS(rn());break;case"Worker":t=`${qS(rn())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Vo}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R6{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=o=>new Promise((l,u)=>{try{const f=e(o);l(f)}catch(f){u(f)}});i.onAbort=t,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const r of t)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function N6(n,e={}){return dn(n,"GET","/v2/passwordPolicy",cn(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P6=6;class k6{constructor(e){var i;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??P6,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,r,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D6{constructor(e,t,i,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new zS(this),this.idTokenSubscription=new zS(this),this.beforeStateQueue=new R6(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=mR,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Li(t)),this._initializationPromise=this.queue(async()=>{var i,r,o;if(!this._deleted&&(this.persistenceManager=await uu.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((r=this._popupRedirectResolver)!=null&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)==null?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await ep(this,{idToken:e}),i=await dr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var o;if(Zt(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(u,u))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(o=this.redirectUser)==null?void 0:o._redirectEventId,u=i==null?void 0:i._redirectEventId,f=await this.tryRedirectSignIn(e);(!l||l===u)&&(f!=null&&f.user)&&(i=f.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(l){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return De(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await of(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=c6()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Zt(this.app))return Promise.reject(Fn(this));const t=e?Xe(e):null;return t&&De(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&De(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Zt(this.app)?Promise.reject(Fn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Zt(this.app)?Promise.reject(Fn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Li(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await N6(this),t=new k6(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Wa("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await S6(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Li(e)||this._popupRedirectResolver;De(t,this,"argument-error"),this.redirectPersistenceManager=await uu.create(this,[Li(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,r){if(this._deleted)return()=>{};const o=typeof t=="function"?t:t.next.bind(t);let l=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(De(u,this,"internal-error"),u.then(()=>{l||o(this.currentUser)}),typeof t=="function"){const f=e.addObserver(t,i,r);return()=>{l=!0,f()}}else{const f=e.addObserver(t);return()=>{l=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return De(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=RR(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var r;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((r=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var t;if(Zt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&l6(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function sn(n){return Xe(n)}class zS{constructor(e){this.auth=e,this.observer=null,this.addObserver=uC(t=>this.observer=t)}get next(){return De(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Af={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function M6(n){Af=n}function rT(n){return Af.loadJS(n)}function V6(){return Af.recaptchaV2Script}function U6(){return Af.recaptchaEnterpriseScript}function L6(){return Af.gapiScript}function NR(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O6=500,F6=6e4,lm=1e12;class B6{constructor(e){this.auth=e,this.counter=lm,this._widgets=new Map}render(e,t){const i=this.counter;return this._widgets.set(i,new j6(e,this.auth.name,t||{})),this.counter++,i}reset(e){var i;const t=e||lm;(i=this._widgets.get(t))==null||i.delete(),this._widgets.delete(t)}getResponse(e){var i;const t=e||lm;return((i=this._widgets.get(t))==null?void 0:i.getResponse())||""}async execute(e){var i;const t=e||lm;return(i=this._widgets.get(t))==null||i.execute(),""}}class q6{constructor(){this.enterprise=new z6}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class z6{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class j6{constructor(e,t,i){this.params=i,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const r=typeof e=="string"?document.getElementById(e):e;De(r,"argument-error",{appName:t}),this.container=r,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=G6(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch{}this.isVisible&&this.execute()},F6)},O6))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function G6(n){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let i=0;i<n;i++)e.push(t.charAt(Math.floor(Math.random()*t.length)));return e.join("")}const H6="recaptcha-enterprise",Md="NO_RECAPTCHA";class PR{constructor(e){this.type=H6,this.auth=sn(e)}async verify(e="verify",t=!1){async function i(o){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(l,u)=>{vR(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(f=>{if(f.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const m=new _R(f);return o.tenantId==null?o._agentRecaptchaConfig=m:o._tenantRecaptchaConfigs[o.tenantId]=m,l(m.siteKey)}}).catch(f=>{u(f)})})}function r(o,l,u){const f=window.grecaptcha;OS(f)?f.enterprise.ready(()=>{f.enterprise.execute(o,{action:e}).then(m=>{l(m)}).catch(()=>{l(Md)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new q6().execute("siteKey",{action:"verify"}):new Promise((o,l)=>{i(this.auth).then(u=>{if(!t&&OS(window.grecaptcha))r(u,o,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let f=U6();f.length!==0&&(f+=u),rT(f).then(()=>{r(u,o,l)}).catch(m=>{l(m)})}}).catch(u=>{l(u)})})}}async function fd(n,e,t,i=!1,r=!1){const o=new PR(n);let l;if(r)l=Md;else try{l=await o.verify(t)}catch{l=await o.verify(t,!0)}const u={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in u){const f=u.phoneEnrollmentInfo.phoneNumber,m=u.phoneEnrollmentInfo.recaptchaToken;Object.assign(u,{phoneEnrollmentInfo:{phoneNumber:f,recaptchaToken:m,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in u){const f=u.phoneSignInInfo.recaptchaToken;Object.assign(u,{phoneSignInInfo:{recaptchaToken:f,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return u}return i?Object.assign(u,{captchaResp:l}):Object.assign(u,{captchaResponse:l}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),u}async function xo(n,e,t,i,r){var o,l;if(r==="EMAIL_PASSWORD_PROVIDER")if((o=n._getRecaptchaConfig())!=null&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await fd(n,e,t,t==="getOobCode");return i(n,u)}else return i(n,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const f=await fd(n,e,t,t==="getOobCode");return i(n,f)}else return Promise.reject(u)});else if(r==="PHONE_PROVIDER")if((l=n._getRecaptchaConfig())!=null&&l.isProviderEnabled("PHONE_PROVIDER")){const u=await fd(n,e,t);return i(n,u).catch(async f=>{var m;if(((m=n._getRecaptchaConfig())==null?void 0:m.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(f.code==="auth/missing-recaptcha-token"||f.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${t} flow.`);const y=await fd(n,e,t,!1,!0);return i(n,y)}return Promise.reject(f)})}else{const u=await fd(n,e,t,!1,!0);return i(n,u)}else return Promise.reject(r+" provider is not supported.")}async function $6(n){const e=sn(n),t=await vR(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),i=new _R(t);e.tenantId==null?e._agentRecaptchaConfig=i:e._tenantRecaptchaConfigs[e.tenantId]=i,i.isAnyProviderEnabled()&&new PR(e).verify()}function W6(n,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(Li);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function K6(n,e,t){const i=sn(n);De(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!!(t!=null&&t.disableWarnings),o=kR(e),{host:l,port:u}=J6(e),f=u===null?"":`:${u}`,m={url:`${o}//${l}${f}/`},y=Object.freeze({host:l,port:u,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator){De(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),De(Eo(m,i.config.emulator)&&Eo(y,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=m,i.emulatorConfig=y,i.settings.appVerificationDisabledForTesting=!0,Fu(l)?(nC(`${o}//${l}${f}`),iC("Auth",!0)):r||Y6()}function kR(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function J6(n){const e=kR(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const o=r[1];return{host:o,port:jS(i.substr(o.length+1))}}else{const[o,l]=i.split(":");return{host:o,port:jS(l)}}}function jS(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function Y6(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yu{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return qr("not implemented")}_getIdTokenResponse(e){return qr("not implemented")}_linkToIdToken(e,t){return qr("not implemented")}_getReauthenticationResolver(e){return qr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DR(n,e){return dn(n,"POST","/v1/accounts:resetPassword",cn(n,e))}async function Q6(n,e){return dn(n,"POST","/v1/accounts:update",e)}async function X6(n,e){return dn(n,"POST","/v1/accounts:signUp",e)}async function Z6(n,e){return dn(n,"POST","/v1/accounts:update",cn(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eU(n,e){return Ms(n,"POST","/v1/accounts:signInWithPassword",cn(n,e))}async function qp(n,e){return dn(n,"POST","/v1/accounts:sendOobCode",cn(n,e))}async function tU(n,e){return qp(n,e)}async function nU(n,e){return qp(n,e)}async function iU(n,e){return qp(n,e)}async function rU(n,e){return qp(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sU(n,e){return Ms(n,"POST","/v1/accounts:signInWithEmailLink",cn(n,e))}async function oU(n,e){return Ms(n,"POST","/v1/accounts:signInWithEmailLink",cn(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class af extends Yu{constructor(e,t,i,r=null){super("password",i),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new af(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new af(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return xo(e,t,"signInWithPassword",eU,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return sU(e,{email:this._email,oobCode:this._password});default:Jn(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return xo(e,i,"signUpPassword",X6,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return oU(e,{idToken:t,email:this._email,oobCode:this._password});default:Jn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ss(n,e){return Ms(n,"POST","/v1/accounts:signInWithIdp",cn(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aU="http://localhost";class Kr extends Yu{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Kr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Jn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r,...o}=t;if(!i||!r)return null;const l=new Kr(i,r);return l.idToken=o.idToken||void 0,l.accessToken=o.accessToken||void 0,l.secret=o.secret,l.nonce=o.nonce,l.pendingToken=o.pendingToken||null,l}_getIdTokenResponse(e){const t=this.buildRequest();return Ss(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Ss(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ss(e,t)}buildRequest(){const e={requestUri:aU,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Bu(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GS(n,e){return dn(n,"POST","/v1/accounts:sendVerificationCode",cn(n,e))}async function lU(n,e){return Ms(n,"POST","/v1/accounts:signInWithPhoneNumber",cn(n,e))}async function uU(n,e){const t=await Ms(n,"POST","/v1/accounts:signInWithPhoneNumber",cn(n,e));if(t.temporaryProof)throw xd(n,"account-exists-with-different-credential",t);return t}const cU={USER_NOT_FOUND:"user-not-found"};async function dU(n,e){const t={...e,operation:"REAUTH"};return Ms(n,"POST","/v1/accounts:signInWithPhoneNumber",cn(n,t),cU)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Da extends Yu{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Da({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Da({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return lU(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return uU(e,{idToken:t,...this._makeVerificationRequest()})}_getReauthenticationResolver(e){return dU(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:i,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:i,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:t,verificationCode:i,phoneNumber:r,temporaryProof:o}=e;return!i&&!t&&!r&&!o?null:new Da({verificationId:t,verificationCode:i,phoneNumber:r,temporaryProof:o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fU(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function hU(n){const e=ru(gd(n)).link,t=e?ru(gd(e)).deep_link_id:null,i=ru(gd(n)).deep_link_id;return(i?ru(gd(i)).link:null)||i||t||e||n}class zp{constructor(e){const t=ru(gd(e)),i=t.apiKey??null,r=t.oobCode??null,o=fU(t.mode??null);De(i&&r&&o,"argument-error"),this.apiKey=i,this.operation=o,this.code=r,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=hU(e);try{return new zp(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo{constructor(){this.providerId=zo.PROVIDER_ID}static credential(e,t){return af._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=zp.parseLink(t);return De(i,"argument-error"),af._fromEmailAndCode(e,i.code,i.tenantId)}}zo.PROVIDER_ID="password";zo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";zo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qu extends Vs{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class cu extends Qu{static credentialFromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;return De("providerId"in t&&"signInMethod"in t,"argument-error"),Kr._fromParams(t)}credential(e){return this._credential({...e,nonce:e.rawNonce})}_credential(e){return De(e.idToken||e.accessToken,"argument-error"),Kr._fromParams({...e,providerId:this.providerId,signInMethod:this.providerId})}static credentialFromResult(e){return cu.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return cu.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i,oauthTokenSecret:r,pendingToken:o,nonce:l,providerId:u}=e;if(!i&&!r&&!t&&!o||!u)return null;try{return new cu(u)._credential({idToken:t,accessToken:i,nonce:l,pendingToken:o})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr extends Qu{constructor(){super("facebook.com")}static credential(e){return Kr._fromParams({providerId:Vr.PROVIDER_ID,signInMethod:Vr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Vr.credentialFromTaggedObject(e)}static credentialFromError(e){return Vr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Vr.credential(e.oauthAccessToken)}catch{return null}}}Vr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Vr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur extends Qu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Kr._fromParams({providerId:Ur.PROVIDER_ID,signInMethod:Ur.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ur.credentialFromTaggedObject(e)}static credentialFromError(e){return Ur.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return Ur.credential(t,i)}catch{return null}}}Ur.GOOGLE_SIGN_IN_METHOD="google.com";Ur.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr extends Qu{constructor(){super("github.com")}static credential(e){return Kr._fromParams({providerId:Lr.PROVIDER_ID,signInMethod:Lr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Lr.credentialFromTaggedObject(e)}static credentialFromError(e){return Lr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Lr.credential(e.oauthAccessToken)}catch{return null}}}Lr.GITHUB_SIGN_IN_METHOD="github.com";Lr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mU="http://localhost";class Lu extends Yu{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){const t=this.buildRequest();return Ss(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Ss(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ss(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r,pendingToken:o}=t;return!i||!r||!o||i!==r?null:new Lu(i,o)}static _create(e,t){return new Lu(e,t)}buildRequest(){return{requestUri:mU,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pU="saml.";class tp extends Vs{constructor(e){De(e.startsWith(pU),"argument-error"),super(e)}static credentialFromResult(e){return tp.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return tp.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=Lu.fromJSON(e);return De(t,"argument-error"),t}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:t,providerId:i}=e;if(!t||!i)return null;try{return Lu._create(i,t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or extends Qu{constructor(){super("twitter.com")}static credential(e,t){return Kr._fromParams({providerId:Or.PROVIDER_ID,signInMethod:Or.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Or.credentialFromTaggedObject(e)}static credentialFromError(e){return Or.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return Or.credential(t,i)}catch{return null}}}Or.TWITTER_SIGN_IN_METHOD="twitter.com";Or.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MR(n,e){return Ms(n,"POST","/v1/accounts:signUp",cn(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,r=!1){const o=await dr._fromIdTokenResponse(e,i,r),l=HS(i);return new er({user:o,providerId:l,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const r=HS(i);return new er({user:e,providerId:r,_tokenResponse:i,operationType:t})}}function HS(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gU(n){var r;if(Zt(n.app))return Promise.reject(Fn(n));const e=sn(n);if(await e._initializationPromise,(r=e.currentUser)!=null&&r.isAnonymous)return new er({user:e.currentUser,providerId:null,operationType:"signIn"});const t=await MR(e,{returnSecureToken:!0}),i=await er._fromIdTokenResponse(e,"signIn",t,!0);return await e._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class np extends gi{constructor(e,t,i,r){super(t.code,t.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,np.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,r){return new np(e,t,i,r)}}function VR(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?np._fromErrorAndOperation(n,o,e,i):o})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UR(n){return new Set(n.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yU(n,e){const t=Xe(n);await jp(!0,t,e);const{providerUserInfo:i}=await _6(t.auth,{idToken:await t.getIdToken(),deleteProvider:[e]}),r=UR(i||[]);return t.providerData=t.providerData.filter(o=>r.has(o.providerId)),r.has("phone")||(t.phoneNumber=null),await t.auth._persistUserIfCurrent(t),t}async function sT(n,e,t=!1){const i=await Rs(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return er._forOperation(n,"link",i)}async function jp(n,e,t){await of(e);const i=UR(e.providerData),r=n===!1?"provider-already-linked":"no-such-provider";De(i.has(t)===n,e.auth,r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LR(n,e,t=!1){const{auth:i}=n;if(Zt(i.app))return Promise.reject(Fn(i));const r="reauthenticate";try{const o=await Rs(n,VR(i,r,e,n),t);De(o.idToken,i,"internal-error");const l=Bp(o.idToken);De(l,i,"internal-error");const{sub:u}=l;return De(n.uid===u,i,"user-mismatch"),er._forOperation(n,r,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&Jn(i,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OR(n,e,t=!1){if(Zt(n.app))return Promise.reject(Fn(n));const i="signIn",r=await VR(n,i,e),o=await er._fromIdTokenResponse(n,i,r);return t||await n._updateCurrentUser(o.user),o}async function Gp(n,e){return OR(sn(n),e)}async function FR(n,e){const t=Xe(n);return await jp(!1,t,e.providerId),sT(t,e)}async function BR(n,e){return LR(Xe(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _U(n,e){return Ms(n,"POST","/v1/accounts:signInWithCustomToken",cn(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vU(n,e){if(Zt(n.app))return Promise.reject(Fn(n));const t=sn(n),i=await _U(t,{token:e,returnSecureToken:!0}),r=await er._fromIdTokenResponse(t,"signIn",i);return await t._updateCurrentUser(r.user),r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cf{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?oT._fromServerResponse(e,t):"totpInfo"in t?aT._fromServerResponse(e,t):Jn(e,"internal-error")}}class oT extends Cf{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new oT(t)}}class aT extends Cf{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new aT(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hp(n,e,t){var i;De(((i=t.url)==null?void 0:i.length)>0,n,"invalid-continue-uri"),De(typeof t.dynamicLinkDomain>"u"||t.dynamicLinkDomain.length>0,n,"invalid-dynamic-link-domain"),De(typeof t.linkDomain>"u"||t.linkDomain.length>0,n,"invalid-hosting-link-domain"),e.continueUrl=t.url,e.dynamicLinkDomain=t.dynamicLinkDomain,e.linkDomain=t.linkDomain,e.canHandleCodeInApp=t.handleCodeInApp,t.iOS&&(De(t.iOS.bundleId.length>0,n,"missing-ios-bundle-id"),e.iOSBundleId=t.iOS.bundleId),t.android&&(De(t.android.packageName.length>0,n,"missing-android-pkg-name"),e.androidInstallApp=t.android.installApp,e.androidMinimumVersionCode=t.android.minimumVersion,e.androidPackageName=t.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lT(n){const e=sn(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function TU(n,e,t){const i=sn(n),r={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};t&&Hp(i,r,t),await xo(i,r,"getOobCode",nU,"EMAIL_PASSWORD_PROVIDER")}async function wU(n,e,t){await DR(Xe(n),{oobCode:e,newPassword:t}).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&lT(n),i})}async function xU(n,e){await Z6(Xe(n),{oobCode:e})}async function qR(n,e){const t=Xe(n),i=await DR(t,{oobCode:e}),r=i.requestType;switch(De(r,t,"internal-error"),r){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":De(i.newEmail,t,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":De(i.mfaInfo,t,"internal-error");default:De(i.email,t,"internal-error")}let o=null;return i.mfaInfo&&(o=Cf._fromServerResponse(sn(t),i.mfaInfo)),{data:{email:(i.requestType==="VERIFY_AND_CHANGE_EMAIL"?i.newEmail:i.email)||null,previousEmail:(i.requestType==="VERIFY_AND_CHANGE_EMAIL"?i.email:i.newEmail)||null,multiFactorInfo:o},operation:r}}async function EU(n,e){const{data:t}=await qR(Xe(n),e);return t.email}async function bU(n,e,t){if(Zt(n.app))return Promise.reject(Fn(n));const i=sn(n),l=await xo(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",MR,"EMAIL_PASSWORD_PROVIDER").catch(f=>{throw f.code==="auth/password-does-not-meet-requirements"&&lT(n),f}),u=await er._fromIdTokenResponse(i,"signIn",l);return await i._updateCurrentUser(u.user),u}function SU(n,e,t){return Zt(n.app)?Promise.reject(Fn(n)):Gp(Xe(n),zo.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&lT(n),i})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IU(n,e,t){const i=sn(n),r={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function o(l,u){De(u.handleCodeInApp,i,"argument-error"),u&&Hp(i,l,u)}o(r,t),await xo(i,r,"getOobCode",iU,"EMAIL_PASSWORD_PROVIDER")}function AU(n,e){const t=zp.parseLink(e);return(t==null?void 0:t.operation)==="EMAIL_SIGNIN"}async function CU(n,e,t){if(Zt(n.app))return Promise.reject(Fn(n));const i=Xe(n),r=zo.credentialWithLink(e,t||sf());return De(r._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),Gp(i,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RU(n,e){return dn(n,"POST","/v1/accounts:createAuthUri",cn(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NU(n,e){const t=nT()?sf():"http://localhost",i={identifier:e,continueUri:t},{signinMethods:r}=await RU(Xe(n),i);return r||[]}async function PU(n,e){const t=Xe(n),r={requestType:"VERIFY_EMAIL",idToken:await n.getIdToken()};e&&Hp(t.auth,r,e);const{email:o}=await tU(t.auth,r);o!==n.email&&await n.reload()}async function kU(n,e,t){const i=Xe(n),o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await n.getIdToken(),newEmail:e};t&&Hp(i.auth,o,t);const{email:l}=await rU(i.auth,o);l!==n.email&&await n.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DU(n,e){return dn(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MU(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const i=Xe(n),o={idToken:await i.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},l=await Rs(i,DU(i.auth,o));i.displayName=l.displayName||null,i.photoURL=l.photoUrl||null;const u=i.providerData.find(({providerId:f})=>f==="password");u&&(u.displayName=i.displayName,u.photoURL=i.photoURL),await i._updateTokensIfNecessary(l)}function VU(n,e){const t=Xe(n);return Zt(t.auth.app)?Promise.reject(Fn(t.auth)):zR(t,e,null)}function UU(n,e){return zR(Xe(n),null,e)}async function zR(n,e,t){const{auth:i}=n,o={idToken:await n.getIdToken(),returnSecureToken:!0};e&&(o.email=e),t&&(o.password=t);const l=await Rs(n,Q6(i,o));await n._updateTokensIfNecessary(l,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LU(n){var r,o;if(!n)return null;const{providerId:e}=n,t=n.rawUserInfo?JSON.parse(n.rawUserInfo):{},i=n.isNewUser||n.kind==="identitytoolkit#SignupNewUserResponse";if(!e&&(n!=null&&n.idToken)){const l=(o=(r=Bp(n.idToken))==null?void 0:r.firebase)==null?void 0:o.sign_in_provider;if(l){const u=l!=="anonymous"&&l!=="custom"?l:null;return new du(i,u)}}if(!e)return null;switch(e){case"facebook.com":return new OU(i,t);case"github.com":return new FU(i,t);case"google.com":return new BU(i,t);case"twitter.com":return new qU(i,t,n.screenName||null);case"custom":case"anonymous":return new du(i,null);default:return new du(i,e,t)}}class du{constructor(e,t,i={}){this.isNewUser=e,this.providerId=t,this.profile=i}}class jR extends du{constructor(e,t,i,r){super(e,t,i),this.username=r}}class OU extends du{constructor(e,t){super(e,"facebook.com",t)}}class FU extends jR{constructor(e,t){super(e,"github.com",t,typeof(t==null?void 0:t.login)=="string"?t==null?void 0:t.login:null)}}class BU extends du{constructor(e,t){super(e,"google.com",t)}}class qU extends jR{constructor(e,t,i){super(e,"twitter.com",t,i)}}function zU(n){const{user:e,_tokenResponse:t}=n;return e.isAnonymous&&!t?{providerId:null,isNewUser:!1,profile:null}:LU(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na{constructor(e,t,i){this.type=e,this.credential=t,this.user=i}static _fromIdtoken(e,t){return new Na("enroll",e,t)}static _fromMfaPendingCredential(e){return new Na("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var t,i;if(e!=null&&e.multiFactorSession){if((t=e.multiFactorSession)!=null&&t.pendingCredential)return Na._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if((i=e.multiFactorSession)!=null&&i.idToken)return Na._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uT{constructor(e,t,i){this.session=e,this.hints=t,this.signInResolver=i}static _fromError(e,t){const i=sn(e),r=t.customData._serverResponse,o=(r.mfaInfo||[]).map(u=>Cf._fromServerResponse(i,u));De(r.mfaPendingCredential,i,"internal-error");const l=Na._fromMfaPendingCredential(r.mfaPendingCredential);return new uT(l,o,async u=>{const f=await u._process(i,l);delete r.mfaInfo,delete r.mfaPendingCredential;const m={...r,idToken:f.idToken,refreshToken:f.refreshToken};switch(t.operationType){case"signIn":const y=await er._fromIdTokenResponse(i,t.operationType,m);return await i._updateCurrentUser(y.user),y;case"reauthenticate":return De(t.user,i,"internal-error"),er._forOperation(t.user,t.operationType,m);default:Jn(i,"internal-error")}})}async resolveSignIn(e){const t=e;return this.signInResolver(t)}}function jU(n,e){var r;const t=Xe(n),i=e;return De(e.customData.operationType,t,"argument-error"),De((r=i.customData._serverResponse)==null?void 0:r.mfaPendingCredential,t,"argument-error"),uT._fromError(t,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $S(n,e){return dn(n,"POST","/v2/accounts/mfaEnrollment:start",cn(n,e))}function GU(n,e){return dn(n,"POST","/v2/accounts/mfaEnrollment:finalize",cn(n,e))}function HU(n,e){return dn(n,"POST","/v2/accounts/mfaEnrollment:withdraw",cn(n,e))}class cT{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map(i=>Cf._fromServerResponse(e.auth,i)))})}static _fromUser(e){return new cT(e)}async getSession(){return Na._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,t){const i=e,r=await this.getSession(),o=await Rs(this.user,i._process(this.user.auth,r,t));return await this.user._updateTokensIfNecessary(o),this.user.reload()}async unenroll(e){const t=typeof e=="string"?e:e.uid,i=await this.user.getIdToken();try{const r=await Rs(this.user,HU(this.user.auth,{idToken:i,mfaEnrollmentId:t}));this.enrolledFactors=this.enrolledFactors.filter(({uid:o})=>o!==t),await this.user._updateTokensIfNecessary(r),await this.user.reload()}catch(r){throw r}}}const g_=new WeakMap;function $U(n){const e=Xe(n);return g_.has(e)||g_.set(e,cT._fromUser(e)),g_.get(e)}const ip="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GR{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(ip,"1"),this.storage.removeItem(ip),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WU=1e3,KU=10;class HR extends GR{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=CR(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),r=this.localCache[t];i!==r&&e(t,r,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((l,u,f)=>{this.notifyListeners(l,f)});return}const i=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const l=this.storage.getItem(i);!t&&this.localCache[i]===l||this.notifyListeners(i,l)},o=this.storage.getItem(i);C6()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,KU):r()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},WU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}HR.type="LOCAL";const dT=HR;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $R extends GR{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}$R.type="SESSION";const ja=$R;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JU(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $p{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(r=>r.isListeningto(e));if(t)return t;const i=new $p(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:r,data:o}=t.data,l=this.handlersMap[r];if(!(l!=null&&l.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const u=Array.from(l).map(async m=>m(t.origin,o)),f=await JU(u);t.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:f})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}$p.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rf(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YU{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let o,l;return new Promise((u,f)=>{const m=Rf("",20);r.port1.start();const y=setTimeout(()=>{f(new Error("unsupported_event"))},i);l={messageChannel:r,onMessage(v){const w=v;if(w.data.eventId===m)switch(w.data.status){case"ack":clearTimeout(y),o=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),u(w.data.response);break;default:clearTimeout(y),clearTimeout(o),f(new Error("invalid_response"));break}}},this.handlers.add(l),r.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:m,data:t},[r.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function En(){return window}function QU(n){En().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fT(){return typeof En().WorkerGlobalScope<"u"&&typeof En().importScripts=="function"}async function XU(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function ZU(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function eL(){return fT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WR="firebaseLocalStorageDb",tL=1,rp="firebaseLocalStorage",KR="fbase_key";class Nf{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Wp(n,e){return n.transaction([rp],e?"readwrite":"readonly").objectStore(rp)}function nL(){const n=indexedDB.deleteDatabase(WR);return new Nf(n).toPromise()}function fv(){const n=indexedDB.open(WR,tL);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(rp,{keyPath:KR})}catch(r){t(r)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(rp)?e(i):(i.close(),await nL(),e(await fv()))})})}async function WS(n,e,t){const i=Wp(n,!0).put({[KR]:e,value:t});return new Nf(i).toPromise()}async function iL(n,e){const t=Wp(n,!1).get(e),i=await new Nf(t).toPromise();return i===void 0?null:i.value}function KS(n,e){const t=Wp(n,!0).delete(e);return new Nf(t).toPromise()}const rL=800,sL=3;class JR{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await fv(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>sL)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return fT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=$p._getInstance(eL()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,i;if(this.activeServiceWorker=await XU(),!this.activeServiceWorker)return;this.sender=new YU(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||ZU()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await fv();return await WS(e,ip,"1"),await KS(e,ip),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>WS(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>iL(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>KS(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const o=Wp(r,!1).getAll();return new Nf(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:r,value:o}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(o)&&(this.notifyListeners(r,o),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),rL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}JR.type="LOCAL";const lf=JR;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JS(n,e){return dn(n,"POST","/v2/accounts/mfaSignIn:start",cn(n,e))}function oL(n,e){return dn(n,"POST","/v2/accounts/mfaSignIn:finalize",cn(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y_=NR("rcb"),aL=new bf(3e4,6e4);class lL{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!((e=En().grecaptcha)!=null&&e.render)}load(e,t=""){return De(uL(t),e,"argument-error"),this.shouldResolveImmediately(t)&&LS(En().grecaptcha)?Promise.resolve(En().grecaptcha):new Promise((i,r)=>{const o=En().setTimeout(()=>{r(Rn(e,"network-request-failed"))},aL.get());En()[y_]=()=>{En().clearTimeout(o),delete En()[y_];const u=En().grecaptcha;if(!u||!LS(u)){r(Rn(e,"internal-error"));return}const f=u.render;u.render=(m,y)=>{const v=f(m,y);return this.counter++,v},this.hostLanguage=t,i(u)};const l=`${V6()}?${Bu({onload:y_,render:"explicit",hl:t})}`;rT(l).catch(()=>{clearTimeout(o),r(Rn(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!!((t=En().grecaptcha)!=null&&t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function uL(n){return n.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(n)}class cL{async load(e){return new B6(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vd="recaptcha",dL={theme:"light",type:"image"};let fL=class{constructor(e,t,i={...dL}){this.parameters=i,this.type=Vd,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=sn(e),this.isInvisible=this.parameters.size==="invisible",De(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const r=typeof t=="string"?document.getElementById(t):t;De(r,this.auth,"argument-error"),this.container=r,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new cL:new lL,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),i=t.getResponse(e);return i||new Promise(r=>{const o=l=>{l&&(this.tokenChangeListeners.delete(o),r(l))};this.tokenChangeListeners.add(o),this.isInvisible&&t.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){De(!this.parameters.sitekey,this.auth,"argument-error"),De(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),De(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach(i=>i(t)),typeof e=="function")e(t);else if(typeof e=="string"){const i=En()[e];typeof i=="function"&&i(t)}}}assertNotDestroyed(){De(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){De(nT()&&!fT(),this.auth,"internal-error"),await hL(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await g6(this.auth);De(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return De(this.recaptcha,this.auth,"internal-error"),this.recaptcha}};function hL(){let n=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}n=()=>e(),window.addEventListener("load",n)}).catch(e=>{throw n&&window.removeEventListener("load",n),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hT{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=Da._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function mL(n,e,t){if(Zt(n.app))return Promise.reject(Fn(n));const i=sn(n),r=await Kp(i,e,Xe(t));return new hT(r,o=>Gp(i,o))}async function pL(n,e,t){const i=Xe(n);await jp(!1,i,"phone");const r=await Kp(i.auth,e,Xe(t));return new hT(r,o=>FR(i,o))}async function gL(n,e,t){const i=Xe(n);if(Zt(i.auth.app))return Promise.reject(Fn(i.auth));const r=await Kp(i.auth,e,Xe(t));return new hT(r,o=>BR(i,o))}async function Kp(n,e,t){var i;if(!n._getRecaptchaConfig())try{await $6(n)}catch{console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let r;if(typeof e=="string"?r={phoneNumber:e}:r=e,"session"in r){const o=r.session;if("phoneNumber"in r){De(o.type==="enroll",n,"internal-error");const l={idToken:o.credential,phoneEnrollmentInfo:{phoneNumber:r.phoneNumber,clientType:"CLIENT_TYPE_WEB"}};return(await xo(n,l,"mfaSmsEnrollment",async(y,v)=>{if(v.phoneEnrollmentInfo.captchaResponse===Md){De((t==null?void 0:t.type)===Vd,y,"argument-error");const w=await __(y,v,t);return $S(y,w)}return $S(y,v)},"PHONE_PROVIDER").catch(y=>Promise.reject(y))).phoneSessionInfo.sessionInfo}else{De(o.type==="signin",n,"internal-error");const l=((i=r.multiFactorHint)==null?void 0:i.uid)||r.multiFactorUid;De(l,n,"missing-multi-factor-info");const u={mfaPendingCredential:o.credential,mfaEnrollmentId:l,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}};return(await xo(n,u,"mfaSmsSignIn",async(v,w)=>{if(w.phoneSignInInfo.captchaResponse===Md){De((t==null?void 0:t.type)===Vd,v,"argument-error");const E=await __(v,w,t);return JS(v,E)}return JS(v,w)},"PHONE_PROVIDER").catch(v=>Promise.reject(v))).phoneResponseInfo.sessionInfo}}else{const o={phoneNumber:r.phoneNumber,clientType:"CLIENT_TYPE_WEB"};return(await xo(n,o,"sendVerificationCode",async(m,y)=>{if(y.captchaResponse===Md){De((t==null?void 0:t.type)===Vd,m,"argument-error");const v=await __(m,y,t);return GS(m,v)}return GS(m,y)},"PHONE_PROVIDER").catch(m=>Promise.reject(m))).sessionInfo}}finally{t==null||t._reset()}}async function yL(n,e){const t=Xe(n);if(Zt(t.auth.app))return Promise.reject(Fn(t.auth));await sT(t,e)}async function __(n,e,t){De(t.type===Vd,n,"argument-error");const i=await t.verify();De(typeof i=="string",n,"argument-error");const r={...e};if("phoneEnrollmentInfo"in r){const o=r.phoneEnrollmentInfo.phoneNumber,l=r.phoneEnrollmentInfo.captchaResponse,u=r.phoneEnrollmentInfo.clientType,f=r.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(r,{phoneEnrollmentInfo:{phoneNumber:o,recaptchaToken:i,captchaResponse:l,clientType:u,recaptchaVersion:f}}),r}else if("phoneSignInInfo"in r){const o=r.phoneSignInInfo.captchaResponse,l=r.phoneSignInInfo.clientType,u=r.phoneSignInInfo.recaptchaVersion;return Object.assign(r,{phoneSignInInfo:{recaptchaToken:i,captchaResponse:o,clientType:l,recaptchaVersion:u}}),r}else return Object.assign(r,{recaptchaToken:i}),r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ga=class Cm{constructor(e){this.providerId=Cm.PROVIDER_ID,this.auth=sn(e)}verifyPhoneNumber(e,t){return Kp(this.auth,e,Xe(t))}static credential(e,t){return Da._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Cm.credentialFromTaggedObject(t)}static credentialFromError(e){return Cm.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:t,temporaryProof:i}=e;return t&&i?Da._fromTokenResponse(t,i):null}};Ga.PROVIDER_ID="phone";Ga.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xa(n,e){return e?Li(e):(De(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mT extends Yu{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ss(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ss(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ss(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function _L(n){return OR(n.auth,new mT(n),n.bypassAuthState)}function vL(n){const{auth:e,user:t}=n;return De(t,e,"internal-error"),LR(t,new mT(n),n.bypassAuthState)}async function TL(n){const{auth:e,user:t}=n;return De(t,e,"internal-error"),sT(t,new mT(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YR{constructor(e,t,i,r,o=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:r,tenantId:o,error:l,type:u}=e;if(l){this.reject(l);return}const f={auth:this.auth,requestUri:t,sessionId:i,tenantId:o||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(f))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return _L;case"linkViaPopup":case"linkViaRedirect":return TL;case"reauthViaPopup":case"reauthViaRedirect":return vL;default:Jn(this.auth,"internal-error")}}resolve(e){pr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){pr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wL=new bf(2e3,1e4);async function xL(n,e,t){if(Zt(n.app))return Promise.reject(Rn(n,"operation-not-supported-in-this-environment"));const i=sn(n);Ju(n,e,Vs);const r=Xa(i,t);return new Es(i,"signInViaPopup",e,r).executeNotNull()}async function EL(n,e,t){const i=Xe(n);if(Zt(i.auth.app))return Promise.reject(Rn(i.auth,"operation-not-supported-in-this-environment"));Ju(i.auth,e,Vs);const r=Xa(i.auth,t);return new Es(i.auth,"reauthViaPopup",e,r,i).executeNotNull()}async function bL(n,e,t){const i=Xe(n);Ju(i.auth,e,Vs);const r=Xa(i.auth,t);return new Es(i.auth,"linkViaPopup",e,r,i).executeNotNull()}class Es extends YR{constructor(e,t,i,r,o){super(e,t,r,o),this.provider=i,this.authWindow=null,this.pollId=null,Es.currentPopupAction&&Es.currentPopupAction.cancel(),Es.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return De(e,this.auth,"internal-error"),e}async onExecution(){pr(this.filter.length===1,"Popup operations only handle one event");const e=Rf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Rn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Rn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Es.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if((i=(t=this.authWindow)==null?void 0:t.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Rn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,wL.get())};e()}}Es.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SL="pendingRedirect",Ud=new Map;class IL extends YR{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=Ud.get(this.auth._key());if(!e){try{const i=await AL(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Ud.set(this.auth._key(),e)}return this.bypassAuthState||Ud.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function AL(n,e){const t=XR(e),i=QR(n);if(!await i._isAvailable())return!1;const r=await i._get(t)==="true";return await i._remove(t),r}async function pT(n,e){return QR(n)._set(XR(e),"true")}function CL(){Ud.clear()}function gT(n,e){Ud.set(n._key(),e)}function QR(n){return Li(n._redirectPersistence)}function XR(n){return ka(SL,n.config.apiKey,n.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RL(n,e,t){return NL(n,e,t)}async function NL(n,e,t){if(Zt(n.app))return Promise.reject(Fn(n));const i=sn(n);Ju(n,e,Vs),await i._initializationPromise;const r=Xa(i,t);return await pT(r,i),r._openRedirect(i,e,"signInViaRedirect")}function PL(n,e,t){return kL(n,e,t)}async function kL(n,e,t){const i=Xe(n);if(Ju(i.auth,e,Vs),Zt(i.auth.app))return Promise.reject(Fn(i.auth));await i.auth._initializationPromise;const r=Xa(i.auth,t);await pT(r,i.auth);const o=await ZR(i);return r._openRedirect(i.auth,e,"reauthViaRedirect",o)}function DL(n,e,t){return ML(n,e,t)}async function ML(n,e,t){const i=Xe(n);Ju(i.auth,e,Vs),await i.auth._initializationPromise;const r=Xa(i.auth,t);await jp(!1,i,e.providerId),await pT(r,i.auth);const o=await ZR(i);return r._openRedirect(i.auth,e,"linkViaRedirect",o)}async function VL(n,e){return await sn(n)._initializationPromise,Jp(n,e,!1)}async function Jp(n,e,t=!1){if(Zt(n.app))return Promise.reject(Fn(n));const i=sn(n),r=Xa(i,e),l=await new IL(i,r,t).execute();return l&&!t&&(delete l.user._redirectEventId,await i._persistUserIfCurrent(l.user),await i._setRedirectUser(null,e)),l}async function ZR(n){const e=Rf(`${n.uid}:::`);return n._redirectEventId=e,await n.auth._setRedirectUser(n),await n.auth._persistUserIfCurrent(n),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UL=600*1e3;class eN{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!LL(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!tN(e)){const r=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";t.onError(Rn(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=UL&&this.cachedEventUids.clear(),this.cachedEventUids.has(YS(e))}saveEventToCache(e){this.cachedEventUids.add(YS(e)),this.lastProcessedEventTime=Date.now()}}function YS(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function tN({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function LL(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return tN(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nN(n,e={}){return dn(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OL=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,FL=/^https?/;async function BL(n){if(n.config.emulator)return;const{authorizedDomains:e}=await nN(n);for(const t of e)try{if(qL(t))return}catch{}Jn(n,"unauthorized-domain")}function qL(n){const e=sf(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const l=new URL(n);return l.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&l.hostname===i}if(!FL.test(t))return!1;if(OL.test(n))return i===n;const r=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zL=new bf(3e4,6e4);function QS(){const n=En().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function jL(n){return new Promise((e,t)=>{var r,o,l;function i(){QS(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{QS(),t(Rn(n,"network-request-failed"))},timeout:zL.get()})}if((o=(r=En().gapi)==null?void 0:r.iframes)!=null&&o.Iframe)e(gapi.iframes.getContext());else if((l=En().gapi)!=null&&l.load)i();else{const u=NR("iframefcb");return En()[u]=()=>{gapi.load?i():t(Rn(n,"network-request-failed"))},rT(`${L6()}?onload=${u}`).catch(f=>t(f))}}).catch(e=>{throw Rm=null,e})}let Rm=null;function GL(n){return Rm=Rm||jL(n),Rm}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HL=new bf(5e3,15e3),$L="__/auth/iframe",WL="emulator/auth/iframe",KL={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},JL=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function YL(n){const e=n.config;De(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?iT(e,WL):`https://${n.config.authDomain}/${$L}`,i={apiKey:e.apiKey,appName:n.name,v:Vo},r=JL.get(n.config.apiHost);r&&(i.eid=r);const o=n._getFrameworks();return o.length&&(i.fw=o.join(",")),`${t}?${Bu(i).slice(1)}`}async function QL(n){const e=await GL(n),t=En().gapi;return De(t,n,"internal-error"),e.open({where:document.body,url:YL(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:KL,dontclear:!0},i=>new Promise(async(r,o)=>{await i.restyle({setHideOnLeave:!1});const l=Rn(n,"network-request-failed"),u=En().setTimeout(()=>{o(l)},HL.get());function f(){En().clearTimeout(u),r(i)}i.ping(f).then(f,()=>{o(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XL={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},ZL=500,eO=600,tO="_blank",nO="http://localhost";class XS{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function iO(n,e,t,i=ZL,r=eO){const o=Math.max((window.screen.availHeight-r)/2,0).toString(),l=Math.max((window.screen.availWidth-i)/2,0).toString();let u="";const f={...XL,width:i.toString(),height:r.toString(),top:o,left:l},m=rn().toLowerCase();t&&(u=bR(m)?tO:t),xR(m)&&(e=e||nO,f.scrollbars="yes");const y=Object.entries(f).reduce((w,[E,S])=>`${w}${E}=${S},`,"");if(A6(m)&&u!=="_self")return rO(e||"",u),new XS(null);const v=window.open(e||"",u,y);De(v,n,"popup-blocked");try{v.focus()}catch{}return new XS(v)}function rO(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sO="__/auth/handler",oO="emulator/auth/handler",aO=encodeURIComponent("fac");async function hv(n,e,t,i,r,o){De(n.config.authDomain,n,"auth-domain-config-required"),De(n.config.apiKey,n,"invalid-api-key");const l={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:Vo,eventId:r};if(e instanceof Vs){e.setDefaultLanguage(n.languageCode),l.providerId=e.providerId||"",hD(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[y,v]of Object.entries(o||{}))l[y]=v}if(e instanceof Qu){const y=e.getScopes().filter(v=>v!=="");y.length>0&&(l.scopes=y.join(","))}n.tenantId&&(l.tid=n.tenantId);const u=l;for(const y of Object.keys(u))u[y]===void 0&&delete u[y];const f=await n._getAppCheckToken(),m=f?`#${aO}=${encodeURIComponent(f)}`:"";return`${lO(n)}?${Bu(u).slice(1)}${m}`}function lO({config:n}){return n.emulator?iT(n,oO):`https://${n.authDomain}/${sO}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v_="webStorageSupport";class uO{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ja,this._completeRedirectFn=Jp,this._overrideRedirectResult=gT}async _openPopup(e,t,i,r){var l;pr((l=this.eventManagers[e._key()])==null?void 0:l.manager,"_initialize() not called before _openPopup()");const o=await hv(e,t,i,sf(),r);return iO(e,o,Rf())}async _openRedirect(e,t,i,r){await this._originValidation(e);const o=await hv(e,t,i,sf(),r);return QU(o),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:r,promise:o}=this.eventManagers[t];return r?Promise.resolve(r):(pr(o,"If manager is not set, promise should be"),o)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await QL(e),i=new eN(e);return t.register("authEvent",r=>(De(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(v_,{type:v_},r=>{var l;const o=(l=r==null?void 0:r[0])==null?void 0:l[v_];o!==void 0&&t(!!o),Jn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=BL(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return CR()||ER()||If()}}const cO=uO;class dO{constructor(e){this.factorId=e}_process(e,t,i){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,i);case"signin":return this._finalizeSignIn(e,t.credential);default:return qr("unexpected MultiFactorSessionType")}}}class yT extends dO{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new yT(e)}_finalizeEnroll(e,t,i){return GU(e,{idToken:t,displayName:i,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return oL(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class iN{constructor(){}static assertion(e){return yT._fromCredential(e)}}iN.FACTOR_ID="phone";var ZS="@firebase/auth",eI="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fO{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){De(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hO(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function mO(n){Io(new Hr("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:l,authDomain:u}=i.options;De(l&&!l.includes(":"),"invalid-api-key",{appName:i.name});const f={apiKey:l,authDomain:u,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:RR(n)},m=new D6(i,r,o,f);return W6(m,t),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Io(new Hr("auth-internal",e=>{const t=sn(e.getProvider("auth").getImmediate());return(i=>new fO(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),fr(ZS,eI,hO(n)),fr(ZS,eI,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pO=300;tD("authIdTokenMaxAge");function gO(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}M6({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=r=>{const o=Rn("internal-error");o.customData=r,t(o)},i.type="text/javascript",i.charset="UTF-8",gO().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});mO("Browser");/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ha(){return window}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yO=2e3;async function _O(n,e,t){const{BuildInfo:i}=Ha();pr(e.sessionId,"AuthEvent did not contain a session ID");const r=await EO(e.sessionId),o={};return If()?o.ibi=i.packageName:Sf()?o.apn=i.packageName:Jn(n,"operation-not-supported-in-this-environment"),i.displayName&&(o.appDisplayName=i.displayName),o.sessionId=r,hv(n,t,e.type,void 0,e.eventId??void 0,o)}async function vO(n){const{BuildInfo:e}=Ha(),t={};If()?t.iosBundleId=e.packageName:Sf()?t.androidPackageName=e.packageName:Jn(n,"operation-not-supported-in-this-environment"),await nN(n,t)}function TO(n){const{cordova:e}=Ha();return new Promise(t=>{e.plugins.browsertab.isAvailable(i=>{let r=null;i?e.plugins.browsertab.openUrl(n):r=e.InAppBrowser.open(n,I6()?"_blank":"_system","location=yes"),t(r)})})}async function wO(n,e,t){const{cordova:i}=Ha();let r=()=>{};try{await new Promise((o,l)=>{let u=null;function f(){var w;o();const v=(w=i.plugins.browsertab)==null?void 0:w.close;typeof v=="function"&&v(),typeof(t==null?void 0:t.close)=="function"&&t.close()}function m(){u||(u=window.setTimeout(()=>{l(Rn(n,"redirect-cancelled-by-user"))},yO))}function y(){(document==null?void 0:document.visibilityState)==="visible"&&m()}e.addPassiveListener(f),document.addEventListener("resume",m,!1),Sf()&&document.addEventListener("visibilitychange",y,!1),r=()=>{e.removePassiveListener(f),document.removeEventListener("resume",m,!1),document.removeEventListener("visibilitychange",y,!1),u&&window.clearTimeout(u)}})}finally{r()}}function xO(n){var t,i,r,o,l,u,f,m,y,v;const e=Ha();De(typeof((t=e==null?void 0:e.universalLinks)==null?void 0:t.subscribe)=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),De(typeof((i=e==null?void 0:e.BuildInfo)==null?void 0:i.packageName)<"u",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),De(typeof((l=(o=(r=e==null?void 0:e.cordova)==null?void 0:r.plugins)==null?void 0:o.browsertab)==null?void 0:l.openUrl)=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),De(typeof((m=(f=(u=e==null?void 0:e.cordova)==null?void 0:u.plugins)==null?void 0:f.browsertab)==null?void 0:m.isAvailable)=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),De(typeof((v=(y=e==null?void 0:e.cordova)==null?void 0:y.InAppBrowser)==null?void 0:v.open)=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function EO(n){const e=bO(n),t=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(t)).map(r=>r.toString(16).padStart(2,"0")).join("")}function bO(n){if(pr(/[0-9a-zA-Z]+/.test(n),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return new TextEncoder().encode(n);const e=new ArrayBuffer(n.length),t=new Uint8Array(e);for(let i=0;i<n.length;i++)t[i]=n.charCodeAt(i);return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SO=20;class IO extends eN{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInitialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInitialized(),this.passiveListeners.forEach(t=>t(e)),super.onEvent(e)}async initialized(){await this.initPromise}}function AO(n,e,t=null){return{type:e,eventId:t,urlResponse:null,sessionId:NO(),postBody:null,tenantId:n.tenantId,error:Rn(n,"no-auth-event")}}function CO(n,e){return mv()._set(pv(n),e)}async function tI(n){const e=await mv()._get(pv(n));return e&&await mv()._remove(pv(n)),e}function RO(n,e){var i,r;const t=kO(e);if(t.includes("/__/auth/callback")){const o=Nm(t),l=o.firebaseError?PO(decodeURIComponent(o.firebaseError)):null,u=(r=(i=l==null?void 0:l.code)==null?void 0:i.split("auth/"))==null?void 0:r[1],f=u?Rn(u):null;return f?{type:n.type,eventId:n.eventId,tenantId:n.tenantId,error:f,urlResponse:null,sessionId:null,postBody:null}:{type:n.type,eventId:n.eventId,tenantId:n.tenantId,sessionId:n.sessionId,urlResponse:t,postBody:null}}return null}function NO(){const n=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let t=0;t<SO;t++){const i=Math.floor(Math.random()*e.length);n.push(e.charAt(i))}return n.join("")}function mv(){return Li(dT)}function pv(n){return ka("authEvent",n.config.apiKey,n.name)}function PO(n){try{return JSON.parse(n)}catch{return null}}function kO(n){const e=Nm(n),t=e.link?decodeURIComponent(e.link):void 0,i=Nm(t).link,r=e.deep_link_id?decodeURIComponent(e.deep_link_id):void 0;return Nm(r).link||r||i||t||n}function Nm(n){if(!(n!=null&&n.includes("?")))return{};const[e,...t]=n.split("?");return ru(t.join("?"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DO=500;class MO{constructor(){this._redirectPersistence=ja,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Jp,this._overrideRedirectResult=gT}async _initialize(e){const t=e._key();let i=this.eventManagers.get(t);return i||(i=new IO(e),this.eventManagers.set(t,i),this.attachCallbackListeners(e,i)),i}_openPopup(e){Jn(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,t,i,r){xO(e);const o=await this._initialize(e);await o.initialized(),o.resetRedirect(),CL(),await this._originValidation(e);const l=AO(e,i,r);await CO(e,l);const u=await _O(e,l,t),f=await TO(u);return wO(e,o,f)}_isIframeWebStorageSupported(e,t){throw new Error("Method not implemented.")}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=vO(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){const{universalLinks:i,handleOpenURL:r,BuildInfo:o}=Ha(),l=setTimeout(async()=>{await tI(e),t.onEvent(nI())},DO),u=async y=>{clearTimeout(l);const v=await tI(e);let w=null;v&&(y!=null&&y.url)&&(w=RO(v,y.url)),t.onEvent(w||nI())};typeof i<"u"&&typeof i.subscribe=="function"&&i.subscribe(null,u);const f=r,m=`${o.packageName.toLowerCase()}://`;Ha().handleOpenURL=async y=>{if(y.toLowerCase().startsWith(m)&&u({url:y}),typeof f=="function")try{f(y)}catch(v){console.error(v)}}}}const VO=MO;function nI(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Rn("no-auth-event")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UO(n,e){sn(n)._logFramework(e)}var LO="@firebase/auth-compat",OO="0.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FO=1e3;function Ld(){var n;return((n=self==null?void 0:self.location)==null?void 0:n.protocol)||null}function BO(){return Ld()==="http:"||Ld()==="https:"}function rN(n=rn()){return!!((Ld()==="file:"||Ld()==="ionic:"||Ld()==="capacitor:")&&n.toLowerCase().match(/iphone|ipad|ipod|android/))}function qO(){return Fv()||fp()}function zO(){return oC()&&(document==null?void 0:document.documentMode)===11}function jO(n=rn()){return/Edge\/\d+/.test(n)}function GO(n=rn()){return zO()||jO(n)}function sN(){try{const n=self.localStorage,e=Rf();if(n)return n.setItem(e,"1"),n.removeItem(e),GO()?Fd():!0}catch{return _T()&&Fd()}return!1}function _T(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function T_(){return(BO()||sC()||rN())&&!qO()&&sN()&&!_T()}function oN(){return rN()&&typeof document<"u"}async function HO(){return oN()?new Promise(n=>{const e=setTimeout(()=>{n(!1)},FO);document.addEventListener("deviceready",()=>{clearTimeout(e),n(!0)})}):!1}function $O(){return typeof window<"u"?window:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ui={LOCAL:"local",NONE:"none",SESSION:"session"},hd=De,aN="persistence";function WO(n,e){if(hd(Object.values(Ui).includes(e),n,"invalid-persistence-type"),Fv()){hd(e!==Ui.SESSION,n,"unsupported-persistence-type");return}if(fp()){hd(e===Ui.NONE,n,"unsupported-persistence-type");return}if(_T()){hd(e===Ui.NONE||e===Ui.LOCAL&&Fd(),n,"unsupported-persistence-type");return}hd(e===Ui.NONE||sN(),n,"unsupported-persistence-type")}async function gv(n){await n._initializationPromise;const e=lN(),t=ka(aN,n.config.apiKey,n.name);e&&e.setItem(t,n._getPersistenceType())}function KO(n,e){const t=lN();if(!t)return[];const i=ka(aN,n,e);switch(t.getItem(i)){case Ui.NONE:return[Uu];case Ui.LOCAL:return[lf,ja];case Ui.SESSION:return[ja];default:return[]}}function lN(){var n;try{return((n=$O())==null?void 0:n.sessionStorage)||null}catch{return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JO=De;class yo{constructor(){this.browserResolver=Li(cO),this.cordovaResolver=Li(VO),this.underlyingResolver=null,this._redirectPersistence=ja,this._completeRedirectFn=Jp,this._overrideRedirectResult=gT}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,t,i,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,t,i,r)}async _openRedirect(e,t,i,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,t,i,r)}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return oN()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return JO(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await HO();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uN(n){return n.unwrap()}function YO(n){return n.wrapped()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QO(n){return cN(n)}function XO(n,e){var i;const t=(i=e.customData)==null?void 0:i._tokenResponse;if((e==null?void 0:e.code)==="auth/multi-factor-auth-required"){const r=e;r.resolver=new ZO(n,jU(n,e))}else if(t){const r=cN(e),o=e;r&&(o.credential=r,o.tenantId=t.tenantId||void 0,o.email=t.email||void 0,o.phoneNumber=t.phoneNumber||void 0)}}function cN(n){const{_tokenResponse:e}=n instanceof gi?n.customData:n;if(!e)return null;if(!(n instanceof gi)&&"temporaryProof"in e&&"phoneNumber"in e)return Ga.credentialFromResult(n);const t=e.providerId;if(!t||t===dd.PASSWORD)return null;let i;switch(t){case dd.GOOGLE:i=Ur;break;case dd.FACEBOOK:i=Vr;break;case dd.GITHUB:i=Lr;break;case dd.TWITTER:i=Or;break;default:const{oauthIdToken:r,oauthAccessToken:o,oauthTokenSecret:l,pendingToken:u,nonce:f}=e;return!o&&!l&&!r&&!u?null:u?t.startsWith("saml.")?Lu._create(t,u):Kr._fromParams({providerId:t,signInMethod:t,pendingToken:u,idToken:r,accessToken:o}):new cu(t).credential({idToken:r,accessToken:o,rawNonce:f})}return n instanceof gi?i.credentialFromError(n):i.credentialFromResult(n)}function xi(n,e){return e.catch(t=>{throw t instanceof gi&&XO(n,t),t}).then(t=>{const i=t.operationType,r=t.user;return{operationType:i,credential:QO(t),additionalUserInfo:zU(t),user:bs.getOrCreate(r)}})}async function yv(n,e){const t=await e;return{verificationId:t.verificationId,confirm:i=>xi(n,t.confirm(i))}}class ZO{constructor(e,t){this.resolver=t,this.auth=YO(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return xi(uN(this.auth),this.resolver.resolveSignIn(e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bs{constructor(e){this._delegate=e,this.multiFactor=$U(e)}static getOrCreate(e){return bs.USER_MAP.has(e)||bs.USER_MAP.set(e,new bs(e)),bs.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return xi(this.auth,FR(this._delegate,e))}async linkWithPhoneNumber(e,t){return yv(this.auth,pL(this._delegate,e,t))}async linkWithPopup(e){return xi(this.auth,bL(this._delegate,e,yo))}async linkWithRedirect(e){return await gv(sn(this.auth)),DL(this._delegate,e,yo)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return xi(this.auth,BR(this._delegate,e))}reauthenticateWithPhoneNumber(e,t){return yv(this.auth,gL(this._delegate,e,t))}reauthenticateWithPopup(e){return xi(this.auth,EL(this._delegate,e,yo))}async reauthenticateWithRedirect(e){return await gv(sn(this.auth)),PL(this._delegate,e,yo)}sendEmailVerification(e){return PU(this._delegate,e)}async unlink(e){return await yU(this._delegate,e),this}updateEmail(e){return VU(this._delegate,e)}updatePassword(e){return UU(this._delegate,e)}updatePhoneNumber(e){return yL(this._delegate,e)}updateProfile(e){return MU(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return kU(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}bs.USER_MAP=new WeakMap;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const md=De;class _v{constructor(e,t){if(this.app=e,t.isInitialized()){this._delegate=t.getImmediate(),this.linkUnderlyingAuth();return}const{apiKey:i}=e.options;md(i,"invalid-api-key",{appName:e.name}),md(i,"invalid-api-key",{appName:e.name});const r=typeof window<"u"?yo:void 0;this._delegate=t.initialize({options:{persistence:eF(i,e.name),popupRedirectResolver:r}}),this._delegate._updateErrorMap(o6),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?bs.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,t){K6(this._delegate,e,t)}applyActionCode(e){return xU(this._delegate,e)}checkActionCode(e){return qR(this._delegate,e)}confirmPasswordReset(e,t){return wU(this._delegate,e,t)}async createUserWithEmailAndPassword(e,t){return xi(this._delegate,bU(this._delegate,e,t))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return NU(this._delegate,e)}isSignInWithEmailLink(e){return AU(this._delegate,e)}async getRedirectResult(){md(T_(),this._delegate,"operation-not-supported-in-this-environment");const e=await VL(this._delegate,yo);return e?xi(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){UO(this._delegate,e)}onAuthStateChanged(e,t,i){const{next:r,error:o,complete:l}=iI(e,t,i);return this._delegate.onAuthStateChanged(r,o,l)}onIdTokenChanged(e,t,i){const{next:r,error:o,complete:l}=iI(e,t,i);return this._delegate.onIdTokenChanged(r,o,l)}sendSignInLinkToEmail(e,t){return IU(this._delegate,e,t)}sendPasswordResetEmail(e,t){return TU(this._delegate,e,t||void 0)}async setPersistence(e){WO(this._delegate,e);let t;switch(e){case Ui.SESSION:t=ja;break;case Ui.LOCAL:t=await Li(lf)._isAvailable()?lf:dT;break;case Ui.NONE:t=Uu;break;default:return Jn("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(t)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return xi(this._delegate,gU(this._delegate))}signInWithCredential(e){return xi(this._delegate,Gp(this._delegate,e))}signInWithCustomToken(e){return xi(this._delegate,vU(this._delegate,e))}signInWithEmailAndPassword(e,t){return xi(this._delegate,SU(this._delegate,e,t))}signInWithEmailLink(e,t){return xi(this._delegate,CU(this._delegate,e,t))}signInWithPhoneNumber(e,t){return yv(this._delegate,mL(this._delegate,e,t))}async signInWithPopup(e){return md(T_(),this._delegate,"operation-not-supported-in-this-environment"),xi(this._delegate,xL(this._delegate,e,yo))}async signInWithRedirect(e){return md(T_(),this._delegate,"operation-not-supported-in-this-environment"),await gv(this._delegate),RL(this._delegate,e,yo)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return EU(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}_v.Persistence=Ui;function iI(n,e,t){let i=n;typeof n!="function"&&({next:i,error:e,complete:t}=n);const r=i;return{next:l=>r(l&&bs.getOrCreate(l)),error:e,complete:t}}function eF(n,e){const t=KO(n,e);if(typeof self<"u"&&!t.includes(lf)&&t.push(lf),typeof window<"u")for(const i of[dT,ja])t.includes(i)||t.push(i);return t.includes(Uu)||t.push(Uu),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vT{static credential(e,t){return Ga.credential(e,t)}constructor(){this.providerId="phone",this._delegate=new Ga(uN(Uo.auth()))}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}vT.PHONE_SIGN_IN_METHOD=Ga.PHONE_SIGN_IN_METHOD;vT.PROVIDER_ID=Ga.PROVIDER_ID;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tF=De;class nF{constructor(e,t,i=Uo.app()){var r;tF((r=i.options)==null?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new fL(i.auth(),e,t),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iF="auth-compat";function rF(n){n.INTERNAL.registerComponent(new Hr(iF,e=>{const t=e.getProvider("app-compat").getImmediate(),i=e.getProvider("auth");return new _v(t,i)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Yl.EMAIL_SIGNIN,PASSWORD_RESET:Yl.PASSWORD_RESET,RECOVER_EMAIL:Yl.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:Yl.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:Yl.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:Yl.VERIFY_EMAIL}},EmailAuthProvider:zo,FacebookAuthProvider:Vr,GithubAuthProvider:Lr,GoogleAuthProvider:Ur,OAuthProvider:cu,SAMLAuthProvider:tp,PhoneAuthProvider:vT,PhoneMultiFactorGenerator:iN,RecaptchaVerifier:nF,TwitterAuthProvider:Or,Auth:_v,AuthCredential:Yu,Error:gi}).setInstantiationMode("LAZY").setMultipleInstances(!1)),n.registerVersion(LO,OO)}rF(Uo);var Ql={};const dN={apiKey:Ql.VITE_FIREBASE_API_KEY||"AIzaSy...DEMO...KEY",authDomain:Ql.VITE_FIREBASE_AUTH_DOMAIN||"demo-project.firebaseapp.com",projectId:Ql.VITE_FIREBASE_PROJECT_ID||"demo-project",storageBucket:Ql.VITE_FIREBASE_STORAGE_BUCKET||"demo-project.appspot.com",messagingSenderId:Ql.VITE_FIREBASE_MESSAGING_SENDER_ID||"1234567890",appId:Ql.VITE_FIREBASE_APP_ID||"1:1234567890:web:abcdef123456"};dN.projectId==="demo-project"&&console.warn("Firebase config is using placeholder values. Please set up your environment variables for full functionality.");Uo.initializeApp(dN);const Pf=Uo.firestore(),vv=Uo.auth(),fN=async(n,e="createdAt")=>{try{return(await Pf.collection(n).orderBy(e,"desc").get()).docs.map(r=>({...r.data(),id:r.id}))}catch(t){return console.error(`Error getting collection ${n}:`,t),[]}},hN=async(n,e)=>{try{await Pf.collection(n).doc(e.id).set(e,{merge:!0})}catch(t){throw console.error(`Error saving document in ${n}:`,t),t}},mN=async(n,e)=>{try{await Pf.collection(n).doc(e).delete()}catch(t){throw console.error(`Error deleting document from ${n}:`,t),t}},tr=async n=>{try{const t=await Pf.collection("settings").doc(n).get();return t.exists?t.data():null}catch(e){return console.error(`Error getting settings ${n}:`,e),null}},nr=async(n,e)=>{try{await Pf.collection("settings").doc(n).set(e)}catch(t){throw console.error(`Error saving settings ${n}:`,t),t}},sF=()=>fN("categories","name"),oF=n=>hN("categories",n),aF=n=>mN("categories",n),rI=()=>tr("seo"),lF=n=>nr("seo",n),uF=()=>tr("writing"),cF=n=>nr("writing",n),dF=()=>tr("sidebar"),fF=n=>nr("sidebar",n),hF=()=>tr("social").then(n=>(n==null?void 0:n.links)||[]),mF=n=>nr("social",{links:n}),pF=()=>tr("relatedPosts"),gF=n=>nr("relatedPosts",n),yF=()=>tr("headerMenu").then(n=>(n==null?void 0:n.items)||[]),_F=n=>nr("headerMenu",{items:n}),vF=()=>tr("footerMenu").then(n=>(n==null?void 0:n.items)||[]),TF=n=>nr("footerMenu",{items:n}),wF=()=>tr("activeTemplate"),xF=n=>nr("activeTemplate",n),EF=()=>fN("customTemplates","name"),bF=n=>hN("customTemplates",n),SF=n=>mN("customTemplates",n),sI=()=>tr("developer"),oI=n=>nr("developer",n),IF=()=>tr("marketing"),AF=n=>nr("marketing",n),CF=()=>tr("ads").then(n=>(n==null?void 0:n.items)||[]),RF=n=>nr("ads",{items:n}),NF=()=>tr("landingPageContent").then(n=>n||{}),PF=n=>nr("landingPageContent",n),Jr=async(n,e,t={})=>{if(!e.url||!e.authToken)throw new Error("Cloudflare Worker URL or Auth Token is not configured.");try{const i=await fetch(`${e.url.replace(/\/$/,"")}/${n}`,{...t,headers:{"Content-Type":"application/json","X-Auth-Token":e.authToken,...t.headers}});if(!i.ok){const o=await i.text();throw new Error(`Cloudflare Worker request failed: ${i.status} ${o}`)}const r=i.headers.get("content-type");return r&&r.indexOf("application/json")!==-1?i.json():i.text()}catch(i){throw console.error(`Error fetching from Cloudflare Worker endpoint "${n}":`,i),i}},kF=n=>Jr("posts",n),aI=(n,e)=>Jr("posts",e,{method:"POST",body:JSON.stringify(n)}),DF=(n,e)=>Jr(`posts/${n}`,e,{method:"DELETE"}),MF=n=>Jr("pages",n),VF=(n,e)=>Jr("pages",e,{method:"POST",body:JSON.stringify(n)}),UF=(n,e)=>Jr(`pages/${n}`,e,{method:"DELETE"}),LF=n=>Jr("products",n),OF=(n,e)=>Jr("products",e,{method:"POST",body:JSON.stringify(n)}),FF=(n,e)=>Jr(`products/${n}`,e,{method:"DELETE"}),sp=async(n,e)=>{const t=await Jr("upload",e,{method:"POST",body:JSON.stringify({image:n})});if(t&&t.url)return t.url;throw new Error("Image upload response did not contain a URL.")},BF=(n,e)=>{const t=Object.entries(e.autoPost).filter(([,i])=>i.enabled).map(([i])=>i);if(t.length===0){console.log("[Social Service] Auto-posting is disabled for all platforms.");return}console.log(`[Social Service] Initiating auto-post for: "${n.title}"`),t.forEach(i=>{const r=e.autoPost[i];r.apiKey?console.log(`[Social Service] ==> Auto-posting to ${i} with API Key ***********${r.apiKey.slice(-4)}... (Simulated)`):console.warn(`[Social Service] ==> Auto-posting to ${i} is enabled, but API key is missing. (Simulated)`)})},qF=(n,e)=>{if(!e.googleIndexing.enabled){console.log("[Indexing Service] Google Indexing is disabled.");return}if(!e.googleIndexing.apiKey){console.warn("[Indexing Service] Google Indexing is enabled, but API key is missing.");return}console.log(`[Indexing Service] Submitting URL for post "${n.title}" to Google for indexing... (Simulated)`),console.log(`[Indexing Service] ==> Using API Key: ${e.googleIndexing.apiKey.substring(0,5)}...`)},Ou=()=>`${Date.now().toString(36)}-${Math.random().toString(36).substring(2)}`,zF={uid:"mock-user-uid",email:"dev@example.com",displayName:"Developer",photoURL:null,phoneNumber:null,emailVerified:!0,isAnonymous:!1,metadata:{},providerData:[],refreshToken:"",tenantId:null,delete:async()=>{},getIdToken:async()=>"",getIdTokenResult:async()=>({}),reload:async()=>{},toJSON:()=>({}),providerId:"password"},jF=()=>{const[n,e]=ae.useState(zF),[t,i]=ae.useState(!1);return{user:n,loading:t}},Q=(n,e,t)=>{var r,o;let i=((r=lI[n])==null?void 0:r[e])||((o=lI[n])==null?void 0:o.en)||n;return t&&Object.keys(t).forEach(l=>{i=i.replace(`{${l}}`,t[l])}),i},lI={saveChanges:{ar:" ",en:"Save Changes",fr:"Enregistrer"},saved:{ar:" !",en:"Saved!",fr:"Enregistr !"},add:{ar:"",en:"Add",fr:"Ajouter"},update:{ar:"",en:"Update",fr:"Mettre  jour"},back:{ar:"",en:"Back",fr:"Retour"},preview:{ar:"",en:"Preview",fr:"Aperu"},draft:{ar:"",en:"Draft",fr:"Brouillon"},createdDate:{ar:" ",en:"Created Date",fr:"Date de cration"},actions:{ar:"",en:"Actions",fr:"Actions"},title:{ar:"",en:"Title",fr:"Titre"},slug:{ar:" (Slug)",en:"Slug",fr:"Slug"},error:{ar:"",en:"Error",fr:"Erreur"},cancel:{ar:"",en:"Cancel",fr:"Annuler"},confirm:{ar:"",en:"Confirm",fr:"Confirmer"},processing:{ar:" ...",en:"Processing...",fr:"Traitement en cours..."},publish:{ar:"",en:"Publish",fr:"Publier"},saveDraft:{ar:" ",en:"Save Draft",fr:"Enregistrer le brouillon"},delete:{ar:"",en:"Delete",fr:"Supprimer"},edit:{ar:"",en:"Edit",fr:"Modifier"},copy:{ar:"",en:"Copy",fr:"Copier"},copied:{ar:" !",en:"Copied!",fr:"Copi !"},shortcode:{ar:"  (Shortcode)",en:"Shortcode",fr:"Code court"},shortcodeDesc:{ar:"           .",en:"Paste this code in the text editor or template files to display the ad.",fr:"Collez ce code dans l'diteur de texte ou les fichiers de modle pour afficher la publicit."},note:{ar:"",en:"Note",fr:"Note"},seoSettings:{ar:" SEO",en:"SEO Settings",fr:"Paramtres SEO"},enableWidget:{ar:" ",en:"Enable Widget",fr:"Activer le widget"},download:{ar:"",en:"Download",fr:"Tlcharger"},cmsAi:{ar:"CMS AI",en:"CMS AI",fr:"CMS AI"},landingPage:{ar:" ",en:"Landing Page",fr:"Page d'accueil"},blog:{ar:"",en:"Blog",fr:"Blog"},posts:{ar:"",en:"Posts",fr:"Articles"},newPost:{ar:" ",en:"New Post",fr:"Nouvel article"},pages:{ar:"",en:"Pages",fr:"Pages"},categories:{ar:"",en:"Categories",fr:"Catgories"},store:{ar:"",en:"Store",fr:"Boutique"},products:{ar:"",en:"Products",fr:"Produits"},appearance:{ar:"",en:"Appearance",fr:"Apparence"},templates:{ar:"",en:"Templates",fr:"Modles"},sidebar:{ar:" ",en:"Sidebar",fr:"Barre latrale"},writing:{ar:"",en:"Writing",fr:"criture"},menus:{ar:"",en:"Menus",fr:"Menus"},settings:{ar:"",en:"Settings",fr:"Rglages"},seo:{ar:"SEO",en:"SEO",fr:"SEO"},sitemap:{ar:" ",en:"Sitemap",fr:"Plan du site"},accounts:{ar:"",en:"Accounts",fr:"Comptes"},relatedPosts:{ar:"  ",en:"Related Posts",fr:"Articles similaires"},marketingTools:{ar:" ",en:"Marketing Tools",fr:"Outils marketing"},ads:{ar:"",en:"Advertisements",fr:"Publicits"},developerTools:{ar:" ",en:"Developer Tools",fr:"Outils de dveloppement"},developerSettings:{ar:" ",en:"Developer Settings",fr:"Rglages dveloppeur"},analytics:{ar:"",en:"Analytics",fr:"Statistiques"},systemSettings:{ar:" ",en:"System Settings",fr:"Paramtres systme"},visitSite:{ar:" ",en:"Visit Site",fr:"Visiter le site"},logout:{ar:" ",en:"Log Out",fr:"Dconnexion"},systemSettingsTitle:{ar:" ",en:"System Settings",fr:"Paramtres du systme"},systemSettingsDesc:{ar:"     .",en:"Manage general settings for the admin interface.",fr:"Grer les paramtres gnraux de l'interface d'administration."},interfaceLanguage:{ar:" ",en:"Interface Language",fr:"Langue de l'interface"},interfaceLanguageDesc:{ar:"      .",en:"Choose your preferred language for the admin panel.",fr:"Choisissez votre langue prfre pour le panneau d'administration."},sitemapDesc:{ar:"     .",en:"View and download sitemaps for each language.",fr:"Voir et tlcharger les sitemaps pour chaque langue."},sitemapNote:{ar:"          Google Search Console.",en:"This is a list of links you can submit to search engines like Google Search Console.",fr:"Ceci est une liste de liens que vous pouvez soumettre aux moteurs de recherche comme Google Search Console."},sitemapSetUrlError:{ar:"       .",en:"Please set your Site URL in System Settings first.",fr:"Veuillez d'abord dfinir l'URL de votre site dans les paramtres systme."},usePagesAsMenu:{ar:"  ",en:"Use Pages as Menu",fr:"Utiliser les pages comme menu"},useCategoriesAsMenu:{ar:"  ",en:"Use Categories as Menu",fr:"Utiliser les catgories comme menu"},confirmMenuOverwrite:{ar:"        .",en:"Are you sure? This will replace all current menu items.",fr:"tes-vous sr ? Cela remplacera tous les lments de menu actuels."},postList:{ar:" ",en:"Post List",fr:"Liste des articles"},addNewPost:{ar:"  ",en:"Add New Post",fr:"Ajouter un nouvel article"},noPostsYet:{ar:"   ",en:"No Posts Yet",fr:"Aucun article pour le moment"},clickToStart:{ar:'  "{buttonText}" .',en:'Click "{buttonText}" to get started.',fr:'Cliquez sur "{buttonText}" pour commencer.'},confirmDeletePost:{ar:"      ",en:"Are you sure you want to delete this post?",fr:"tes-vous sr de vouloir supprimer cet article ?"},pageList:{ar:" ",en:"Page List",fr:"Liste des pages"},addNewPage:{ar:"  ",en:"Add New Page",fr:"Ajouter une nouvelle page"},noPagesYet:{ar:"   ",en:"No Pages Yet",fr:"Aucune page pour le moment"},confirmDeletePage:{ar:"      ",en:"Are you sure you want to delete this page?",fr:"tes-vous sr de vouloir supprimer cette page ?"},categoryManager:{ar:" ",en:"Category Manager",fr:"Gestion des catgories"},addNewCategory:{ar:"  ",en:"Add New Category",fr:"Ajouter une nouvelle catgorie"},categoryNamePlaceholder:{ar:" ...",en:"Category name...",fr:"Nom de la catgorie..."},currentCategories:{ar:" ",en:"Current Categories",fr:"Catgories actuelles"},noCategoriesYet:{ar:"   .",en:"No categories yet.",fr:"Aucune catgorie pour le moment."},confirmDeleteCategory:{ar:"               .",en:"Are you sure you want to delete this category? It will be removed from all associated posts.",fr:"tes-vous sr de vouloir supprimer cette catgorie ? Elle sera supprime de tous les articles associs."},editPost:{ar:" ",en:"Edit Post",fr:"Modifier l'article"},newPostTitle:{ar:" ",en:"New Post",fr:"Nouvel article"},titlePlaceholder:{ar:" (    )",en:"Title (or enter an idea to generate content)",fr:"Titre (ou entrez une ide pour gnrer du contenu)"},titleInputPlaceholder:{ar:"  ...",en:"Write title here...",fr:"crivez le titre ici..."},generateInternalLinksTooltip:{ar:"    ",en:"Add internal links with AI",fr:"Ajouter des liens internes avec l'IA"},generateContentTooltip:{ar:"    ",en:"Generate article content with AI",fr:"Gnrer le contenu de l'article avec l'IA"},categoryLabel:{ar:"",en:"Category",fr:"Catgorie"},selectCategory:{ar:"--   --",en:"-- Select category --",fr:"-- Slectionner une catgorie --"},mainImageLabel:{ar:" ",en:"Main Image",fr:"Image principale"},imagePromptPlaceholder:{ar:"   ...",en:"Enter a description to generate an image...",fr:"Entrez une description pour gnrer une image..."},uploadImageButton:{ar:"  ",en:"Or upload an image",fr:"Ou tlcharger une image"},imagePreviewLabel:{ar:" ",en:"Image Preview",fr:"Aperu de l'image"},uploading:{ar:" ...",en:"Uploading...",fr:"Tlchargement..."},generatingImage:{ar:"  ...",en:"Generating image...",fr:"Gnration de l'image..."},imageCaptionPlaceholder:{ar:"   ()...",en:"Add an image caption (optional)...",fr:"Ajouter une lgende  l'image (optionnel)..."},arabicContentLabel:{ar:" ",en:"Arabic Content",fr:"Contenu en arabe"},frenchVersionLabel:{ar:" ",en:"French Version",fr:"Version franaise"},generateFrenchButton:{ar:"/    ",en:"Generate/Update French version with AI",fr:"Gnrer/Mettre  jour la version franaise avec l'IA"},frenchTitleLabel:{ar:" ()",en:"Title (French)",fr:"Titre (Franais)"},frenchTitlePlaceholder:{ar:"Titre en franais...",en:"Title in French...",fr:"Titre en franais..."},frenchContentLabel:{ar:" ()",en:"Content (French)",fr:"Contenu (Franais)"},errorEnterIdea:{ar:"      .",en:"Please enter the article idea in the title field.",fr:"Veuillez entrer l'ide de l'article dans le champ de titre."},errorContentNeededForLinks:{ar:"      .",en:"Content is required to add internal links.",fr:"Un contenu est requis pour ajouter des liens internes."},errorNoPublishedPostsForLinks:{ar:"       .",en:"There are no other published posts to link to.",fr:"Il n'y a pas d'autres articles publis  lier."},errorEnterImageDesc:{ar:"   .",en:"Please enter a description for the image.",fr:"Veuillez entrer une description pour l'image."},errorImageUploadFailed:{ar:"   .",en:"Failed to upload image.",fr:"chec du tlchargement de l'image."},errorTranslationContentNeeded:{ar:"      .",en:"Arabic title and content are required for translation.",fr:"Un titre et un contenu en arabe sont requis pour la traduction."},errorTitleContentRequired:{ar:"   .",en:"Title and content are required fields.",fr:"Le titre et le contenu sont des champs obligatoires."},developerSettingsDesc:{ar:"      API.",en:"Manage auto-posting, indexing, and API keys.",fr:"Grez la publication automatique, l'indexation et les cls API."},saveSettings:{ar:" ",en:"Save Settings",fr:"Enregistrer les paramtres"},cfWorkerContentTitle:{ar:" Cloudflare Worker ()",en:"Cloudflare Worker Settings (Content)",fr:"Paramtres Cloudflare Worker (Contenu)"},cfWorkerContentDesc:{ar:"       (Worker)     D1    R2.",en:"Connect the frontend to the backend Worker that manages the D1 database and R2 image uploads.",fr:"Connectez le frontend au Worker backend qui gre la base de donnes D1 et les tlchargements d'images R2."},cfWorkerAuthPlaceholder:{ar:"      Worker",en:"Enter the secret token you added to the Worker",fr:"Entrez le jeton secret que vous avez ajout au Worker"},cfWorkerPaymentTitle:{ar:" Cloudflare Worker ()",en:"Cloudflare Worker Settings (Payment)",fr:"Paramtres Cloudflare Worker (Paiement)"},cfWorkerPaymentDesc:{ar:"  (Worker)         (    ).",en:"This Worker is optional, required only to verify purchases (like the developer pack and paid templates).",fr:"Ce Worker est optionnel, requis uniquement pour vrifier les achats (comme le pack dveloppeur et les modles payants)."},cfWorkerPaymentAuthPlaceholder:{ar:"     ",en:"Enter the secret token for the payment worker",fr:"Entrez le jeton secret pour le worker de paiement"},ecommerceSettingsTitle:{ar:"  ",en:"E-commerce Settings",fr:"Paramtres E-commerce"},blogPath:{ar:" ",en:"Blog Path",fr:"Chemin du blog"},blogPathDesc:{ar:"         (e.g., yoursite.com/#/blog).",en:"When a store template is active, the blog will appear under this path (e.g., yoursite.com/#/blog).",fr:"Lorsqu'un modle de boutique est actif, le blog apparatra sous ce chemin (par ex., votresite.com/#/blog)."},paypalClientIdPlaceholder:{ar:"  PayPal",en:"Enter PayPal Client ID",fr:"Entrez l'ID client PayPal"},stripePublishableKeyPlaceholder:{ar:"  Stripe  ",en:"Enter Stripe Publishable Key",fr:"Entrez la cl publiable Stripe"},aiProviderSettingsTitle:{ar:"   ",en:"AI Provider Settings",fr:"Paramtres du fournisseur d'IA"},chooseProvider:{ar:" ",en:"Choose Provider",fr:"Choisir le fournisseur"},geminiApiKeyPlaceholder:{ar:"  API   Google AI",en:"Enter your Google AI API Key",fr:"Entrez votre cl API Google AI"},geminiApiDesc:{ar:'    .      <a href="https://aistudio.google.com/app/apikey" target="_blank" rel="noopener noreferrer" class="text-primary hover:underline"> </a>.',en:'Required for content and image generation features. Get a key from <a href="https://aistudio.google.com/app/apikey" target="_blank" rel="noopener noreferrer" class="text-primary hover:underline">this page</a>.',fr:`Requis pour les fonctionnalits de gnration de contenu et d'images. Obtenez une cl sur <a href="https://aistudio.google.com/app/apikey" target="_blank" rel="noopener noreferrer" class="text-primary hover:underline">cette page</a>.`},chatgptApiKeyPlaceholder:{ar:"  API   OpenAI",en:"Enter your OpenAI API Key",fr:"Entrez votre cl API OpenAI"},chatgptApiDesc:{ar:"    .",en:"Required for content and image generation features.",fr:"Requis pour les fonctionnalits de gnration de contenu et d'images."},gaSettingsTitle:{ar:"  (Google Analytics)",en:"Google Analytics",fr:"Google Analytics"},gaApiKeyPlaceholder:{ar:"  API   Google Analytics Data",en:"Enter Google Analytics Data API Key",fr:"Entrez la cl API Google Analytics Data"},gaApiDesc:{ar:"   .      Google Cloud Console.",en:"Required to fetch analytics data. You can get a key from the Google Cloud Console.",fr:"Requis pour rcuprer les donnes d'analyse. Vous pouvez obtenir une cl depuis la console Google Cloud."},autoPostTitle:{ar:"   ",en:"Auto-post New Articles",fr:"Publication automatique des nouveaux articles"},autoPostDesc:{ar:"          .",en:"When enabled, new articles will be simulated to auto-post to the selected platforms.",fr:"Lorsqu'il est activ, la publication automatique des nouveaux articles sur les plateformes slectionnes sera simule."},apiKeyPlaceholder:{ar:"  API   {platform}",en:"Enter API Key for {platform}",fr:"Entrez la cl API pour {platform}"},autoIndexTitle:{ar:"  (Google Indexing API)",en:"Auto Indexing (Google Indexing API)",fr:"Indexation automatique (API d'indexation Google)"},autoIndexLabel:{ar:"    ",en:"Enable auto-indexing for new articles",fr:"Activer l'indexation automatique pour les nouveaux articles"},googleApiKeyPlaceholder:{ar:"  API   ",en:"Enter your Google API Key here",fr:"Entrez votre cl API Google ici"},googleApiDesc:{ar:"        Google.",en:"This key will be used to send indexing requests to Google.",fr:"Cette cl sera utilise pour envoyer des demandes d'indexation  Google."},analyticsDesc:{ar:"  Google Analytics .",en:"View Google Analytics data for your site.",fr:"Affichez les donnes Google Analytics de votre site."},analyticsNotSetupTitle:{ar:"    ",en:"Analytics Feature Not Fully Set Up",fr:"Fonctionnalit d'analyse non entirement configure"},analyticsNotSetupDesc:{ar:'     "Google Analytics ID"   SEO  "API Key"   .',en:'To view real data, you must enter the "Google Analytics ID" in SEO Settings and the "API Key" in Developer Settings.',fr:`Pour afficher des donnes relles, vous devez saisir l'"ID Google Analytics" dans les paramtres SEO et la "cl API" dans les paramtres dveloppeur.`},goToSeoSettings:{ar:"   SEO",en:"Go to SEO Settings",fr:"Aller aux paramtres SEO"},goToDeveloperSettings:{ar:"   ",en:"Go to Developer Settings",fr:"Aller aux paramtres dveloppeur"},analyticsLoading:{ar:"   ...",en:"Loading analytics data...",fr:"Chargement des donnes d'analyse..."},analyticsFetchError:{ar:"     Google Analytics.",en:"Failed to fetch data from Google Analytics.",fr:"chec de la rcupration des donnes de Google Analytics."},analyticsCheckGAID:{ar:"    Google Analytics  API.",en:"Please check your Google Analytics ID and API Key.",fr:"Veuillez vrifier votre ID Google Analytics et votre cl API."},analyticsTotalUsers:{ar:"  (28 )",en:"Total Users (28 days)",fr:"Utilisateurs totals (28 jours)"},analyticsActiveUsers:{ar:" ",en:"Active Users",fr:"Utilisateurs actifs"},analyticsSessions:{ar:" (28 )",en:"Sessions (28 days)",fr:"Sessions (28 jours)"},analyticsPageViews:{ar:"  (28 )",en:"Page Views (28 days)",fr:"Vues de page (28 jours)"},marketingToolsDesc:{ar:"      .",en:"Manage embeddable tools to increase user engagement.",fr:"Grez les outils intgrables pour augmenter l'engagement des utilisateurs."},selectToolToEdit:{ar:"  ",en:"Select a tool to edit",fr:"Slectionnez un outil  modifier"},ctaBannerOption:{ar:"  ( )",en:"CTA Banner (Text & Button)",fr:"Bannire CTA (Texte et bouton)"},searchWidgetOption:{ar:"  (  )",en:"Search Widget (Search bar & Button)",fr:"Widget de recherche (Barre de recherche et bouton)"},ctaWidgetDesc:{ar:"        .",en:"Create a customizable banner to invite visitors to take a specific action.",fr:"Crez une bannire personnalisable pour inviter les visiteurs  effectuer une action spcifique."},ctaHeadline:{ar:" ",en:"Headline",fr:"Titre"},ctaButtonText:{ar:" ",en:"Button Text",fr:"Texte du bouton"},ctaButtonUrl:{ar:"  (URL)",en:"Button URL",fr:"URL du bouton"},searchWidgetDesc:{ar:"        .",en:"Create a search form that allows visitors to search for specific content.",fr:"Crez un formulaire de recherche qui permet aux visiteurs de rechercher un contenu spcifique."},searchWidgetNote:{ar:"    .   Google    Programmable Search Engine ID ",en:"These settings are for the basic search. To enable Google Custom Search, please add the Programmable Search Engine ID in",fr:"Ces paramtres concernent la recherche de base. Pour activer la recherche personnalise Google, veuillez ajouter l'ID du moteur de recherche programmable dans"},searchWidgetFormTitle:{ar:" ",en:"Form Title",fr:"Titre du formulaire"},searchWidgetInputLabel:{ar:"  ",en:"Input Field Label",fr:"tiquette du champ de saisie"},searchWidgetInputPlaceholder:{ar:"  ",en:"Input Placeholder",fr:"Texte de l'espace rserv"},searchWidgetButtonText:{ar:"  ",en:"Search Button Text",fr:"Texte du bouton de recherche"},searchWidgetSearchUrl:{ar:"   (URL)",en:"Search Destination URL",fr:"URL de destination de la recherche"},basicSearch:{ar:" ",en:"Basic Search",fr:"Recherche de base"},adsManagerTitle:{ar:" ",en:"Ads Manager",fr:"Gestion des publicits"},adsManagerDesc:{ar:"        .",en:"Create ad units and insert them anywhere on your site.",fr:"Crez des blocs d'annonces et insrez-les n'importe o sur votre site."},adsHowToUseTitle:{ar:"  Google AdSense",en:"How to use Google AdSense",fr:"Comment utiliser Google AdSense"},adsHowToUseDesc:{ar:'1.   {seoLink}   AdSense    (Publisher ID)  .<br>2.      AdSense      .<br>3.  " "         AdSense (   <code>&lt;ins class="adsbygoogle" ...&gt;</code>)   " ".<br>4.   "  "        .',en:'1. Go to {seoLink}, enable AdSense, and enter your Publisher ID.<br>2. Create an ad unit in your AdSense account and get the ad code.<br>3. Create a new "Ad Unit" here, give it a name, and paste the AdSense code (starting with <code>&lt;ins class="adsbygoogle" ...&gt;</code>) into the "Ad Code" field.<br>4. Use the "Insert Ad Unit" tool in the text editor to place your ad in posts and pages.',fr:`1. Allez dans {seoLink}, activez AdSense et entrez votre ID d'diteur.<br>2. Crez un bloc d'annonces dans votre compte AdSense et obtenez le code de l'annonce.<br>3. Crez un nouveau "Bloc d'annonces" ici, donnez-lui un nom, et collez le code AdSense (commenant par <code>&lt;ins class="adsbygoogle" ...&gt;</code>) dans le champ "Code de l'annonce".<br>4. Utilisez l'outil "Insrer un bloc d'annonces" dans l'diteur de texte pour placer votre annonce dans les articles et les pages.`},adsEditUnit:{ar:"  ",en:"Edit Ad Unit",fr:"Modifier le bloc d'annonces"},adsCreateUnit:{ar:"  ",en:"Create Ad Unit",fr:"Crer un bloc d'annonces"},adsUnitName:{ar:"  ()",en:"Unit Name (for organization)",fr:"Nom du bloc (pour l'organisation)"},adsUnitNamePlaceholder:{ar:"  ",en:"Sidebar Ad",fr:"Publicit de la barre latrale"},adsAdCode:{ar:"  (HTML/JS)",en:"Ad Code (HTML/JS)",fr:"Code de l'annonce (HTML/JS)"},adsNoUnitsTitle:{ar:"    ",en:"No Ad Units Yet",fr:"Aucun bloc d'annonces pour le moment"},adsNoUnitsDesc:{ar:"       .",en:"Use the form on the left to add your first ad unit.",fr:"Utilisez le formulaire  gauche pour ajouter votre premier bloc d'annonces."},adsConfirmDelete:{ar:"       ",en:"Are you sure you want to delete this ad unit?",fr:"tes-vous sr de vouloir supprimer ce bloc d'annonces ?"},productList:{ar:" ",en:"Product List",fr:"Liste des produits"},addNewProduct:{ar:"  ",en:"Add New Product",fr:"Ajouter un nouveau produit"},noProductsYet:{ar:"   ",en:"No Products Yet",fr:"Aucun produit pour le moment"},editProduct:{ar:" ",en:"Edit Product",fr:"Modifier le produit"},newProduct:{ar:" ",en:"New Product",fr:"Nouveau produit"},backToProducts:{ar:" ",en:"Back to Products",fr:"Retour aux produits"},updateProduct:{ar:" ",en:"Update Product",fr:"Mettre  jour le produit"},publishProduct:{ar:" ",en:"Publish Product",fr:"Publier le produit"},productName:{ar:" ",en:"Product Name",fr:"Nom du produit"},productNamePlaceholder:{ar:"   ...",en:"Enter product name here...",fr:"Entrez le nom du produit ici..."},productPrice:{ar:" ($)",en:"Price ($)",fr:"Prix ($)"},productImage:{ar:" ",en:"Product Image",fr:"Image du produit"},productDescription:{ar:" ",en:"Product Description",fr:"Description du produit"},productDescriptionPlaceholder:{ar:"   ...",en:"Enter product description here...",fr:"Entrez la description du produit ici..."},productEditorNamePriceError:{ar:"    .",en:"Product name and price are required fields.",fr:"Le nom du produit et le prix sont des champs obligatoires."}},kf=({className:n="w-6 h-6"})=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})}),GF=({className:n="w-6 h-6"})=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6A2.25 2.25 0 0 1 6 3.75h2.25A2.25 2.25 0 0 1 10.5 6v2.25a2.25 2.25 0 0 1-2.25 2.25H6a2.25 2.25 0 0 1-2.25-2.25V6ZM3.75 15.75A2.25 2.25 0 0 1 6 13.5h2.25a2.25 2.25 0 0 1 2.25 2.25V18a2.25 2.25 0 0 1-2.25 2.25H6A2.25 2.25 0 0 1 3.75 18v-2.25ZM13.5 6a2.25 2.25 0 0 1 2.25-2.25H18A2.25 2.25 0 0 1 20.25 6v2.25A2.25 2.25 0 0 1 18 10.5h-2.25a2.25 2.25 0 0 1-2.25-2.25V6ZM13.5 15.75a2.25 2.25 0 0 1 2.25-2.25H18a2.25 2.25 0 0 1 2.25 2.25V18A2.25 2.25 0 0 1 18 20.25h-2.25A2.25 2.25 0 0 1 13.5 18v-2.25Z"})}),Xu=({className:n="w-4 h-4"})=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"})}),Yr=({className:n="w-4 h-4"})=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.134-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.067-2.09.921-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"})}),op=({className:n="w-5 h-5"})=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09ZM18.259 8.715 18 9.75l-.259-1.035a3.375 3.375 0 0 0-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 0 0 2.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 0 0 2.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 0 0-2.456 2.456Z"})}),pN=({className:n="w-6 h-6"})=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"})}),HF=({className:n="w-6 h-6"})=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"})}),$F=({className:n="w-6 h-6"})=>g.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:[g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.568 3H5.25A2.25 2.25 0 0 0 3 5.25v4.318c0 .597.237 1.17.659 1.591l9.581 9.581c.699.699 1.78.872 2.607.33a18.095 18.095 0 0 0 5.223-5.223c.542-.827.369-1.908-.33-2.607L11.16 3.66A2.25 2.25 0 0 0 9.568 3Z"}),g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 6h.008v.008H6V6Z"})]}),uI=({className:n="w-6 h-6"})=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"})}),gN=({className:n="w-5 h-5"})=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 6H5.25A2.25 2.25 0 0 0 3 8.25v10.5A2.25 2.25 0 0 0 5.25 21h10.5A2.25 2.25 0 0 0 18 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25"})}),yN=({className:n="w-6 h-6"})=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 6h9.75M10.5 6a1.5 1.5 0 1 1-3 0m3 0a1.5 1.5 0 1 0-3 0M3.75 6H7.5m3 12h9.75m-9.75 0a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m-3.75 0H7.5m9-6h3.75m-3.75 0a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m-9.75 0h9.75"})}),_N=({className:n="w-4 h-4"})=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:n,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 10.5 12 3m0 0 7.5 7.5M12 3v18"})}),WF=({className:n="w-4 h-4"})=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:n,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 13.5 12 21m0 0-7.5-7.5M12 21V3"})}),KF=({className:n="w-6 h-6"})=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 6.75h12M8.25 12h12M8.25 17.25h12M3.75 6.75h.007v.008H3.75V6.75zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0zM3.75 12h.007v.008H3.75V12zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0zm-.375 5.25h.007v.008H3.75v-.008zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0z"})}),JF=({className:n="w-6 h-6"})=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m-4.5-15h9"})}),YF=({className:n="w-6 h-6"})=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 18 9 11.25l4.306 4.306a11.95 11.95 0 0 1 5.814-5.518l2.74-1.22m0 0-5.94-2.281m5.94 2.28-2.28 5.941"})}),QF=({className:n="w-6 h-6"})=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"})}),XF=({className:n="w-6 h-6"})=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.5c0-.621.504-1.125 1.125-1.125H6.75m9 9.75v-6.375c0-.621-.504-1.125-1.125-1.125H9.375c-.621 0-1.125.504-1.125 1.125v9.75m9-9.75h-3.375c-.621 0-1.125.504-1.125 1.125v6.375m3.375-6.375-1.409-1.409a2.25 2.25 0 0 0-3.182 0l-1.409 1.409m6.364 0-1.409-1.409"})}),vN=({className:n="w-6 h-6"})=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"})}),ZF=({className:n="w-6 h-6"})=>g.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:[g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.25 9.75 16.5 12l-2.25 2.25m-4.5 0L7.5 12l2.25-2.25"}),g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 20.25h12A2.25 2.25 0 0 0 20.25 18V6A2.25 2.25 0 0 0 18 3.75H6A2.25 2.25 0 0 0 3.75 6v12A2.25 2.25 0 0 0 6 20.25Z"})]}),TN=({className:n="w-6 h-6"})=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 7.5l-2.25-1.313M21 7.5v2.25m0-2.25l-2.25 1.313M3 7.5l2.25-1.313M3 7.5l2.25 1.313M3 7.5v2.25m9 3l2.25-1.313M12 12.75l-2.25 1.313M12 12.75V15m0 6.75l2.25-1.313M12 21.75V19.5m0 2.25l-2.25-1.313m0-16.875L12 2.25l2.25 1.313M12 2.25l-2.25 1.313m0 16.875L12 21.75l2.25-1.313M12 21.75l-2.25-1.313M12 2.25L9.75 3.563m2.25 16.875L9.75 19.187m0-16.875L7.5 4.875m2.25 13.5L7.5 17.625m12-13.5L17.25 4.875m2.25 13.5L17.25 17.625"})}),wN=({className:n="w-6 h-6"})=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.34 15.84c-.688-.06-1.386-.09-2.09-.09H7.5a4.5 4.5 0 0 1 0-9h.75c.704 0 1.402-.03 2.09-.09m0 9.18c.253.962.584 1.892.985 2.783.247.55.06 1.21-.463 1.511l-.657.38c-.551.318-1.26.117-1.527-.461a20.845 20.845 0 0 1-1.44-4.282m3.102.069a18.03 18.03 0 0 1-.59-4.59c0-1.82.12-3.608.34-5.364m10.502 5.364a2.25 2.25 0 0 1-2.25 2.25H15.75m-3.102.069a18.029 18.029 0 0 1 3.232-5.364m3.102 5.364 2.218-1.28a2.25 2.25 0 0 0 1.156-2.043l-.22-1.287a2.25 2.25 0 0 0-1.156-2.043l-2.218-1.28a2.25 2.25 0 0 0-2.312 0l-2.218 1.28a2.25 2.25 0 0 0-1.156 2.043l.22 1.287a2.25 2.25 0 0 0 1.156 2.043l2.218 1.28a2.25 2.25 0 0 0 2.312 0Z"})}),xN=({className:n="w-6 h-6"})=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.217 10.907a2.25 2.25 0 1 0 0 2.186m0-2.186c.18.324.283.696.283 1.093s-.103.77-.283 1.093m0-2.186 9.566-5.314m-9.566 7.5 9.566 5.314m0 0a2.25 2.25 0 1 0 3.935 2.186 2.25 2.25 0 0 0-3.935-2.186Zm0-12.814a2.25 2.25 0 1 0 3.933-2.186 2.25 2.25 0 0 0-3.933 2.186Z"})}),TT=({className:n="w-6 h-6"})=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 10.5V6a3.75 3.75 0 1 0-7.5 0v4.5m11.356-1.993 1.263 12c.07.658-.463 1.243-1.119 1.243H4.25a1.125 1.125 0 0 1-1.12-1.243l1.264-12A1.125 1.125 0 0 1 5.513 7.5h12.974c.576 0 1.059.435 1.119 1.007ZM8.625 10.5a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm7.5 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"})}),eB=({className:n="w-6 h-6"})=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.25 6.75 22.5 12l-5.25 5.25m-10.5 0L1.5 12l5.25-5.25m7.5-3-4.5 16.5"})}),EN=({className:n="w-6 h-6"})=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z"})}),tB=({className:n="w-6 h-6"})=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 21l5.25-11.25L21 21m-9-3h7.5M3 5.621a48.474 48.474 0 016-.371m0 0c1.12 0 2.233.038 3.334.114M9 5.25V3m3.334 2.364C13.18 7.061 14.087 7.5 15 7.5c1.12 0 2.233-.038 3.334-.114M12 21v-8.25M15 5.25V3m0 2.25c.813-.08 1.627-.12 2.433-.12.828 0 1.65.037 2.467.11M15 7.5c-1.12 0-2.233.038-3.334.114"})}),wT=({className:n="w-6 h-6"})=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 10.5V6.75a4.5 4.5 0 0 0-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 0 0 2.25-2.25v-6.75a2.25 2.25 0 0 0-2.25-2.25H6.75a2.25 2.25 0 0 0-2.25 2.25v6.75a2.25 2.25 0 0 0 2.25 2.25Z"})}),Tv=({className:n="w-6 h-6"})=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})}),ap=({className:n="w-5 h-5"})=>g.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:[g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7Z"}),g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})]}),nB=({className:n="w-5 h-5"})=>g.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:[g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.19 8.688a4.5 4.5 0 0 1 1.242 7.244l-4.5 4.5a4.5 4.5 0 0 1-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5 0 0 0-6.364-6.364l-4.5 4.5a4.5 4.5 0 0 0 1.242 7.244"}),g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m18.259 8.715-1.035.259a3.375 3.375 0 0 0-2.456 2.456l-.259 1.035.259 1.035a3.375 3.375 0 0 0 2.456 2.456l1.035.259-.259 1.035a3.375 3.375 0 0 0 2.456 2.456l1.035.259 1.035-.259a3.375 3.375 0 0 0 2.456-2.456l.259-1.035-.259-1.035a3.375 3.375 0 0 0-2.456-2.456l-1.035-.259 1.035-.259a3.375 3.375 0 0 0 2.456-2.456l.259-1.035-.259-1.035a3.375 3.375 0 0 0-2.456-2.456l-1.035-.259-1.035.259a3.375 3.375 0 0 0-2.456 2.456l-.259 1.035.259 1.035Z",transform:"scale(0.5) translate(-14, -14)"})]}),bN=({className:n="w-5 h-5"})=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"})}),SN=({className:n="w-6 h-6"})=>g.jsx("svg",{className:n,viewBox:"0 0 24 24",fill:"currentColor",children:g.jsx("path",{d:"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"})}),IN=({className:n="w-6 h-6"})=>g.jsx("svg",{className:n,viewBox:"0 0 24 24",fill:"currentColor",children:g.jsx("path",{d:"M14 13.5h2.5l1-4H14v-2c0-1.03 0-2 2-2h1.5V2.14c-.326-.043-1.557-.14-2.857-.14C11.928 2 10 3.657 10 6.7v2.8H7v4h3v9h4z"})}),iB=({className:n="w-6 h-6"})=>g.jsxs("svg",{className:n,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[g.jsx("rect",{x:"2",y:"2",width:"20",height:"20",rx:"5",ry:"5"}),g.jsx("path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"}),g.jsx("line",{x1:"17.5",y1:"6.5",x2:"17.51",y2:"6.5"})]}),AN=({className:n="w-6 h-6"})=>g.jsx("svg",{className:n,viewBox:"0 0 24 24",fill:"currentColor",children:g.jsx("path",{d:"M6.5 21.5h-5v-13h5v13zM4 6.5C2.5 6.5 1.5 5.3 1.5 4s1-2.4 2.5-2.4c1.6 0 2.5 1 2.6 2.4 0 1.4-1 2.5-2.6 2.5zm11.5 6c-1 0-2 1-2 2v7h-5v-13h5V10s1.6-1.5 4-1.5c3 0 5 2.2 5 6.3v6.7h-5v-7c0-1-1-2-2-2z"})}),rB=({className:n="w-6 h-6"})=>g.jsx("svg",{className:n,viewBox:"0 0 24 24",fill:"currentColor",children:g.jsx("path",{d:"M21.582 7.644a2.443 2.443 0 0 0-1.72-1.72C18.25 5.5 12 5.5 12 5.5s-6.25 0-7.862.424a2.443 2.443 0 0 0-1.72 1.72C2 9.25 2 12 2 12s0 2.75.42 4.356a2.443 2.443 0 0 0 1.72 1.72C5.75 18.5 12 18.5 12 18.5s6.25 0 7.862-.424a2.443 2.443 0 0 0 1.72-1.72C22 14.75 22 12 22 12s0-2.75-.418-4.356zM9.75 14.828V9.172L14.75 12z"})}),sB=({className:n="w-6 h-6"})=>g.jsx("svg",{className:n,viewBox:"0 0 24 24",fill:"currentColor",children:g.jsx("path",{fillRule:"evenodd",d:"M12 2C6.477 2 2 6.477 2 12c0 4.418 2.865 8.168 6.839 9.492.5.092.682-.217.682-.482 0-.237-.009-.868-.014-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.031-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.203 2.398.1 2.651.64.7 1.03 1.595 1.03 2.688 0 3.848-2.338 4.695-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.001 10.001 0 0022 12c0-5.523-4.477-10-10-10z",clipRule:"evenodd"})}),oB=({className:n="w-6 h-6"})=>g.jsx("svg",{className:n,viewBox:"0 0 24 24",fill:"currentColor",children:g.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12c0 4.29 2.84 7.93 6.7 9.4.1.02.18.02.26.02.32 0 .6-.2.7-.5.03-.1.12-.4.15-.55.03-.18.02-.38-.05-.56-.2-.55-.42-1.2-.42-1.2s-.12-.24-.12-.6c0-.56.34-.98.76-1.38.35-.34.78-.43 1.18-.43.92 0 1.7.67 1.7 1.77 0 1.07-.68 2.65-1.02 4.12-.28 1.22.6 2.22 1.8 2.22 2.18 0 3.86-2.6 3.86-5.96 0-3.08-2.1-5.2-4.9-5.2-3.34 0-5.4 2.5-5.4 5.1 0 .97.38 2 .88 2.58.1.1.12.2.1.33-.04.16-.14.54-.18.7-.05.18-.1.22-.28.1-1.02-.7-1.65-2.24-1.65-3.6 0-2.9 2.27-5.9 6.55-5.9 3.5 0 6.13 2.5 6.13 5.5 0 3.52-2.13 6.3-5.2 6.3-1.02 0-1.98-.52-2.3-1.12 0 0-.5 2-.63 2.5-.2 1.05-.3 2.22-.3 2.22s-.1.4-.02.5z"})}),aB=({className:n="w-6 h-6"})=>g.jsx("svg",{className:n,viewBox:"0 0 24 24",fill:"currentColor",children:g.jsx("path",{d:"M12 2c5.523 0 10 4.477 10 10s-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2zm3.602 9.531c-.69 0-1.25.56-1.25 1.25s.56 1.25 1.25 1.25 1.25-.56 1.25-1.25-.56-1.25-1.25-1.25zm-7.204 0c-.69 0-1.25.56-1.25 1.25s.56 1.25 1.25 1.25 1.25-.56 1.25-1.25-.56-1.25-1.25-1.25zm5.72 4.444c-.288.292-.75.32-1.076.082-.952-.705-2.203-1.09-3.522-1.09-.007 0-.014 0-.02 0-1.32 0-2.57.385-3.522 1.09-.325.238-.787.21-1.076-.082-.29-.292-.26-.75.066-1.02.996-.757 2.39-1.2 3.864-1.264l.976-3.197.008-.026a.499.499 0 0 1 .59-.395h.01c.236.035.424.23.46.467l.977 3.197c1.474.063 2.868.506 3.864 1.264.326.27.356.728.065 1.02zM12 6.188c-.69 0-1.25.56-1.25 1.25s.56 1.25 1.25 1.25 1.25-.56 1.25-1.25-.56-1.25-1.25-1.25z"})}),zt=({href:n,children:e,...t})=>{const i=r=>{r.preventDefault(),n&&(window.location.hash=n)};return g.jsx("a",{href:n,onClick:i,...t,children:e})},lB=({isOpen:n,onClose:e,onLogout:t,isDeveloperUnlocked:i,isEcommerceMode:r,isLandingPageMode:o,cmsLang:l})=>{const u=({href:y,icon:v,label:w})=>{const E=window.location.hash;let S=!1;return y==="#admin"?S=E===y||E.startsWith("#admin/posts/edit/")||E==="#admin/":S=E.startsWith(y),g.jsxs(zt,{href:y,className:`w-full flex items-center space-x-2 rtl:space-x-reverse p-3 rounded-lg transition-colors ${S?"bg-primary/10 text-primary font-semibold":"text-gray-600 hover:bg-gray-100"}`,children:[v,g.jsx("span",{children:w})]})},f=`
    bg-white text-gray-800 flex flex-col p-4 space-y-4 shrink-0 border-r border-gray-200
    fixed md:relative top-0 ${l==="ar"?"right-0":"left-0"} h-full w-64 z-50
    transition-transform duration-300 ease-in-out
    ${n?"transform translate-x-0":l==="ar"?"transform translate-x-full":"transform -translate-x-full"}
    md:translate-x-0
  `,m=Q(o?"blog":"posts",l);return g.jsxs("aside",{className:f,children:[g.jsx("div",{className:"text-2xl font-bold text-center py-4 border-b border-gray-200 text-neutral",children:Q("cmsAi",l)}),g.jsx("nav",{className:"flex-grow overflow-y-auto",children:g.jsxs("ul",{className:"space-y-2",children:[o&&g.jsx("li",{children:g.jsx(u,{href:"#admin/landing-page",icon:g.jsx(uI,{}),label:Q("landingPage",l)})}),g.jsx("li",{children:g.jsx(u,{href:"#admin",icon:g.jsx(GF,{}),label:m})}),g.jsx("li",{children:g.jsx(u,{href:"#admin/posts/new",icon:g.jsx(kf,{}),label:Q("newPost",l)})}),g.jsx("li",{children:g.jsx(u,{href:"#admin/pages",icon:g.jsx(HF,{}),label:Q("pages",l)})}),g.jsx("li",{children:g.jsx(u,{href:"#admin/categories",icon:g.jsx($F,{}),label:Q("categories",l)})}),r&&g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"pt-2 mt-2 border-t",children:g.jsx("span",{className:"px-3 text-xs font-semibold uppercase text-gray-400",children:Q("store",l)})}),g.jsx("li",{children:g.jsx(u,{href:"#admin/products",icon:g.jsx(TT,{}),label:Q("products",l)})})]}),g.jsx("div",{className:"pt-2 mt-2 border-t",children:g.jsx("span",{className:"px-3 text-xs font-semibold uppercase text-gray-400",children:Q("appearance",l)})}),g.jsx("li",{children:g.jsx(u,{href:"#admin/templates",icon:g.jsx(uI,{}),label:Q("templates",l)})}),g.jsx("li",{children:g.jsx(u,{href:"#admin/sidebar",icon:g.jsx(KF,{}),label:Q("sidebar",l)})}),g.jsx("li",{children:g.jsx(u,{href:"#admin/writing",icon:g.jsx(JF,{}),label:Q("writing",l)})}),g.jsx("li",{children:g.jsx(u,{href:"#admin/menus",icon:g.jsx(vN,{}),label:Q("menus",l)})}),g.jsx("div",{className:"pt-2 mt-2 border-t",children:g.jsx("span",{className:"px-3 text-xs font-semibold uppercase text-gray-400",children:Q("settings",l)})}),g.jsx("li",{children:g.jsx(u,{href:"#admin/seo",icon:g.jsx(YF,{}),label:Q("seo",l)})}),g.jsx("li",{children:g.jsx(u,{href:"#admin/sitemap",icon:g.jsx(xN,{}),label:Q("sitemap",l)})}),g.jsx("li",{children:g.jsx(u,{href:"#admin/accounts",icon:g.jsx(QF,{}),label:Q("accounts",l)})}),g.jsx("li",{children:g.jsx(u,{href:"#admin/related-posts",icon:g.jsx(XF,{}),label:Q("relatedPosts",l)})}),g.jsx("li",{children:g.jsx(u,{href:"#admin/marketing",icon:g.jsx(TN,{}),label:Q("marketingTools",l)})}),g.jsx("li",{children:g.jsx(u,{href:"#admin/ads",icon:g.jsx(wN,{}),label:Q("ads",l)})}),g.jsx("li",{children:g.jsx(u,{href:"#admin/system",icon:g.jsx(yN,{}),label:Q("systemSettings",l)})}),g.jsx("div",{className:"pt-2 mt-2 border-t",children:g.jsx("span",{className:"px-3 text-xs font-semibold uppercase text-gray-400",children:Q("developerTools",l)})}),g.jsx("li",{children:g.jsx(u,{href:"#admin/developer",icon:g.jsx(eB,{}),label:g.jsxs("span",{className:"flex items-center justify-between w-full",children:[g.jsx("span",{children:Q("developerSettings",l)}),!i&&g.jsx(wT,{className:"w-4 h-4 text-amber-500"})]})})}),g.jsx("li",{children:g.jsx(u,{href:"#admin/analytics",icon:g.jsx(EN,{}),label:Q("analytics",l)})})]})}),g.jsxs("div",{className:"border-t border-gray-200 pt-4 space-y-2",children:[g.jsxs(zt,{href:"#home",className:"w-full flex items-center justify-center space-x-2 rtl:space-x-reverse p-3 rounded-lg border border-gray-300 text-gray-700 hover:bg-gray-100 transition-colors text-center",children:[g.jsx(gN,{}),g.jsx("span",{children:Q("visitSite",l)})]}),g.jsx("button",{onClick:t,className:"w-full p-3 rounded-lg text-red-600 hover:bg-red-50 transition-colors text-center font-semibold",children:Q("logout",l)})]})]})},uB=({post:n,onDelete:e,cmsLang:t})=>g.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 flex items-center justify-between transition-shadow hover:shadow-lg",children:[g.jsxs("div",{className:"flex items-center space-x-4 rtl:space-x-reverse",children:[g.jsx("img",{src:n.imageUrl||"https://picsum.photos/seed/picsum/160/90",alt:n.title.ar,className:"w-40 h-24 object-cover rounded-md bg-gray-200"}),g.jsxs("div",{children:[g.jsxs("h3",{className:"text-lg font-bold text-neutral flex items-center",children:[n.title.ar,n.status==="draft"&&g.jsx("span",{className:"mr-3 rtl:ml-3 text-xs font-semibold bg-gray-200 text-gray-600 px-2 py-1 rounded-full",children:Q("draft",t)})]}),g.jsxs("p",{className:"text-sm text-gray-500",children:[Q("createdDate",t),": ",new Date(n.createdAt).toLocaleDateString("ar-EG")]})]})]}),g.jsxs("div",{className:"flex items-center space-x-2 rtl:space-x-reverse",children:[g.jsx(zt,{href:`#admin/posts/edit/${n.id}`,className:"p-2 rounded-full text-blue-600 hover:bg-blue-100 transition-colors",children:g.jsx(Xu,{className:"w-5 h-5"})}),g.jsx("button",{onClick:()=>e(n.id),className:"p-2 rounded-full text-red-600 hover:bg-red-100 transition-colors",children:g.jsx(Yr,{className:"w-5 h-5"})})]})]}),cI=({posts:n,onDelete:e,cmsLang:t})=>{const i=Q("addNewPost",t);return g.jsxs("div",{className:"p-8",children:[g.jsxs("div",{className:"flex justify-between items-center mb-6",children:[g.jsx("h1",{className:"text-3xl font-bold text-neutral",children:Q("postList",t)}),g.jsx(zt,{href:"#admin/posts/new",className:"bg-primary text-white px-4 py-2 rounded-md hover:bg-secondary",children:i})]}),n.length>0?g.jsx("div",{className:"space-y-4",children:n.sort((r,o)=>new Date(o.createdAt).getTime()-new Date(r.createdAt).getTime()).map(r=>g.jsx(uB,{post:r,onDelete:e,cmsLang:t},r.id))}):g.jsxs("div",{className:"text-center py-16 px-8 bg-white rounded-lg shadow-md",children:[g.jsx("h2",{className:"text-xl font-semibold text-gray-700",children:Q("noPostsYet",t)}),g.jsx("p",{className:"text-gray-500 mt-2",children:Q("clickToStart",t,{buttonText:i})})]})]})};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let cB,dB;function fB(){return{geminiUrl:cB,vertexUrl:dB}}function hB(n,e,t,i){var r,o;if(!(n!=null&&n.baseUrl)){const l=fB();return e?(r=l.vertexUrl)!==null&&r!==void 0?r:t:(o=l.geminiUrl)!==null&&o!==void 0?o:i}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Za{}function Ge(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(i,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){const o=e[r];return o!=null?String(o):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function h(n,e,t){for(let o=0;o<e.length-1;o++){const l=e[o];if(l.endsWith("[]")){const u=l.slice(0,-2);if(!(u in n))if(Array.isArray(t))n[u]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${l}`);if(Array.isArray(n[u])){const f=n[u];if(Array.isArray(t))for(let m=0;m<f.length;m++){const y=f[m];h(y,e.slice(o+1),t[m])}else for(const m of f)h(m,e.slice(o+1),t)}return}else if(l.endsWith("[0]")){const u=l.slice(0,-3);u in n||(n[u]=[{}]);const f=n[u];h(f[0],e.slice(o+1),t);return}(!n[l]||typeof n[l]!="object")&&(n[l]={}),n=n[l]}const i=e[e.length-1],r=n[i];if(r!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===r)return;if(typeof r=="object"&&typeof t=="object"&&r!==null&&t!==null)Object.assign(r,t);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof t=="object"&&t!==null&&!Array.isArray(t)?Object.assign(n,t):n[i]=t}function d(n,e){try{if(e.length===1&&e[0]==="_self")return n;for(let t=0;t<e.length;t++){if(typeof n!="object"||n===null)return;const i=e[t];if(i.endsWith("[]")){const r=i.slice(0,-2);if(r in n){const o=n[r];return Array.isArray(o)?o.map(l=>d(l,e.slice(t+1))):void 0}else return}else n=n[i]}return n}catch(t){if(t instanceof TypeError)return;throw t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function xT(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function mB(n){const e={},t=d(n,["operationName"]);t!=null&&h(e,["_url","operationName"],t);const i=d(n,["config"]);return i!=null&&h(e,["config"],i),e}function pB(n){const e={},t=d(n,["operationName"]);t!=null&&h(e,["operationName"],t);const i=d(n,["resourceName"]);i!=null&&h(e,["_url","resourceName"],i);const r=d(n,["config"]);return r!=null&&h(e,["config"],r),e}function gB(n){const e={},t=d(n,["operationName"]);t!=null&&h(e,["_url","operationName"],t);const i=d(n,["config"]);return i!=null&&h(e,["config"],i),e}function yB(n){const e={},t=d(n,["video","uri"]);t!=null&&h(e,["uri"],t);const i=d(n,["video","encodedVideo"]);i!=null&&h(e,["videoBytes"],xT(i));const r=d(n,["encoding"]);return r!=null&&h(e,["mimeType"],r),e}function _B(n){const e={},t=d(n,["_self"]);return t!=null&&h(e,["video"],yB(t)),e}function vB(n){const e={},t=d(n,["generatedSamples"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(l=>_B(l))),h(e,["generatedVideos"],o)}const i=d(n,["raiMediaFilteredCount"]);i!=null&&h(e,["raiMediaFilteredCount"],i);const r=d(n,["raiMediaFilteredReasons"]);return r!=null&&h(e,["raiMediaFilteredReasons"],r),e}function TB(n){const e={},t=d(n,["name"]);t!=null&&h(e,["name"],t);const i=d(n,["metadata"]);i!=null&&h(e,["metadata"],i);const r=d(n,["done"]);r!=null&&h(e,["done"],r);const o=d(n,["error"]);o!=null&&h(e,["error"],o);const l=d(n,["response","generateVideoResponse"]);return l!=null&&h(e,["response"],vB(l)),e}function wB(n){const e={},t=d(n,["gcsUri"]);t!=null&&h(e,["uri"],t);const i=d(n,["bytesBase64Encoded"]);i!=null&&h(e,["videoBytes"],xT(i));const r=d(n,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function xB(n){const e={},t=d(n,["_self"]);return t!=null&&h(e,["video"],wB(t)),e}function EB(n){const e={},t=d(n,["videos"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(l=>xB(l))),h(e,["generatedVideos"],o)}const i=d(n,["raiMediaFilteredCount"]);i!=null&&h(e,["raiMediaFilteredCount"],i);const r=d(n,["raiMediaFilteredReasons"]);return r!=null&&h(e,["raiMediaFilteredReasons"],r),e}function bB(n){const e={},t=d(n,["name"]);t!=null&&h(e,["name"],t);const i=d(n,["metadata"]);i!=null&&h(e,["metadata"],i);const r=d(n,["done"]);r!=null&&h(e,["done"],r);const o=d(n,["error"]);o!=null&&h(e,["error"],o);const l=d(n,["response"]);return l!=null&&h(e,["response"],EB(l)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var dI;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(dI||(dI={}));var fI;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(fI||(fI={}));var ln;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(ln||(ln={}));var hI;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT"})(hI||(hI={}));var mI;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(mI||(mI={}));var pI;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(pI||(pI={}));var gI;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(gI||(gI={}));var yI;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(yI||(yI={}));var _I;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(_I||(_I={}));var vI;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(vI||(vI={}));var TI;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL"})(TI||(TI={}));var wI;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(wI||(wI={}));var xI;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(xI||(xI={}));var EI;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY"})(EI||(EI={}));var bI;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(bI||(bI={}));var lp;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(lp||(lp={}));var SI;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(SI||(SI={}));var wv;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(wv||(wv={}));var II;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(II||(II={}));var AI;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(AI||(AI={}));var CI;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(CI||(CI={}));var RI;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(RI||(RI={}));var NI;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(NI||(NI={}));var PI;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(PI||(PI={}));var kI;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(kI||(kI={}));var DI;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(DI||(DI={}));var MI;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(MI||(MI={}));var VI;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(VI||(VI={}));var UI;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(UI||(UI={}));var LI;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(LI||(LI={}));var OI;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(OI||(OI={}));var FI;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(FI||(FI={}));var BI;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(BI||(BI={}));var qI;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(qI||(qI={}));var zI;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(zI||(zI={}));var jI;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(jI||(jI={}));var GI;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(GI||(GI={}));var HI;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})(HI||(HI={}));var $I;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})($I||($I={}));var WI;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(WI||(WI={}));var KI;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(KI||(KI={}));var JI;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(JI||(JI={}));var YI;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(YI||(YI={}));var QI;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(QI||(QI={}));var XI;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(XI||(XI={}));var ZI;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(ZI||(ZI={}));var eA;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(eA||(eA={}));var su;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(su||(su={}));class xv{constructor(e){const t={};for(const i of e.headers.entries())t[i[0]]=i[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class pd{get text(){var e,t,i,r,o,l,u,f;if(((r=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let m="",y=!1;const v=[];for(const w of(f=(u=(l=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||l===void 0?void 0:l.content)===null||u===void 0?void 0:u.parts)!==null&&f!==void 0?f:[]){for(const[E,S]of Object.entries(w))E!=="text"&&E!=="thought"&&(S!==null||S!==void 0)&&v.push(E);if(typeof w.text=="string"){if(typeof w.thought=="boolean"&&w.thought)continue;y=!0,m+=w.text}}return v.length>0&&console.warn(`there are non-text parts ${v} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),y?m:void 0}get data(){var e,t,i,r,o,l,u,f;if(((r=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let m="";const y=[];for(const v of(f=(u=(l=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||l===void 0?void 0:l.content)===null||u===void 0?void 0:u.parts)!==null&&f!==void 0?f:[]){for(const[w,E]of Object.entries(v))w!=="inlineData"&&(E!==null||E!==void 0)&&y.push(w);v.inlineData&&typeof v.inlineData.data=="string"&&(m+=atob(v.inlineData.data))}return y.length>0&&console.warn(`there are non-data parts ${y} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),m.length>0?btoa(m):void 0}get functionCalls(){var e,t,i,r,o,l,u,f;if(((r=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const m=(f=(u=(l=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||l===void 0?void 0:l.content)===null||u===void 0?void 0:u.parts)===null||f===void 0?void 0:f.filter(y=>y.functionCall).map(y=>y.functionCall).filter(y=>y!==void 0);if((m==null?void 0:m.length)!==0)return m}get executableCode(){var e,t,i,r,o,l,u,f,m;if(((r=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const y=(f=(u=(l=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||l===void 0?void 0:l.content)===null||u===void 0?void 0:u.parts)===null||f===void 0?void 0:f.filter(v=>v.executableCode).map(v=>v.executableCode).filter(v=>v!==void 0);if((y==null?void 0:y.length)!==0)return(m=y==null?void 0:y[0])===null||m===void 0?void 0:m.code}get codeExecutionResult(){var e,t,i,r,o,l,u,f,m;if(((r=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const y=(f=(u=(l=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||l===void 0?void 0:l.content)===null||u===void 0?void 0:u.parts)===null||f===void 0?void 0:f.filter(v=>v.codeExecutionResult).map(v=>v.codeExecutionResult).filter(v=>v!==void 0);if((y==null?void 0:y.length)!==0)return(m=y==null?void 0:y[0])===null||m===void 0?void 0:m.output}}class tA{}class nA{}class SB{}class IB{}class AB{}class CB{}class iA{}class rA{}class sA{}class RB{}class up{_fromAPIResponse({apiResponse:e,isVertexAI:t}){const i=new up;let r;const o=e;return t?r=bB(o):r=TB(o),Object.assign(i,r),i}}class oA{}class aA{}class lA{}class NB{}class PB{}class kB{}class uA{}class DB{get text(){var e,t,i;let r="",o=!1;const l=[];for(const u of(i=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&i!==void 0?i:[]){for(const[f,m]of Object.entries(u))f!=="text"&&f!=="thought"&&m!==null&&l.push(f);if(typeof u.text=="string"){if(typeof u.thought=="boolean"&&u.thought)continue;o=!0,r+=u.text}}return l.length>0&&console.warn(`there are non-text parts ${l} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),o?r:void 0}get data(){var e,t,i;let r="";const o=[];for(const l of(i=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&i!==void 0?i:[]){for(const[u,f]of Object.entries(l))u!=="inlineData"&&f!==null&&o.push(u);l.inlineData&&typeof l.inlineData.data=="string"&&(r+=atob(l.inlineData.data))}return o.length>0&&console.warn(`there are non-data parts ${o} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class MB{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function It(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function CN(n,e){const t=It(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function RN(n){return Array.isArray(n)?n.map(e=>cp(e)):[cp(n)]}function cp(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function NN(n){const e=cp(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function PN(n){const e=cp(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function cA(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function kN(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>cA(e)):[cA(n)]}function Ev(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function dA(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function fA(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function ni(n){if(n==null)throw new Error("ContentUnion is required");return Ev(n)?n:{role:"user",parts:kN(n)}}function ET(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const i=ni(t);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(n.isVertexAI()){const t=ni(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>ni(t)):[ni(e)]}function Zi(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(dA(n)||fA(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[ni(n)]}const e=[],t=[],i=Ev(n[0]);for(const r of n){const o=Ev(r);if(o!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(o)e.push(r);else{if(dA(r)||fA(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(r)}}return i||e.push({role:"user",parts:kN(t)}),e}function VB(n,e){n.includes("null")&&(e.nullable=!0);const t=n.filter(i=>i!=="null");if(t.length===1)e.type=Object.values(ln).includes(t[0].toUpperCase())?t[0].toUpperCase():ln.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const i of t)e.anyOf.push({type:Object.values(ln).includes(i.toUpperCase())?i.toUpperCase():ln.TYPE_UNSPECIFIED})}}function fu(n){const e={},t=["items"],i=["anyOf"],r=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const o=n.anyOf;o!=null&&o.length==2&&(o[0].type==="null"?(e.nullable=!0,n=o[1]):o[1].type==="null"&&(e.nullable=!0,n=o[0])),n.type instanceof Array&&VB(n.type,e);for(const[l,u]of Object.entries(n))if(u!=null)if(l=="type"){if(u==="null")throw new Error("type: null can not be the only possible type for the field.");if(u instanceof Array)continue;e.type=Object.values(ln).includes(u.toUpperCase())?u.toUpperCase():ln.TYPE_UNSPECIFIED}else if(t.includes(l))e[l]=fu(u);else if(i.includes(l)){const f=[];for(const m of u){if(m.type=="null"){e.nullable=!0;continue}f.push(fu(m))}e[l]=f}else if(r.includes(l)){const f={};for(const[m,y]of Object.entries(u))f[m]=fu(y);e[l]=f}else{if(l==="additionalProperties")continue;e[l]=u}return e}function bT(n){return fu(n)}function ST(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function IT(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function Zu(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=fu(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=fu(e.response));return n}function ec(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const t of n)e.push(t);return e}function UB(n,e,t,i=1){const r=!e.startsWith(`${t}/`)&&e.split("/").length===i;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:r?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:r?`${t}/${e}`:e}function Us(n,e){if(typeof e!="string")throw new Error("name must be a string");return UB(n,e,"cachedContents")}function DN(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function el(n){return xT(n)}function LB(n){return n!=null&&typeof n=="object"&&"name"in n}function OB(n){return n!=null&&typeof n=="object"&&"video"in n}function FB(n){return n!=null&&typeof n=="object"&&"uri"in n}function MN(n){var e;let t;if(LB(n)&&(t=n.name),!(FB(n)&&(t=n.uri,t===void 0))&&!(OB(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const r=t.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${t}`);t=r[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function VN(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function UN(n){for(const e of["models","tunedModels","publisherModels"])if(BB(n,e))return n[e];return[]}function BB(n,e){return n!==null&&typeof n=="object"&&e in n}function qB(n,e={}){const t=n,i={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return t.outputSchema&&(i.responseJsonSchema=t.outputSchema),e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function zB(n,e={}){const t=[],i=new Set;for(const r of n){const o=r.name;if(i.has(o))throw new Error(`Duplicate function name ${o} found in MCP tools. Please ensure function names are unique.`);i.add(o);const l=qB(r,e);l.functionDeclarations&&t.push(...l.functionDeclarations)}return{functionDeclarations:t}}function LN(n,e){let t;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))t={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))t={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))t={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");t={inlinedRequests:e}}else t=e;const i=[t.gcsUri,t.bigqueryUri].filter(Boolean).length,r=[t.inlinedRequests,t.fileName].filter(Boolean).length;if(n.isVertexAI()){if(r>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return t}function jB(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function ON(n){if(typeof n!="object"||n===null)return{};const e=n,t=e.inlinedResponses;if(typeof t!="object"||t===null)return n;const r=t.inlinedResponses;if(!Array.isArray(r)||r.length===0)return n;let o=!1;for(const l of r){if(typeof l!="object"||l===null)continue;const f=l.response;if(typeof f!="object"||f===null)continue;if(f.embedding!==void 0){o=!0;break}}return o&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function tc(n,e){const t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function FN(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function GB(n){const e={},t=d(n,["fps"]);t!=null&&h(e,["fps"],t);const i=d(n,["endOffset"]);i!=null&&h(e,["endOffset"],i);const r=d(n,["startOffset"]);return r!=null&&h(e,["startOffset"],r),e}function HB(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=d(n,["data"]);t!=null&&h(e,["data"],t);const i=d(n,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function $B(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=d(n,["fileUri"]);t!=null&&h(e,["fileUri"],t);const i=d(n,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function WB(n){const e={},t=d(n,["id"]);t!=null&&h(e,["id"],t);const i=d(n,["args"]);i!=null&&h(e,["args"],i);const r=d(n,["name"]);return r!=null&&h(e,["name"],r),e}function KB(n){const e={},t=d(n,["videoMetadata"]);t!=null&&h(e,["videoMetadata"],GB(t));const i=d(n,["thought"]);i!=null&&h(e,["thought"],i);const r=d(n,["inlineData"]);r!=null&&h(e,["inlineData"],HB(r));const o=d(n,["fileData"]);o!=null&&h(e,["fileData"],$B(o));const l=d(n,["thoughtSignature"]);l!=null&&h(e,["thoughtSignature"],l);const u=d(n,["functionCall"]);u!=null&&h(e,["functionCall"],WB(u));const f=d(n,["codeExecutionResult"]);f!=null&&h(e,["codeExecutionResult"],f);const m=d(n,["executableCode"]);m!=null&&h(e,["executableCode"],m);const y=d(n,["functionResponse"]);y!=null&&h(e,["functionResponse"],y);const v=d(n,["text"]);return v!=null&&h(e,["text"],v),e}function BN(n){const e={},t=d(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(o=>KB(o))),h(e,["parts"],r)}const i=d(n,["role"]);return i!=null&&h(e,["role"],i),e}function JB(n){const e={},t=d(n,["anyOf"]);t!=null&&h(e,["anyOf"],t);const i=d(n,["default"]);i!=null&&h(e,["default"],i);const r=d(n,["description"]);r!=null&&h(e,["description"],r);const o=d(n,["enum"]);o!=null&&h(e,["enum"],o);const l=d(n,["example"]);l!=null&&h(e,["example"],l);const u=d(n,["format"]);u!=null&&h(e,["format"],u);const f=d(n,["items"]);f!=null&&h(e,["items"],f);const m=d(n,["maxItems"]);m!=null&&h(e,["maxItems"],m);const y=d(n,["maxLength"]);y!=null&&h(e,["maxLength"],y);const v=d(n,["maxProperties"]);v!=null&&h(e,["maxProperties"],v);const w=d(n,["maximum"]);w!=null&&h(e,["maximum"],w);const E=d(n,["minItems"]);E!=null&&h(e,["minItems"],E);const S=d(n,["minLength"]);S!=null&&h(e,["minLength"],S);const b=d(n,["minProperties"]);b!=null&&h(e,["minProperties"],b);const A=d(n,["minimum"]);A!=null&&h(e,["minimum"],A);const C=d(n,["nullable"]);C!=null&&h(e,["nullable"],C);const R=d(n,["pattern"]);R!=null&&h(e,["pattern"],R);const L=d(n,["properties"]);L!=null&&h(e,["properties"],L);const q=d(n,["propertyOrdering"]);q!=null&&h(e,["propertyOrdering"],q);const z=d(n,["required"]);z!=null&&h(e,["required"],z);const H=d(n,["title"]);H!=null&&h(e,["title"],H);const O=d(n,["type"]);return O!=null&&h(e,["type"],O),e}function YB(n){const e={};if(d(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const t=d(n,["category"]);t!=null&&h(e,["category"],t);const i=d(n,["threshold"]);return i!=null&&h(e,["threshold"],i),e}function QB(n){const e={},t=d(n,["behavior"]);t!=null&&h(e,["behavior"],t);const i=d(n,["description"]);i!=null&&h(e,["description"],i);const r=d(n,["name"]);r!=null&&h(e,["name"],r);const o=d(n,["parameters"]);o!=null&&h(e,["parameters"],o);const l=d(n,["parametersJsonSchema"]);l!=null&&h(e,["parametersJsonSchema"],l);const u=d(n,["response"]);u!=null&&h(e,["response"],u);const f=d(n,["responseJsonSchema"]);return f!=null&&h(e,["responseJsonSchema"],f),e}function XB(n){const e={},t=d(n,["startTime"]);t!=null&&h(e,["startTime"],t);const i=d(n,["endTime"]);return i!=null&&h(e,["endTime"],i),e}function ZB(n){const e={},t=d(n,["timeRangeFilter"]);if(t!=null&&h(e,["timeRangeFilter"],XB(t)),d(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function e8(n){const e={},t=d(n,["mode"]);t!=null&&h(e,["mode"],t);const i=d(n,["dynamicThreshold"]);return i!=null&&h(e,["dynamicThreshold"],i),e}function t8(n){const e={},t=d(n,["dynamicRetrievalConfig"]);return t!=null&&h(e,["dynamicRetrievalConfig"],e8(t)),e}function n8(){return{}}function i8(n){const e={},t=d(n,["environment"]);return t!=null&&h(e,["environment"],t),e}function r8(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let f=t;Array.isArray(f)&&(f=f.map(m=>QB(m))),h(e,["functionDeclarations"],f)}if(d(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=d(n,["googleSearch"]);i!=null&&h(e,["googleSearch"],ZB(i));const r=d(n,["googleSearchRetrieval"]);if(r!=null&&h(e,["googleSearchRetrieval"],t8(r)),d(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(d(n,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");d(n,["urlContext"])!=null&&h(e,["urlContext"],n8());const l=d(n,["computerUse"]);l!=null&&h(e,["computerUse"],i8(l));const u=d(n,["codeExecution"]);return u!=null&&h(e,["codeExecution"],u),e}function s8(n){const e={},t=d(n,["mode"]);t!=null&&h(e,["mode"],t);const i=d(n,["allowedFunctionNames"]);return i!=null&&h(e,["allowedFunctionNames"],i),e}function o8(n){const e={},t=d(n,["latitude"]);t!=null&&h(e,["latitude"],t);const i=d(n,["longitude"]);return i!=null&&h(e,["longitude"],i),e}function a8(n){const e={},t=d(n,["latLng"]);t!=null&&h(e,["latLng"],o8(t));const i=d(n,["languageCode"]);return i!=null&&h(e,["languageCode"],i),e}function l8(n){const e={},t=d(n,["functionCallingConfig"]);t!=null&&h(e,["functionCallingConfig"],s8(t));const i=d(n,["retrievalConfig"]);return i!=null&&h(e,["retrievalConfig"],a8(i)),e}function u8(n){const e={},t=d(n,["voiceName"]);return t!=null&&h(e,["voiceName"],t),e}function qN(n){const e={},t=d(n,["prebuiltVoiceConfig"]);return t!=null&&h(e,["prebuiltVoiceConfig"],u8(t)),e}function c8(n){const e={},t=d(n,["speaker"]);t!=null&&h(e,["speaker"],t);const i=d(n,["voiceConfig"]);return i!=null&&h(e,["voiceConfig"],qN(i)),e}function d8(n){const e={},t=d(n,["speakerVoiceConfigs"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>c8(r))),h(e,["speakerVoiceConfigs"],i)}return e}function f8(n){const e={},t=d(n,["voiceConfig"]);t!=null&&h(e,["voiceConfig"],qN(t));const i=d(n,["multiSpeakerVoiceConfig"]);i!=null&&h(e,["multiSpeakerVoiceConfig"],d8(i));const r=d(n,["languageCode"]);return r!=null&&h(e,["languageCode"],r),e}function h8(n){const e={},t=d(n,["includeThoughts"]);t!=null&&h(e,["includeThoughts"],t);const i=d(n,["thinkingBudget"]);return i!=null&&h(e,["thinkingBudget"],i),e}function m8(n,e,t){const i={},r=d(e,["systemInstruction"]);t!==void 0&&r!=null&&h(t,["systemInstruction"],BN(ni(r)));const o=d(e,["temperature"]);o!=null&&h(i,["temperature"],o);const l=d(e,["topP"]);l!=null&&h(i,["topP"],l);const u=d(e,["topK"]);u!=null&&h(i,["topK"],u);const f=d(e,["candidateCount"]);f!=null&&h(i,["candidateCount"],f);const m=d(e,["maxOutputTokens"]);m!=null&&h(i,["maxOutputTokens"],m);const y=d(e,["stopSequences"]);y!=null&&h(i,["stopSequences"],y);const v=d(e,["responseLogprobs"]);v!=null&&h(i,["responseLogprobs"],v);const w=d(e,["logprobs"]);w!=null&&h(i,["logprobs"],w);const E=d(e,["presencePenalty"]);E!=null&&h(i,["presencePenalty"],E);const S=d(e,["frequencyPenalty"]);S!=null&&h(i,["frequencyPenalty"],S);const b=d(e,["seed"]);b!=null&&h(i,["seed"],b);const A=d(e,["responseMimeType"]);A!=null&&h(i,["responseMimeType"],A);const C=d(e,["responseSchema"]);C!=null&&h(i,["responseSchema"],JB(bT(C)));const R=d(e,["responseJsonSchema"]);if(R!=null&&h(i,["responseJsonSchema"],R),d(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(d(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const L=d(e,["safetySettings"]);if(t!==void 0&&L!=null){let J=L;Array.isArray(J)&&(J=J.map(M=>YB(M))),h(t,["safetySettings"],J)}const q=d(e,["tools"]);if(t!==void 0&&q!=null){let J=ec(q);Array.isArray(J)&&(J=J.map(M=>r8(Zu(M)))),h(t,["tools"],J)}const z=d(e,["toolConfig"]);if(t!==void 0&&z!=null&&h(t,["toolConfig"],l8(z)),d(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const H=d(e,["cachedContent"]);t!==void 0&&H!=null&&h(t,["cachedContent"],Us(n,H));const O=d(e,["responseModalities"]);O!=null&&h(i,["responseModalities"],O);const V=d(e,["mediaResolution"]);V!=null&&h(i,["mediaResolution"],V);const U=d(e,["speechConfig"]);if(U!=null&&h(i,["speechConfig"],f8(ST(U))),d(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const j=d(e,["thinkingConfig"]);return j!=null&&h(i,["thinkingConfig"],h8(j)),i}function p8(n,e){const t={},i=d(e,["model"]);i!=null&&h(t,["request","model"],It(n,i));const r=d(e,["contents"]);if(r!=null){let l=Zi(r);Array.isArray(l)&&(l=l.map(u=>BN(u))),h(t,["request","contents"],l)}const o=d(e,["config"]);return o!=null&&h(t,["request","generationConfig"],m8(n,o,t)),t}function g8(n,e){const t={};if(d(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(d(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(d(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=d(e,["fileName"]);i!=null&&h(t,["fileName"],i);const r=d(e,["inlinedRequests"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>p8(n,l))),h(t,["requests","requests"],o)}return t}function y8(n,e){const t={},i=d(n,["displayName"]);if(e!==void 0&&i!=null&&h(e,["batch","displayName"],i),d(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function w_(n,e){const t={},i=d(e,["model"]);i!=null&&h(t,["_url","model"],It(n,i));const r=d(e,["src"]);r!=null&&h(t,["batch","inputConfig"],g8(n,LN(n,r)));const o=d(e,["config"]);return o!=null&&h(t,["config"],y8(o,t)),t}function _8(n,e){const t={},i=d(n,["taskType"]);e!==void 0&&i!=null&&h(e,["requests[]","taskType"],i);const r=d(n,["title"]);e!==void 0&&r!=null&&h(e,["requests[]","title"],r);const o=d(n,["outputDimensionality"]);if(e!==void 0&&o!=null&&h(e,["requests[]","outputDimensionality"],o),d(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(d(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function v8(n,e){const t={},i=d(e,["contents"]);i!=null&&h(t,["requests[]","request","content"],ET(n,i));const r=d(e,["config"]);return r!=null&&h(t,["config"],_8(r,t)),t}function T8(n,e){const t={},i=d(e,["fileName"]);i!=null&&h(t,["file_name"],i);const r=d(e,["inlinedRequests"]);return r!=null&&h(t,["requests"],v8(n,r)),t}function w8(n,e){const t={},i=d(n,["displayName"]);return e!==void 0&&i!=null&&h(e,["batch","displayName"],i),t}function x_(n,e){const t={},i=d(e,["model"]);i!=null&&h(t,["_url","model"],It(n,i));const r=d(e,["src"]);r!=null&&h(t,["batch","inputConfig"],T8(n,r));const o=d(e,["config"]);return o!=null&&h(t,["config"],w8(o,t)),t}function x8(n,e){const t={},i=d(e,["name"]);i!=null&&h(t,["_url","name"],tc(n,i));const r=d(e,["config"]);return r!=null&&h(t,["config"],r),t}function E8(n,e){const t={},i=d(e,["name"]);i!=null&&h(t,["_url","name"],tc(n,i));const r=d(e,["config"]);return r!=null&&h(t,["config"],r),t}function b8(n,e){const t={},i=d(n,["pageSize"]);e!==void 0&&i!=null&&h(e,["_query","pageSize"],i);const r=d(n,["pageToken"]);if(e!==void 0&&r!=null&&h(e,["_query","pageToken"],r),d(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function S8(n){const e={},t=d(n,["config"]);return t!=null&&h(e,["config"],b8(t,e)),e}function I8(n,e){const t={},i=d(e,["name"]);i!=null&&h(t,["_url","name"],tc(n,i));const r=d(e,["config"]);return r!=null&&h(t,["config"],r),t}function A8(n){const e={},t=d(n,["format"]);t!=null&&h(e,["instancesFormat"],t);const i=d(n,["gcsUri"]);i!=null&&h(e,["gcsSource","uris"],i);const r=d(n,["bigqueryUri"]);if(r!=null&&h(e,["bigquerySource","inputUri"],r),d(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(d(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function C8(n){const e={},t=d(n,["format"]);t!=null&&h(e,["predictionsFormat"],t);const i=d(n,["gcsUri"]);i!=null&&h(e,["gcsDestination","outputUriPrefix"],i);const r=d(n,["bigqueryUri"]);if(r!=null&&h(e,["bigqueryDestination","outputUri"],r),d(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(d(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(d(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function R8(n,e){const t={},i=d(n,["displayName"]);e!==void 0&&i!=null&&h(e,["displayName"],i);const r=d(n,["dest"]);return e!==void 0&&r!=null&&h(e,["outputConfig"],C8(jB(r))),t}function N8(n,e){const t={},i=d(e,["model"]);i!=null&&h(t,["model"],It(n,i));const r=d(e,["src"]);r!=null&&h(t,["inputConfig"],A8(LN(n,r)));const o=d(e,["config"]);return o!=null&&h(t,["config"],R8(o,t)),t}function P8(n,e){const t={},i=d(e,["name"]);i!=null&&h(t,["_url","name"],tc(n,i));const r=d(e,["config"]);return r!=null&&h(t,["config"],r),t}function k8(n,e){const t={},i=d(e,["name"]);i!=null&&h(t,["_url","name"],tc(n,i));const r=d(e,["config"]);return r!=null&&h(t,["config"],r),t}function D8(n,e){const t={},i=d(n,["pageSize"]);e!==void 0&&i!=null&&h(e,["_query","pageSize"],i);const r=d(n,["pageToken"]);e!==void 0&&r!=null&&h(e,["_query","pageToken"],r);const o=d(n,["filter"]);return e!==void 0&&o!=null&&h(e,["_query","filter"],o),t}function M8(n){const e={},t=d(n,["config"]);return t!=null&&h(e,["config"],D8(t,e)),e}function V8(n,e){const t={},i=d(e,["name"]);i!=null&&h(t,["_url","name"],tc(n,i));const r=d(e,["config"]);return r!=null&&h(t,["config"],r),t}function U8(n){const e={},t=d(n,["fps"]);t!=null&&h(e,["fps"],t);const i=d(n,["endOffset"]);i!=null&&h(e,["endOffset"],i);const r=d(n,["startOffset"]);return r!=null&&h(e,["startOffset"],r),e}function L8(n){const e={},t=d(n,["data"]);t!=null&&h(e,["data"],t);const i=d(n,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function O8(n){const e={},t=d(n,["fileUri"]);t!=null&&h(e,["fileUri"],t);const i=d(n,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function F8(n){const e={},t=d(n,["id"]);t!=null&&h(e,["id"],t);const i=d(n,["args"]);i!=null&&h(e,["args"],i);const r=d(n,["name"]);return r!=null&&h(e,["name"],r),e}function B8(n){const e={},t=d(n,["videoMetadata"]);t!=null&&h(e,["videoMetadata"],U8(t));const i=d(n,["thought"]);i!=null&&h(e,["thought"],i);const r=d(n,["inlineData"]);r!=null&&h(e,["inlineData"],L8(r));const o=d(n,["fileData"]);o!=null&&h(e,["fileData"],O8(o));const l=d(n,["thoughtSignature"]);l!=null&&h(e,["thoughtSignature"],l);const u=d(n,["functionCall"]);u!=null&&h(e,["functionCall"],F8(u));const f=d(n,["codeExecutionResult"]);f!=null&&h(e,["codeExecutionResult"],f);const m=d(n,["executableCode"]);m!=null&&h(e,["executableCode"],m);const y=d(n,["functionResponse"]);y!=null&&h(e,["functionResponse"],y);const v=d(n,["text"]);return v!=null&&h(e,["text"],v),e}function q8(n){const e={},t=d(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(o=>B8(o))),h(e,["parts"],r)}const i=d(n,["role"]);return i!=null&&h(e,["role"],i),e}function z8(n){const e={},t=d(n,["citationSources"]);return t!=null&&h(e,["citations"],t),e}function j8(n){const e={},t=d(n,["retrievedUrl"]);t!=null&&h(e,["retrievedUrl"],t);const i=d(n,["urlRetrievalStatus"]);return i!=null&&h(e,["urlRetrievalStatus"],i),e}function G8(n){const e={},t=d(n,["urlMetadata"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>j8(r))),h(e,["urlMetadata"],i)}return e}function H8(n){const e={},t=d(n,["content"]);t!=null&&h(e,["content"],q8(t));const i=d(n,["citationMetadata"]);i!=null&&h(e,["citationMetadata"],z8(i));const r=d(n,["tokenCount"]);r!=null&&h(e,["tokenCount"],r);const o=d(n,["finishReason"]);o!=null&&h(e,["finishReason"],o);const l=d(n,["urlContextMetadata"]);l!=null&&h(e,["urlContextMetadata"],G8(l));const u=d(n,["avgLogprobs"]);u!=null&&h(e,["avgLogprobs"],u);const f=d(n,["groundingMetadata"]);f!=null&&h(e,["groundingMetadata"],f);const m=d(n,["index"]);m!=null&&h(e,["index"],m);const y=d(n,["logprobsResult"]);y!=null&&h(e,["logprobsResult"],y);const v=d(n,["safetyRatings"]);return v!=null&&h(e,["safetyRatings"],v),e}function $8(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const i=d(n,["candidates"]);if(i!=null){let f=i;Array.isArray(f)&&(f=f.map(m=>H8(m))),h(e,["candidates"],f)}const r=d(n,["modelVersion"]);r!=null&&h(e,["modelVersion"],r);const o=d(n,["promptFeedback"]);o!=null&&h(e,["promptFeedback"],o);const l=d(n,["responseId"]);l!=null&&h(e,["responseId"],l);const u=d(n,["usageMetadata"]);return u!=null&&h(e,["usageMetadata"],u),e}function AT(n){const e={},t=d(n,["details"]);t!=null&&h(e,["details"],t);const i=d(n,["code"]);i!=null&&h(e,["code"],i);const r=d(n,["message"]);return r!=null&&h(e,["message"],r),e}function W8(n){const e={},t=d(n,["response"]);t!=null&&h(e,["response"],$8(t));const i=d(n,["error"]);return i!=null&&h(e,["error"],AT(i)),e}function K8(n){const e={},t=d(n,["values"]);return t!=null&&h(e,["values"],t),e}function J8(n){const e={},t=d(n,["embedding"]);t!=null&&h(e,["embedding"],K8(t));const i=d(n,["tokenCount"]);return i!=null&&h(e,["tokenCount"],i),e}function Y8(n){const e={},t=d(n,["response"]);t!=null&&h(e,["response"],J8(t));const i=d(n,["error"]);return i!=null&&h(e,["error"],AT(i)),e}function Q8(n){const e={},t=d(n,["responsesFile"]);t!=null&&h(e,["fileName"],t);const i=d(n,["inlinedResponses","inlinedResponses"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>W8(l))),h(e,["inlinedResponses"],o)}const r=d(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>Y8(l))),h(e,["inlinedEmbedContentResponses"],o)}return e}function iu(n){const e={},t=d(n,["name"]);t!=null&&h(e,["name"],t);const i=d(n,["metadata","displayName"]);i!=null&&h(e,["displayName"],i);const r=d(n,["metadata","state"]);r!=null&&h(e,["state"],FN(r));const o=d(n,["metadata","createTime"]);o!=null&&h(e,["createTime"],o);const l=d(n,["metadata","endTime"]);l!=null&&h(e,["endTime"],l);const u=d(n,["metadata","updateTime"]);u!=null&&h(e,["updateTime"],u);const f=d(n,["metadata","model"]);f!=null&&h(e,["model"],f);const m=d(n,["metadata","output"]);return m!=null&&h(e,["dest"],Q8(ON(m))),e}function X8(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const i=d(n,["nextPageToken"]);i!=null&&h(e,["nextPageToken"],i);const r=d(n,["operations"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>iu(l))),h(e,["batchJobs"],o)}return e}function Z8(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const i=d(n,["name"]);i!=null&&h(e,["name"],i);const r=d(n,["done"]);r!=null&&h(e,["done"],r);const o=d(n,["error"]);return o!=null&&h(e,["error"],AT(o)),e}function zN(n){const e={},t=d(n,["details"]);t!=null&&h(e,["details"],t);const i=d(n,["code"]);i!=null&&h(e,["code"],i);const r=d(n,["message"]);return r!=null&&h(e,["message"],r),e}function e9(n){const e={},t=d(n,["instancesFormat"]);t!=null&&h(e,["format"],t);const i=d(n,["gcsSource","uris"]);i!=null&&h(e,["gcsUri"],i);const r=d(n,["bigquerySource","inputUri"]);return r!=null&&h(e,["bigqueryUri"],r),e}function t9(n){const e={},t=d(n,["predictionsFormat"]);t!=null&&h(e,["format"],t);const i=d(n,["gcsDestination","outputUriPrefix"]);i!=null&&h(e,["gcsUri"],i);const r=d(n,["bigqueryDestination","outputUri"]);return r!=null&&h(e,["bigqueryUri"],r),e}function bv(n){const e={},t=d(n,["name"]);t!=null&&h(e,["name"],t);const i=d(n,["displayName"]);i!=null&&h(e,["displayName"],i);const r=d(n,["state"]);r!=null&&h(e,["state"],FN(r));const o=d(n,["error"]);o!=null&&h(e,["error"],zN(o));const l=d(n,["createTime"]);l!=null&&h(e,["createTime"],l);const u=d(n,["startTime"]);u!=null&&h(e,["startTime"],u);const f=d(n,["endTime"]);f!=null&&h(e,["endTime"],f);const m=d(n,["updateTime"]);m!=null&&h(e,["updateTime"],m);const y=d(n,["model"]);y!=null&&h(e,["model"],y);const v=d(n,["inputConfig"]);v!=null&&h(e,["src"],e9(v));const w=d(n,["outputConfig"]);return w!=null&&h(e,["dest"],t9(ON(w))),e}function n9(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const i=d(n,["nextPageToken"]);i!=null&&h(e,["nextPageToken"],i);const r=d(n,["batchPredictionJobs"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>bv(l))),h(e,["batchJobs"],o)}return e}function i9(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const i=d(n,["name"]);i!=null&&h(e,["name"],i);const r=d(n,["done"]);r!=null&&h(e,["done"],r);const o=d(n,["error"]);return o!=null&&h(e,["error"],zN(o)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var $a;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})($a||($a={}));class Df{constructor(e,t,i,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,i,r)}init(e,t,i){var r,o;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=t==null?void 0:t.sdkHttpResponse,this.idxInternal=0;let l={config:{}};!i||Object.keys(i).length===0?l={config:{}}:typeof i=="object"?l=Object.assign({},i):l=i,l.config&&(l.config.pageToken=t.nextPageToken),this.paramsInternal=l,this.pageInternalSize=(o=(r=l.config)===null||r===void 0?void 0:r.pageSize)!==null&&o!==void 0?o:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class r9 extends Za{constructor(e){super(),this.apiClient=e,this.create=async t=>{var i,r;if(this.apiClient.isVertexAI())return t.config=this.formatDestination(t.src,t.config),this.createInternal(t);const o=t.src;if(!(Array.isArray(t.src)||o.inlinedRequests!==void 0))return this.createInternal(t);const u=this.createInlinedGenerateContentRequest(t),f=u.path,m=u.body,y=w_(this.apiClient,t)._query||{};return this.apiClient.request({path:f,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(w=>w.json()).then(w=>iu(w))},this.createEmbeddings=async t=>{var i,r;if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");if(!(t.src.inlinedRequests!==void 0))return this.createEmbeddingsInternal(t);const u=this.createInlinedEmbedContentRequest(t),f=u.path,m=u.body,y=x_(this.apiClient,t)._query||{};return this.apiClient.request({path:f,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(w=>w.json()).then(w=>iu(w))},this.list=async(t={})=>new Df($a.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(t),t)}createInlinedGenerateContentRequest(e){const t=w_(this.apiClient,e),i=t._url,r=Ge("{model}:batchGenerateContent",i),u=t.batch.inputConfig.requests,f=u.requests,m=[];for(const y of f){const v=Object.assign({},y);if(v.systemInstruction){const w=v.systemInstruction;delete v.systemInstruction;const E=v.request;E.systemInstruction=w,v.request=E}m.push(v)}return u.requests=m,delete t.config,delete t._url,delete t._query,{path:r,body:t}}createInlinedEmbedContentRequest(e){const t=x_(this.apiClient,e),i=t._url,r=Ge("{model}:asyncBatchEmbedContent",i),u=t.batch.inputConfig.requests,f=u.requests,m=[];delete u.config;for(const y of f){const v=Object.assign({},y),w=v.request;for(const E in v)E!=="request"&&(w[E]=v[E],delete v[E]);m.push(v)}return u.requests=m,delete t.config,delete t._url,delete t._query,{path:r,body:t}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,t){const i=t?Object.assign({},t):{},r=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${r}`),i.dest===void 0){const o=this.getGcsUri(e),l=this.getBigqueryUri(e);if(o)o.endsWith(".jsonl")?i.dest=`${o.slice(0,-6)}/dest`:i.dest=`${o}_dest_${r}`;else if(l)i.dest=`${l}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(e){var t,i,r,o;let l,u="",f={};if(this.apiClient.isVertexAI()){const m=N8(this.apiClient,e);return u=Ge("batchPredictionJobs",m._url),f=m._query,delete m.config,delete m._url,delete m._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),l.then(y=>bv(y))}else{const m=w_(this.apiClient,e);return u=Ge("{model}:batchGenerateContent",m._url),f=m._query,delete m.config,delete m._url,delete m._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),l.then(y=>iu(y))}}async createEmbeddingsInternal(e){var t,i;let r,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=x_(this.apiClient,e);return o=Ge("{model}:asyncBatchEmbedContent",u._url),l=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),r.then(f=>iu(f))}}async get(e){var t,i,r,o;let l,u="",f={};if(this.apiClient.isVertexAI()){const m=P8(this.apiClient,e);return u=Ge("batchPredictionJobs/{name}",m._url),f=m._query,delete m.config,delete m._url,delete m._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),l.then(y=>bv(y))}else{const m=x8(this.apiClient,e);return u=Ge("batches/{name}",m._url),f=m._query,delete m.config,delete m._url,delete m._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),l.then(y=>iu(y))}}async cancel(e){var t,i,r,o;let l="",u={};if(this.apiClient.isVertexAI()){const f=k8(this.apiClient,e);l=Ge("batchPredictionJobs/{name}:cancel",f._url),u=f._query,delete f.config,delete f._url,delete f._query,await this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const f=E8(this.apiClient,e);l=Ge("batches/{name}:cancel",f._url),u=f._query,delete f.config,delete f._url,delete f._query,await this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var t,i,r,o;let l,u="",f={};if(this.apiClient.isVertexAI()){const m=M8(e);return u=Ge("batchPredictionJobs",m._url),f=m._query,delete m.config,delete m._url,delete m._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(v=>{const w=v;return w.sdkHttpResponse={headers:y.headers},w})),l.then(y=>{const v=n9(y),w=new uA;return Object.assign(w,v),w})}else{const m=S8(e);return u=Ge("batches",m._url),f=m._query,delete m.config,delete m._url,delete m._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(v=>{const w=v;return w.sdkHttpResponse={headers:y.headers},w})),l.then(y=>{const v=X8(y),w=new uA;return Object.assign(w,v),w})}}async delete(e){var t,i,r,o;let l,u="",f={};if(this.apiClient.isVertexAI()){const m=V8(this.apiClient,e);return u=Ge("batchPredictionJobs/{name}",m._url),f=m._query,delete m.config,delete m._url,delete m._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(v=>{const w=v;return w.sdkHttpResponse={headers:y.headers},w})),l.then(y=>i9(y))}else{const m=I8(this.apiClient,e);return u=Ge("batches/{name}",m._url),f=m._query,delete m.config,delete m._url,delete m._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(v=>{const w=v;return w.sdkHttpResponse={headers:y.headers},w})),l.then(y=>Z8(y))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function s9(n){const e={},t=d(n,["fps"]);t!=null&&h(e,["fps"],t);const i=d(n,["endOffset"]);i!=null&&h(e,["endOffset"],i);const r=d(n,["startOffset"]);return r!=null&&h(e,["startOffset"],r),e}function o9(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=d(n,["data"]);t!=null&&h(e,["data"],t);const i=d(n,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function a9(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=d(n,["fileUri"]);t!=null&&h(e,["fileUri"],t);const i=d(n,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function l9(n){const e={},t=d(n,["id"]);t!=null&&h(e,["id"],t);const i=d(n,["args"]);i!=null&&h(e,["args"],i);const r=d(n,["name"]);return r!=null&&h(e,["name"],r),e}function u9(n){const e={},t=d(n,["videoMetadata"]);t!=null&&h(e,["videoMetadata"],s9(t));const i=d(n,["thought"]);i!=null&&h(e,["thought"],i);const r=d(n,["inlineData"]);r!=null&&h(e,["inlineData"],o9(r));const o=d(n,["fileData"]);o!=null&&h(e,["fileData"],a9(o));const l=d(n,["thoughtSignature"]);l!=null&&h(e,["thoughtSignature"],l);const u=d(n,["functionCall"]);u!=null&&h(e,["functionCall"],l9(u));const f=d(n,["codeExecutionResult"]);f!=null&&h(e,["codeExecutionResult"],f);const m=d(n,["executableCode"]);m!=null&&h(e,["executableCode"],m);const y=d(n,["functionResponse"]);y!=null&&h(e,["functionResponse"],y);const v=d(n,["text"]);return v!=null&&h(e,["text"],v),e}function hA(n){const e={},t=d(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(o=>u9(o))),h(e,["parts"],r)}const i=d(n,["role"]);return i!=null&&h(e,["role"],i),e}function c9(n){const e={},t=d(n,["behavior"]);t!=null&&h(e,["behavior"],t);const i=d(n,["description"]);i!=null&&h(e,["description"],i);const r=d(n,["name"]);r!=null&&h(e,["name"],r);const o=d(n,["parameters"]);o!=null&&h(e,["parameters"],o);const l=d(n,["parametersJsonSchema"]);l!=null&&h(e,["parametersJsonSchema"],l);const u=d(n,["response"]);u!=null&&h(e,["response"],u);const f=d(n,["responseJsonSchema"]);return f!=null&&h(e,["responseJsonSchema"],f),e}function d9(n){const e={},t=d(n,["startTime"]);t!=null&&h(e,["startTime"],t);const i=d(n,["endTime"]);return i!=null&&h(e,["endTime"],i),e}function f9(n){const e={},t=d(n,["timeRangeFilter"]);if(t!=null&&h(e,["timeRangeFilter"],d9(t)),d(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function h9(n){const e={},t=d(n,["mode"]);t!=null&&h(e,["mode"],t);const i=d(n,["dynamicThreshold"]);return i!=null&&h(e,["dynamicThreshold"],i),e}function m9(n){const e={},t=d(n,["dynamicRetrievalConfig"]);return t!=null&&h(e,["dynamicRetrievalConfig"],h9(t)),e}function p9(){return{}}function g9(n){const e={},t=d(n,["environment"]);return t!=null&&h(e,["environment"],t),e}function y9(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let f=t;Array.isArray(f)&&(f=f.map(m=>c9(m))),h(e,["functionDeclarations"],f)}if(d(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=d(n,["googleSearch"]);i!=null&&h(e,["googleSearch"],f9(i));const r=d(n,["googleSearchRetrieval"]);if(r!=null&&h(e,["googleSearchRetrieval"],m9(r)),d(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(d(n,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");d(n,["urlContext"])!=null&&h(e,["urlContext"],p9());const l=d(n,["computerUse"]);l!=null&&h(e,["computerUse"],g9(l));const u=d(n,["codeExecution"]);return u!=null&&h(e,["codeExecution"],u),e}function _9(n){const e={},t=d(n,["mode"]);t!=null&&h(e,["mode"],t);const i=d(n,["allowedFunctionNames"]);return i!=null&&h(e,["allowedFunctionNames"],i),e}function v9(n){const e={},t=d(n,["latitude"]);t!=null&&h(e,["latitude"],t);const i=d(n,["longitude"]);return i!=null&&h(e,["longitude"],i),e}function T9(n){const e={},t=d(n,["latLng"]);t!=null&&h(e,["latLng"],v9(t));const i=d(n,["languageCode"]);return i!=null&&h(e,["languageCode"],i),e}function w9(n){const e={},t=d(n,["functionCallingConfig"]);t!=null&&h(e,["functionCallingConfig"],_9(t));const i=d(n,["retrievalConfig"]);return i!=null&&h(e,["retrievalConfig"],T9(i)),e}function x9(n,e){const t={},i=d(n,["ttl"]);e!==void 0&&i!=null&&h(e,["ttl"],i);const r=d(n,["expireTime"]);e!==void 0&&r!=null&&h(e,["expireTime"],r);const o=d(n,["displayName"]);e!==void 0&&o!=null&&h(e,["displayName"],o);const l=d(n,["contents"]);if(e!==void 0&&l!=null){let y=Zi(l);Array.isArray(y)&&(y=y.map(v=>hA(v))),h(e,["contents"],y)}const u=d(n,["systemInstruction"]);e!==void 0&&u!=null&&h(e,["systemInstruction"],hA(ni(u)));const f=d(n,["tools"]);if(e!==void 0&&f!=null){let y=f;Array.isArray(y)&&(y=y.map(v=>y9(v))),h(e,["tools"],y)}const m=d(n,["toolConfig"]);if(e!==void 0&&m!=null&&h(e,["toolConfig"],w9(m)),d(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function E9(n,e){const t={},i=d(e,["model"]);i!=null&&h(t,["model"],CN(n,i));const r=d(e,["config"]);return r!=null&&h(t,["config"],x9(r,t)),t}function b9(n,e){const t={},i=d(e,["name"]);i!=null&&h(t,["_url","name"],Us(n,i));const r=d(e,["config"]);return r!=null&&h(t,["config"],r),t}function S9(n,e){const t={},i=d(e,["name"]);i!=null&&h(t,["_url","name"],Us(n,i));const r=d(e,["config"]);return r!=null&&h(t,["config"],r),t}function I9(n,e){const t={},i=d(n,["ttl"]);e!==void 0&&i!=null&&h(e,["ttl"],i);const r=d(n,["expireTime"]);return e!==void 0&&r!=null&&h(e,["expireTime"],r),t}function A9(n,e){const t={},i=d(e,["name"]);i!=null&&h(t,["_url","name"],Us(n,i));const r=d(e,["config"]);return r!=null&&h(t,["config"],I9(r,t)),t}function C9(n,e){const t={},i=d(n,["pageSize"]);e!==void 0&&i!=null&&h(e,["_query","pageSize"],i);const r=d(n,["pageToken"]);return e!==void 0&&r!=null&&h(e,["_query","pageToken"],r),t}function R9(n){const e={},t=d(n,["config"]);return t!=null&&h(e,["config"],C9(t,e)),e}function N9(n){const e={},t=d(n,["fps"]);t!=null&&h(e,["fps"],t);const i=d(n,["endOffset"]);i!=null&&h(e,["endOffset"],i);const r=d(n,["startOffset"]);return r!=null&&h(e,["startOffset"],r),e}function P9(n){const e={},t=d(n,["displayName"]);t!=null&&h(e,["displayName"],t);const i=d(n,["data"]);i!=null&&h(e,["data"],i);const r=d(n,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function k9(n){const e={},t=d(n,["displayName"]);t!=null&&h(e,["displayName"],t);const i=d(n,["fileUri"]);i!=null&&h(e,["fileUri"],i);const r=d(n,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function D9(n){const e={},t=d(n,["id"]);t!=null&&h(e,["id"],t);const i=d(n,["args"]);i!=null&&h(e,["args"],i);const r=d(n,["name"]);return r!=null&&h(e,["name"],r),e}function M9(n){const e={},t=d(n,["videoMetadata"]);t!=null&&h(e,["videoMetadata"],N9(t));const i=d(n,["thought"]);i!=null&&h(e,["thought"],i);const r=d(n,["inlineData"]);r!=null&&h(e,["inlineData"],P9(r));const o=d(n,["fileData"]);o!=null&&h(e,["fileData"],k9(o));const l=d(n,["thoughtSignature"]);l!=null&&h(e,["thoughtSignature"],l);const u=d(n,["functionCall"]);u!=null&&h(e,["functionCall"],D9(u));const f=d(n,["codeExecutionResult"]);f!=null&&h(e,["codeExecutionResult"],f);const m=d(n,["executableCode"]);m!=null&&h(e,["executableCode"],m);const y=d(n,["functionResponse"]);y!=null&&h(e,["functionResponse"],y);const v=d(n,["text"]);return v!=null&&h(e,["text"],v),e}function mA(n){const e={},t=d(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(o=>M9(o))),h(e,["parts"],r)}const i=d(n,["role"]);return i!=null&&h(e,["role"],i),e}function V9(n){const e={};if(d(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=d(n,["description"]);t!=null&&h(e,["description"],t);const i=d(n,["name"]);i!=null&&h(e,["name"],i);const r=d(n,["parameters"]);r!=null&&h(e,["parameters"],r);const o=d(n,["parametersJsonSchema"]);o!=null&&h(e,["parametersJsonSchema"],o);const l=d(n,["response"]);l!=null&&h(e,["response"],l);const u=d(n,["responseJsonSchema"]);return u!=null&&h(e,["responseJsonSchema"],u),e}function U9(n){const e={},t=d(n,["startTime"]);t!=null&&h(e,["startTime"],t);const i=d(n,["endTime"]);return i!=null&&h(e,["endTime"],i),e}function L9(n){const e={},t=d(n,["timeRangeFilter"]);t!=null&&h(e,["timeRangeFilter"],U9(t));const i=d(n,["excludeDomains"]);return i!=null&&h(e,["excludeDomains"],i),e}function O9(n){const e={},t=d(n,["mode"]);t!=null&&h(e,["mode"],t);const i=d(n,["dynamicThreshold"]);return i!=null&&h(e,["dynamicThreshold"],i),e}function F9(n){const e={},t=d(n,["dynamicRetrievalConfig"]);return t!=null&&h(e,["dynamicRetrievalConfig"],O9(t)),e}function B9(n){const e={},t=d(n,["excludeDomains"]);return t!=null&&h(e,["excludeDomains"],t),e}function q9(n){const e={},t=d(n,["apiKeyString"]);return t!=null&&h(e,["apiKeyString"],t),e}function z9(n){const e={},t=d(n,["apiKeyConfig"]);t!=null&&h(e,["apiKeyConfig"],q9(t));const i=d(n,["authType"]);i!=null&&h(e,["authType"],i);const r=d(n,["googleServiceAccountConfig"]);r!=null&&h(e,["googleServiceAccountConfig"],r);const o=d(n,["httpBasicAuthConfig"]);o!=null&&h(e,["httpBasicAuthConfig"],o);const l=d(n,["oauthConfig"]);l!=null&&h(e,["oauthConfig"],l);const u=d(n,["oidcConfig"]);return u!=null&&h(e,["oidcConfig"],u),e}function j9(n){const e={},t=d(n,["authConfig"]);return t!=null&&h(e,["authConfig"],z9(t)),e}function G9(){return{}}function H9(n){const e={},t=d(n,["environment"]);return t!=null&&h(e,["environment"],t),e}function $9(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let v=t;Array.isArray(v)&&(v=v.map(w=>V9(w))),h(e,["functionDeclarations"],v)}const i=d(n,["retrieval"]);i!=null&&h(e,["retrieval"],i);const r=d(n,["googleSearch"]);r!=null&&h(e,["googleSearch"],L9(r));const o=d(n,["googleSearchRetrieval"]);o!=null&&h(e,["googleSearchRetrieval"],F9(o));const l=d(n,["enterpriseWebSearch"]);l!=null&&h(e,["enterpriseWebSearch"],B9(l));const u=d(n,["googleMaps"]);u!=null&&h(e,["googleMaps"],j9(u)),d(n,["urlContext"])!=null&&h(e,["urlContext"],G9());const m=d(n,["computerUse"]);m!=null&&h(e,["computerUse"],H9(m));const y=d(n,["codeExecution"]);return y!=null&&h(e,["codeExecution"],y),e}function W9(n){const e={},t=d(n,["mode"]);t!=null&&h(e,["mode"],t);const i=d(n,["allowedFunctionNames"]);return i!=null&&h(e,["allowedFunctionNames"],i),e}function K9(n){const e={},t=d(n,["latitude"]);t!=null&&h(e,["latitude"],t);const i=d(n,["longitude"]);return i!=null&&h(e,["longitude"],i),e}function J9(n){const e={},t=d(n,["latLng"]);t!=null&&h(e,["latLng"],K9(t));const i=d(n,["languageCode"]);return i!=null&&h(e,["languageCode"],i),e}function Y9(n){const e={},t=d(n,["functionCallingConfig"]);t!=null&&h(e,["functionCallingConfig"],W9(t));const i=d(n,["retrievalConfig"]);return i!=null&&h(e,["retrievalConfig"],J9(i)),e}function Q9(n,e){const t={},i=d(n,["ttl"]);e!==void 0&&i!=null&&h(e,["ttl"],i);const r=d(n,["expireTime"]);e!==void 0&&r!=null&&h(e,["expireTime"],r);const o=d(n,["displayName"]);e!==void 0&&o!=null&&h(e,["displayName"],o);const l=d(n,["contents"]);if(e!==void 0&&l!=null){let v=Zi(l);Array.isArray(v)&&(v=v.map(w=>mA(w))),h(e,["contents"],v)}const u=d(n,["systemInstruction"]);e!==void 0&&u!=null&&h(e,["systemInstruction"],mA(ni(u)));const f=d(n,["tools"]);if(e!==void 0&&f!=null){let v=f;Array.isArray(v)&&(v=v.map(w=>$9(w))),h(e,["tools"],v)}const m=d(n,["toolConfig"]);e!==void 0&&m!=null&&h(e,["toolConfig"],Y9(m));const y=d(n,["kmsKeyName"]);return e!==void 0&&y!=null&&h(e,["encryption_spec","kmsKeyName"],y),t}function X9(n,e){const t={},i=d(e,["model"]);i!=null&&h(t,["model"],CN(n,i));const r=d(e,["config"]);return r!=null&&h(t,["config"],Q9(r,t)),t}function Z9(n,e){const t={},i=d(e,["name"]);i!=null&&h(t,["_url","name"],Us(n,i));const r=d(e,["config"]);return r!=null&&h(t,["config"],r),t}function e7(n,e){const t={},i=d(e,["name"]);i!=null&&h(t,["_url","name"],Us(n,i));const r=d(e,["config"]);return r!=null&&h(t,["config"],r),t}function t7(n,e){const t={},i=d(n,["ttl"]);e!==void 0&&i!=null&&h(e,["ttl"],i);const r=d(n,["expireTime"]);return e!==void 0&&r!=null&&h(e,["expireTime"],r),t}function n7(n,e){const t={},i=d(e,["name"]);i!=null&&h(t,["_url","name"],Us(n,i));const r=d(e,["config"]);return r!=null&&h(t,["config"],t7(r,t)),t}function i7(n,e){const t={},i=d(n,["pageSize"]);e!==void 0&&i!=null&&h(e,["_query","pageSize"],i);const r=d(n,["pageToken"]);return e!==void 0&&r!=null&&h(e,["_query","pageToken"],r),t}function r7(n){const e={},t=d(n,["config"]);return t!=null&&h(e,["config"],i7(t,e)),e}function Pm(n){const e={},t=d(n,["name"]);t!=null&&h(e,["name"],t);const i=d(n,["displayName"]);i!=null&&h(e,["displayName"],i);const r=d(n,["model"]);r!=null&&h(e,["model"],r);const o=d(n,["createTime"]);o!=null&&h(e,["createTime"],o);const l=d(n,["updateTime"]);l!=null&&h(e,["updateTime"],l);const u=d(n,["expireTime"]);u!=null&&h(e,["expireTime"],u);const f=d(n,["usageMetadata"]);return f!=null&&h(e,["usageMetadata"],f),e}function s7(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}function o7(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const i=d(n,["nextPageToken"]);i!=null&&h(e,["nextPageToken"],i);const r=d(n,["cachedContents"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>Pm(l))),h(e,["cachedContents"],o)}return e}function km(n){const e={},t=d(n,["name"]);t!=null&&h(e,["name"],t);const i=d(n,["displayName"]);i!=null&&h(e,["displayName"],i);const r=d(n,["model"]);r!=null&&h(e,["model"],r);const o=d(n,["createTime"]);o!=null&&h(e,["createTime"],o);const l=d(n,["updateTime"]);l!=null&&h(e,["updateTime"],l);const u=d(n,["expireTime"]);u!=null&&h(e,["expireTime"],u);const f=d(n,["usageMetadata"]);return f!=null&&h(e,["usageMetadata"],f),e}function a7(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}function l7(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const i=d(n,["nextPageToken"]);i!=null&&h(e,["nextPageToken"],i);const r=d(n,["cachedContents"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>km(l))),h(e,["cachedContents"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class u7 extends Za{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Df($a.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(t),t)}async create(e){var t,i,r,o;let l,u="",f={};if(this.apiClient.isVertexAI()){const m=X9(this.apiClient,e);return u=Ge("cachedContents",m._url),f=m._query,delete m.config,delete m._url,delete m._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),l.then(y=>km(y))}else{const m=E9(this.apiClient,e);return u=Ge("cachedContents",m._url),f=m._query,delete m.config,delete m._url,delete m._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),l.then(y=>Pm(y))}}async get(e){var t,i,r,o;let l,u="",f={};if(this.apiClient.isVertexAI()){const m=Z9(this.apiClient,e);return u=Ge("{name}",m._url),f=m._query,delete m.config,delete m._url,delete m._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),l.then(y=>km(y))}else{const m=b9(this.apiClient,e);return u=Ge("{name}",m._url),f=m._query,delete m.config,delete m._url,delete m._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),l.then(y=>Pm(y))}}async delete(e){var t,i,r,o;let l,u="",f={};if(this.apiClient.isVertexAI()){const m=e7(this.apiClient,e);return u=Ge("{name}",m._url),f=m._query,delete m.config,delete m._url,delete m._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(v=>{const w=v;return w.sdkHttpResponse={headers:y.headers},w})),l.then(y=>{const v=a7(y),w=new aA;return Object.assign(w,v),w})}else{const m=S9(this.apiClient,e);return u=Ge("{name}",m._url),f=m._query,delete m.config,delete m._url,delete m._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(v=>{const w=v;return w.sdkHttpResponse={headers:y.headers},w})),l.then(y=>{const v=s7(y),w=new aA;return Object.assign(w,v),w})}}async update(e){var t,i,r,o;let l,u="",f={};if(this.apiClient.isVertexAI()){const m=n7(this.apiClient,e);return u=Ge("{name}",m._url),f=m._query,delete m.config,delete m._url,delete m._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),l.then(y=>km(y))}else{const m=A9(this.apiClient,e);return u=Ge("{name}",m._url),f=m._query,delete m.config,delete m._url,delete m._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),l.then(y=>Pm(y))}}async listInternal(e){var t,i,r,o;let l,u="",f={};if(this.apiClient.isVertexAI()){const m=r7(e);return u=Ge("cachedContents",m._url),f=m._query,delete m.config,delete m._url,delete m._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(v=>{const w=v;return w.sdkHttpResponse={headers:y.headers},w})),l.then(y=>{const v=l7(y),w=new lA;return Object.assign(w,v),w})}else{const m=R9(e);return u=Ge("cachedContents",m._url),f=m._query,delete m.config,delete m._url,delete m._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(v=>{const w=v;return w.sdkHttpResponse={headers:y.headers},w})),l.then(y=>{const v=o7(y),w=new lA;return Object.assign(w,v),w})}}}function pA(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Kt(n){return this instanceof Kt?(this.v=n,this):new Kt(n)}function hu(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),r,o=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),u("next"),u("throw"),u("return",l),r[Symbol.asyncIterator]=function(){return this},r;function l(E){return function(S){return Promise.resolve(S).then(E,v)}}function u(E,S){i[E]&&(r[E]=function(b){return new Promise(function(A,C){o.push([E,b,A,C])>1||f(E,b)})},S&&(r[E]=S(r[E])))}function f(E,S){try{m(i[E](S))}catch(b){w(o[0][3],b)}}function m(E){E.value instanceof Kt?Promise.resolve(E.value.v).then(y,v):w(o[0][2],E)}function y(E){f("next",E)}function v(E){f("throw",E)}function w(E,S){E(S),o.shift(),o.length&&f(o[0][0],o[0][1])}}function Od(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof pA=="function"?pA(n):n[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(o){t[o]=n[o]&&function(l){return new Promise(function(u,f){l=n[o](l),r(u,f,l.done,l.value)})}}function r(o,l,u,f){Promise.resolve(f).then(function(m){o({value:m,done:u})},l)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function c7(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:jN(t)}function jN(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function d7(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function gA(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let i=0;for(;i<t;)if(n[i].role==="user")e.push(n[i]),i++;else{const r=[];let o=!0;for(;i<t&&n[i].role==="model";)r.push(n[i]),o&&!jN(n[i])&&(o=!1),i++;o?e.push(...r):e.pop()}return e}class f7{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new h7(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class h7{constructor(e,t,i,r={},o=[]){this.apiClient=e,this.modelsModule=t,this.model=i,this.config=r,this.history=o,this.sendPromise=Promise.resolve(),d7(o)}async sendMessage(e){var t;await this.sendPromise;const i=ni(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var o,l,u;const f=await r,m=(l=(o=f.candidates)===null||o===void 0?void 0:o[0])===null||l===void 0?void 0:l.content,y=f.automaticFunctionCallingHistory,v=this.getHistory(!0).length;let w=[];y!=null&&(w=(u=y.slice(v))!==null&&u!==void 0?u:[]);const E=m?[m]:[];this.recordHistory(i,E,w)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var t;await this.sendPromise;const i=ni(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const o=await r;return this.processStreamResponse(o,i)}getHistory(e=!1){const t=e?gA(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){var i,r;return hu(this,arguments,function*(){var l,u,f,m;const y=[];try{for(var v=!0,w=Od(e),E;E=yield Kt(w.next()),l=E.done,!l;v=!0){m=E.value,v=!1;const S=m;if(c7(S)){const b=(r=(i=S.candidates)===null||i===void 0?void 0:i[0])===null||r===void 0?void 0:r.content;b!==void 0&&y.push(b)}yield yield Kt(S)}}catch(S){u={error:S}}finally{try{!v&&!l&&(f=w.return)&&(yield Kt(f.call(w)))}finally{if(u)throw u.error}}this.recordHistory(t,y)})}recordHistory(e,t,i){let r=[];t.length>0&&t.every(o=>o.role!==void 0)?r=t:r.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...gA(i)):this.history.push(e),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Yp extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Yp.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function m7(n,e){const t={},i=d(n,["pageSize"]);e!==void 0&&i!=null&&h(e,["_query","pageSize"],i);const r=d(n,["pageToken"]);return e!==void 0&&r!=null&&h(e,["_query","pageToken"],r),t}function p7(n){const e={},t=d(n,["config"]);return t!=null&&h(e,["config"],m7(t,e)),e}function g7(n){const e={},t=d(n,["details"]);t!=null&&h(e,["details"],t);const i=d(n,["message"]);i!=null&&h(e,["message"],i);const r=d(n,["code"]);return r!=null&&h(e,["code"],r),e}function y7(n){const e={},t=d(n,["name"]);t!=null&&h(e,["name"],t);const i=d(n,["displayName"]);i!=null&&h(e,["displayName"],i);const r=d(n,["mimeType"]);r!=null&&h(e,["mimeType"],r);const o=d(n,["sizeBytes"]);o!=null&&h(e,["sizeBytes"],o);const l=d(n,["createTime"]);l!=null&&h(e,["createTime"],l);const u=d(n,["expirationTime"]);u!=null&&h(e,["expirationTime"],u);const f=d(n,["updateTime"]);f!=null&&h(e,["updateTime"],f);const m=d(n,["sha256Hash"]);m!=null&&h(e,["sha256Hash"],m);const y=d(n,["uri"]);y!=null&&h(e,["uri"],y);const v=d(n,["downloadUri"]);v!=null&&h(e,["downloadUri"],v);const w=d(n,["state"]);w!=null&&h(e,["state"],w);const E=d(n,["source"]);E!=null&&h(e,["source"],E);const S=d(n,["videoMetadata"]);S!=null&&h(e,["videoMetadata"],S);const b=d(n,["error"]);return b!=null&&h(e,["error"],g7(b)),e}function _7(n){const e={},t=d(n,["file"]);t!=null&&h(e,["file"],y7(t));const i=d(n,["config"]);return i!=null&&h(e,["config"],i),e}function v7(n){const e={},t=d(n,["name"]);t!=null&&h(e,["_url","file"],MN(t));const i=d(n,["config"]);return i!=null&&h(e,["config"],i),e}function T7(n){const e={},t=d(n,["name"]);t!=null&&h(e,["_url","file"],MN(t));const i=d(n,["config"]);return i!=null&&h(e,["config"],i),e}function w7(n){const e={},t=d(n,["details"]);t!=null&&h(e,["details"],t);const i=d(n,["message"]);i!=null&&h(e,["message"],i);const r=d(n,["code"]);return r!=null&&h(e,["code"],r),e}function Sv(n){const e={},t=d(n,["name"]);t!=null&&h(e,["name"],t);const i=d(n,["displayName"]);i!=null&&h(e,["displayName"],i);const r=d(n,["mimeType"]);r!=null&&h(e,["mimeType"],r);const o=d(n,["sizeBytes"]);o!=null&&h(e,["sizeBytes"],o);const l=d(n,["createTime"]);l!=null&&h(e,["createTime"],l);const u=d(n,["expirationTime"]);u!=null&&h(e,["expirationTime"],u);const f=d(n,["updateTime"]);f!=null&&h(e,["updateTime"],f);const m=d(n,["sha256Hash"]);m!=null&&h(e,["sha256Hash"],m);const y=d(n,["uri"]);y!=null&&h(e,["uri"],y);const v=d(n,["downloadUri"]);v!=null&&h(e,["downloadUri"],v);const w=d(n,["state"]);w!=null&&h(e,["state"],w);const E=d(n,["source"]);E!=null&&h(e,["source"],E);const S=d(n,["videoMetadata"]);S!=null&&h(e,["videoMetadata"],S);const b=d(n,["error"]);return b!=null&&h(e,["error"],w7(b)),e}function x7(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const i=d(n,["nextPageToken"]);i!=null&&h(e,["nextPageToken"],i);const r=d(n,["files"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>Sv(l))),h(e,["files"],o)}return e}function E7(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}function b7(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class S7 extends Za{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Df($a.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>Sv(t))}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,i;let r,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=p7(e);return o=Ge("files",u._url),l=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:f.headers},y})),r.then(f=>{const m=x7(f),y=new NB;return Object.assign(y,m),y})}}async createInternal(e){var t,i;let r,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=_7(e);return o=Ge("upload/v1beta/files",u._url),l=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),r.then(f=>{const m=E7(f),y=new PB;return Object.assign(y,m),y})}}async get(e){var t,i;let r,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=v7(e);return o=Ge("files/{file}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),r.then(f=>Sv(f))}}async delete(e){var t,i;let r,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=T7(e);return o=Ge("files/{file}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:f.headers},y})),r.then(f=>{const m=b7(f),y=new kB;return Object.assign(y,m),y})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function I7(n){const e={},t=d(n,["voiceName"]);return t!=null&&h(e,["voiceName"],t),e}function GN(n){const e={},t=d(n,["prebuiltVoiceConfig"]);return t!=null&&h(e,["prebuiltVoiceConfig"],I7(t)),e}function A7(n){const e={},t=d(n,["speaker"]);t!=null&&h(e,["speaker"],t);const i=d(n,["voiceConfig"]);return i!=null&&h(e,["voiceConfig"],GN(i)),e}function C7(n){const e={},t=d(n,["speakerVoiceConfigs"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>A7(r))),h(e,["speakerVoiceConfigs"],i)}return e}function R7(n){const e={},t=d(n,["voiceConfig"]);t!=null&&h(e,["voiceConfig"],GN(t));const i=d(n,["multiSpeakerVoiceConfig"]);i!=null&&h(e,["multiSpeakerVoiceConfig"],C7(i));const r=d(n,["languageCode"]);return r!=null&&h(e,["languageCode"],r),e}function N7(n){const e={},t=d(n,["fps"]);t!=null&&h(e,["fps"],t);const i=d(n,["endOffset"]);i!=null&&h(e,["endOffset"],i);const r=d(n,["startOffset"]);return r!=null&&h(e,["startOffset"],r),e}function P7(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=d(n,["data"]);t!=null&&h(e,["data"],t);const i=d(n,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function k7(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=d(n,["fileUri"]);t!=null&&h(e,["fileUri"],t);const i=d(n,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function D7(n){const e={},t=d(n,["id"]);t!=null&&h(e,["id"],t);const i=d(n,["args"]);i!=null&&h(e,["args"],i);const r=d(n,["name"]);return r!=null&&h(e,["name"],r),e}function M7(n){const e={},t=d(n,["videoMetadata"]);t!=null&&h(e,["videoMetadata"],N7(t));const i=d(n,["thought"]);i!=null&&h(e,["thought"],i);const r=d(n,["inlineData"]);r!=null&&h(e,["inlineData"],P7(r));const o=d(n,["fileData"]);o!=null&&h(e,["fileData"],k7(o));const l=d(n,["thoughtSignature"]);l!=null&&h(e,["thoughtSignature"],l);const u=d(n,["functionCall"]);u!=null&&h(e,["functionCall"],D7(u));const f=d(n,["codeExecutionResult"]);f!=null&&h(e,["codeExecutionResult"],f);const m=d(n,["executableCode"]);m!=null&&h(e,["executableCode"],m);const y=d(n,["functionResponse"]);y!=null&&h(e,["functionResponse"],y);const v=d(n,["text"]);return v!=null&&h(e,["text"],v),e}function V7(n){const e={},t=d(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(o=>M7(o))),h(e,["parts"],r)}const i=d(n,["role"]);return i!=null&&h(e,["role"],i),e}function U7(n){const e={},t=d(n,["behavior"]);t!=null&&h(e,["behavior"],t);const i=d(n,["description"]);i!=null&&h(e,["description"],i);const r=d(n,["name"]);r!=null&&h(e,["name"],r);const o=d(n,["parameters"]);o!=null&&h(e,["parameters"],o);const l=d(n,["parametersJsonSchema"]);l!=null&&h(e,["parametersJsonSchema"],l);const u=d(n,["response"]);u!=null&&h(e,["response"],u);const f=d(n,["responseJsonSchema"]);return f!=null&&h(e,["responseJsonSchema"],f),e}function L7(n){const e={},t=d(n,["startTime"]);t!=null&&h(e,["startTime"],t);const i=d(n,["endTime"]);return i!=null&&h(e,["endTime"],i),e}function O7(n){const e={},t=d(n,["timeRangeFilter"]);if(t!=null&&h(e,["timeRangeFilter"],L7(t)),d(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function F7(n){const e={},t=d(n,["mode"]);t!=null&&h(e,["mode"],t);const i=d(n,["dynamicThreshold"]);return i!=null&&h(e,["dynamicThreshold"],i),e}function B7(n){const e={},t=d(n,["dynamicRetrievalConfig"]);return t!=null&&h(e,["dynamicRetrievalConfig"],F7(t)),e}function q7(){return{}}function z7(n){const e={},t=d(n,["environment"]);return t!=null&&h(e,["environment"],t),e}function j7(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let f=t;Array.isArray(f)&&(f=f.map(m=>U7(m))),h(e,["functionDeclarations"],f)}if(d(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=d(n,["googleSearch"]);i!=null&&h(e,["googleSearch"],O7(i));const r=d(n,["googleSearchRetrieval"]);if(r!=null&&h(e,["googleSearchRetrieval"],B7(r)),d(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(d(n,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");d(n,["urlContext"])!=null&&h(e,["urlContext"],q7());const l=d(n,["computerUse"]);l!=null&&h(e,["computerUse"],z7(l));const u=d(n,["codeExecution"]);return u!=null&&h(e,["codeExecution"],u),e}function G7(n){const e={},t=d(n,["handle"]);if(t!=null&&h(e,["handle"],t),d(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function yA(){return{}}function H7(n){const e={},t=d(n,["disabled"]);t!=null&&h(e,["disabled"],t);const i=d(n,["startOfSpeechSensitivity"]);i!=null&&h(e,["startOfSpeechSensitivity"],i);const r=d(n,["endOfSpeechSensitivity"]);r!=null&&h(e,["endOfSpeechSensitivity"],r);const o=d(n,["prefixPaddingMs"]);o!=null&&h(e,["prefixPaddingMs"],o);const l=d(n,["silenceDurationMs"]);return l!=null&&h(e,["silenceDurationMs"],l),e}function $7(n){const e={},t=d(n,["automaticActivityDetection"]);t!=null&&h(e,["automaticActivityDetection"],H7(t));const i=d(n,["activityHandling"]);i!=null&&h(e,["activityHandling"],i);const r=d(n,["turnCoverage"]);return r!=null&&h(e,["turnCoverage"],r),e}function W7(n){const e={},t=d(n,["targetTokens"]);return t!=null&&h(e,["targetTokens"],t),e}function K7(n){const e={},t=d(n,["triggerTokens"]);t!=null&&h(e,["triggerTokens"],t);const i=d(n,["slidingWindow"]);return i!=null&&h(e,["slidingWindow"],W7(i)),e}function J7(n){const e={},t=d(n,["proactiveAudio"]);return t!=null&&h(e,["proactiveAudio"],t),e}function Y7(n,e){const t={},i=d(n,["generationConfig"]);e!==void 0&&i!=null&&h(e,["setup","generationConfig"],i);const r=d(n,["responseModalities"]);e!==void 0&&r!=null&&h(e,["setup","generationConfig","responseModalities"],r);const o=d(n,["temperature"]);e!==void 0&&o!=null&&h(e,["setup","generationConfig","temperature"],o);const l=d(n,["topP"]);e!==void 0&&l!=null&&h(e,["setup","generationConfig","topP"],l);const u=d(n,["topK"]);e!==void 0&&u!=null&&h(e,["setup","generationConfig","topK"],u);const f=d(n,["maxOutputTokens"]);e!==void 0&&f!=null&&h(e,["setup","generationConfig","maxOutputTokens"],f);const m=d(n,["mediaResolution"]);e!==void 0&&m!=null&&h(e,["setup","generationConfig","mediaResolution"],m);const y=d(n,["seed"]);e!==void 0&&y!=null&&h(e,["setup","generationConfig","seed"],y);const v=d(n,["speechConfig"]);e!==void 0&&v!=null&&h(e,["setup","generationConfig","speechConfig"],R7(IT(v)));const w=d(n,["enableAffectiveDialog"]);e!==void 0&&w!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],w);const E=d(n,["systemInstruction"]);e!==void 0&&E!=null&&h(e,["setup","systemInstruction"],V7(ni(E)));const S=d(n,["tools"]);if(e!==void 0&&S!=null){let z=ec(S);Array.isArray(z)&&(z=z.map(H=>j7(Zu(H)))),h(e,["setup","tools"],z)}const b=d(n,["sessionResumption"]);e!==void 0&&b!=null&&h(e,["setup","sessionResumption"],G7(b));const A=d(n,["inputAudioTranscription"]);e!==void 0&&A!=null&&h(e,["setup","inputAudioTranscription"],yA());const C=d(n,["outputAudioTranscription"]);e!==void 0&&C!=null&&h(e,["setup","outputAudioTranscription"],yA());const R=d(n,["realtimeInputConfig"]);e!==void 0&&R!=null&&h(e,["setup","realtimeInputConfig"],$7(R));const L=d(n,["contextWindowCompression"]);e!==void 0&&L!=null&&h(e,["setup","contextWindowCompression"],K7(L));const q=d(n,["proactivity"]);return e!==void 0&&q!=null&&h(e,["setup","proactivity"],J7(q)),t}function Q7(n,e){const t={},i=d(e,["model"]);i!=null&&h(t,["setup","model"],It(n,i));const r=d(e,["config"]);return r!=null&&h(t,["config"],Y7(r,t)),t}function X7(){return{}}function Z7(){return{}}function eq(n){const e={},t=d(n,["media"]);t!=null&&h(e,["mediaChunks"],RN(t));const i=d(n,["audio"]);i!=null&&h(e,["audio"],PN(i));const r=d(n,["audioStreamEnd"]);r!=null&&h(e,["audioStreamEnd"],r);const o=d(n,["video"]);o!=null&&h(e,["video"],NN(o));const l=d(n,["text"]);return l!=null&&h(e,["text"],l),d(n,["activityStart"])!=null&&h(e,["activityStart"],X7()),d(n,["activityEnd"])!=null&&h(e,["activityEnd"],Z7()),e}function HN(n){const e={},t=d(n,["text"]);t!=null&&h(e,["text"],t);const i=d(n,["weight"]);return i!=null&&h(e,["weight"],i),e}function tq(n){const e={},t=d(n,["weightedPrompts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>HN(r))),h(e,["weightedPrompts"],i)}return e}function $N(n){const e={},t=d(n,["temperature"]);t!=null&&h(e,["temperature"],t);const i=d(n,["topK"]);i!=null&&h(e,["topK"],i);const r=d(n,["seed"]);r!=null&&h(e,["seed"],r);const o=d(n,["guidance"]);o!=null&&h(e,["guidance"],o);const l=d(n,["bpm"]);l!=null&&h(e,["bpm"],l);const u=d(n,["density"]);u!=null&&h(e,["density"],u);const f=d(n,["brightness"]);f!=null&&h(e,["brightness"],f);const m=d(n,["scale"]);m!=null&&h(e,["scale"],m);const y=d(n,["muteBass"]);y!=null&&h(e,["muteBass"],y);const v=d(n,["muteDrums"]);v!=null&&h(e,["muteDrums"],v);const w=d(n,["onlyBassAndDrums"]);w!=null&&h(e,["onlyBassAndDrums"],w);const E=d(n,["musicGenerationMode"]);return E!=null&&h(e,["musicGenerationMode"],E),e}function nq(n){const e={},t=d(n,["musicGenerationConfig"]);return t!=null&&h(e,["musicGenerationConfig"],$N(t)),e}function WN(n){const e={},t=d(n,["model"]);return t!=null&&h(e,["model"],t),e}function KN(n){const e={},t=d(n,["weightedPrompts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>HN(r))),h(e,["weightedPrompts"],i)}return e}function Iv(n){const e={},t=d(n,["setup"]);t!=null&&h(e,["setup"],WN(t));const i=d(n,["clientContent"]);i!=null&&h(e,["clientContent"],KN(i));const r=d(n,["musicGenerationConfig"]);r!=null&&h(e,["musicGenerationConfig"],$N(r));const o=d(n,["playbackControl"]);return o!=null&&h(e,["playbackControl"],o),e}function iq(n){const e={},t=d(n,["voiceName"]);return t!=null&&h(e,["voiceName"],t),e}function rq(n){const e={},t=d(n,["prebuiltVoiceConfig"]);return t!=null&&h(e,["prebuiltVoiceConfig"],iq(t)),e}function sq(n){const e={},t=d(n,["voiceConfig"]);if(t!=null&&h(e,["voiceConfig"],rq(t)),d(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const i=d(n,["languageCode"]);return i!=null&&h(e,["languageCode"],i),e}function oq(n){const e={},t=d(n,["fps"]);t!=null&&h(e,["fps"],t);const i=d(n,["endOffset"]);i!=null&&h(e,["endOffset"],i);const r=d(n,["startOffset"]);return r!=null&&h(e,["startOffset"],r),e}function aq(n){const e={},t=d(n,["displayName"]);t!=null&&h(e,["displayName"],t);const i=d(n,["data"]);i!=null&&h(e,["data"],i);const r=d(n,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function lq(n){const e={},t=d(n,["displayName"]);t!=null&&h(e,["displayName"],t);const i=d(n,["fileUri"]);i!=null&&h(e,["fileUri"],i);const r=d(n,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function uq(n){const e={},t=d(n,["id"]);t!=null&&h(e,["id"],t);const i=d(n,["args"]);i!=null&&h(e,["args"],i);const r=d(n,["name"]);return r!=null&&h(e,["name"],r),e}function cq(n){const e={},t=d(n,["videoMetadata"]);t!=null&&h(e,["videoMetadata"],oq(t));const i=d(n,["thought"]);i!=null&&h(e,["thought"],i);const r=d(n,["inlineData"]);r!=null&&h(e,["inlineData"],aq(r));const o=d(n,["fileData"]);o!=null&&h(e,["fileData"],lq(o));const l=d(n,["thoughtSignature"]);l!=null&&h(e,["thoughtSignature"],l);const u=d(n,["functionCall"]);u!=null&&h(e,["functionCall"],uq(u));const f=d(n,["codeExecutionResult"]);f!=null&&h(e,["codeExecutionResult"],f);const m=d(n,["executableCode"]);m!=null&&h(e,["executableCode"],m);const y=d(n,["functionResponse"]);y!=null&&h(e,["functionResponse"],y);const v=d(n,["text"]);return v!=null&&h(e,["text"],v),e}function dq(n){const e={},t=d(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(o=>cq(o))),h(e,["parts"],r)}const i=d(n,["role"]);return i!=null&&h(e,["role"],i),e}function fq(n){const e={};if(d(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=d(n,["description"]);t!=null&&h(e,["description"],t);const i=d(n,["name"]);i!=null&&h(e,["name"],i);const r=d(n,["parameters"]);r!=null&&h(e,["parameters"],r);const o=d(n,["parametersJsonSchema"]);o!=null&&h(e,["parametersJsonSchema"],o);const l=d(n,["response"]);l!=null&&h(e,["response"],l);const u=d(n,["responseJsonSchema"]);return u!=null&&h(e,["responseJsonSchema"],u),e}function hq(n){const e={},t=d(n,["startTime"]);t!=null&&h(e,["startTime"],t);const i=d(n,["endTime"]);return i!=null&&h(e,["endTime"],i),e}function mq(n){const e={},t=d(n,["timeRangeFilter"]);t!=null&&h(e,["timeRangeFilter"],hq(t));const i=d(n,["excludeDomains"]);return i!=null&&h(e,["excludeDomains"],i),e}function pq(n){const e={},t=d(n,["mode"]);t!=null&&h(e,["mode"],t);const i=d(n,["dynamicThreshold"]);return i!=null&&h(e,["dynamicThreshold"],i),e}function gq(n){const e={},t=d(n,["dynamicRetrievalConfig"]);return t!=null&&h(e,["dynamicRetrievalConfig"],pq(t)),e}function yq(n){const e={},t=d(n,["excludeDomains"]);return t!=null&&h(e,["excludeDomains"],t),e}function _q(n){const e={},t=d(n,["apiKeyString"]);return t!=null&&h(e,["apiKeyString"],t),e}function vq(n){const e={},t=d(n,["apiKeyConfig"]);t!=null&&h(e,["apiKeyConfig"],_q(t));const i=d(n,["authType"]);i!=null&&h(e,["authType"],i);const r=d(n,["googleServiceAccountConfig"]);r!=null&&h(e,["googleServiceAccountConfig"],r);const o=d(n,["httpBasicAuthConfig"]);o!=null&&h(e,["httpBasicAuthConfig"],o);const l=d(n,["oauthConfig"]);l!=null&&h(e,["oauthConfig"],l);const u=d(n,["oidcConfig"]);return u!=null&&h(e,["oidcConfig"],u),e}function Tq(n){const e={},t=d(n,["authConfig"]);return t!=null&&h(e,["authConfig"],vq(t)),e}function wq(){return{}}function xq(n){const e={},t=d(n,["environment"]);return t!=null&&h(e,["environment"],t),e}function Eq(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let v=t;Array.isArray(v)&&(v=v.map(w=>fq(w))),h(e,["functionDeclarations"],v)}const i=d(n,["retrieval"]);i!=null&&h(e,["retrieval"],i);const r=d(n,["googleSearch"]);r!=null&&h(e,["googleSearch"],mq(r));const o=d(n,["googleSearchRetrieval"]);o!=null&&h(e,["googleSearchRetrieval"],gq(o));const l=d(n,["enterpriseWebSearch"]);l!=null&&h(e,["enterpriseWebSearch"],yq(l));const u=d(n,["googleMaps"]);u!=null&&h(e,["googleMaps"],Tq(u)),d(n,["urlContext"])!=null&&h(e,["urlContext"],wq());const m=d(n,["computerUse"]);m!=null&&h(e,["computerUse"],xq(m));const y=d(n,["codeExecution"]);return y!=null&&h(e,["codeExecution"],y),e}function bq(n){const e={},t=d(n,["handle"]);t!=null&&h(e,["handle"],t);const i=d(n,["transparent"]);return i!=null&&h(e,["transparent"],i),e}function _A(){return{}}function Sq(n){const e={},t=d(n,["disabled"]);t!=null&&h(e,["disabled"],t);const i=d(n,["startOfSpeechSensitivity"]);i!=null&&h(e,["startOfSpeechSensitivity"],i);const r=d(n,["endOfSpeechSensitivity"]);r!=null&&h(e,["endOfSpeechSensitivity"],r);const o=d(n,["prefixPaddingMs"]);o!=null&&h(e,["prefixPaddingMs"],o);const l=d(n,["silenceDurationMs"]);return l!=null&&h(e,["silenceDurationMs"],l),e}function Iq(n){const e={},t=d(n,["automaticActivityDetection"]);t!=null&&h(e,["automaticActivityDetection"],Sq(t));const i=d(n,["activityHandling"]);i!=null&&h(e,["activityHandling"],i);const r=d(n,["turnCoverage"]);return r!=null&&h(e,["turnCoverage"],r),e}function Aq(n){const e={},t=d(n,["targetTokens"]);return t!=null&&h(e,["targetTokens"],t),e}function Cq(n){const e={},t=d(n,["triggerTokens"]);t!=null&&h(e,["triggerTokens"],t);const i=d(n,["slidingWindow"]);return i!=null&&h(e,["slidingWindow"],Aq(i)),e}function Rq(n){const e={},t=d(n,["proactiveAudio"]);return t!=null&&h(e,["proactiveAudio"],t),e}function Nq(n,e){const t={},i=d(n,["generationConfig"]);e!==void 0&&i!=null&&h(e,["setup","generationConfig"],i);const r=d(n,["responseModalities"]);e!==void 0&&r!=null&&h(e,["setup","generationConfig","responseModalities"],r);const o=d(n,["temperature"]);e!==void 0&&o!=null&&h(e,["setup","generationConfig","temperature"],o);const l=d(n,["topP"]);e!==void 0&&l!=null&&h(e,["setup","generationConfig","topP"],l);const u=d(n,["topK"]);e!==void 0&&u!=null&&h(e,["setup","generationConfig","topK"],u);const f=d(n,["maxOutputTokens"]);e!==void 0&&f!=null&&h(e,["setup","generationConfig","maxOutputTokens"],f);const m=d(n,["mediaResolution"]);e!==void 0&&m!=null&&h(e,["setup","generationConfig","mediaResolution"],m);const y=d(n,["seed"]);e!==void 0&&y!=null&&h(e,["setup","generationConfig","seed"],y);const v=d(n,["speechConfig"]);e!==void 0&&v!=null&&h(e,["setup","generationConfig","speechConfig"],sq(IT(v)));const w=d(n,["enableAffectiveDialog"]);e!==void 0&&w!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],w);const E=d(n,["systemInstruction"]);e!==void 0&&E!=null&&h(e,["setup","systemInstruction"],dq(ni(E)));const S=d(n,["tools"]);if(e!==void 0&&S!=null){let z=ec(S);Array.isArray(z)&&(z=z.map(H=>Eq(Zu(H)))),h(e,["setup","tools"],z)}const b=d(n,["sessionResumption"]);e!==void 0&&b!=null&&h(e,["setup","sessionResumption"],bq(b));const A=d(n,["inputAudioTranscription"]);e!==void 0&&A!=null&&h(e,["setup","inputAudioTranscription"],_A());const C=d(n,["outputAudioTranscription"]);e!==void 0&&C!=null&&h(e,["setup","outputAudioTranscription"],_A());const R=d(n,["realtimeInputConfig"]);e!==void 0&&R!=null&&h(e,["setup","realtimeInputConfig"],Iq(R));const L=d(n,["contextWindowCompression"]);e!==void 0&&L!=null&&h(e,["setup","contextWindowCompression"],Cq(L));const q=d(n,["proactivity"]);return e!==void 0&&q!=null&&h(e,["setup","proactivity"],Rq(q)),t}function Pq(n,e){const t={},i=d(e,["model"]);i!=null&&h(t,["setup","model"],It(n,i));const r=d(e,["config"]);return r!=null&&h(t,["config"],Nq(r,t)),t}function kq(){return{}}function Dq(){return{}}function Mq(n){const e={},t=d(n,["media"]);t!=null&&h(e,["mediaChunks"],RN(t));const i=d(n,["audio"]);i!=null&&h(e,["audio"],PN(i));const r=d(n,["audioStreamEnd"]);r!=null&&h(e,["audioStreamEnd"],r);const o=d(n,["video"]);o!=null&&h(e,["video"],NN(o));const l=d(n,["text"]);return l!=null&&h(e,["text"],l),d(n,["activityStart"])!=null&&h(e,["activityStart"],kq()),d(n,["activityEnd"])!=null&&h(e,["activityEnd"],Dq()),e}function Vq(){return{}}function Uq(n){const e={},t=d(n,["fps"]);t!=null&&h(e,["fps"],t);const i=d(n,["endOffset"]);i!=null&&h(e,["endOffset"],i);const r=d(n,["startOffset"]);return r!=null&&h(e,["startOffset"],r),e}function Lq(n){const e={},t=d(n,["data"]);t!=null&&h(e,["data"],t);const i=d(n,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function Oq(n){const e={},t=d(n,["fileUri"]);t!=null&&h(e,["fileUri"],t);const i=d(n,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function JN(n){const e={},t=d(n,["id"]);t!=null&&h(e,["id"],t);const i=d(n,["args"]);i!=null&&h(e,["args"],i);const r=d(n,["name"]);return r!=null&&h(e,["name"],r),e}function Fq(n){const e={},t=d(n,["videoMetadata"]);t!=null&&h(e,["videoMetadata"],Uq(t));const i=d(n,["thought"]);i!=null&&h(e,["thought"],i);const r=d(n,["inlineData"]);r!=null&&h(e,["inlineData"],Lq(r));const o=d(n,["fileData"]);o!=null&&h(e,["fileData"],Oq(o));const l=d(n,["thoughtSignature"]);l!=null&&h(e,["thoughtSignature"],l);const u=d(n,["functionCall"]);u!=null&&h(e,["functionCall"],JN(u));const f=d(n,["codeExecutionResult"]);f!=null&&h(e,["codeExecutionResult"],f);const m=d(n,["executableCode"]);m!=null&&h(e,["executableCode"],m);const y=d(n,["functionResponse"]);y!=null&&h(e,["functionResponse"],y);const v=d(n,["text"]);return v!=null&&h(e,["text"],v),e}function Bq(n){const e={},t=d(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(o=>Fq(o))),h(e,["parts"],r)}const i=d(n,["role"]);return i!=null&&h(e,["role"],i),e}function vA(n){const e={},t=d(n,["text"]);t!=null&&h(e,["text"],t);const i=d(n,["finished"]);return i!=null&&h(e,["finished"],i),e}function qq(n){const e={},t=d(n,["retrievedUrl"]);t!=null&&h(e,["retrievedUrl"],t);const i=d(n,["urlRetrievalStatus"]);return i!=null&&h(e,["urlRetrievalStatus"],i),e}function zq(n){const e={},t=d(n,["urlMetadata"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>qq(r))),h(e,["urlMetadata"],i)}return e}function jq(n){const e={},t=d(n,["modelTurn"]);t!=null&&h(e,["modelTurn"],Bq(t));const i=d(n,["turnComplete"]);i!=null&&h(e,["turnComplete"],i);const r=d(n,["interrupted"]);r!=null&&h(e,["interrupted"],r);const o=d(n,["groundingMetadata"]);o!=null&&h(e,["groundingMetadata"],o);const l=d(n,["generationComplete"]);l!=null&&h(e,["generationComplete"],l);const u=d(n,["inputTranscription"]);u!=null&&h(e,["inputTranscription"],vA(u));const f=d(n,["outputTranscription"]);f!=null&&h(e,["outputTranscription"],vA(f));const m=d(n,["urlContextMetadata"]);m!=null&&h(e,["urlContextMetadata"],zq(m));const y=d(n,["turnCompleteReason"]);y!=null&&h(e,["turnCompleteReason"],y);const v=d(n,["waitingForInput"]);return v!=null&&h(e,["waitingForInput"],v),e}function Gq(n){const e={},t=d(n,["functionCalls"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>JN(r))),h(e,["functionCalls"],i)}return e}function Hq(n){const e={},t=d(n,["ids"]);return t!=null&&h(e,["ids"],t),e}function um(n){const e={},t=d(n,["modality"]);t!=null&&h(e,["modality"],t);const i=d(n,["tokenCount"]);return i!=null&&h(e,["tokenCount"],i),e}function $q(n){const e={},t=d(n,["promptTokenCount"]);t!=null&&h(e,["promptTokenCount"],t);const i=d(n,["cachedContentTokenCount"]);i!=null&&h(e,["cachedContentTokenCount"],i);const r=d(n,["responseTokenCount"]);r!=null&&h(e,["responseTokenCount"],r);const o=d(n,["toolUsePromptTokenCount"]);o!=null&&h(e,["toolUsePromptTokenCount"],o);const l=d(n,["thoughtsTokenCount"]);l!=null&&h(e,["thoughtsTokenCount"],l);const u=d(n,["totalTokenCount"]);u!=null&&h(e,["totalTokenCount"],u);const f=d(n,["promptTokensDetails"]);if(f!=null){let w=f;Array.isArray(w)&&(w=w.map(E=>um(E))),h(e,["promptTokensDetails"],w)}const m=d(n,["cacheTokensDetails"]);if(m!=null){let w=m;Array.isArray(w)&&(w=w.map(E=>um(E))),h(e,["cacheTokensDetails"],w)}const y=d(n,["responseTokensDetails"]);if(y!=null){let w=y;Array.isArray(w)&&(w=w.map(E=>um(E))),h(e,["responseTokensDetails"],w)}const v=d(n,["toolUsePromptTokensDetails"]);if(v!=null){let w=v;Array.isArray(w)&&(w=w.map(E=>um(E))),h(e,["toolUsePromptTokensDetails"],w)}return e}function Wq(n){const e={},t=d(n,["timeLeft"]);return t!=null&&h(e,["timeLeft"],t),e}function Kq(n){const e={},t=d(n,["newHandle"]);t!=null&&h(e,["newHandle"],t);const i=d(n,["resumable"]);i!=null&&h(e,["resumable"],i);const r=d(n,["lastConsumedClientMessageIndex"]);return r!=null&&h(e,["lastConsumedClientMessageIndex"],r),e}function Jq(n){const e={};d(n,["setupComplete"])!=null&&h(e,["setupComplete"],Vq());const i=d(n,["serverContent"]);i!=null&&h(e,["serverContent"],jq(i));const r=d(n,["toolCall"]);r!=null&&h(e,["toolCall"],Gq(r));const o=d(n,["toolCallCancellation"]);o!=null&&h(e,["toolCallCancellation"],Hq(o));const l=d(n,["usageMetadata"]);l!=null&&h(e,["usageMetadata"],$q(l));const u=d(n,["goAway"]);u!=null&&h(e,["goAway"],Wq(u));const f=d(n,["sessionResumptionUpdate"]);return f!=null&&h(e,["sessionResumptionUpdate"],Kq(f)),e}function Yq(){return{}}function Qq(n){const e={},t=d(n,["text"]);t!=null&&h(e,["text"],t);const i=d(n,["weight"]);return i!=null&&h(e,["weight"],i),e}function Xq(n){const e={},t=d(n,["weightedPrompts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>Qq(r))),h(e,["weightedPrompts"],i)}return e}function Zq(n){const e={},t=d(n,["temperature"]);t!=null&&h(e,["temperature"],t);const i=d(n,["topK"]);i!=null&&h(e,["topK"],i);const r=d(n,["seed"]);r!=null&&h(e,["seed"],r);const o=d(n,["guidance"]);o!=null&&h(e,["guidance"],o);const l=d(n,["bpm"]);l!=null&&h(e,["bpm"],l);const u=d(n,["density"]);u!=null&&h(e,["density"],u);const f=d(n,["brightness"]);f!=null&&h(e,["brightness"],f);const m=d(n,["scale"]);m!=null&&h(e,["scale"],m);const y=d(n,["muteBass"]);y!=null&&h(e,["muteBass"],y);const v=d(n,["muteDrums"]);v!=null&&h(e,["muteDrums"],v);const w=d(n,["onlyBassAndDrums"]);w!=null&&h(e,["onlyBassAndDrums"],w);const E=d(n,["musicGenerationMode"]);return E!=null&&h(e,["musicGenerationMode"],E),e}function ez(n){const e={},t=d(n,["clientContent"]);t!=null&&h(e,["clientContent"],Xq(t));const i=d(n,["musicGenerationConfig"]);return i!=null&&h(e,["musicGenerationConfig"],Zq(i)),e}function tz(n){const e={},t=d(n,["data"]);t!=null&&h(e,["data"],t);const i=d(n,["mimeType"]);i!=null&&h(e,["mimeType"],i);const r=d(n,["sourceMetadata"]);return r!=null&&h(e,["sourceMetadata"],ez(r)),e}function nz(n){const e={},t=d(n,["audioChunks"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>tz(r))),h(e,["audioChunks"],i)}return e}function iz(n){const e={},t=d(n,["text"]);t!=null&&h(e,["text"],t);const i=d(n,["filteredReason"]);return i!=null&&h(e,["filteredReason"],i),e}function rz(n){const e={};d(n,["setupComplete"])!=null&&h(e,["setupComplete"],Yq());const i=d(n,["serverContent"]);i!=null&&h(e,["serverContent"],nz(i));const r=d(n,["filteredPrompt"]);return r!=null&&h(e,["filteredPrompt"],iz(r)),e}function sz(n){const e={},t=d(n,["sessionId"]);return t!=null&&h(e,["sessionId"],t),e}function oz(n){const e={},t=d(n,["fps"]);t!=null&&h(e,["fps"],t);const i=d(n,["endOffset"]);i!=null&&h(e,["endOffset"],i);const r=d(n,["startOffset"]);return r!=null&&h(e,["startOffset"],r),e}function az(n){const e={},t=d(n,["displayName"]);t!=null&&h(e,["displayName"],t);const i=d(n,["data"]);i!=null&&h(e,["data"],i);const r=d(n,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function lz(n){const e={},t=d(n,["displayName"]);t!=null&&h(e,["displayName"],t);const i=d(n,["fileUri"]);i!=null&&h(e,["fileUri"],i);const r=d(n,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function YN(n){const e={},t=d(n,["id"]);t!=null&&h(e,["id"],t);const i=d(n,["args"]);i!=null&&h(e,["args"],i);const r=d(n,["name"]);return r!=null&&h(e,["name"],r),e}function uz(n){const e={},t=d(n,["videoMetadata"]);t!=null&&h(e,["videoMetadata"],oz(t));const i=d(n,["thought"]);i!=null&&h(e,["thought"],i);const r=d(n,["inlineData"]);r!=null&&h(e,["inlineData"],az(r));const o=d(n,["fileData"]);o!=null&&h(e,["fileData"],lz(o));const l=d(n,["thoughtSignature"]);l!=null&&h(e,["thoughtSignature"],l);const u=d(n,["functionCall"]);u!=null&&h(e,["functionCall"],YN(u));const f=d(n,["codeExecutionResult"]);f!=null&&h(e,["codeExecutionResult"],f);const m=d(n,["executableCode"]);m!=null&&h(e,["executableCode"],m);const y=d(n,["functionResponse"]);y!=null&&h(e,["functionResponse"],y);const v=d(n,["text"]);return v!=null&&h(e,["text"],v),e}function cz(n){const e={},t=d(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(o=>uz(o))),h(e,["parts"],r)}const i=d(n,["role"]);return i!=null&&h(e,["role"],i),e}function TA(n){const e={},t=d(n,["text"]);t!=null&&h(e,["text"],t);const i=d(n,["finished"]);return i!=null&&h(e,["finished"],i),e}function dz(n){const e={},t=d(n,["modelTurn"]);t!=null&&h(e,["modelTurn"],cz(t));const i=d(n,["turnComplete"]);i!=null&&h(e,["turnComplete"],i);const r=d(n,["interrupted"]);r!=null&&h(e,["interrupted"],r);const o=d(n,["groundingMetadata"]);o!=null&&h(e,["groundingMetadata"],o);const l=d(n,["generationComplete"]);l!=null&&h(e,["generationComplete"],l);const u=d(n,["inputTranscription"]);u!=null&&h(e,["inputTranscription"],TA(u));const f=d(n,["outputTranscription"]);f!=null&&h(e,["outputTranscription"],TA(f));const m=d(n,["turnCompleteReason"]);m!=null&&h(e,["turnCompleteReason"],m);const y=d(n,["waitingForInput"]);return y!=null&&h(e,["waitingForInput"],y),e}function fz(n){const e={},t=d(n,["functionCalls"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>YN(r))),h(e,["functionCalls"],i)}return e}function hz(n){const e={},t=d(n,["ids"]);return t!=null&&h(e,["ids"],t),e}function cm(n){const e={},t=d(n,["modality"]);t!=null&&h(e,["modality"],t);const i=d(n,["tokenCount"]);return i!=null&&h(e,["tokenCount"],i),e}function mz(n){const e={},t=d(n,["promptTokenCount"]);t!=null&&h(e,["promptTokenCount"],t);const i=d(n,["cachedContentTokenCount"]);i!=null&&h(e,["cachedContentTokenCount"],i);const r=d(n,["candidatesTokenCount"]);r!=null&&h(e,["responseTokenCount"],r);const o=d(n,["toolUsePromptTokenCount"]);o!=null&&h(e,["toolUsePromptTokenCount"],o);const l=d(n,["thoughtsTokenCount"]);l!=null&&h(e,["thoughtsTokenCount"],l);const u=d(n,["totalTokenCount"]);u!=null&&h(e,["totalTokenCount"],u);const f=d(n,["promptTokensDetails"]);if(f!=null){let E=f;Array.isArray(E)&&(E=E.map(S=>cm(S))),h(e,["promptTokensDetails"],E)}const m=d(n,["cacheTokensDetails"]);if(m!=null){let E=m;Array.isArray(E)&&(E=E.map(S=>cm(S))),h(e,["cacheTokensDetails"],E)}const y=d(n,["candidatesTokensDetails"]);if(y!=null){let E=y;Array.isArray(E)&&(E=E.map(S=>cm(S))),h(e,["responseTokensDetails"],E)}const v=d(n,["toolUsePromptTokensDetails"]);if(v!=null){let E=v;Array.isArray(E)&&(E=E.map(S=>cm(S))),h(e,["toolUsePromptTokensDetails"],E)}const w=d(n,["trafficType"]);return w!=null&&h(e,["trafficType"],w),e}function pz(n){const e={},t=d(n,["timeLeft"]);return t!=null&&h(e,["timeLeft"],t),e}function gz(n){const e={},t=d(n,["newHandle"]);t!=null&&h(e,["newHandle"],t);const i=d(n,["resumable"]);i!=null&&h(e,["resumable"],i);const r=d(n,["lastConsumedClientMessageIndex"]);return r!=null&&h(e,["lastConsumedClientMessageIndex"],r),e}function yz(n){const e={},t=d(n,["setupComplete"]);t!=null&&h(e,["setupComplete"],sz(t));const i=d(n,["serverContent"]);i!=null&&h(e,["serverContent"],dz(i));const r=d(n,["toolCall"]);r!=null&&h(e,["toolCall"],fz(r));const o=d(n,["toolCallCancellation"]);o!=null&&h(e,["toolCallCancellation"],hz(o));const l=d(n,["usageMetadata"]);l!=null&&h(e,["usageMetadata"],mz(l));const u=d(n,["goAway"]);u!=null&&h(e,["goAway"],pz(u));const f=d(n,["sessionResumptionUpdate"]);return f!=null&&h(e,["sessionResumptionUpdate"],gz(f)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function _z(n){const e={},t=d(n,["fps"]);t!=null&&h(e,["fps"],t);const i=d(n,["endOffset"]);i!=null&&h(e,["endOffset"],i);const r=d(n,["startOffset"]);return r!=null&&h(e,["startOffset"],r),e}function vz(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=d(n,["data"]);t!=null&&h(e,["data"],t);const i=d(n,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function Tz(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=d(n,["fileUri"]);t!=null&&h(e,["fileUri"],t);const i=d(n,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function wz(n){const e={},t=d(n,["id"]);t!=null&&h(e,["id"],t);const i=d(n,["args"]);i!=null&&h(e,["args"],i);const r=d(n,["name"]);return r!=null&&h(e,["name"],r),e}function xz(n){const e={},t=d(n,["videoMetadata"]);t!=null&&h(e,["videoMetadata"],_z(t));const i=d(n,["thought"]);i!=null&&h(e,["thought"],i);const r=d(n,["inlineData"]);r!=null&&h(e,["inlineData"],vz(r));const o=d(n,["fileData"]);o!=null&&h(e,["fileData"],Tz(o));const l=d(n,["thoughtSignature"]);l!=null&&h(e,["thoughtSignature"],l);const u=d(n,["functionCall"]);u!=null&&h(e,["functionCall"],wz(u));const f=d(n,["codeExecutionResult"]);f!=null&&h(e,["codeExecutionResult"],f);const m=d(n,["executableCode"]);m!=null&&h(e,["executableCode"],m);const y=d(n,["functionResponse"]);y!=null&&h(e,["functionResponse"],y);const v=d(n,["text"]);return v!=null&&h(e,["text"],v),e}function Qp(n){const e={},t=d(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(o=>xz(o))),h(e,["parts"],r)}const i=d(n,["role"]);return i!=null&&h(e,["role"],i),e}function Ez(n){const e={},t=d(n,["anyOf"]);t!=null&&h(e,["anyOf"],t);const i=d(n,["default"]);i!=null&&h(e,["default"],i);const r=d(n,["description"]);r!=null&&h(e,["description"],r);const o=d(n,["enum"]);o!=null&&h(e,["enum"],o);const l=d(n,["example"]);l!=null&&h(e,["example"],l);const u=d(n,["format"]);u!=null&&h(e,["format"],u);const f=d(n,["items"]);f!=null&&h(e,["items"],f);const m=d(n,["maxItems"]);m!=null&&h(e,["maxItems"],m);const y=d(n,["maxLength"]);y!=null&&h(e,["maxLength"],y);const v=d(n,["maxProperties"]);v!=null&&h(e,["maxProperties"],v);const w=d(n,["maximum"]);w!=null&&h(e,["maximum"],w);const E=d(n,["minItems"]);E!=null&&h(e,["minItems"],E);const S=d(n,["minLength"]);S!=null&&h(e,["minLength"],S);const b=d(n,["minProperties"]);b!=null&&h(e,["minProperties"],b);const A=d(n,["minimum"]);A!=null&&h(e,["minimum"],A);const C=d(n,["nullable"]);C!=null&&h(e,["nullable"],C);const R=d(n,["pattern"]);R!=null&&h(e,["pattern"],R);const L=d(n,["properties"]);L!=null&&h(e,["properties"],L);const q=d(n,["propertyOrdering"]);q!=null&&h(e,["propertyOrdering"],q);const z=d(n,["required"]);z!=null&&h(e,["required"],z);const H=d(n,["title"]);H!=null&&h(e,["title"],H);const O=d(n,["type"]);return O!=null&&h(e,["type"],O),e}function bz(n){const e={};if(d(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const t=d(n,["category"]);t!=null&&h(e,["category"],t);const i=d(n,["threshold"]);return i!=null&&h(e,["threshold"],i),e}function Sz(n){const e={},t=d(n,["behavior"]);t!=null&&h(e,["behavior"],t);const i=d(n,["description"]);i!=null&&h(e,["description"],i);const r=d(n,["name"]);r!=null&&h(e,["name"],r);const o=d(n,["parameters"]);o!=null&&h(e,["parameters"],o);const l=d(n,["parametersJsonSchema"]);l!=null&&h(e,["parametersJsonSchema"],l);const u=d(n,["response"]);u!=null&&h(e,["response"],u);const f=d(n,["responseJsonSchema"]);return f!=null&&h(e,["responseJsonSchema"],f),e}function Iz(n){const e={},t=d(n,["startTime"]);t!=null&&h(e,["startTime"],t);const i=d(n,["endTime"]);return i!=null&&h(e,["endTime"],i),e}function Az(n){const e={},t=d(n,["timeRangeFilter"]);if(t!=null&&h(e,["timeRangeFilter"],Iz(t)),d(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function Cz(n){const e={},t=d(n,["mode"]);t!=null&&h(e,["mode"],t);const i=d(n,["dynamicThreshold"]);return i!=null&&h(e,["dynamicThreshold"],i),e}function Rz(n){const e={},t=d(n,["dynamicRetrievalConfig"]);return t!=null&&h(e,["dynamicRetrievalConfig"],Cz(t)),e}function Nz(){return{}}function Pz(n){const e={},t=d(n,["environment"]);return t!=null&&h(e,["environment"],t),e}function kz(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let f=t;Array.isArray(f)&&(f=f.map(m=>Sz(m))),h(e,["functionDeclarations"],f)}if(d(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=d(n,["googleSearch"]);i!=null&&h(e,["googleSearch"],Az(i));const r=d(n,["googleSearchRetrieval"]);if(r!=null&&h(e,["googleSearchRetrieval"],Rz(r)),d(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(d(n,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");d(n,["urlContext"])!=null&&h(e,["urlContext"],Nz());const l=d(n,["computerUse"]);l!=null&&h(e,["computerUse"],Pz(l));const u=d(n,["codeExecution"]);return u!=null&&h(e,["codeExecution"],u),e}function Dz(n){const e={},t=d(n,["mode"]);t!=null&&h(e,["mode"],t);const i=d(n,["allowedFunctionNames"]);return i!=null&&h(e,["allowedFunctionNames"],i),e}function Mz(n){const e={},t=d(n,["latitude"]);t!=null&&h(e,["latitude"],t);const i=d(n,["longitude"]);return i!=null&&h(e,["longitude"],i),e}function Vz(n){const e={},t=d(n,["latLng"]);t!=null&&h(e,["latLng"],Mz(t));const i=d(n,["languageCode"]);return i!=null&&h(e,["languageCode"],i),e}function Uz(n){const e={},t=d(n,["functionCallingConfig"]);t!=null&&h(e,["functionCallingConfig"],Dz(t));const i=d(n,["retrievalConfig"]);return i!=null&&h(e,["retrievalConfig"],Vz(i)),e}function Lz(n){const e={},t=d(n,["voiceName"]);return t!=null&&h(e,["voiceName"],t),e}function QN(n){const e={},t=d(n,["prebuiltVoiceConfig"]);return t!=null&&h(e,["prebuiltVoiceConfig"],Lz(t)),e}function Oz(n){const e={},t=d(n,["speaker"]);t!=null&&h(e,["speaker"],t);const i=d(n,["voiceConfig"]);return i!=null&&h(e,["voiceConfig"],QN(i)),e}function Fz(n){const e={},t=d(n,["speakerVoiceConfigs"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>Oz(r))),h(e,["speakerVoiceConfigs"],i)}return e}function Bz(n){const e={},t=d(n,["voiceConfig"]);t!=null&&h(e,["voiceConfig"],QN(t));const i=d(n,["multiSpeakerVoiceConfig"]);i!=null&&h(e,["multiSpeakerVoiceConfig"],Fz(i));const r=d(n,["languageCode"]);return r!=null&&h(e,["languageCode"],r),e}function qz(n){const e={},t=d(n,["includeThoughts"]);t!=null&&h(e,["includeThoughts"],t);const i=d(n,["thinkingBudget"]);return i!=null&&h(e,["thinkingBudget"],i),e}function zz(n,e,t){const i={},r=d(e,["systemInstruction"]);t!==void 0&&r!=null&&h(t,["systemInstruction"],Qp(ni(r)));const o=d(e,["temperature"]);o!=null&&h(i,["temperature"],o);const l=d(e,["topP"]);l!=null&&h(i,["topP"],l);const u=d(e,["topK"]);u!=null&&h(i,["topK"],u);const f=d(e,["candidateCount"]);f!=null&&h(i,["candidateCount"],f);const m=d(e,["maxOutputTokens"]);m!=null&&h(i,["maxOutputTokens"],m);const y=d(e,["stopSequences"]);y!=null&&h(i,["stopSequences"],y);const v=d(e,["responseLogprobs"]);v!=null&&h(i,["responseLogprobs"],v);const w=d(e,["logprobs"]);w!=null&&h(i,["logprobs"],w);const E=d(e,["presencePenalty"]);E!=null&&h(i,["presencePenalty"],E);const S=d(e,["frequencyPenalty"]);S!=null&&h(i,["frequencyPenalty"],S);const b=d(e,["seed"]);b!=null&&h(i,["seed"],b);const A=d(e,["responseMimeType"]);A!=null&&h(i,["responseMimeType"],A);const C=d(e,["responseSchema"]);C!=null&&h(i,["responseSchema"],Ez(bT(C)));const R=d(e,["responseJsonSchema"]);if(R!=null&&h(i,["responseJsonSchema"],R),d(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(d(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const L=d(e,["safetySettings"]);if(t!==void 0&&L!=null){let J=L;Array.isArray(J)&&(J=J.map(M=>bz(M))),h(t,["safetySettings"],J)}const q=d(e,["tools"]);if(t!==void 0&&q!=null){let J=ec(q);Array.isArray(J)&&(J=J.map(M=>kz(Zu(M)))),h(t,["tools"],J)}const z=d(e,["toolConfig"]);if(t!==void 0&&z!=null&&h(t,["toolConfig"],Uz(z)),d(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const H=d(e,["cachedContent"]);t!==void 0&&H!=null&&h(t,["cachedContent"],Us(n,H));const O=d(e,["responseModalities"]);O!=null&&h(i,["responseModalities"],O);const V=d(e,["mediaResolution"]);V!=null&&h(i,["mediaResolution"],V);const U=d(e,["speechConfig"]);if(U!=null&&h(i,["speechConfig"],Bz(ST(U))),d(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const j=d(e,["thinkingConfig"]);return j!=null&&h(i,["thinkingConfig"],qz(j)),i}function wA(n,e){const t={},i=d(e,["model"]);i!=null&&h(t,["_url","model"],It(n,i));const r=d(e,["contents"]);if(r!=null){let l=Zi(r);Array.isArray(l)&&(l=l.map(u=>Qp(u))),h(t,["contents"],l)}const o=d(e,["config"]);return o!=null&&h(t,["generationConfig"],zz(n,o,t)),t}function jz(n,e){const t={},i=d(n,["taskType"]);e!==void 0&&i!=null&&h(e,["requests[]","taskType"],i);const r=d(n,["title"]);e!==void 0&&r!=null&&h(e,["requests[]","title"],r);const o=d(n,["outputDimensionality"]);if(e!==void 0&&o!=null&&h(e,["requests[]","outputDimensionality"],o),d(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(d(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function Gz(n,e){const t={},i=d(e,["model"]);i!=null&&h(t,["_url","model"],It(n,i));const r=d(e,["contents"]);r!=null&&h(t,["requests[]","content"],ET(n,r));const o=d(e,["config"]);o!=null&&h(t,["config"],jz(o,t));const l=d(e,["model"]);return l!==void 0&&h(t,["requests[]","model"],It(n,l)),t}function Hz(n,e){const t={};if(d(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(d(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=d(n,["numberOfImages"]);e!==void 0&&i!=null&&h(e,["parameters","sampleCount"],i);const r=d(n,["aspectRatio"]);e!==void 0&&r!=null&&h(e,["parameters","aspectRatio"],r);const o=d(n,["guidanceScale"]);if(e!==void 0&&o!=null&&h(e,["parameters","guidanceScale"],o),d(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=d(n,["safetyFilterLevel"]);e!==void 0&&l!=null&&h(e,["parameters","safetySetting"],l);const u=d(n,["personGeneration"]);e!==void 0&&u!=null&&h(e,["parameters","personGeneration"],u);const f=d(n,["includeSafetyAttributes"]);e!==void 0&&f!=null&&h(e,["parameters","includeSafetyAttributes"],f);const m=d(n,["includeRaiReason"]);e!==void 0&&m!=null&&h(e,["parameters","includeRaiReason"],m);const y=d(n,["language"]);e!==void 0&&y!=null&&h(e,["parameters","language"],y);const v=d(n,["outputMimeType"]);e!==void 0&&v!=null&&h(e,["parameters","outputOptions","mimeType"],v);const w=d(n,["outputCompressionQuality"]);if(e!==void 0&&w!=null&&h(e,["parameters","outputOptions","compressionQuality"],w),d(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");const E=d(n,["imageSize"]);if(e!==void 0&&E!=null&&h(e,["parameters","sampleImageSize"],E),d(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return t}function $z(n,e){const t={},i=d(e,["model"]);i!=null&&h(t,["_url","model"],It(n,i));const r=d(e,["prompt"]);r!=null&&h(t,["instances[0]","prompt"],r);const o=d(e,["config"]);return o!=null&&h(t,["config"],Hz(o,t)),t}function Wz(n,e){const t={},i=d(e,["model"]);i!=null&&h(t,["_url","name"],It(n,i));const r=d(e,["config"]);return r!=null&&h(t,["config"],r),t}function Kz(n,e,t){const i={},r=d(e,["pageSize"]);t!==void 0&&r!=null&&h(t,["_query","pageSize"],r);const o=d(e,["pageToken"]);t!==void 0&&o!=null&&h(t,["_query","pageToken"],o);const l=d(e,["filter"]);t!==void 0&&l!=null&&h(t,["_query","filter"],l);const u=d(e,["queryBase"]);return t!==void 0&&u!=null&&h(t,["_url","models_url"],VN(n,u)),i}function Jz(n,e){const t={},i=d(e,["config"]);return i!=null&&h(t,["config"],Kz(n,i,t)),t}function Yz(n,e){const t={},i=d(n,["displayName"]);e!==void 0&&i!=null&&h(e,["displayName"],i);const r=d(n,["description"]);e!==void 0&&r!=null&&h(e,["description"],r);const o=d(n,["defaultCheckpointId"]);return e!==void 0&&o!=null&&h(e,["defaultCheckpointId"],o),t}function Qz(n,e){const t={},i=d(e,["model"]);i!=null&&h(t,["_url","name"],It(n,i));const r=d(e,["config"]);return r!=null&&h(t,["config"],Yz(r,t)),t}function Xz(n,e){const t={},i=d(e,["model"]);i!=null&&h(t,["_url","name"],It(n,i));const r=d(e,["config"]);return r!=null&&h(t,["config"],r),t}function Zz(n){const e={};if(d(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(d(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(d(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function ej(n,e){const t={},i=d(e,["model"]);i!=null&&h(t,["_url","model"],It(n,i));const r=d(e,["contents"]);if(r!=null){let l=Zi(r);Array.isArray(l)&&(l=l.map(u=>Qp(u))),h(t,["contents"],l)}const o=d(e,["config"]);return o!=null&&h(t,["config"],Zz(o)),t}function XN(n){const e={};if(d(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const t=d(n,["imageBytes"]);t!=null&&h(e,["bytesBase64Encoded"],el(t));const i=d(n,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function tj(n,e){const t={},i=d(n,["prompt"]);e!==void 0&&i!=null&&h(e,["instances[0]","prompt"],i);const r=d(n,["image"]);if(e!==void 0&&r!=null&&h(e,["instances[0]","image"],XN(r)),d(n,["video"])!==void 0)throw new Error("video parameter is not supported in Gemini API.");return t}function nj(n,e){const t={},i=d(n,["numberOfVideos"]);if(e!==void 0&&i!=null&&h(e,["parameters","sampleCount"],i),d(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(d(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const r=d(n,["durationSeconds"]);if(e!==void 0&&r!=null&&h(e,["parameters","durationSeconds"],r),d(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=d(n,["aspectRatio"]);e!==void 0&&o!=null&&h(e,["parameters","aspectRatio"],o);const l=d(n,["resolution"]);e!==void 0&&l!=null&&h(e,["parameters","resolution"],l);const u=d(n,["personGeneration"]);if(e!==void 0&&u!=null&&h(e,["parameters","personGeneration"],u),d(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const f=d(n,["negativePrompt"]);e!==void 0&&f!=null&&h(e,["parameters","negativePrompt"],f);const m=d(n,["enhancePrompt"]);if(e!==void 0&&m!=null&&h(e,["parameters","enhancePrompt"],m),d(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");if(d(n,["lastFrame"])!==void 0)throw new Error("lastFrame parameter is not supported in Gemini API.");if(d(n,["referenceImages"])!==void 0)throw new Error("referenceImages parameter is not supported in Gemini API.");if(d(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(d(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return t}function ij(n,e){const t={},i=d(e,["model"]);i!=null&&h(t,["_url","model"],It(n,i));const r=d(e,["prompt"]);r!=null&&h(t,["instances[0]","prompt"],r);const o=d(e,["image"]);if(o!=null&&h(t,["instances[0]","image"],XN(o)),d(e,["video"])!==void 0)throw new Error("video parameter is not supported in Gemini API.");const l=d(e,["source"]);l!=null&&h(t,["config"],tj(l,t));const u=d(e,["config"]);return u!=null&&h(t,["config"],nj(u,t)),t}function rj(n){const e={},t=d(n,["fps"]);t!=null&&h(e,["fps"],t);const i=d(n,["endOffset"]);i!=null&&h(e,["endOffset"],i);const r=d(n,["startOffset"]);return r!=null&&h(e,["startOffset"],r),e}function sj(n){const e={},t=d(n,["displayName"]);t!=null&&h(e,["displayName"],t);const i=d(n,["data"]);i!=null&&h(e,["data"],i);const r=d(n,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function oj(n){const e={},t=d(n,["displayName"]);t!=null&&h(e,["displayName"],t);const i=d(n,["fileUri"]);i!=null&&h(e,["fileUri"],i);const r=d(n,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function aj(n){const e={},t=d(n,["id"]);t!=null&&h(e,["id"],t);const i=d(n,["args"]);i!=null&&h(e,["args"],i);const r=d(n,["name"]);return r!=null&&h(e,["name"],r),e}function lj(n){const e={},t=d(n,["videoMetadata"]);t!=null&&h(e,["videoMetadata"],rj(t));const i=d(n,["thought"]);i!=null&&h(e,["thought"],i);const r=d(n,["inlineData"]);r!=null&&h(e,["inlineData"],sj(r));const o=d(n,["fileData"]);o!=null&&h(e,["fileData"],oj(o));const l=d(n,["thoughtSignature"]);l!=null&&h(e,["thoughtSignature"],l);const u=d(n,["functionCall"]);u!=null&&h(e,["functionCall"],aj(u));const f=d(n,["codeExecutionResult"]);f!=null&&h(e,["codeExecutionResult"],f);const m=d(n,["executableCode"]);m!=null&&h(e,["executableCode"],m);const y=d(n,["functionResponse"]);y!=null&&h(e,["functionResponse"],y);const v=d(n,["text"]);return v!=null&&h(e,["text"],v),e}function nc(n){const e={},t=d(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(o=>lj(o))),h(e,["parts"],r)}const i=d(n,["role"]);return i!=null&&h(e,["role"],i),e}function uj(n){const e={},t=d(n,["anyOf"]);t!=null&&h(e,["anyOf"],t);const i=d(n,["default"]);i!=null&&h(e,["default"],i);const r=d(n,["description"]);r!=null&&h(e,["description"],r);const o=d(n,["enum"]);o!=null&&h(e,["enum"],o);const l=d(n,["example"]);l!=null&&h(e,["example"],l);const u=d(n,["format"]);u!=null&&h(e,["format"],u);const f=d(n,["items"]);f!=null&&h(e,["items"],f);const m=d(n,["maxItems"]);m!=null&&h(e,["maxItems"],m);const y=d(n,["maxLength"]);y!=null&&h(e,["maxLength"],y);const v=d(n,["maxProperties"]);v!=null&&h(e,["maxProperties"],v);const w=d(n,["maximum"]);w!=null&&h(e,["maximum"],w);const E=d(n,["minItems"]);E!=null&&h(e,["minItems"],E);const S=d(n,["minLength"]);S!=null&&h(e,["minLength"],S);const b=d(n,["minProperties"]);b!=null&&h(e,["minProperties"],b);const A=d(n,["minimum"]);A!=null&&h(e,["minimum"],A);const C=d(n,["nullable"]);C!=null&&h(e,["nullable"],C);const R=d(n,["pattern"]);R!=null&&h(e,["pattern"],R);const L=d(n,["properties"]);L!=null&&h(e,["properties"],L);const q=d(n,["propertyOrdering"]);q!=null&&h(e,["propertyOrdering"],q);const z=d(n,["required"]);z!=null&&h(e,["required"],z);const H=d(n,["title"]);H!=null&&h(e,["title"],H);const O=d(n,["type"]);return O!=null&&h(e,["type"],O),e}function cj(n){const e={},t=d(n,["featureSelectionPreference"]);return t!=null&&h(e,["featureSelectionPreference"],t),e}function dj(n){const e={},t=d(n,["method"]);t!=null&&h(e,["method"],t);const i=d(n,["category"]);i!=null&&h(e,["category"],i);const r=d(n,["threshold"]);return r!=null&&h(e,["threshold"],r),e}function fj(n){const e={};if(d(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=d(n,["description"]);t!=null&&h(e,["description"],t);const i=d(n,["name"]);i!=null&&h(e,["name"],i);const r=d(n,["parameters"]);r!=null&&h(e,["parameters"],r);const o=d(n,["parametersJsonSchema"]);o!=null&&h(e,["parametersJsonSchema"],o);const l=d(n,["response"]);l!=null&&h(e,["response"],l);const u=d(n,["responseJsonSchema"]);return u!=null&&h(e,["responseJsonSchema"],u),e}function hj(n){const e={},t=d(n,["startTime"]);t!=null&&h(e,["startTime"],t);const i=d(n,["endTime"]);return i!=null&&h(e,["endTime"],i),e}function mj(n){const e={},t=d(n,["timeRangeFilter"]);t!=null&&h(e,["timeRangeFilter"],hj(t));const i=d(n,["excludeDomains"]);return i!=null&&h(e,["excludeDomains"],i),e}function pj(n){const e={},t=d(n,["mode"]);t!=null&&h(e,["mode"],t);const i=d(n,["dynamicThreshold"]);return i!=null&&h(e,["dynamicThreshold"],i),e}function gj(n){const e={},t=d(n,["dynamicRetrievalConfig"]);return t!=null&&h(e,["dynamicRetrievalConfig"],pj(t)),e}function yj(n){const e={},t=d(n,["excludeDomains"]);return t!=null&&h(e,["excludeDomains"],t),e}function _j(n){const e={},t=d(n,["apiKeyString"]);return t!=null&&h(e,["apiKeyString"],t),e}function vj(n){const e={},t=d(n,["apiKeyConfig"]);t!=null&&h(e,["apiKeyConfig"],_j(t));const i=d(n,["authType"]);i!=null&&h(e,["authType"],i);const r=d(n,["googleServiceAccountConfig"]);r!=null&&h(e,["googleServiceAccountConfig"],r);const o=d(n,["httpBasicAuthConfig"]);o!=null&&h(e,["httpBasicAuthConfig"],o);const l=d(n,["oauthConfig"]);l!=null&&h(e,["oauthConfig"],l);const u=d(n,["oidcConfig"]);return u!=null&&h(e,["oidcConfig"],u),e}function Tj(n){const e={},t=d(n,["authConfig"]);return t!=null&&h(e,["authConfig"],vj(t)),e}function wj(){return{}}function xj(n){const e={},t=d(n,["environment"]);return t!=null&&h(e,["environment"],t),e}function ZN(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let v=t;Array.isArray(v)&&(v=v.map(w=>fj(w))),h(e,["functionDeclarations"],v)}const i=d(n,["retrieval"]);i!=null&&h(e,["retrieval"],i);const r=d(n,["googleSearch"]);r!=null&&h(e,["googleSearch"],mj(r));const o=d(n,["googleSearchRetrieval"]);o!=null&&h(e,["googleSearchRetrieval"],gj(o));const l=d(n,["enterpriseWebSearch"]);l!=null&&h(e,["enterpriseWebSearch"],yj(l));const u=d(n,["googleMaps"]);u!=null&&h(e,["googleMaps"],Tj(u)),d(n,["urlContext"])!=null&&h(e,["urlContext"],wj());const m=d(n,["computerUse"]);m!=null&&h(e,["computerUse"],xj(m));const y=d(n,["codeExecution"]);return y!=null&&h(e,["codeExecution"],y),e}function Ej(n){const e={},t=d(n,["mode"]);t!=null&&h(e,["mode"],t);const i=d(n,["allowedFunctionNames"]);return i!=null&&h(e,["allowedFunctionNames"],i),e}function bj(n){const e={},t=d(n,["latitude"]);t!=null&&h(e,["latitude"],t);const i=d(n,["longitude"]);return i!=null&&h(e,["longitude"],i),e}function Sj(n){const e={},t=d(n,["latLng"]);t!=null&&h(e,["latLng"],bj(t));const i=d(n,["languageCode"]);return i!=null&&h(e,["languageCode"],i),e}function Ij(n){const e={},t=d(n,["functionCallingConfig"]);t!=null&&h(e,["functionCallingConfig"],Ej(t));const i=d(n,["retrievalConfig"]);return i!=null&&h(e,["retrievalConfig"],Sj(i)),e}function Aj(n){const e={},t=d(n,["voiceName"]);return t!=null&&h(e,["voiceName"],t),e}function Cj(n){const e={},t=d(n,["prebuiltVoiceConfig"]);return t!=null&&h(e,["prebuiltVoiceConfig"],Aj(t)),e}function Rj(n){const e={},t=d(n,["voiceConfig"]);if(t!=null&&h(e,["voiceConfig"],Cj(t)),d(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const i=d(n,["languageCode"]);return i!=null&&h(e,["languageCode"],i),e}function Nj(n){const e={},t=d(n,["includeThoughts"]);t!=null&&h(e,["includeThoughts"],t);const i=d(n,["thinkingBudget"]);return i!=null&&h(e,["thinkingBudget"],i),e}function Pj(n,e,t){const i={},r=d(e,["systemInstruction"]);t!==void 0&&r!=null&&h(t,["systemInstruction"],nc(ni(r)));const o=d(e,["temperature"]);o!=null&&h(i,["temperature"],o);const l=d(e,["topP"]);l!=null&&h(i,["topP"],l);const u=d(e,["topK"]);u!=null&&h(i,["topK"],u);const f=d(e,["candidateCount"]);f!=null&&h(i,["candidateCount"],f);const m=d(e,["maxOutputTokens"]);m!=null&&h(i,["maxOutputTokens"],m);const y=d(e,["stopSequences"]);y!=null&&h(i,["stopSequences"],y);const v=d(e,["responseLogprobs"]);v!=null&&h(i,["responseLogprobs"],v);const w=d(e,["logprobs"]);w!=null&&h(i,["logprobs"],w);const E=d(e,["presencePenalty"]);E!=null&&h(i,["presencePenalty"],E);const S=d(e,["frequencyPenalty"]);S!=null&&h(i,["frequencyPenalty"],S);const b=d(e,["seed"]);b!=null&&h(i,["seed"],b);const A=d(e,["responseMimeType"]);A!=null&&h(i,["responseMimeType"],A);const C=d(e,["responseSchema"]);C!=null&&h(i,["responseSchema"],uj(bT(C)));const R=d(e,["responseJsonSchema"]);R!=null&&h(i,["responseJsonSchema"],R);const L=d(e,["routingConfig"]);L!=null&&h(i,["routingConfig"],L);const q=d(e,["modelSelectionConfig"]);q!=null&&h(i,["modelConfig"],cj(q));const z=d(e,["safetySettings"]);if(t!==void 0&&z!=null){let ne=z;Array.isArray(ne)&&(ne=ne.map(te=>dj(te))),h(t,["safetySettings"],ne)}const H=d(e,["tools"]);if(t!==void 0&&H!=null){let ne=ec(H);Array.isArray(ne)&&(ne=ne.map(te=>ZN(Zu(te)))),h(t,["tools"],ne)}const O=d(e,["toolConfig"]);t!==void 0&&O!=null&&h(t,["toolConfig"],Ij(O));const V=d(e,["labels"]);t!==void 0&&V!=null&&h(t,["labels"],V);const U=d(e,["cachedContent"]);t!==void 0&&U!=null&&h(t,["cachedContent"],Us(n,U));const j=d(e,["responseModalities"]);j!=null&&h(i,["responseModalities"],j);const J=d(e,["mediaResolution"]);J!=null&&h(i,["mediaResolution"],J);const M=d(e,["speechConfig"]);M!=null&&h(i,["speechConfig"],Rj(ST(M)));const F=d(e,["audioTimestamp"]);F!=null&&h(i,["audioTimestamp"],F);const k=d(e,["thinkingConfig"]);return k!=null&&h(i,["thinkingConfig"],Nj(k)),i}function xA(n,e){const t={},i=d(e,["model"]);i!=null&&h(t,["_url","model"],It(n,i));const r=d(e,["contents"]);if(r!=null){let l=Zi(r);Array.isArray(l)&&(l=l.map(u=>nc(u))),h(t,["contents"],l)}const o=d(e,["config"]);return o!=null&&h(t,["generationConfig"],Pj(n,o,t)),t}function kj(n,e){const t={},i=d(n,["taskType"]);e!==void 0&&i!=null&&h(e,["instances[]","task_type"],i);const r=d(n,["title"]);e!==void 0&&r!=null&&h(e,["instances[]","title"],r);const o=d(n,["outputDimensionality"]);e!==void 0&&o!=null&&h(e,["parameters","outputDimensionality"],o);const l=d(n,["mimeType"]);e!==void 0&&l!=null&&h(e,["instances[]","mimeType"],l);const u=d(n,["autoTruncate"]);return e!==void 0&&u!=null&&h(e,["parameters","autoTruncate"],u),t}function Dj(n,e){const t={},i=d(e,["model"]);i!=null&&h(t,["_url","model"],It(n,i));const r=d(e,["contents"]);r!=null&&h(t,["instances[]","content"],ET(n,r));const o=d(e,["config"]);return o!=null&&h(t,["config"],kj(o,t)),t}function Mj(n,e){const t={},i=d(n,["outputGcsUri"]);e!==void 0&&i!=null&&h(e,["parameters","storageUri"],i);const r=d(n,["negativePrompt"]);e!==void 0&&r!=null&&h(e,["parameters","negativePrompt"],r);const o=d(n,["numberOfImages"]);e!==void 0&&o!=null&&h(e,["parameters","sampleCount"],o);const l=d(n,["aspectRatio"]);e!==void 0&&l!=null&&h(e,["parameters","aspectRatio"],l);const u=d(n,["guidanceScale"]);e!==void 0&&u!=null&&h(e,["parameters","guidanceScale"],u);const f=d(n,["seed"]);e!==void 0&&f!=null&&h(e,["parameters","seed"],f);const m=d(n,["safetyFilterLevel"]);e!==void 0&&m!=null&&h(e,["parameters","safetySetting"],m);const y=d(n,["personGeneration"]);e!==void 0&&y!=null&&h(e,["parameters","personGeneration"],y);const v=d(n,["includeSafetyAttributes"]);e!==void 0&&v!=null&&h(e,["parameters","includeSafetyAttributes"],v);const w=d(n,["includeRaiReason"]);e!==void 0&&w!=null&&h(e,["parameters","includeRaiReason"],w);const E=d(n,["language"]);e!==void 0&&E!=null&&h(e,["parameters","language"],E);const S=d(n,["outputMimeType"]);e!==void 0&&S!=null&&h(e,["parameters","outputOptions","mimeType"],S);const b=d(n,["outputCompressionQuality"]);e!==void 0&&b!=null&&h(e,["parameters","outputOptions","compressionQuality"],b);const A=d(n,["addWatermark"]);e!==void 0&&A!=null&&h(e,["parameters","addWatermark"],A);const C=d(n,["imageSize"]);e!==void 0&&C!=null&&h(e,["parameters","sampleImageSize"],C);const R=d(n,["enhancePrompt"]);return e!==void 0&&R!=null&&h(e,["parameters","enhancePrompt"],R),t}function Vj(n,e){const t={},i=d(e,["model"]);i!=null&&h(t,["_url","model"],It(n,i));const r=d(e,["prompt"]);r!=null&&h(t,["instances[0]","prompt"],r);const o=d(e,["config"]);return o!=null&&h(t,["config"],Mj(o,t)),t}function gr(n){const e={},t=d(n,["gcsUri"]);t!=null&&h(e,["gcsUri"],t);const i=d(n,["imageBytes"]);i!=null&&h(e,["bytesBase64Encoded"],el(i));const r=d(n,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function Uj(n){const e={},t=d(n,["maskMode"]);t!=null&&h(e,["maskMode"],t);const i=d(n,["segmentationClasses"]);i!=null&&h(e,["maskClasses"],i);const r=d(n,["maskDilation"]);return r!=null&&h(e,["dilation"],r),e}function Lj(n){const e={},t=d(n,["controlType"]);t!=null&&h(e,["controlType"],t);const i=d(n,["enableControlImageComputation"]);return i!=null&&h(e,["computeControl"],i),e}function Oj(n){const e={},t=d(n,["styleDescription"]);return t!=null&&h(e,["styleDescription"],t),e}function Fj(n){const e={},t=d(n,["subjectType"]);t!=null&&h(e,["subjectType"],t);const i=d(n,["subjectDescription"]);return i!=null&&h(e,["subjectDescription"],i),e}function Bj(n){const e={},t=d(n,["referenceImage"]);t!=null&&h(e,["referenceImage"],gr(t));const i=d(n,["referenceId"]);i!=null&&h(e,["referenceId"],i);const r=d(n,["referenceType"]);r!=null&&h(e,["referenceType"],r);const o=d(n,["maskImageConfig"]);o!=null&&h(e,["maskImageConfig"],Uj(o));const l=d(n,["controlImageConfig"]);l!=null&&h(e,["controlImageConfig"],Lj(l));const u=d(n,["styleImageConfig"]);u!=null&&h(e,["styleImageConfig"],Oj(u));const f=d(n,["subjectImageConfig"]);return f!=null&&h(e,["subjectImageConfig"],Fj(f)),e}function qj(n,e){const t={},i=d(n,["outputGcsUri"]);e!==void 0&&i!=null&&h(e,["parameters","storageUri"],i);const r=d(n,["negativePrompt"]);e!==void 0&&r!=null&&h(e,["parameters","negativePrompt"],r);const o=d(n,["numberOfImages"]);e!==void 0&&o!=null&&h(e,["parameters","sampleCount"],o);const l=d(n,["aspectRatio"]);e!==void 0&&l!=null&&h(e,["parameters","aspectRatio"],l);const u=d(n,["guidanceScale"]);e!==void 0&&u!=null&&h(e,["parameters","guidanceScale"],u);const f=d(n,["seed"]);e!==void 0&&f!=null&&h(e,["parameters","seed"],f);const m=d(n,["safetyFilterLevel"]);e!==void 0&&m!=null&&h(e,["parameters","safetySetting"],m);const y=d(n,["personGeneration"]);e!==void 0&&y!=null&&h(e,["parameters","personGeneration"],y);const v=d(n,["includeSafetyAttributes"]);e!==void 0&&v!=null&&h(e,["parameters","includeSafetyAttributes"],v);const w=d(n,["includeRaiReason"]);e!==void 0&&w!=null&&h(e,["parameters","includeRaiReason"],w);const E=d(n,["language"]);e!==void 0&&E!=null&&h(e,["parameters","language"],E);const S=d(n,["outputMimeType"]);e!==void 0&&S!=null&&h(e,["parameters","outputOptions","mimeType"],S);const b=d(n,["outputCompressionQuality"]);e!==void 0&&b!=null&&h(e,["parameters","outputOptions","compressionQuality"],b);const A=d(n,["addWatermark"]);e!==void 0&&A!=null&&h(e,["parameters","addWatermark"],A);const C=d(n,["editMode"]);e!==void 0&&C!=null&&h(e,["parameters","editMode"],C);const R=d(n,["baseSteps"]);return e!==void 0&&R!=null&&h(e,["parameters","editConfig","baseSteps"],R),t}function zj(n,e){const t={},i=d(e,["model"]);i!=null&&h(t,["_url","model"],It(n,i));const r=d(e,["prompt"]);r!=null&&h(t,["instances[0]","prompt"],r);const o=d(e,["referenceImages"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(f=>Bj(f))),h(t,["instances[0]","referenceImages"],u)}const l=d(e,["config"]);return l!=null&&h(t,["config"],qj(l,t)),t}function jj(n,e){const t={},i=d(n,["outputGcsUri"]);e!==void 0&&i!=null&&h(e,["parameters","storageUri"],i);const r=d(n,["includeRaiReason"]);e!==void 0&&r!=null&&h(e,["parameters","includeRaiReason"],r);const o=d(n,["outputMimeType"]);e!==void 0&&o!=null&&h(e,["parameters","outputOptions","mimeType"],o);const l=d(n,["outputCompressionQuality"]);e!==void 0&&l!=null&&h(e,["parameters","outputOptions","compressionQuality"],l);const u=d(n,["enhanceInputImage"]);e!==void 0&&u!=null&&h(e,["parameters","upscaleConfig","enhanceInputImage"],u);const f=d(n,["imagePreservationFactor"]);e!==void 0&&f!=null&&h(e,["parameters","upscaleConfig","imagePreservationFactor"],f);const m=d(n,["numberOfImages"]);e!==void 0&&m!=null&&h(e,["parameters","sampleCount"],m);const y=d(n,["mode"]);return e!==void 0&&y!=null&&h(e,["parameters","mode"],y),t}function Gj(n,e){const t={},i=d(e,["model"]);i!=null&&h(t,["_url","model"],It(n,i));const r=d(e,["image"]);r!=null&&h(t,["instances[0]","image"],gr(r));const o=d(e,["upscaleFactor"]);o!=null&&h(t,["parameters","upscaleConfig","upscaleFactor"],o);const l=d(e,["config"]);return l!=null&&h(t,["config"],jj(l,t)),t}function Hj(n){const e={},t=d(n,["productImage"]);return t!=null&&h(e,["image"],gr(t)),e}function $j(n,e){const t={},i=d(n,["prompt"]);e!==void 0&&i!=null&&h(e,["instances[0]","prompt"],i);const r=d(n,["personImage"]);e!==void 0&&r!=null&&h(e,["instances[0]","personImage","image"],gr(r));const o=d(n,["productImages"]);if(e!==void 0&&o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>Hj(u))),h(e,["instances[0]","productImages"],l)}return t}function Wj(n,e){const t={},i=d(n,["numberOfImages"]);e!==void 0&&i!=null&&h(e,["parameters","sampleCount"],i);const r=d(n,["baseSteps"]);e!==void 0&&r!=null&&h(e,["parameters","editConfig","baseSteps"],r);const o=d(n,["outputGcsUri"]);e!==void 0&&o!=null&&h(e,["parameters","storageUri"],o);const l=d(n,["seed"]);e!==void 0&&l!=null&&h(e,["parameters","seed"],l);const u=d(n,["safetyFilterLevel"]);e!==void 0&&u!=null&&h(e,["parameters","safetySetting"],u);const f=d(n,["personGeneration"]);e!==void 0&&f!=null&&h(e,["parameters","personGeneration"],f);const m=d(n,["addWatermark"]);e!==void 0&&m!=null&&h(e,["parameters","addWatermark"],m);const y=d(n,["outputMimeType"]);e!==void 0&&y!=null&&h(e,["parameters","outputOptions","mimeType"],y);const v=d(n,["outputCompressionQuality"]);e!==void 0&&v!=null&&h(e,["parameters","outputOptions","compressionQuality"],v);const w=d(n,["enhancePrompt"]);return e!==void 0&&w!=null&&h(e,["parameters","enhancePrompt"],w),t}function Kj(n,e){const t={},i=d(e,["model"]);i!=null&&h(t,["_url","model"],It(n,i));const r=d(e,["source"]);r!=null&&h(t,["config"],$j(r,t));const o=d(e,["config"]);return o!=null&&h(t,["config"],Wj(o,t)),t}function Jj(n){const e={},t=d(n,["image"]);return t!=null&&h(e,["image"],gr(t)),e}function Yj(n,e){const t={},i=d(n,["prompt"]);e!==void 0&&i!=null&&h(e,["instances[0]","prompt"],i);const r=d(n,["image"]);e!==void 0&&r!=null&&h(e,["instances[0]","image"],gr(r));const o=d(n,["scribbleImage"]);return e!==void 0&&o!=null&&h(e,["instances[0]","scribble"],Jj(o)),t}function Qj(n,e){const t={},i=d(n,["mode"]);e!==void 0&&i!=null&&h(e,["parameters","mode"],i);const r=d(n,["maxPredictions"]);e!==void 0&&r!=null&&h(e,["parameters","maxPredictions"],r);const o=d(n,["confidenceThreshold"]);e!==void 0&&o!=null&&h(e,["parameters","confidenceThreshold"],o);const l=d(n,["maskDilation"]);e!==void 0&&l!=null&&h(e,["parameters","maskDilation"],l);const u=d(n,["binaryColorThreshold"]);return e!==void 0&&u!=null&&h(e,["parameters","binaryColorThreshold"],u),t}function Xj(n,e){const t={},i=d(e,["model"]);i!=null&&h(t,["_url","model"],It(n,i));const r=d(e,["source"]);r!=null&&h(t,["config"],Yj(r,t));const o=d(e,["config"]);return o!=null&&h(t,["config"],Qj(o,t)),t}function Zj(n,e){const t={},i=d(e,["model"]);i!=null&&h(t,["_url","name"],It(n,i));const r=d(e,["config"]);return r!=null&&h(t,["config"],r),t}function eG(n,e,t){const i={},r=d(e,["pageSize"]);t!==void 0&&r!=null&&h(t,["_query","pageSize"],r);const o=d(e,["pageToken"]);t!==void 0&&o!=null&&h(t,["_query","pageToken"],o);const l=d(e,["filter"]);t!==void 0&&l!=null&&h(t,["_query","filter"],l);const u=d(e,["queryBase"]);return t!==void 0&&u!=null&&h(t,["_url","models_url"],VN(n,u)),i}function tG(n,e){const t={},i=d(e,["config"]);return i!=null&&h(t,["config"],eG(n,i,t)),t}function nG(n,e){const t={},i=d(n,["displayName"]);e!==void 0&&i!=null&&h(e,["displayName"],i);const r=d(n,["description"]);e!==void 0&&r!=null&&h(e,["description"],r);const o=d(n,["defaultCheckpointId"]);return e!==void 0&&o!=null&&h(e,["defaultCheckpointId"],o),t}function iG(n,e){const t={},i=d(e,["model"]);i!=null&&h(t,["_url","model"],It(n,i));const r=d(e,["config"]);return r!=null&&h(t,["config"],nG(r,t)),t}function rG(n,e){const t={},i=d(e,["model"]);i!=null&&h(t,["_url","name"],It(n,i));const r=d(e,["config"]);return r!=null&&h(t,["config"],r),t}function sG(n,e){const t={},i=d(n,["systemInstruction"]);e!==void 0&&i!=null&&h(e,["systemInstruction"],nc(ni(i)));const r=d(n,["tools"]);if(e!==void 0&&r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>ZN(u))),h(e,["tools"],l)}const o=d(n,["generationConfig"]);return e!==void 0&&o!=null&&h(e,["generationConfig"],o),t}function oG(n,e){const t={},i=d(e,["model"]);i!=null&&h(t,["_url","model"],It(n,i));const r=d(e,["contents"]);if(r!=null){let l=Zi(r);Array.isArray(l)&&(l=l.map(u=>nc(u))),h(t,["contents"],l)}const o=d(e,["config"]);return o!=null&&h(t,["config"],sG(o,t)),t}function aG(n,e){const t={},i=d(e,["model"]);i!=null&&h(t,["_url","model"],It(n,i));const r=d(e,["contents"]);if(r!=null){let l=Zi(r);Array.isArray(l)&&(l=l.map(u=>nc(u))),h(t,["contents"],l)}const o=d(e,["config"]);return o!=null&&h(t,["config"],o),t}function eP(n){const e={},t=d(n,["uri"]);t!=null&&h(e,["gcsUri"],t);const i=d(n,["videoBytes"]);i!=null&&h(e,["bytesBase64Encoded"],el(i));const r=d(n,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function lG(n,e){const t={},i=d(n,["prompt"]);e!==void 0&&i!=null&&h(e,["instances[0]","prompt"],i);const r=d(n,["image"]);e!==void 0&&r!=null&&h(e,["instances[0]","image"],gr(r));const o=d(n,["video"]);return e!==void 0&&o!=null&&h(e,["instances[0]","video"],eP(o)),t}function uG(n){const e={},t=d(n,["image"]);t!=null&&h(e,["image"],gr(t));const i=d(n,["referenceType"]);return i!=null&&h(e,["referenceType"],i),e}function cG(n){const e={},t=d(n,["image"]);t!=null&&h(e,["_self"],gr(t));const i=d(n,["maskMode"]);return i!=null&&h(e,["maskMode"],i),e}function dG(n,e){const t={},i=d(n,["numberOfVideos"]);e!==void 0&&i!=null&&h(e,["parameters","sampleCount"],i);const r=d(n,["outputGcsUri"]);e!==void 0&&r!=null&&h(e,["parameters","storageUri"],r);const o=d(n,["fps"]);e!==void 0&&o!=null&&h(e,["parameters","fps"],o);const l=d(n,["durationSeconds"]);e!==void 0&&l!=null&&h(e,["parameters","durationSeconds"],l);const u=d(n,["seed"]);e!==void 0&&u!=null&&h(e,["parameters","seed"],u);const f=d(n,["aspectRatio"]);e!==void 0&&f!=null&&h(e,["parameters","aspectRatio"],f);const m=d(n,["resolution"]);e!==void 0&&m!=null&&h(e,["parameters","resolution"],m);const y=d(n,["personGeneration"]);e!==void 0&&y!=null&&h(e,["parameters","personGeneration"],y);const v=d(n,["pubsubTopic"]);e!==void 0&&v!=null&&h(e,["parameters","pubsubTopic"],v);const w=d(n,["negativePrompt"]);e!==void 0&&w!=null&&h(e,["parameters","negativePrompt"],w);const E=d(n,["enhancePrompt"]);e!==void 0&&E!=null&&h(e,["parameters","enhancePrompt"],E);const S=d(n,["generateAudio"]);e!==void 0&&S!=null&&h(e,["parameters","generateAudio"],S);const b=d(n,["lastFrame"]);e!==void 0&&b!=null&&h(e,["instances[0]","lastFrame"],gr(b));const A=d(n,["referenceImages"]);if(e!==void 0&&A!=null){let L=A;Array.isArray(L)&&(L=L.map(q=>uG(q))),h(e,["instances[0]","referenceImages"],L)}const C=d(n,["mask"]);e!==void 0&&C!=null&&h(e,["instances[0]","mask"],cG(C));const R=d(n,["compressionQuality"]);return e!==void 0&&R!=null&&h(e,["parameters","compressionQuality"],R),t}function fG(n,e){const t={},i=d(e,["model"]);i!=null&&h(t,["_url","model"],It(n,i));const r=d(e,["prompt"]);r!=null&&h(t,["instances[0]","prompt"],r);const o=d(e,["image"]);o!=null&&h(t,["instances[0]","image"],gr(o));const l=d(e,["video"]);l!=null&&h(t,["instances[0]","video"],eP(l));const u=d(e,["source"]);u!=null&&h(t,["config"],lG(u,t));const f=d(e,["config"]);return f!=null&&h(t,["config"],dG(f,t)),t}function hG(n){const e={},t=d(n,["fps"]);t!=null&&h(e,["fps"],t);const i=d(n,["endOffset"]);i!=null&&h(e,["endOffset"],i);const r=d(n,["startOffset"]);return r!=null&&h(e,["startOffset"],r),e}function mG(n){const e={},t=d(n,["data"]);t!=null&&h(e,["data"],t);const i=d(n,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function pG(n){const e={},t=d(n,["fileUri"]);t!=null&&h(e,["fileUri"],t);const i=d(n,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function gG(n){const e={},t=d(n,["id"]);t!=null&&h(e,["id"],t);const i=d(n,["args"]);i!=null&&h(e,["args"],i);const r=d(n,["name"]);return r!=null&&h(e,["name"],r),e}function yG(n){const e={},t=d(n,["videoMetadata"]);t!=null&&h(e,["videoMetadata"],hG(t));const i=d(n,["thought"]);i!=null&&h(e,["thought"],i);const r=d(n,["inlineData"]);r!=null&&h(e,["inlineData"],mG(r));const o=d(n,["fileData"]);o!=null&&h(e,["fileData"],pG(o));const l=d(n,["thoughtSignature"]);l!=null&&h(e,["thoughtSignature"],l);const u=d(n,["functionCall"]);u!=null&&h(e,["functionCall"],gG(u));const f=d(n,["codeExecutionResult"]);f!=null&&h(e,["codeExecutionResult"],f);const m=d(n,["executableCode"]);m!=null&&h(e,["executableCode"],m);const y=d(n,["functionResponse"]);y!=null&&h(e,["functionResponse"],y);const v=d(n,["text"]);return v!=null&&h(e,["text"],v),e}function _G(n){const e={},t=d(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(o=>yG(o))),h(e,["parts"],r)}const i=d(n,["role"]);return i!=null&&h(e,["role"],i),e}function vG(n){const e={},t=d(n,["citationSources"]);return t!=null&&h(e,["citations"],t),e}function TG(n){const e={},t=d(n,["retrievedUrl"]);t!=null&&h(e,["retrievedUrl"],t);const i=d(n,["urlRetrievalStatus"]);return i!=null&&h(e,["urlRetrievalStatus"],i),e}function wG(n){const e={},t=d(n,["urlMetadata"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>TG(r))),h(e,["urlMetadata"],i)}return e}function xG(n){const e={},t=d(n,["content"]);t!=null&&h(e,["content"],_G(t));const i=d(n,["citationMetadata"]);i!=null&&h(e,["citationMetadata"],vG(i));const r=d(n,["tokenCount"]);r!=null&&h(e,["tokenCount"],r);const o=d(n,["finishReason"]);o!=null&&h(e,["finishReason"],o);const l=d(n,["urlContextMetadata"]);l!=null&&h(e,["urlContextMetadata"],wG(l));const u=d(n,["avgLogprobs"]);u!=null&&h(e,["avgLogprobs"],u);const f=d(n,["groundingMetadata"]);f!=null&&h(e,["groundingMetadata"],f);const m=d(n,["index"]);m!=null&&h(e,["index"],m);const y=d(n,["logprobsResult"]);y!=null&&h(e,["logprobsResult"],y);const v=d(n,["safetyRatings"]);return v!=null&&h(e,["safetyRatings"],v),e}function EA(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const i=d(n,["candidates"]);if(i!=null){let f=i;Array.isArray(f)&&(f=f.map(m=>xG(m))),h(e,["candidates"],f)}const r=d(n,["modelVersion"]);r!=null&&h(e,["modelVersion"],r);const o=d(n,["promptFeedback"]);o!=null&&h(e,["promptFeedback"],o);const l=d(n,["responseId"]);l!=null&&h(e,["responseId"],l);const u=d(n,["usageMetadata"]);return u!=null&&h(e,["usageMetadata"],u),e}function EG(n){const e={},t=d(n,["values"]);return t!=null&&h(e,["values"],t),e}function bG(){return{}}function SG(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const i=d(n,["embeddings"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>EG(l))),h(e,["embeddings"],o)}return d(n,["metadata"])!=null&&h(e,["metadata"],bG()),e}function IG(n){const e={},t=d(n,["bytesBase64Encoded"]);t!=null&&h(e,["imageBytes"],el(t));const i=d(n,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function tP(n){const e={},t=d(n,["safetyAttributes","categories"]);t!=null&&h(e,["categories"],t);const i=d(n,["safetyAttributes","scores"]);i!=null&&h(e,["scores"],i);const r=d(n,["contentType"]);return r!=null&&h(e,["contentType"],r),e}function AG(n){const e={},t=d(n,["_self"]);t!=null&&h(e,["image"],IG(t));const i=d(n,["raiFilteredReason"]);i!=null&&h(e,["raiFilteredReason"],i);const r=d(n,["_self"]);return r!=null&&h(e,["safetyAttributes"],tP(r)),e}function CG(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const i=d(n,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>AG(l))),h(e,["generatedImages"],o)}const r=d(n,["positivePromptSafetyAttributes"]);return r!=null&&h(e,["positivePromptSafetyAttributes"],tP(r)),e}function RG(n){const e={},t=d(n,["baseModel"]);t!=null&&h(e,["baseModel"],t);const i=d(n,["createTime"]);i!=null&&h(e,["createTime"],i);const r=d(n,["updateTime"]);return r!=null&&h(e,["updateTime"],r),e}function Av(n){const e={},t=d(n,["name"]);t!=null&&h(e,["name"],t);const i=d(n,["displayName"]);i!=null&&h(e,["displayName"],i);const r=d(n,["description"]);r!=null&&h(e,["description"],r);const o=d(n,["version"]);o!=null&&h(e,["version"],o);const l=d(n,["_self"]);l!=null&&h(e,["tunedModelInfo"],RG(l));const u=d(n,["inputTokenLimit"]);u!=null&&h(e,["inputTokenLimit"],u);const f=d(n,["outputTokenLimit"]);f!=null&&h(e,["outputTokenLimit"],f);const m=d(n,["supportedGenerationMethods"]);return m!=null&&h(e,["supportedActions"],m),e}function NG(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const i=d(n,["nextPageToken"]);i!=null&&h(e,["nextPageToken"],i);const r=d(n,["_self"]);if(r!=null){let o=UN(r);Array.isArray(o)&&(o=o.map(l=>Av(l))),h(e,["models"],o)}return e}function PG(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}function kG(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const i=d(n,["totalTokens"]);i!=null&&h(e,["totalTokens"],i);const r=d(n,["cachedContentTokenCount"]);return r!=null&&h(e,["cachedContentTokenCount"],r),e}function DG(n){const e={},t=d(n,["video","uri"]);t!=null&&h(e,["uri"],t);const i=d(n,["video","encodedVideo"]);i!=null&&h(e,["videoBytes"],el(i));const r=d(n,["encoding"]);return r!=null&&h(e,["mimeType"],r),e}function MG(n){const e={},t=d(n,["_self"]);return t!=null&&h(e,["video"],DG(t)),e}function VG(n){const e={},t=d(n,["generatedSamples"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(l=>MG(l))),h(e,["generatedVideos"],o)}const i=d(n,["raiMediaFilteredCount"]);i!=null&&h(e,["raiMediaFilteredCount"],i);const r=d(n,["raiMediaFilteredReasons"]);return r!=null&&h(e,["raiMediaFilteredReasons"],r),e}function UG(n){const e={},t=d(n,["name"]);t!=null&&h(e,["name"],t);const i=d(n,["metadata"]);i!=null&&h(e,["metadata"],i);const r=d(n,["done"]);r!=null&&h(e,["done"],r);const o=d(n,["error"]);o!=null&&h(e,["error"],o);const l=d(n,["response","generateVideoResponse"]);return l!=null&&h(e,["response"],VG(l)),e}function LG(n){const e={},t=d(n,["fps"]);t!=null&&h(e,["fps"],t);const i=d(n,["endOffset"]);i!=null&&h(e,["endOffset"],i);const r=d(n,["startOffset"]);return r!=null&&h(e,["startOffset"],r),e}function OG(n){const e={},t=d(n,["displayName"]);t!=null&&h(e,["displayName"],t);const i=d(n,["data"]);i!=null&&h(e,["data"],i);const r=d(n,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function FG(n){const e={},t=d(n,["displayName"]);t!=null&&h(e,["displayName"],t);const i=d(n,["fileUri"]);i!=null&&h(e,["fileUri"],i);const r=d(n,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function BG(n){const e={},t=d(n,["id"]);t!=null&&h(e,["id"],t);const i=d(n,["args"]);i!=null&&h(e,["args"],i);const r=d(n,["name"]);return r!=null&&h(e,["name"],r),e}function qG(n){const e={},t=d(n,["videoMetadata"]);t!=null&&h(e,["videoMetadata"],LG(t));const i=d(n,["thought"]);i!=null&&h(e,["thought"],i);const r=d(n,["inlineData"]);r!=null&&h(e,["inlineData"],OG(r));const o=d(n,["fileData"]);o!=null&&h(e,["fileData"],FG(o));const l=d(n,["thoughtSignature"]);l!=null&&h(e,["thoughtSignature"],l);const u=d(n,["functionCall"]);u!=null&&h(e,["functionCall"],BG(u));const f=d(n,["codeExecutionResult"]);f!=null&&h(e,["codeExecutionResult"],f);const m=d(n,["executableCode"]);m!=null&&h(e,["executableCode"],m);const y=d(n,["functionResponse"]);y!=null&&h(e,["functionResponse"],y);const v=d(n,["text"]);return v!=null&&h(e,["text"],v),e}function zG(n){const e={},t=d(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(o=>qG(o))),h(e,["parts"],r)}const i=d(n,["role"]);return i!=null&&h(e,["role"],i),e}function jG(n){const e={},t=d(n,["citations"]);return t!=null&&h(e,["citations"],t),e}function GG(n){const e={},t=d(n,["retrievedUrl"]);t!=null&&h(e,["retrievedUrl"],t);const i=d(n,["urlRetrievalStatus"]);return i!=null&&h(e,["urlRetrievalStatus"],i),e}function HG(n){const e={},t=d(n,["urlMetadata"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>GG(r))),h(e,["urlMetadata"],i)}return e}function $G(n){const e={},t=d(n,["content"]);t!=null&&h(e,["content"],zG(t));const i=d(n,["citationMetadata"]);i!=null&&h(e,["citationMetadata"],jG(i));const r=d(n,["finishMessage"]);r!=null&&h(e,["finishMessage"],r);const o=d(n,["finishReason"]);o!=null&&h(e,["finishReason"],o);const l=d(n,["urlContextMetadata"]);l!=null&&h(e,["urlContextMetadata"],HG(l));const u=d(n,["avgLogprobs"]);u!=null&&h(e,["avgLogprobs"],u);const f=d(n,["groundingMetadata"]);f!=null&&h(e,["groundingMetadata"],f);const m=d(n,["index"]);m!=null&&h(e,["index"],m);const y=d(n,["logprobsResult"]);y!=null&&h(e,["logprobsResult"],y);const v=d(n,["safetyRatings"]);return v!=null&&h(e,["safetyRatings"],v),e}function bA(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const i=d(n,["candidates"]);if(i!=null){let m=i;Array.isArray(m)&&(m=m.map(y=>$G(y))),h(e,["candidates"],m)}const r=d(n,["createTime"]);r!=null&&h(e,["createTime"],r);const o=d(n,["modelVersion"]);o!=null&&h(e,["modelVersion"],o);const l=d(n,["promptFeedback"]);l!=null&&h(e,["promptFeedback"],l);const u=d(n,["responseId"]);u!=null&&h(e,["responseId"],u);const f=d(n,["usageMetadata"]);return f!=null&&h(e,["usageMetadata"],f),e}function WG(n){const e={},t=d(n,["truncated"]);t!=null&&h(e,["truncated"],t);const i=d(n,["token_count"]);return i!=null&&h(e,["tokenCount"],i),e}function KG(n){const e={},t=d(n,["values"]);t!=null&&h(e,["values"],t);const i=d(n,["statistics"]);return i!=null&&h(e,["statistics"],WG(i)),e}function JG(n){const e={},t=d(n,["billableCharacterCount"]);return t!=null&&h(e,["billableCharacterCount"],t),e}function YG(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const i=d(n,["predictions[]","embeddings"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>KG(l))),h(e,["embeddings"],o)}const r=d(n,["metadata"]);return r!=null&&h(e,["metadata"],JG(r)),e}function nP(n){const e={},t=d(n,["gcsUri"]);t!=null&&h(e,["gcsUri"],t);const i=d(n,["bytesBase64Encoded"]);i!=null&&h(e,["imageBytes"],el(i));const r=d(n,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function iP(n){const e={},t=d(n,["safetyAttributes","categories"]);t!=null&&h(e,["categories"],t);const i=d(n,["safetyAttributes","scores"]);i!=null&&h(e,["scores"],i);const r=d(n,["contentType"]);return r!=null&&h(e,["contentType"],r),e}function Xp(n){const e={},t=d(n,["_self"]);t!=null&&h(e,["image"],nP(t));const i=d(n,["raiFilteredReason"]);i!=null&&h(e,["raiFilteredReason"],i);const r=d(n,["_self"]);r!=null&&h(e,["safetyAttributes"],iP(r));const o=d(n,["prompt"]);return o!=null&&h(e,["enhancedPrompt"],o),e}function QG(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const i=d(n,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>Xp(l))),h(e,["generatedImages"],o)}const r=d(n,["positivePromptSafetyAttributes"]);return r!=null&&h(e,["positivePromptSafetyAttributes"],iP(r)),e}function XG(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const i=d(n,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>Xp(o))),h(e,["generatedImages"],r)}return e}function ZG(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const i=d(n,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>Xp(o))),h(e,["generatedImages"],r)}return e}function eH(n){const e={},t=d(n,["predictions"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>Xp(r))),h(e,["generatedImages"],i)}return e}function tH(n){const e={},t=d(n,["label"]);t!=null&&h(e,["label"],t);const i=d(n,["score"]);return i!=null&&h(e,["score"],i),e}function nH(n){const e={},t=d(n,["_self"]);t!=null&&h(e,["mask"],nP(t));const i=d(n,["labels"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>tH(o))),h(e,["labels"],r)}return e}function iH(n){const e={},t=d(n,["predictions"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>nH(r))),h(e,["generatedMasks"],i)}return e}function rH(n){const e={},t=d(n,["endpoint"]);t!=null&&h(e,["name"],t);const i=d(n,["deployedModelId"]);return i!=null&&h(e,["deployedModelId"],i),e}function sH(n){const e={},t=d(n,["labels","google-vertex-llm-tuning-base-model-id"]);t!=null&&h(e,["baseModel"],t);const i=d(n,["createTime"]);i!=null&&h(e,["createTime"],i);const r=d(n,["updateTime"]);return r!=null&&h(e,["updateTime"],r),e}function oH(n){const e={},t=d(n,["checkpointId"]);t!=null&&h(e,["checkpointId"],t);const i=d(n,["epoch"]);i!=null&&h(e,["epoch"],i);const r=d(n,["step"]);return r!=null&&h(e,["step"],r),e}function Cv(n){const e={},t=d(n,["name"]);t!=null&&h(e,["name"],t);const i=d(n,["displayName"]);i!=null&&h(e,["displayName"],i);const r=d(n,["description"]);r!=null&&h(e,["description"],r);const o=d(n,["versionId"]);o!=null&&h(e,["version"],o);const l=d(n,["deployedModels"]);if(l!=null){let v=l;Array.isArray(v)&&(v=v.map(w=>rH(w))),h(e,["endpoints"],v)}const u=d(n,["labels"]);u!=null&&h(e,["labels"],u);const f=d(n,["_self"]);f!=null&&h(e,["tunedModelInfo"],sH(f));const m=d(n,["defaultCheckpointId"]);m!=null&&h(e,["defaultCheckpointId"],m);const y=d(n,["checkpoints"]);if(y!=null){let v=y;Array.isArray(v)&&(v=v.map(w=>oH(w))),h(e,["checkpoints"],v)}return e}function aH(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const i=d(n,["nextPageToken"]);i!=null&&h(e,["nextPageToken"],i);const r=d(n,["_self"]);if(r!=null){let o=UN(r);Array.isArray(o)&&(o=o.map(l=>Cv(l))),h(e,["models"],o)}return e}function lH(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}function uH(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const i=d(n,["totalTokens"]);return i!=null&&h(e,["totalTokens"],i),e}function cH(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const i=d(n,["tokensInfo"]);return i!=null&&h(e,["tokensInfo"],i),e}function dH(n){const e={},t=d(n,["gcsUri"]);t!=null&&h(e,["uri"],t);const i=d(n,["bytesBase64Encoded"]);i!=null&&h(e,["videoBytes"],el(i));const r=d(n,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function fH(n){const e={},t=d(n,["_self"]);return t!=null&&h(e,["video"],dH(t)),e}function hH(n){const e={},t=d(n,["videos"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(l=>fH(l))),h(e,["generatedVideos"],o)}const i=d(n,["raiMediaFilteredCount"]);i!=null&&h(e,["raiMediaFilteredCount"],i);const r=d(n,["raiMediaFilteredReasons"]);return r!=null&&h(e,["raiMediaFilteredReasons"],r),e}function mH(n){const e={},t=d(n,["name"]);t!=null&&h(e,["name"],t);const i=d(n,["metadata"]);i!=null&&h(e,["metadata"],i);const r=d(n,["done"]);r!=null&&h(e,["done"],r);const o=d(n,["error"]);o!=null&&h(e,["error"],o);const l=d(n,["response"]);return l!=null&&h(e,["response"],hH(l)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const pH="Content-Type",gH="X-Server-Timeout",yH="User-Agent",Rv="x-goog-api-client",_H="1.20.0",vH=`google-genai-sdk/${_H}`,TH="v1beta1",wH="v1beta",SA=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class xH{constructor(e){var t,i;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const r={};this.clientOptions.vertexai?(r.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:TH,r.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(r.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:wH,r.baseUrl="https://generativelanguage.googleapis.com/"),r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,i){const r=[this.getRequestUrlInternal(t)];return i&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,t,i);if(e.queryParams)for(const[l,u]of Object.entries(e.queryParams))r.searchParams.append(l,String(u));let o={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else o.body=e.body;return o=await this.includeExtraHttpOptionsToRequestInit(o,t,e.abortSignal),this.unaryApiCall(r,o,e.httpMethod)}patchHttpOptions(e,t){const i=JSON.parse(JSON.stringify(e));for(const[r,o]of Object.entries(t))typeof o=="object"?i[r]=Object.assign(Object.assign({},i[r]),o):o!==void 0&&(i[r]=o);return i}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,t,i);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let o={};return o.body=e.body,o=await this.includeExtraHttpOptionsToRequestInit(o,t,e.abortSignal),this.streamApiCall(r,o,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,i){if(t&&t.timeout||i){const r=new AbortController,o=r.signal;if(t.timeout&&(t==null?void 0:t.timeout)>0){const l=setTimeout(()=>r.abort(),t.timeout);l&&typeof l.unref=="function"&&l.unref()}i&&i.addEventListener("abort",()=>{r.abort()}),e.signal=o}return t&&t.extraBody!==null&&EH(e,t.extraBody),e.headers=await this.getHeadersInternal(t),e}async unaryApiCall(e,t,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:i})).then(async r=>(await IA(r),new xv(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,t,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:i})).then(async r=>(await IA(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){var t;return hu(this,arguments,function*(){const r=(t=e==null?void 0:e.body)===null||t===void 0?void 0:t.getReader(),o=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let l="";for(;;){const{done:u,value:f}=yield Kt(r.read());if(u){if(l.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const m=o.decode(f,{stream:!0});try{const v=JSON.parse(m);if("error"in v){const w=JSON.parse(JSON.stringify(v.error)),E=w.status,S=w.code,b=`got status: ${E}. ${JSON.stringify(v)}`;if(S>=400&&S<600)throw new Yp({message:b,status:S})}}catch(v){if(v.name==="ApiError")throw v}l+=m;let y=l.match(SA);for(;y;){const v=y[1];try{const w=new Response(v,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Kt(new xv(w)),l=l.slice(y[0].length),y=l.match(SA)}catch(w){throw new Error(`exception parsing stream chunk ${v}. ${w}`)}}}}finally{r.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const e={},t=vH+" "+this.clientOptions.userAgentExtra;return e[yH]=t,e[Rv]=t,e[pH]="application/json",e}async getHeadersInternal(e){const t=new Headers;if(e&&e.headers){for(const[i,r]of Object.entries(e.headers))t.append(i,r);e.timeout&&e.timeout>0&&t.append(gH,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(t),t}async uploadFile(e,t){var i;const r={};t!=null&&(r.mimeType=t.mimeType,r.name=t.name,r.displayName=t.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const o=this.clientOptions.uploader,l=await o.stat(e);r.sizeBytes=String(l.size);const u=(i=t==null?void 0:t.mimeType)!==null&&i!==void 0?i:l.type;if(u===void 0||u==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=u;const f=await this.fetchUploadUrl(r,t);return o.upload(e,f,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t){var i;let r={};t!=null&&t.httpOptions?r=t.httpOptions:r={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const o={file:e},l=await this.request({path:Ge("upload/v1beta/files",o._url),body:JSON.stringify(o),httpMethod:"POST",httpOptions:r});if(!l||!(l!=null&&l.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const u=(i=l==null?void 0:l.headers)===null||i===void 0?void 0:i["x-goog-upload-url"];if(u===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return u}}async function IA(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const t=n.status;let i;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await n.json():i={error:{message:await n.text(),code:n.status,status:n.statusText}};const r=JSON.stringify(i);throw t>=400&&t<600?new Yp({message:r,status:t}):new Error(r)}}function EH(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof n.body=="string"&&n.body.length>0)try{const o=JSON.parse(n.body);if(typeof o=="object"&&o!==null&&!Array.isArray(o))t=o;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(o,l){const u=Object.assign({},o);for(const f in l)if(Object.prototype.hasOwnProperty.call(l,f)){const m=l[f],y=u[f];m&&typeof m=="object"&&!Array.isArray(m)&&y&&typeof y=="object"&&!Array.isArray(y)?u[f]=i(y,m):(y&&m&&typeof y!=typeof m&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${f}". Original type: ${typeof y}, New type: ${typeof m}. Overwriting.`),u[f]=m)}return u}const r=i(t,e);n.body=JSON.stringify(r)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const bH="mcp_used/unknown";let SH=!1;function rP(n){for(const e of n)if(IH(e)||typeof e=="object"&&"inputSchema"in e)return!0;return SH}function sP(n){var e;const t=(e=n[Rv])!==null&&e!==void 0?e:"";n[Rv]=(t+` ${bH}`).trimStart()}function IH(n){return n!==null&&typeof n=="object"&&n instanceof CT}function AH(n,e=100){return hu(this,arguments,function*(){let i,r=0;for(;r<e;){const o=yield Kt(n.listTools({cursor:i}));for(const l of o.tools)yield yield Kt(l),r++;if(!o.nextCursor)break;i=o.nextCursor}})}class CT{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new CT(e,t)}async initialize(){var e,t,i,r;if(this.mcpTools.length>0)return;const o={},l=[];for(const y of this.mcpClients)try{for(var u=!0,f=(t=void 0,Od(AH(y))),m;m=await f.next(),e=m.done,!e;u=!0){r=m.value,u=!1;const v=r;l.push(v);const w=v.name;if(o[w])throw new Error(`Duplicate function name ${w} found in MCP tools. Please ensure function names are unique.`);o[w]=y}}catch(v){t={error:v}}finally{try{!u&&!e&&(i=f.return)&&await i.call(f)}finally{if(t)throw t.error}}this.mcpTools=l,this.functionNameToMcpClient=o}async tool(){return await this.initialize(),zB(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const i of e)if(i.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[i.name];let o;this.config.timeout&&(o={timeout:this.config.timeout});const l=await r.callTool({name:i.name,arguments:i.args},void 0,o);t.push({functionResponse:{name:i.name,response:l.isError?{error:l}:l}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function CH(n,e,t){const i=new MB;let r;t.data instanceof Blob?r=JSON.parse(await t.data.text()):r=JSON.parse(t.data);const o=rz(r);Object.assign(i,o),e(i)}class RH{constructor(e,t,i){this.apiClient=e,this.auth=t,this.webSocketFactory=i}async connect(e){var t,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),o=this.apiClient.getApiVersion(),l=kH(this.apiClient.getDefaultHeaders()),u=this.apiClient.getApiKey(),f=`${r}/ws/google.ai.generativelanguage.${o}.GenerativeService.BidiGenerateMusic?key=${u}`;let m=()=>{};const y=new Promise(L=>{m=L}),v=e.callbacks,w=function(){m({})},E=this.apiClient,S={onopen:w,onmessage:L=>{CH(E,v.onmessage,L)},onerror:(t=v==null?void 0:v.onerror)!==null&&t!==void 0?t:function(L){},onclose:(i=v==null?void 0:v.onclose)!==null&&i!==void 0?i:function(L){}},b=this.webSocketFactory.create(f,PH(l),S);b.connect(),await y;const A=It(this.apiClient,e.model),C=WN({model:A}),R=Iv({setup:C});return b.send(JSON.stringify(R)),new NH(b,this.apiClient)}}class NH{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=tq(e),i=KN(t);this.conn.send(JSON.stringify({clientContent:i}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=nq(e),i=Iv(t);this.conn.send(JSON.stringify(i))}sendPlaybackControl(e){const t=Iv({playbackControl:e});this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(su.PLAY)}pause(){this.sendPlaybackControl(su.PAUSE)}stop(){this.sendPlaybackControl(su.STOP)}resetContext(){this.sendPlaybackControl(su.RESET_CONTEXT)}close(){this.conn.close()}}function PH(n){const e={};return n.forEach((t,i)=>{e[i]=t}),e}function kH(n){const e=new Headers;for(const[t,i]of Object.entries(n))e.append(t,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const DH="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function MH(n,e,t){const i=new DB;let r;t.data instanceof Blob?r=await t.data.text():t.data instanceof ArrayBuffer?r=new TextDecoder().decode(t.data):r=t.data;const o=JSON.parse(r);if(n.isVertexAI()){const l=yz(o);Object.assign(i,l)}else{const l=Jq(o);Object.assign(i,l)}e(i)}class VH{constructor(e,t,i){this.apiClient=e,this.auth=t,this.webSocketFactory=i,this.music=new RH(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,i,r,o,l,u;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const f=this.apiClient.getWebsocketBaseUrl(),m=this.apiClient.getApiVersion();let y;const v=this.apiClient.getHeaders();e.config&&e.config.tools&&rP(e.config.tools)&&sP(v);const w=FH(v);if(this.apiClient.isVertexAI())y=`${f}/ws/google.cloud.aiplatform.${m}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(w);else{const U=this.apiClient.getApiKey();let j="BidiGenerateContent",J="key";U!=null&&U.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),m!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),j="BidiGenerateContentConstrained",J="access_token"),y=`${f}/ws/google.ai.generativelanguage.${m}.GenerativeService.${j}?${J}=${U}`}let E=()=>{};const S=new Promise(U=>{E=U}),b=e.callbacks,A=function(){var U;(U=b==null?void 0:b.onopen)===null||U===void 0||U.call(b),E({})},C=this.apiClient,R={onopen:A,onmessage:U=>{MH(C,b.onmessage,U)},onerror:(t=b==null?void 0:b.onerror)!==null&&t!==void 0?t:function(U){},onclose:(i=b==null?void 0:b.onclose)!==null&&i!==void 0?i:function(U){}},L=this.webSocketFactory.create(y,OH(w),R);L.connect(),await S;let q=It(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&q.startsWith("publishers/")){const U=this.apiClient.getProject(),j=this.apiClient.getLocation();q=`projects/${U}/locations/${j}/`+q}let z={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[lp.AUDIO]}:e.config.responseModalities=[lp.AUDIO]),!((o=e.config)===null||o===void 0)&&o.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const H=(u=(l=e.config)===null||l===void 0?void 0:l.tools)!==null&&u!==void 0?u:[],O=[];for(const U of H)if(this.isCallableTool(U)){const j=U;O.push(await j.tool())}else O.push(U);O.length>0&&(e.config.tools=O);const V={model:q,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?z=Pq(this.apiClient,V):z=Q7(this.apiClient,V),delete z.config,L.send(JSON.stringify(z)),new LH(L,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const UH={turnComplete:!0};class LH{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let i=[];try{i=Zi(t.turns),e.isVertexAI()?i=i.map(r=>nc(r)):i=i.map(r=>Qp(r))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:i,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let i=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?i=t.functionResponses:i=[t.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const o of i){if(typeof o!="object"||o===null||!("name"in o)||!("response"in o))throw new Error(`Could not parse function response, type '${typeof o}'.`);if(!e.isVertexAI()&&!("id"in o))throw new Error(DH)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},UH),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:Mq(e)}:t={realtimeInput:eq(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function OH(n){const e={};return n.forEach((t,i)=>{e[i]=t}),e}function FH(n){const e=new Headers;for(const[t,i]of Object.entries(n))e.append(t,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const AA=10;function CA(n){var e,t,i;if(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(const l of(t=n==null?void 0:n.tools)!==null&&t!==void 0?t:[])if(mu(l)){r=!0;break}if(!r)return!0;const o=(i=n==null?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return o&&(o<0||!Number.isInteger(o))||o==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",o),!0):!1}function mu(n){return"callTool"in n&&typeof n.callTool=="function"}function BH(n){var e,t,i;return(i=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(r=>mu(r)))!==null&&i!==void 0?i:!1}function qH(n){var e,t,i;return(i=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(r=>!mu(r)))!==null&&i!==void 0?i:!1}function RA(n){var e;return!(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class zH extends Za{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var i,r,o,l,u;const f=await this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!BH(t)||CA(t.config))return await this.generateContentInternal(f);if(qH(t))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let m,y;const v=Zi(f.contents),w=(o=(r=(i=f.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&o!==void 0?o:AA;let E=0;for(;E<w&&(m=await this.generateContentInternal(f),!(!m.functionCalls||m.functionCalls.length===0));){const S=m.candidates[0].content,b=[];for(const A of(u=(l=t.config)===null||l===void 0?void 0:l.tools)!==null&&u!==void 0?u:[])if(mu(A)){const R=await A.callTool(m.functionCalls);b.push(...R)}E++,y={role:"user",parts:b},f.contents=Zi(f.contents),f.contents.push(S),f.contents.push(y),RA(f.config)&&(v.push(S),v.push(y))}return RA(f.config)&&(m.automaticFunctionCallingHistory=v),m},this.generateContentStream=async t=>{if(this.maybeMoveToResponseJsonSchem(t),CA(t.config)){const i=await this.processParamsMaybeAddMcpUsage(t);return await this.generateContentStreamInternal(i)}else return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(i=>{var r;let o;const l=[];if(i!=null&&i.generatedImages)for(const f of i.generatedImages)f&&(f!=null&&f.safetyAttributes)&&((r=f==null?void 0:f.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?o=f==null?void 0:f.safetyAttributes:l.push(f);let u;return o?u={generatedImages:l,positivePromptSafetyAttributes:o,sdkHttpResponse:i.sdkHttpResponse}:u={generatedImages:l,sdkHttpResponse:i.sdkHttpResponse},u}),this.list=async t=>{var i;const l={config:Object.assign(Object.assign({},{queryBase:!0}),t==null?void 0:t.config)};if(this.apiClient.isVertexAI()&&!l.config.queryBase){if(!((i=l.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");l.config.filter="labels.tune-type:*"}return new Df($a.PAGED_ITEM_MODELS,u=>this.listInternal(u),await this.listInternal(l),l)},this.editImage=async t=>{const i={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(i.referenceImages=t.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async t=>{let i={numberOfImages:1,mode:"upscale"};t.config&&(i=Object.assign(Object.assign({},i),t.config));const r={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:i};return await this.upscaleImageInternal(r)},this.generateVideos=async t=>{if((t.prompt||t.image||t.video)&&t.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return await this.generateVideosInternal(t)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,i,r;const o=(t=e.config)===null||t===void 0?void 0:t.tools;if(!o)return e;const l=await Promise.all(o.map(async f=>mu(f)?await f.tool():f)),u={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:l})};if(u.config.tools=l,e.config&&e.config.tools&&rP(e.config.tools)){const f=(r=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&r!==void 0?r:{};let m=Object.assign({},f);Object.keys(m).length===0&&(m=this.apiClient.getDefaultHeaders()),sP(m),u.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:m})}return u}async initAfcToolsMap(e){var t,i,r;const o=new Map;for(const l of(i=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&i!==void 0?i:[])if(mu(l)){const u=l,f=await u.tool();for(const m of(r=f.functionDeclarations)!==null&&r!==void 0?r:[]){if(!m.name)throw new Error("Function declaration name is required.");if(o.has(m.name))throw new Error(`Duplicate tool declaration name: ${m.name}`);o.set(m.name,u)}}return o}async processAfcStream(e){var t,i,r;const o=(r=(i=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&r!==void 0?r:AA;let l=!1,u=0;const f=await this.initAfcToolsMap(e);return(function(m,y,v){var w,E;return hu(this,arguments,function*(){for(var S,b,A,C;u<o;){l&&(u++,l=!1);const z=yield Kt(m.processParamsMaybeAddMcpUsage(v)),H=yield Kt(m.generateContentStreamInternal(z)),O=[],V=[];try{for(var R=!0,L=(b=void 0,Od(H)),q;q=yield Kt(L.next()),S=q.done,!S;R=!0){C=q.value,R=!1;const U=C;if(yield yield Kt(U),U.candidates&&(!((w=U.candidates[0])===null||w===void 0)&&w.content)){V.push(U.candidates[0].content);for(const j of(E=U.candidates[0].content.parts)!==null&&E!==void 0?E:[])if(u<o&&j.functionCall){if(!j.functionCall.name)throw new Error("Function call name was not returned by the model.");if(y.has(j.functionCall.name)){const J=yield Kt(y.get(j.functionCall.name).callTool([j.functionCall]));O.push(...J)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${y.keys()}, mising tool: ${j.functionCall.name}`)}}}}catch(U){b={error:U}}finally{try{!R&&!S&&(A=L.return)&&(yield Kt(A.call(L)))}finally{if(b)throw b.error}}if(O.length>0){l=!0;const U=new pd;U.candidates=[{content:{role:"user",parts:O}}],yield yield Kt(U);const j=[];j.push(...V),j.push({role:"user",parts:O});const J=Zi(v.contents).concat(j);v.contents=J}else break}})})(this,f,e)}async generateContentInternal(e){var t,i,r,o;let l,u="",f={};if(this.apiClient.isVertexAI()){const m=xA(this.apiClient,e);return u=Ge("{model}:generateContent",m._url),f=m._query,delete m.config,delete m._url,delete m._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(v=>{const w=v;return w.sdkHttpResponse={headers:y.headers},w})),l.then(y=>{const v=bA(y),w=new pd;return Object.assign(w,v),w})}else{const m=wA(this.apiClient,e);return u=Ge("{model}:generateContent",m._url),f=m._query,delete m.config,delete m._url,delete m._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(v=>{const w=v;return w.sdkHttpResponse={headers:y.headers},w})),l.then(y=>{const v=EA(y),w=new pd;return Object.assign(w,v),w})}}async generateContentStreamInternal(e){var t,i,r,o;let l,u="",f={};if(this.apiClient.isVertexAI()){const m=xA(this.apiClient,e);return u=Ge("{model}:streamGenerateContent?alt=sse",m._url),f=m._query,delete m.config,delete m._url,delete m._query,l=this.apiClient.requestStream({path:u,queryParams:f,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),l.then(function(v){return hu(this,arguments,function*(){var w,E,S,b;try{for(var A=!0,C=Od(v),R;R=yield Kt(C.next()),w=R.done,!w;A=!0){b=R.value,A=!1;const L=b,q=bA(yield Kt(L.json()));q.sdkHttpResponse={headers:L.headers};const z=new pd;Object.assign(z,q),yield yield Kt(z)}}catch(L){E={error:L}}finally{try{!A&&!w&&(S=C.return)&&(yield Kt(S.call(C)))}finally{if(E)throw E.error}}})})}else{const m=wA(this.apiClient,e);return u=Ge("{model}:streamGenerateContent?alt=sse",m._url),f=m._query,delete m.config,delete m._url,delete m._query,l=this.apiClient.requestStream({path:u,queryParams:f,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),l.then(function(v){return hu(this,arguments,function*(){var w,E,S,b;try{for(var A=!0,C=Od(v),R;R=yield Kt(C.next()),w=R.done,!w;A=!0){b=R.value,A=!1;const L=b,q=EA(yield Kt(L.json()));q.sdkHttpResponse={headers:L.headers};const z=new pd;Object.assign(z,q),yield yield Kt(z)}}catch(L){E={error:L}}finally{try{!A&&!w&&(S=C.return)&&(yield Kt(S.call(C)))}finally{if(E)throw E.error}}})})}}async embedContent(e){var t,i,r,o;let l,u="",f={};if(this.apiClient.isVertexAI()){const m=Dj(this.apiClient,e);return u=Ge("{model}:predict",m._url),f=m._query,delete m.config,delete m._url,delete m._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(v=>{const w=v;return w.sdkHttpResponse={headers:y.headers},w})),l.then(y=>{const v=YG(y),w=new tA;return Object.assign(w,v),w})}else{const m=Gz(this.apiClient,e);return u=Ge("{model}:batchEmbedContents",m._url),f=m._query,delete m.config,delete m._url,delete m._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(v=>{const w=v;return w.sdkHttpResponse={headers:y.headers},w})),l.then(y=>{const v=SG(y),w=new tA;return Object.assign(w,v),w})}}async generateImagesInternal(e){var t,i,r,o;let l,u="",f={};if(this.apiClient.isVertexAI()){const m=Vj(this.apiClient,e);return u=Ge("{model}:predict",m._url),f=m._query,delete m.config,delete m._url,delete m._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(v=>{const w=v;return w.sdkHttpResponse={headers:y.headers},w})),l.then(y=>{const v=QG(y),w=new nA;return Object.assign(w,v),w})}else{const m=$z(this.apiClient,e);return u=Ge("{model}:predict",m._url),f=m._query,delete m.config,delete m._url,delete m._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(v=>{const w=v;return w.sdkHttpResponse={headers:y.headers},w})),l.then(y=>{const v=CG(y),w=new nA;return Object.assign(w,v),w})}}async editImageInternal(e){var t,i;let r,o="",l={};if(this.apiClient.isVertexAI()){const u=zj(this.apiClient,e);return o=Ge("{model}:predict",u._url),l=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:f.headers},y})),r.then(f=>{const m=XG(f),y=new SB;return Object.assign(y,m),y})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,i;let r,o="",l={};if(this.apiClient.isVertexAI()){const u=Gj(this.apiClient,e);return o=Ge("{model}:predict",u._url),l=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:f.headers},y})),r.then(f=>{const m=ZG(f),y=new IB;return Object.assign(y,m),y})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,i;let r,o="",l={};if(this.apiClient.isVertexAI()){const u=Kj(this.apiClient,e);return o=Ge("{model}:predict",u._url),l=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),r.then(f=>{const m=eH(f),y=new AB;return Object.assign(y,m),y})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,i;let r,o="",l={};if(this.apiClient.isVertexAI()){const u=Xj(this.apiClient,e);return o=Ge("{model}:predict",u._url),l=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),r.then(f=>{const m=iH(f),y=new CB;return Object.assign(y,m),y})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,i,r,o;let l,u="",f={};if(this.apiClient.isVertexAI()){const m=Zj(this.apiClient,e);return u=Ge("{name}",m._url),f=m._query,delete m.config,delete m._url,delete m._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),l.then(y=>Cv(y))}else{const m=Wz(this.apiClient,e);return u=Ge("{name}",m._url),f=m._query,delete m.config,delete m._url,delete m._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),l.then(y=>Av(y))}}async listInternal(e){var t,i,r,o;let l,u="",f={};if(this.apiClient.isVertexAI()){const m=tG(this.apiClient,e);return u=Ge("{models_url}",m._url),f=m._query,delete m.config,delete m._url,delete m._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(v=>{const w=v;return w.sdkHttpResponse={headers:y.headers},w})),l.then(y=>{const v=aH(y),w=new iA;return Object.assign(w,v),w})}else{const m=Jz(this.apiClient,e);return u=Ge("{models_url}",m._url),f=m._query,delete m.config,delete m._url,delete m._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(v=>{const w=v;return w.sdkHttpResponse={headers:y.headers},w})),l.then(y=>{const v=NG(y),w=new iA;return Object.assign(w,v),w})}}async update(e){var t,i,r,o;let l,u="",f={};if(this.apiClient.isVertexAI()){const m=iG(this.apiClient,e);return u=Ge("{model}",m._url),f=m._query,delete m.config,delete m._url,delete m._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),l.then(y=>Cv(y))}else{const m=Qz(this.apiClient,e);return u=Ge("{name}",m._url),f=m._query,delete m.config,delete m._url,delete m._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),l.then(y=>Av(y))}}async delete(e){var t,i,r,o;let l,u="",f={};if(this.apiClient.isVertexAI()){const m=rG(this.apiClient,e);return u=Ge("{name}",m._url),f=m._query,delete m.config,delete m._url,delete m._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(v=>{const w=v;return w.sdkHttpResponse={headers:y.headers},w})),l.then(y=>{const v=lH(y),w=new rA;return Object.assign(w,v),w})}else{const m=Xz(this.apiClient,e);return u=Ge("{name}",m._url),f=m._query,delete m.config,delete m._url,delete m._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(v=>{const w=v;return w.sdkHttpResponse={headers:y.headers},w})),l.then(y=>{const v=PG(y),w=new rA;return Object.assign(w,v),w})}}async countTokens(e){var t,i,r,o;let l,u="",f={};if(this.apiClient.isVertexAI()){const m=oG(this.apiClient,e);return u=Ge("{model}:countTokens",m._url),f=m._query,delete m.config,delete m._url,delete m._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(v=>{const w=v;return w.sdkHttpResponse={headers:y.headers},w})),l.then(y=>{const v=uH(y),w=new sA;return Object.assign(w,v),w})}else{const m=ej(this.apiClient,e);return u=Ge("{model}:countTokens",m._url),f=m._query,delete m.config,delete m._url,delete m._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(v=>{const w=v;return w.sdkHttpResponse={headers:y.headers},w})),l.then(y=>{const v=kG(y),w=new sA;return Object.assign(w,v),w})}}async computeTokens(e){var t,i;let r,o="",l={};if(this.apiClient.isVertexAI()){const u=aG(this.apiClient,e);return o=Ge("{model}:computeTokens",u._url),l=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:f.headers},y})),r.then(f=>{const m=cH(f),y=new RB;return Object.assign(y,m),y})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,i,r,o;let l,u="",f={};if(this.apiClient.isVertexAI()){const m=fG(this.apiClient,e);return u=Ge("{model}:predictLongRunning",m._url),f=m._query,delete m.config,delete m._url,delete m._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),l.then(y=>{const v=mH(y),w=new up;return Object.assign(w,v),w})}else{const m=ij(this.apiClient,e);return u=Ge("{model}:predictLongRunning",m._url),f=m._query,delete m.config,delete m._url,delete m._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),l.then(y=>{const v=UG(y),w=new up;return Object.assign(w,v),w})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class jH extends Za{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,i=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=t.name.split("/operations/")[0];let o;i&&"httpOptions"in i&&(o=i.httpOptions);const l=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:r,config:{httpOptions:o}});return t._fromAPIResponse({apiResponse:l,isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:t.name,config:i});return t._fromAPIResponse({apiResponse:r,isVertexAI:!1})}}async get(e){const t=e.operation,i=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=t.name.split("/operations/")[0];let o;i&&"httpOptions"in i&&(o=i.httpOptions);const l=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:r,config:{httpOptions:o}});return t._fromAPIResponse({apiResponse:l,isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:t.name,config:i});return t._fromAPIResponse({apiResponse:r,isVertexAI:!1})}}async getVideosOperationInternal(e){var t,i,r,o;let l,u="",f={};if(this.apiClient.isVertexAI()){const m=gB(e);return u=Ge("{operationName}",m._url),f=m._query,delete m.config,delete m._url,delete m._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),l}else{const m=mB(e);return u=Ge("{operationName}",m._url),f=m._query,delete m.config,delete m._url,delete m._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),l}}async fetchPredictVideosOperationInternal(e){var t,i;let r,o="",l={};if(this.apiClient.isVertexAI()){const u=pB(e);return o=Ge("{resourceName}:fetchPredictOperation",u._url),l=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function GH(n){const e={},t=d(n,["voiceName"]);return t!=null&&h(e,["voiceName"],t),e}function oP(n){const e={},t=d(n,["prebuiltVoiceConfig"]);return t!=null&&h(e,["prebuiltVoiceConfig"],GH(t)),e}function HH(n){const e={},t=d(n,["speaker"]);t!=null&&h(e,["speaker"],t);const i=d(n,["voiceConfig"]);return i!=null&&h(e,["voiceConfig"],oP(i)),e}function $H(n){const e={},t=d(n,["speakerVoiceConfigs"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>HH(r))),h(e,["speakerVoiceConfigs"],i)}return e}function WH(n){const e={},t=d(n,["voiceConfig"]);t!=null&&h(e,["voiceConfig"],oP(t));const i=d(n,["multiSpeakerVoiceConfig"]);i!=null&&h(e,["multiSpeakerVoiceConfig"],$H(i));const r=d(n,["languageCode"]);return r!=null&&h(e,["languageCode"],r),e}function KH(n){const e={},t=d(n,["fps"]);t!=null&&h(e,["fps"],t);const i=d(n,["endOffset"]);i!=null&&h(e,["endOffset"],i);const r=d(n,["startOffset"]);return r!=null&&h(e,["startOffset"],r),e}function JH(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=d(n,["data"]);t!=null&&h(e,["data"],t);const i=d(n,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function YH(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=d(n,["fileUri"]);t!=null&&h(e,["fileUri"],t);const i=d(n,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function QH(n){const e={},t=d(n,["id"]);t!=null&&h(e,["id"],t);const i=d(n,["args"]);i!=null&&h(e,["args"],i);const r=d(n,["name"]);return r!=null&&h(e,["name"],r),e}function XH(n){const e={},t=d(n,["videoMetadata"]);t!=null&&h(e,["videoMetadata"],KH(t));const i=d(n,["thought"]);i!=null&&h(e,["thought"],i);const r=d(n,["inlineData"]);r!=null&&h(e,["inlineData"],JH(r));const o=d(n,["fileData"]);o!=null&&h(e,["fileData"],YH(o));const l=d(n,["thoughtSignature"]);l!=null&&h(e,["thoughtSignature"],l);const u=d(n,["functionCall"]);u!=null&&h(e,["functionCall"],QH(u));const f=d(n,["codeExecutionResult"]);f!=null&&h(e,["codeExecutionResult"],f);const m=d(n,["executableCode"]);m!=null&&h(e,["executableCode"],m);const y=d(n,["functionResponse"]);y!=null&&h(e,["functionResponse"],y);const v=d(n,["text"]);return v!=null&&h(e,["text"],v),e}function ZH(n){const e={},t=d(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(o=>XH(o))),h(e,["parts"],r)}const i=d(n,["role"]);return i!=null&&h(e,["role"],i),e}function e$(n){const e={},t=d(n,["behavior"]);t!=null&&h(e,["behavior"],t);const i=d(n,["description"]);i!=null&&h(e,["description"],i);const r=d(n,["name"]);r!=null&&h(e,["name"],r);const o=d(n,["parameters"]);o!=null&&h(e,["parameters"],o);const l=d(n,["parametersJsonSchema"]);l!=null&&h(e,["parametersJsonSchema"],l);const u=d(n,["response"]);u!=null&&h(e,["response"],u);const f=d(n,["responseJsonSchema"]);return f!=null&&h(e,["responseJsonSchema"],f),e}function t$(n){const e={},t=d(n,["startTime"]);t!=null&&h(e,["startTime"],t);const i=d(n,["endTime"]);return i!=null&&h(e,["endTime"],i),e}function n$(n){const e={},t=d(n,["timeRangeFilter"]);if(t!=null&&h(e,["timeRangeFilter"],t$(t)),d(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function i$(n){const e={},t=d(n,["mode"]);t!=null&&h(e,["mode"],t);const i=d(n,["dynamicThreshold"]);return i!=null&&h(e,["dynamicThreshold"],i),e}function r$(n){const e={},t=d(n,["dynamicRetrievalConfig"]);return t!=null&&h(e,["dynamicRetrievalConfig"],i$(t)),e}function s$(){return{}}function o$(n){const e={},t=d(n,["environment"]);return t!=null&&h(e,["environment"],t),e}function a$(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let f=t;Array.isArray(f)&&(f=f.map(m=>e$(m))),h(e,["functionDeclarations"],f)}if(d(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=d(n,["googleSearch"]);i!=null&&h(e,["googleSearch"],n$(i));const r=d(n,["googleSearchRetrieval"]);if(r!=null&&h(e,["googleSearchRetrieval"],r$(r)),d(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(d(n,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");d(n,["urlContext"])!=null&&h(e,["urlContext"],s$());const l=d(n,["computerUse"]);l!=null&&h(e,["computerUse"],o$(l));const u=d(n,["codeExecution"]);return u!=null&&h(e,["codeExecution"],u),e}function l$(n){const e={},t=d(n,["handle"]);if(t!=null&&h(e,["handle"],t),d(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function NA(){return{}}function u$(n){const e={},t=d(n,["disabled"]);t!=null&&h(e,["disabled"],t);const i=d(n,["startOfSpeechSensitivity"]);i!=null&&h(e,["startOfSpeechSensitivity"],i);const r=d(n,["endOfSpeechSensitivity"]);r!=null&&h(e,["endOfSpeechSensitivity"],r);const o=d(n,["prefixPaddingMs"]);o!=null&&h(e,["prefixPaddingMs"],o);const l=d(n,["silenceDurationMs"]);return l!=null&&h(e,["silenceDurationMs"],l),e}function c$(n){const e={},t=d(n,["automaticActivityDetection"]);t!=null&&h(e,["automaticActivityDetection"],u$(t));const i=d(n,["activityHandling"]);i!=null&&h(e,["activityHandling"],i);const r=d(n,["turnCoverage"]);return r!=null&&h(e,["turnCoverage"],r),e}function d$(n){const e={},t=d(n,["targetTokens"]);return t!=null&&h(e,["targetTokens"],t),e}function f$(n){const e={},t=d(n,["triggerTokens"]);t!=null&&h(e,["triggerTokens"],t);const i=d(n,["slidingWindow"]);return i!=null&&h(e,["slidingWindow"],d$(i)),e}function h$(n){const e={},t=d(n,["proactiveAudio"]);return t!=null&&h(e,["proactiveAudio"],t),e}function m$(n,e){const t={},i=d(n,["generationConfig"]);e!==void 0&&i!=null&&h(e,["setup","generationConfig"],i);const r=d(n,["responseModalities"]);e!==void 0&&r!=null&&h(e,["setup","generationConfig","responseModalities"],r);const o=d(n,["temperature"]);e!==void 0&&o!=null&&h(e,["setup","generationConfig","temperature"],o);const l=d(n,["topP"]);e!==void 0&&l!=null&&h(e,["setup","generationConfig","topP"],l);const u=d(n,["topK"]);e!==void 0&&u!=null&&h(e,["setup","generationConfig","topK"],u);const f=d(n,["maxOutputTokens"]);e!==void 0&&f!=null&&h(e,["setup","generationConfig","maxOutputTokens"],f);const m=d(n,["mediaResolution"]);e!==void 0&&m!=null&&h(e,["setup","generationConfig","mediaResolution"],m);const y=d(n,["seed"]);e!==void 0&&y!=null&&h(e,["setup","generationConfig","seed"],y);const v=d(n,["speechConfig"]);e!==void 0&&v!=null&&h(e,["setup","generationConfig","speechConfig"],WH(IT(v)));const w=d(n,["enableAffectiveDialog"]);e!==void 0&&w!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],w);const E=d(n,["systemInstruction"]);e!==void 0&&E!=null&&h(e,["setup","systemInstruction"],ZH(ni(E)));const S=d(n,["tools"]);if(e!==void 0&&S!=null){let z=ec(S);Array.isArray(z)&&(z=z.map(H=>a$(Zu(H)))),h(e,["setup","tools"],z)}const b=d(n,["sessionResumption"]);e!==void 0&&b!=null&&h(e,["setup","sessionResumption"],l$(b));const A=d(n,["inputAudioTranscription"]);e!==void 0&&A!=null&&h(e,["setup","inputAudioTranscription"],NA());const C=d(n,["outputAudioTranscription"]);e!==void 0&&C!=null&&h(e,["setup","outputAudioTranscription"],NA());const R=d(n,["realtimeInputConfig"]);e!==void 0&&R!=null&&h(e,["setup","realtimeInputConfig"],c$(R));const L=d(n,["contextWindowCompression"]);e!==void 0&&L!=null&&h(e,["setup","contextWindowCompression"],f$(L));const q=d(n,["proactivity"]);return e!==void 0&&q!=null&&h(e,["setup","proactivity"],h$(q)),t}function p$(n,e){const t={},i=d(e,["model"]);i!=null&&h(t,["setup","model"],It(n,i));const r=d(e,["config"]);return r!=null&&h(t,["config"],m$(r,t)),t}function g$(n,e,t){const i={},r=d(e,["expireTime"]);t!==void 0&&r!=null&&h(t,["expireTime"],r);const o=d(e,["newSessionExpireTime"]);t!==void 0&&o!=null&&h(t,["newSessionExpireTime"],o);const l=d(e,["uses"]);t!==void 0&&l!=null&&h(t,["uses"],l);const u=d(e,["liveConnectConstraints"]);t!==void 0&&u!=null&&h(t,["bidiGenerateContentSetup"],p$(n,u));const f=d(e,["lockAdditionalFields"]);return t!==void 0&&f!=null&&h(t,["fieldMask"],f),i}function y$(n,e){const t={},i=d(e,["config"]);return i!=null&&h(t,["config"],g$(n,i,t)),t}function _$(n){const e={},t=d(n,["name"]);return t!=null&&h(e,["name"],t),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function v$(n){const e=[];for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const i=n[t];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const r=Object.keys(i).map(o=>`${t}.${o}`);e.push(...r)}else e.push(t)}return e.join(",")}function T$(n,e){let t=null;const i=n.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const o=i.setup;typeof o=="object"&&o!==null?(n.bidiGenerateContentSetup=o,t=o):delete n.bidiGenerateContentSetup}else i!==void 0&&delete n.bidiGenerateContentSetup;const r=n.fieldMask;if(t){const o=v$(t);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)o?n.fieldMask=o:delete n.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const l=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let u=[];r.length>0&&(u=r.map(m=>l.includes(m)?`generationConfig.${m}`:m));const f=[];o&&f.push(o),u.length>0&&f.push(...u),f.length>0?n.fieldMask=f.join(","):delete n.fieldMask}else delete n.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?n.fieldMask=r.join(","):delete n.fieldMask;return n}class w$ extends Za{constructor(e){super(),this.apiClient=e}async create(e){var t,i;let r,o="",l={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const u=y$(this.apiClient,e);o=Ge("auth_tokens",u._url),l=u._query,delete u.config,delete u._url,delete u._query;const f=T$(u,e.config);return r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),r.then(m=>_$(m))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function x$(n){const e={},t=d(n,["name"]);t!=null&&h(e,["_url","name"],t);const i=d(n,["config"]);return i!=null&&h(e,["config"],i),e}function E$(n,e){const t={},i=d(n,["pageSize"]);e!==void 0&&i!=null&&h(e,["_query","pageSize"],i);const r=d(n,["pageToken"]);e!==void 0&&r!=null&&h(e,["_query","pageToken"],r);const o=d(n,["filter"]);return e!==void 0&&o!=null&&h(e,["_query","filter"],o),t}function b$(n){const e={},t=d(n,["config"]);return t!=null&&h(e,["config"],E$(t,e)),e}function S$(n){const e={},t=d(n,["name"]);t!=null&&h(e,["_url","name"],t);const i=d(n,["config"]);return i!=null&&h(e,["config"],i),e}function I$(n){const e={},t=d(n,["textInput"]);t!=null&&h(e,["textInput"],t);const i=d(n,["output"]);return i!=null&&h(e,["output"],i),e}function A$(n){const e={};if(d(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(d(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const t=d(n,["examples"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>I$(r))),h(e,["examples","examples"],i)}return e}function C$(n,e){const t={};if(d(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const i=d(n,["tunedModelDisplayName"]);if(e!==void 0&&i!=null&&h(e,["displayName"],i),d(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const r=d(n,["epochCount"]);e!==void 0&&r!=null&&h(e,["tuningTask","hyperparameters","epochCount"],r);const o=d(n,["learningRateMultiplier"]);if(o!=null&&h(t,["tuningTask","hyperparameters","learningRateMultiplier"],o),d(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(d(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(d(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const l=d(n,["batchSize"]);e!==void 0&&l!=null&&h(e,["tuningTask","hyperparameters","batchSize"],l);const u=d(n,["learningRate"]);if(e!==void 0&&u!=null&&h(e,["tuningTask","hyperparameters","learningRate"],u),d(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");return t}function R$(n){const e={},t=d(n,["baseModel"]);t!=null&&h(e,["baseModel"],t);const i=d(n,["preTunedModel"]);i!=null&&h(e,["preTunedModel"],i);const r=d(n,["trainingDataset"]);r!=null&&h(e,["tuningTask","trainingData"],A$(r));const o=d(n,["config"]);return o!=null&&h(e,["config"],C$(o,e)),e}function N$(n){const e={},t=d(n,["name"]);t!=null&&h(e,["_url","name"],t);const i=d(n,["config"]);return i!=null&&h(e,["config"],i),e}function P$(n,e){const t={},i=d(n,["pageSize"]);e!==void 0&&i!=null&&h(e,["_query","pageSize"],i);const r=d(n,["pageToken"]);e!==void 0&&r!=null&&h(e,["_query","pageToken"],r);const o=d(n,["filter"]);return e!==void 0&&o!=null&&h(e,["_query","filter"],o),t}function k$(n){const e={},t=d(n,["config"]);return t!=null&&h(e,["config"],P$(t,e)),e}function D$(n){const e={},t=d(n,["name"]);t!=null&&h(e,["_url","name"],t);const i=d(n,["config"]);return i!=null&&h(e,["config"],i),e}function M$(n,e){const t={},i=d(n,["gcsUri"]);e!==void 0&&i!=null&&h(e,["supervisedTuningSpec","trainingDatasetUri"],i);const r=d(n,["vertexDatasetResource"]);if(e!==void 0&&r!=null&&h(e,["supervisedTuningSpec","trainingDatasetUri"],r),d(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return t}function V$(n,e){const t={},i=d(n,["gcsUri"]);i!=null&&h(t,["validationDatasetUri"],i);const r=d(n,["vertexDatasetResource"]);return e!==void 0&&r!=null&&h(e,["supervisedTuningSpec","trainingDatasetUri"],r),t}function U$(n,e){const t={},i=d(n,["validationDataset"]);e!==void 0&&i!=null&&h(e,["supervisedTuningSpec"],V$(i,t));const r=d(n,["tunedModelDisplayName"]);e!==void 0&&r!=null&&h(e,["tunedModelDisplayName"],r);const o=d(n,["description"]);e!==void 0&&o!=null&&h(e,["description"],o);const l=d(n,["epochCount"]);e!==void 0&&l!=null&&h(e,["supervisedTuningSpec","hyperParameters","epochCount"],l);const u=d(n,["learningRateMultiplier"]);e!==void 0&&u!=null&&h(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],u);const f=d(n,["exportLastCheckpointOnly"]);e!==void 0&&f!=null&&h(e,["supervisedTuningSpec","exportLastCheckpointOnly"],f);const m=d(n,["preTunedModelCheckpointId"]);m!=null&&h(t,["preTunedModel","checkpointId"],m);const y=d(n,["adapterSize"]);if(e!==void 0&&y!=null&&h(e,["supervisedTuningSpec","hyperParameters","adapterSize"],y),d(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(d(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const v=d(n,["labels"]);return e!==void 0&&v!=null&&h(e,["labels"],v),t}function L$(n){const e={},t=d(n,["baseModel"]);t!=null&&h(e,["baseModel"],t);const i=d(n,["preTunedModel"]);i!=null&&h(e,["preTunedModel"],i);const r=d(n,["trainingDataset"]);r!=null&&h(e,["supervisedTuningSpec","trainingDatasetUri"],M$(r,e));const o=d(n,["config"]);return o!=null&&h(e,["config"],U$(o,e)),e}function O$(n){const e={},t=d(n,["name"]);t!=null&&h(e,["model"],t);const i=d(n,["name"]);return i!=null&&h(e,["endpoint"],i),e}function aP(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const i=d(n,["name"]);i!=null&&h(e,["name"],i);const r=d(n,["state"]);r!=null&&h(e,["state"],DN(r));const o=d(n,["createTime"]);o!=null&&h(e,["createTime"],o);const l=d(n,["tuningTask","startTime"]);l!=null&&h(e,["startTime"],l);const u=d(n,["tuningTask","completeTime"]);u!=null&&h(e,["endTime"],u);const f=d(n,["updateTime"]);f!=null&&h(e,["updateTime"],f);const m=d(n,["description"]);m!=null&&h(e,["description"],m);const y=d(n,["baseModel"]);y!=null&&h(e,["baseModel"],y);const v=d(n,["_self"]);v!=null&&h(e,["tunedModel"],O$(v));const w=d(n,["customBaseModel"]);w!=null&&h(e,["customBaseModel"],w);const E=d(n,["experiment"]);E!=null&&h(e,["experiment"],E);const S=d(n,["labels"]);S!=null&&h(e,["labels"],S);const b=d(n,["outputUri"]);b!=null&&h(e,["outputUri"],b);const A=d(n,["pipelineJob"]);A!=null&&h(e,["pipelineJob"],A);const C=d(n,["serviceAccount"]);C!=null&&h(e,["serviceAccount"],C);const R=d(n,["tunedModelDisplayName"]);return R!=null&&h(e,["tunedModelDisplayName"],R),e}function F$(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const i=d(n,["nextPageToken"]);i!=null&&h(e,["nextPageToken"],i);const r=d(n,["tunedModels"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>aP(l))),h(e,["tuningJobs"],o)}return e}function B$(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const i=d(n,["name"]);i!=null&&h(e,["name"],i);const r=d(n,["metadata"]);r!=null&&h(e,["metadata"],r);const o=d(n,["done"]);o!=null&&h(e,["done"],o);const l=d(n,["error"]);return l!=null&&h(e,["error"],l),e}function q$(n){const e={},t=d(n,["checkpointId"]);t!=null&&h(e,["checkpointId"],t);const i=d(n,["epoch"]);i!=null&&h(e,["epoch"],i);const r=d(n,["step"]);r!=null&&h(e,["step"],r);const o=d(n,["endpoint"]);return o!=null&&h(e,["endpoint"],o),e}function z$(n){const e={},t=d(n,["model"]);t!=null&&h(e,["model"],t);const i=d(n,["endpoint"]);i!=null&&h(e,["endpoint"],i);const r=d(n,["checkpoints"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>q$(l))),h(e,["checkpoints"],o)}return e}function Nv(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const i=d(n,["name"]);i!=null&&h(e,["name"],i);const r=d(n,["state"]);r!=null&&h(e,["state"],DN(r));const o=d(n,["createTime"]);o!=null&&h(e,["createTime"],o);const l=d(n,["startTime"]);l!=null&&h(e,["startTime"],l);const u=d(n,["endTime"]);u!=null&&h(e,["endTime"],u);const f=d(n,["updateTime"]);f!=null&&h(e,["updateTime"],f);const m=d(n,["error"]);m!=null&&h(e,["error"],m);const y=d(n,["description"]);y!=null&&h(e,["description"],y);const v=d(n,["baseModel"]);v!=null&&h(e,["baseModel"],v);const w=d(n,["tunedModel"]);w!=null&&h(e,["tunedModel"],z$(w));const E=d(n,["preTunedModel"]);E!=null&&h(e,["preTunedModel"],E);const S=d(n,["supervisedTuningSpec"]);S!=null&&h(e,["supervisedTuningSpec"],S);const b=d(n,["tuningDataStats"]);b!=null&&h(e,["tuningDataStats"],b);const A=d(n,["encryptionSpec"]);A!=null&&h(e,["encryptionSpec"],A);const C=d(n,["partnerModelTuningSpec"]);C!=null&&h(e,["partnerModelTuningSpec"],C);const R=d(n,["customBaseModel"]);R!=null&&h(e,["customBaseModel"],R);const L=d(n,["experiment"]);L!=null&&h(e,["experiment"],L);const q=d(n,["labels"]);q!=null&&h(e,["labels"],q);const z=d(n,["outputUri"]);z!=null&&h(e,["outputUri"],z);const H=d(n,["pipelineJob"]);H!=null&&h(e,["pipelineJob"],H);const O=d(n,["serviceAccount"]);O!=null&&h(e,["serviceAccount"],O);const V=d(n,["tunedModelDisplayName"]);return V!=null&&h(e,["tunedModelDisplayName"],V),e}function j$(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const i=d(n,["nextPageToken"]);i!=null&&h(e,["nextPageToken"],i);const r=d(n,["tuningJobs"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>Nv(l))),h(e,["tuningJobs"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class G$ extends Za{constructor(e){super(),this.apiClient=e,this.get=async t=>await this.getInternal(t),this.list=async(t={})=>new Df($a.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(t),t),this.tune=async t=>{if(this.apiClient.isVertexAI())if(t.baseModel.startsWith("projects/")){const i={tunedModelName:t.baseModel},r=Object.assign(Object.assign({},t),{preTunedModel:i});return r.baseModel=void 0,await this.tuneInternal(r)}else{const i=Object.assign({},t);return await this.tuneInternal(i)}else{const i=Object.assign({},t),r=await this.tuneMldevInternal(i);let o="";return r.metadata!==void 0&&r.metadata.tunedModel!==void 0?o=r.metadata.tunedModel:r.name!==void 0&&r.name.includes("/operations/")&&(o=r.name.split("/operations/")[0]),{name:o,state:wv.JOB_STATE_QUEUED}}}}async getInternal(e){var t,i,r,o;let l,u="",f={};if(this.apiClient.isVertexAI()){const m=N$(e);return u=Ge("{name}",m._url),f=m._query,delete m.config,delete m._url,delete m._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(v=>{const w=v;return w.sdkHttpResponse={headers:y.headers},w})),l.then(y=>Nv(y))}else{const m=x$(e);return u=Ge("{name}",m._url),f=m._query,delete m.config,delete m._url,delete m._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(v=>{const w=v;return w.sdkHttpResponse={headers:y.headers},w})),l.then(y=>aP(y))}}async listInternal(e){var t,i,r,o;let l,u="",f={};if(this.apiClient.isVertexAI()){const m=k$(e);return u=Ge("tuningJobs",m._url),f=m._query,delete m.config,delete m._url,delete m._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(v=>{const w=v;return w.sdkHttpResponse={headers:y.headers},w})),l.then(y=>{const v=j$(y),w=new oA;return Object.assign(w,v),w})}else{const m=b$(e);return u=Ge("tunedModels",m._url),f=m._query,delete m.config,delete m._url,delete m._query,l=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(v=>{const w=v;return w.sdkHttpResponse={headers:y.headers},w})),l.then(y=>{const v=F$(y),w=new oA;return Object.assign(w,v),w})}}async cancel(e){var t,i,r,o;let l="",u={};if(this.apiClient.isVertexAI()){const f=D$(e);l=Ge("{name}:cancel",f._url),u=f._query,delete f.config,delete f._url,delete f._query,await this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const f=S$(e);l=Ge("{name}:cancel",f._url),u=f._query,delete f.config,delete f._url,delete f._query,await this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async tuneInternal(e){var t,i;let r,o="",l={};if(this.apiClient.isVertexAI()){const u=L$(e);return o=Ge("tuningJobs",u._url),l=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:f.headers},y})),r.then(f=>Nv(f))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,i;let r,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=R$(e);return o=Ge("tunedModels",u._url),l=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(m=>{const y=m;return y.sdkHttpResponse={headers:f.headers},y})),r.then(f=>B$(f))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class H${async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const $$=1024*1024*8,W$=3,K$=1e3,J$=2,E_="x-goog-upload-status";async function Y$(n,e,t){var i,r,o;let l=0,u=0,f=new xv(new Response),m="upload";for(l=n.size;u<l;){const v=Math.min($$,l-u),w=n.slice(u,u+v);u+v>=l&&(m+=", finalize");let E=0,S=K$;for(;E<W$&&(f=await t.request({path:"",body:w,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":m,"X-Goog-Upload-Offset":String(u),"Content-Length":String(v)}}}),!(!((i=f==null?void 0:f.headers)===null||i===void 0)&&i[E_]));)E++,await X$(S),S=S*J$;if(u+=v,((r=f==null?void 0:f.headers)===null||r===void 0?void 0:r[E_])!=="active")break;if(l<=u)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const y=await(f==null?void 0:f.json());if(((o=f==null?void 0:f.headers)===null||o===void 0?void 0:o[E_])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return y.file}async function Q$(n){return{size:n.size,type:n.type}}function X$(n){return new Promise(e=>setTimeout(e,n))}class Z${async upload(e,t,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Y$(e,t,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Q$(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class eW{create(e,t,i){return new tW(e,t,i)}}class tW{constructor(e,t,i){this.url=e,this.headers=t,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const PA="x-goog-api-key";class nW{constructor(e){this.apiKey=e}async addAuthHeaders(e){if(e.get(PA)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(PA,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const iW="gl-node/";class ic{constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const i=hB(e.httpOptions,e.vertexai,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion;const r=new nW(this.apiKey);this.apiClient=new xH({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:iW+"web",uploader:new Z$,downloader:new H$}),this.models=new zH(this.apiClient),this.live=new VH(this.apiClient,r,new eW),this.batches=new r9(this.apiClient),this.chats=new f7(this.models,this.apiClient),this.caches=new u7(this.apiClient),this.files=new S7(this.apiClient),this.operations=new jH(this.apiClient),this.authTokens=new w$(this.apiClient),this.tunings=new G$(this.apiClient)}}const rW=async(n,e)=>{if(!n)return{title:"  ",content:" API   Gemini  .     ."};try{const r=(await new ic({apiKey:n}).models.generateContent({model:"gemini-2.5-flash",contents:`          : "${e}".            HTML.       (<h2>, <h3>)  (<p>)   (<ul>, <li>)   (<strong>).`,config:{responseMimeType:"application/json",responseSchema:{type:ln.OBJECT,properties:{title:{type:ln.STRING,description:"   ."},content:{type:ln.STRING,description:"    HTML.          HTML  h2, h3, p, ul, li, strong."}},required:["title","content"]}}})).text.trim();return JSON.parse(r)}catch(t){throw console.error("Error generating article content:",t),new Error("    .    API  .")}},sW=async(n,e)=>{if(!n)return"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1MTIiIGhlaWdodD0iNTEyIiB2aWV3Qm94PSIwIDAgNTEyIDUxMiI+PHJlY3Qgd2lkdGg9IjUxMiIgaGVpZ2h0PSI1MTIiIHJ4PSIxNSIgZmlsbD0iI2VlZSIvPjx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBkb21pbmFudC1iYXNlbGluZT0ibWlkZGxlIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIyNHB4IiBmaWxsPSIjY2NjIj7inYQg2YTZiNmF2Kcg2KfZhNi42LHYrNinIEtFWPCfkqk8L3RleHQ+PC9zdmc+";try{const i=await new ic({apiKey:n}).models.generateImages({model:"imagen-4.0-generate-001",prompt:`        : "${e}". :      .`,config:{numberOfImages:1,outputMimeType:"image/png",aspectRatio:"16:9"}});if(i.generatedImages&&i.generatedImages.length>0)return`data:image/png;base64,${i.generatedImages[0].image.imageBytes}`;throw new Error("No image was generated.")}catch(t){throw console.error("Error generating article image:",t),new Error("    .    API  .")}},oW=async(n,e,t,i,r)=>{if(!n)throw new Error(" API   Gemini  .");try{const u=(await new ic({apiKey:n}).models.generateContent({model:"gemini-2.5-flash",contents:`Translate the following Arabic article title and its HTML content to professional ${i}. It is crucial to preserve all HTML tags and their structure exactly as they are.

      Arabic Title: "${e}"
      
      Arabic HTML Content:
      \`\`\`html
      ${t}
      \`\`\`
      
      Respond only with a JSON object.`,config:{responseMimeType:"application/json",responseSchema:{type:ln.OBJECT,properties:{title:{type:ln.STRING,description:`The translated ${i} title.`},content:{type:ln.STRING,description:`The translated ${i} content, with all HTML tags preserved.`}},required:["title","content"]}}})).text.trim();return JSON.parse(u)}catch(o){throw console.error(`Error generating ${i} version:`,o),new Error(`    ${i}.    API  .`)}},kA=async(n,e,t)=>{if(!n)throw new Error(" API   Gemini  .");const i=e.replace(/<[^>]+>/g,"");try{return(await new ic({apiKey:n}).models.generateContent({model:"gemini-2.5-flash",contents:`Based on the following article content, write a concise, compelling, and SEO-friendly meta description in ${t}. The description should be around 155 characters.

      Article Content:
      "${i.substring(0,1e3)}..."
      
      Respond with only the meta description text.`})).text.trim().replace(/"/g,"")}catch(r){throw console.error(`Error generating meta description in ${t}:`,r),new Error(`      ${t}.`)}},aW=async(n,e,t,i,r)=>{if(!n)return{linkedContent:" API   Gemini  .     ."};const l=`#${i==="ar"?"":`${i}/`}posts/POST_ID`,u=t.map(m=>({id:m.id,title:m.title[i]||m.title.ar})).filter(m=>m.title);if(u.length===0)return{linkedContent:e};const f=`
    You are an SEO expert specializing in internal linking for a multilingual website. Your task is to analyze an HTML article in ${r} and strategically add internal links to other available articles.

    **Instructions:**

    1.  **Analyze Target Content:** Review the provided HTML content. You are editing the **${r}** version of the article.
    2.  **Analyze Available Articles:** The provided JSON array contains a list of other available articles. Each object has an 'id' and a 'title' in ${r}. Use the 'id' for the link's href.
    3.  **Identify Linking Opportunities:**
        *   Read the content within \`<p>\` tags only.
        *   Identify phrases, keywords, or sentences that are highly relevant to the **title** of one of the available articles.
        *   Aim for natural, contextually relevant links.
        *   A good density is 2-4 internal links for a 500-word article. Link a phrase only once.
    4.  **Construct the Links:**
        *   When you find a relevant phrase, wrap it in an anchor \`<a>\` tag.
        *   The \`href\` attribute **must** be in the format \`${l}\`, where \`POST_ID\` is the 'id' from the JSON list.
    5.  **Strict Rules - Very Important:**
        *   Do **not** add, modify, or remove any links within heading tags (\`<h1>\`, \`<h2>\`, \`<h3>\`, etc.).
        *   Do **not** add, modify, or remove any links within list items (\`<li>\`).
        *   **Only** add new links inside paragraph tags (\`<p>\`).
        *   Preserve all existing HTML structure, tags, and attributes perfectly. Only insert new \`<a>\` tags where appropriate.
        *   Do not link to the same article more than once.
        *   If no good linking opportunities are found, return the original HTML content unmodified.

    **Available Articles for Linking (JSON in ${r}):**
    ${JSON.stringify(u)}

    **HTML Content to Process (in ${r}):**
    \`\`\`html
    ${e}
    \`\`\`

    Respond with a JSON object only.
    `;try{const v=(await new ic({apiKey:n}).models.generateContent({model:"gemini-2.5-flash",contents:f,config:{responseMimeType:"application/json",responseSchema:{type:ln.OBJECT,properties:{linkedContent:{type:ln.STRING,description:"The updated HTML content with internal links added. All original HTML structure must be preserved perfectly."}},required:["linkedContent"]}}})).text.trim();return JSON.parse(v)}catch(m){throw console.error("Error generating internal links:",m),new Error(`      ${r}.`)}},lW=async(n,e,t,i,r)=>{if(!n)throw new Error(" API   Gemini  .");const o=`
  Translate the following Arabic website identity fields into the specified target languages.

  Arabic Site Name: "${e}"
  Arabic Site Description: "${t}"
  Arabic Site Meta Description: "${i}"
  
  Target Languages: ${JSON.stringify(r)}
  
  Respond ONLY with a JSON array of objects. Each object must have the keys "langCode", "siteName", "siteDescription", and "siteMetaDescription".
  `;try{const f=(await new ic({apiKey:n}).models.generateContent({model:"gemini-2.5-flash",contents:o,config:{responseMimeType:"application/json",responseSchema:{type:ln.ARRAY,items:{type:ln.OBJECT,properties:{langCode:{type:ln.STRING},siteName:{type:ln.STRING},siteDescription:{type:ln.STRING},siteMetaDescription:{type:ln.STRING}},required:["langCode","siteName","siteDescription","siteMetaDescription"]}}}})).text.trim();return JSON.parse(f)}catch(l){throw console.error("Error generating SEO translations:",l),new Error("    .    API  .")}},uW=async(n,e)=>n?(console.log(`[OpenAI Service] Simulating content generation for prompt: "${e}"`),await new Promise(t=>setTimeout(t,1500)),{title:`    ChatGPT : ${e}`,content:`
      <h2>  ChatGPT</h2>
      <p>         <strong>ChatGPT</strong>.            .</p>
      <h3> </h3>
      <ul>
        <li>    .</li>
        <li>     .</li>
        <li>  .</li>
      </ul>
      <p>    .</p>
    `}):{title:"  ",content:" API   OpenAI  .     ."},cW=async(n,e)=>n?(console.log(`[OpenAI Service] Simulating image generation for prompt: "${e}"`),await new Promise(t=>setTimeout(t,2e3)),`https://picsum.photos/seed/${encodeURIComponent(e)}/1280/720`):"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1MTIiIGhlaWdodD0iNTEyIiB2aWV3Qm94PSIwIDAgNTEyIDUxMiI+PHJlY3Qgd2lkdGg9IjUxMiIgaGVpZ2h0PSI1MTIiIHJ4PSIxNSIgZmlsbD0iI2VlZSIvPjx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBkb21pbmFudC1iYXNlbGluZT0ibWlkZGxlIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIyNHB4IiBmaWxsPSIjY2NjIj5OpenAI Key Missing</text></svg>",lP=({value:n,onChange:e,adUnits:t,dir:i})=>{const r=ae.useRef(null),o=ae.useRef(null),l=ae.useRef(!1);ae.useEffect(()=>{if(!r.current||l.current)return;const f=[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{header:[1,2,3,4,5,6,!1]}],[{align:[]}],["link","image","video"],["clean"]],m=new Quill(r.current,{modules:{toolbar:f},theme:"snow"});o.current=m,l.current=!0,n&&(m.root.innerHTML=n),i&&(m.format("direction",i),m.format("align",i==="rtl"?"right":"left","silent")),m.on("text-change",(y,v,w)=>{w==="user"&&e(m.root.innerHTML)})},[]),ae.useEffect(()=>{const f=o.current;if(f&&n!==f.root.innerHTML){const m=f.getSelection();f.root.innerHTML=n,m&&f.setSelection(m.index,m.length,"silent")}},[n]);const u=f=>{const m=o.current;if(m){const y=m.getSelection(!0);m.insertText(y.index,`
${f}
`,"user"),m.setSelection(y.index+f.length+2,0,"user")}};return g.jsxs("div",{className:"border border-gray-300 rounded-md bg-white",children:[g.jsxs("div",{className:"flex items-center p-2 border-b bg-gray-50 flex-wrap gap-2 text-sm",children:[g.jsx("span",{className:"font-semibold text-gray-700 ml-2",children:":"}),g.jsx("button",{type:"button",onClick:()=>u("[RELATED_POSTS]"),className:"px-3 py-1 bg-white border rounded hover:bg-gray-100 text-black",children:"  "}),g.jsxs("select",{onChange:f=>{f.target.value&&u(`[AD_UNIT:${f.target.value}]`),f.target.value=""},className:"px-3 py-1 bg-white border rounded hover:bg-gray-100",disabled:t.length===0,"aria-label":"  ",children:[g.jsx("option",{value:"",children:"--   --"}),t.map(f=>g.jsx("option",{value:f.id,children:f.name},f.id))]})]}),g.jsx("div",{ref:r,className:"ql-editor-container",style:{height:"350px"}})]})},dp=(n,e=.8)=>new Promise((t,i)=>{const r=new Image;r.src=n,r.onload=()=>{const o=document.createElement("canvas"),l=o.getContext("2d");if(!l)return i(new Error("Could not get canvas context"));o.width=r.width,o.height=r.height,l.drawImage(r,0,0);const u=o.toDataURL("image/webp",e),f=n.length,m=u.length;t({optimizedUrl:u,originalSize:f,optimizedSize:m})},r.onerror=o=>{i(o)}}),b_={enabled:!1,position:"after-h2",p_count:3},DA=({post:n,onSave:e,categories:t,developerSettings:i,seoSettings:r,adUnits:o,allPosts:l,cmsLang:u})=>{const[f,m]=ae.useState({ar:""}),[y,v]=ae.useState({ar:""}),[w,E]=ae.useState({ar:""}),[S,b]=ae.useState(""),[A,C]=ae.useState(""),[R,L]=ae.useState(!0),[q,z]=ae.useState(null),[H,O]=ae.useState(b_),[V,U]=ae.useState(""),[j,J]=ae.useState(!1),[M,F]=ae.useState(!1),[k,ne]=ae.useState(!1),[te,X]=ae.useState(!1),[_e,me]=ae.useState(0),[K,Y]=ae.useState(null),Z=ae.useRef(null),he=ae.useRef(null),[ve,we]=ae.useState(!1),ke=r.supportedLanguages[_e];ae.useEffect(()=>{if(!he.current)return;const se=new IntersectionObserver(([$])=>{we(!$.isIntersecting)},{rootMargin:"-1px 0px 0px 0px",threshold:[1]});return se.observe(he.current),()=>se.disconnect()},[]),ae.useEffect(()=>{n?(m(n.title),v(n.content),E(n.metaDescription||{ar:""}),b(n.imageUrl),C(n.imageCaption||""),L(n.showSidebar),z(n.categoryId),O(n.relatedPostsSettings||b_)):(m({ar:""}),v({ar:""}),E({ar:""}),b(""),C(""),L(!0),z(null),O(b_)),me(0)},[n]);const it=async()=>{const se=f.ar;if(!se){Y(Q("errorEnterIdea",u));return}Y(null),J(!0);try{const{provider:$,geminiApiKey:W,chatgptApiKey:re}=i.aiSettings,Ee=$==="gemini"?await rW(W,se):await uW(re,se),Ae=await kA(W,Ee.content,"Arabic"),ce={ar:Ee.title},Ne={ar:Ee.content},Fe={ar:Ae};m(ce),v(Ne),E(Fe);const Ve=r.supportedLanguages.filter(Oe=>Oe.code!=="ar");if(Ve.length>0){const Oe=Ve.map(async We=>{const _t=await oW(W,Ee.title,Ee.content,We.name,We.code),si=await kA(W,_t.content,We.name);return{code:We.code,title:_t.title,content:_t.content,metaDescription:si}});(await Promise.all(Oe)).forEach(We=>{ce[We.code]=We.title,Ne[We.code]=We.content,Fe[We.code]=We.metaDescription}),m({...ce}),v({...Ne}),E({...Fe})}}catch($){Y($.message)}finally{J(!1)}},Me=async()=>{const se=y[ke.code]||y.ar;if(!se){Y(`    ${ke.name}   .`);return}Y(null),X(!0);try{const{geminiApiKey:$}=i.aiSettings,W=await aW($,se,l.filter(re=>re.status==="published"&&re.id!==(n==null?void 0:n.id)),ke.code,ke.name);v(re=>({...re,[ke.code]:W.linkedContent}))}catch($){Y($.message)}finally{X(!1)}},st=async()=>{if(!V){Y(Q("errorEnterImageDesc",u));return}Y(null),F(!0);try{const{provider:se,geminiApiKey:$,chatgptApiKey:W}=i.aiSettings,re=se==="gemini"?await sW($,V):await cW(W,V),Ee=await dp(re),Ae=await sp(Ee.optimizedUrl,i.cfWorker);b(Ae)}catch(se){Y(se.message)}finally{F(!1)}},yt=async se=>{var W;const $=(W=se.target.files)==null?void 0:W[0];if($){Y(null),ne(!0);try{const re=new FileReader;re.onload=async Ee=>{var ce;const Ae=(ce=Ee.target)==null?void 0:ce.result;if(Ae){const Ne=await dp(Ae);console.log(`Image optimized. Original: ${Ne.originalSize} bytes, Optimized: ${Ne.optimizedSize} bytes`);const Fe=await sp(Ne.optimizedUrl,i.cfWorker);b(Fe)}},re.readAsDataURL($)}catch{Y(Q("errorImageUploadFailed",u))}finally{ne(!1)}}},Ze=()=>({id:(n==null?void 0:n.id)||Ou(),title:f,content:y,metaDescription:w,imageUrl:S,imageCaption:A,categoryId:q,showSidebar:R,relatedPostsSettings:H,status:"draft",createdAt:(n==null?void 0:n.createdAt)||new Date().toISOString()}),Bt=()=>{const se=Ze();localStorage.setItem("cms_preview_data",JSON.stringify({type:"post",data:se})),window.open(window.location.pathname+"#preview","_blank")},Pt=se=>{if(!f.ar||!y.ar){Y(Q("errorTitleContentRequired",u));return}const $={...Ze(),status:se};e($)},P=j||M||k||te,xe=(n==null?void 0:n.status)==="published";return g.jsxs(g.Fragment,{children:[g.jsx("div",{className:`fixed top-0 left-0 right-0 md:right-64 z-10 bg-white/80 backdrop-blur-sm shadow-md transition-transform duration-300 ease-in-out ${ve?"translate-y-0":"-translate-y-full"}`,children:g.jsxs("div",{className:"p-4 flex items-center justify-between",children:[g.jsx("div",{className:"flex items-center gap-4 overflow-hidden",children:g.jsx("h2",{className:"text-lg font-bold text-neutral truncate whitespace-nowrap",children:f.ar||" "})}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("button",{type:"button",onClick:()=>Pt("draft"),className:"bg-gray-200 text-gray-800 px-4 py-2 rounded-lg font-semibold hover:bg-gray-300 transition-colors",disabled:P,children:Q("saveDraft",u)}),g.jsxs("button",{onClick:Bt,type:"button",className:"bg-gray-600 text-white px-4 py-2 rounded-lg font-semibold hover:bg-gray-700 transition-colors flex items-center gap-1",disabled:P,children:[g.jsx(ap,{className:"w-5 h-5"}),g.jsx("span",{children:Q("preview",u)})]}),g.jsx("button",{type:"button",onClick:()=>Pt("published"),className:"bg-primary text-white px-6 py-2 rounded-lg font-semibold hover:bg-secondary transition-colors",disabled:P,children:Q(xe?"update":"publish",u)})]})]})}),g.jsxs("div",{className:"p-4 sm:p-8",children:[g.jsxs("div",{ref:he,className:"flex items-center justify-between mb-6",children:[g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsx("h1",{className:"text-3xl font-bold text-neutral",children:Q(n?"editPost":"newPostTitle",u)}),g.jsxs(zt,{href:"#admin",className:"flex items-center space-x-2 rtl:space-x-reverse text-sm text-gray-500 hover:text-primary hover:underline font-semibold",children:[g.jsx(pN,{className:"rtl:rotate-180 w-5 h-5"}),g.jsx("span",{children:" "})]})]}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("button",{onClick:()=>Pt("draft"),type:"button",className:"bg-white text-gray-800 px-6 py-3 rounded-lg font-semibold hover:bg-gray-100 disabled:bg-gray-300 disabled:cursor-not-allowed transition-all shadow-md border",disabled:P,children:Q("saveDraft",u)}),g.jsxs("button",{onClick:Bt,type:"button",className:"bg-gray-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-gray-700 shadow-sm flex items-center gap-2",disabled:P,children:[g.jsx(ap,{className:"w-5 h-5"}),g.jsx("span",{children:Q("preview",u)})]}),g.jsx("button",{onClick:()=>Pt("published"),type:"button",className:"bg-primary text-white px-8 py-3 rounded-lg font-semibold hover:bg-secondary disabled:bg-gray-300 disabled:cursor-not-allowed transition-all shadow-md hover:shadow-lg",disabled:P,children:Q(xe?"update":"publish",u)})]})]}),g.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[g.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[g.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[g.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-2",children:Q("titlePlaceholder",u)}),g.jsxs("div",{className:"flex items-stretch gap-2",children:[g.jsx("input",{id:"title",type:"text",value:f.ar,onChange:se=>m($=>({...$,ar:se.target.value})),placeholder:Q("titleInputPlaceholder",u),className:"w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary focus:border-transparent bg-white text-gray-900 text-lg",required:!0}),g.jsx("button",{onClick:Me,type:"button",title:Q("generateInternalLinksTooltip",u),className:"p-3 bg-white border border-gray-300 text-gray-600 rounded-md hover:bg-gray-100 hover:text-primary transition-colors disabled:opacity-50",disabled:P||!y[ke.code],children:te?g.jsx("div",{className:"w-6 h-6 border-2 border-primary border-t-transparent rounded-full animate-spin"}):g.jsx(nB,{className:"w-6 h-6"})}),g.jsx("button",{onClick:it,type:"button",title:Q("generateContentTooltip",u),className:"p-3 bg-primary text-white rounded-md hover:bg-secondary transition-colors disabled:opacity-50",disabled:P,children:j?g.jsx("div",{className:"w-6 h-6 border-2 border-white border-t-transparent rounded-full animate-spin"}):g.jsx(op,{className:"w-6 h-6"})})]})]}),g.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[g.jsx("div",{className:"flex items-center gap-2 border-b mb-4",children:r.supportedLanguages.map((se,$)=>g.jsx("button",{onClick:()=>me($),className:`px-4 py-2 text-sm font-semibold rounded-t-md ${_e===$?"bg-white text-primary border-x border-t":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:se.name},se.code))}),g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{children:[g.jsxs("label",{htmlFor:`title-${ke.code}`,className:"block text-sm font-medium text-gray-700 mb-1",children:[Q("title",u)," (",ke.name,")"]}),g.jsx("input",{type:"text",id:`title-${ke.code}`,value:f[ke.code]||"",onChange:se=>m($=>({...$,[ke.code]:se.target.value})),className:`w-full p-2 border rounded-md bg-white text-gray-900 ${ke.direction==="rtl"?"rtl":"ltr"}`})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:`content-${ke.code}`,className:"block text-sm font-medium text-gray-700 mb-1",children:Q("content",u)}),g.jsx(lP,{value:y[ke.code]||"",onChange:se=>v($=>({...$,[ke.code]:se})),adUnits:o,dir:ke.direction})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:`metaDescription-${ke.code}`,className:"block text-sm font-medium text-gray-700 mb-1",children:"  (Meta Description)"}),g.jsx("textarea",{id:`metaDescription-${ke.code}`,value:w[ke.code]||"",onChange:se=>E($=>({...$,[ke.code]:se.target.value})),rows:3,className:`w-full p-2 border rounded-md bg-white text-gray-900 ${ke.direction==="rtl"?"rtl":"ltr"}`}),g.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"     (155-160 )."})]})]})]}),K&&g.jsx("p",{className:"mt-4 text-red-500 text-sm bg-red-100 p-3 rounded-md",children:K})]}),g.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[g.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[g.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700 mb-1",children:Q("categoryLabel",u)}),g.jsxs("select",{id:"category",value:q||"",onChange:se=>z(se.target.value),className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-primary bg-white text-gray-900",children:[g.jsx("option",{value:"",children:Q("selectCategory",u)}),t.map(se=>g.jsx("option",{value:se.id,children:se.name},se.id))]})]}),g.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:Q("mainImageLabel",u)}),g.jsx("div",{className:"w-full aspect-video border-2 border-dashed rounded-md flex items-center justify-center bg-gray-50 overflow-hidden relative",children:k||M?g.jsxs("div",{className:"text-center",children:[g.jsx("div",{className:"w-8 h-8 border-4 border-accent border-t-transparent rounded-full animate-spin mx-auto"}),g.jsx("p",{className:"text-sm text-gray-500 mt-2",children:Q(k?"uploading":"generatingImage",u)})]}):S?g.jsxs(g.Fragment,{children:[g.jsx("img",{src:S,alt:"preview",className:"w-full h-full object-cover"}),g.jsx("button",{onClick:()=>b(""),className:"absolute top-2 right-2 bg-black/50 text-white rounded-full p-1.5 hover:bg-black/70",children:g.jsx(Yr,{className:"w-4 h-4"})})]}):g.jsxs("div",{className:"text-center text-gray-400",children:[g.jsx(bN,{className:"w-12 h-12 mx-auto"}),g.jsx("p",{className:"text-xs mt-1",children:"  "})]})}),g.jsxs("div",{className:"mt-4 space-y-3",children:[g.jsxs("div",{className:"flex items-stretch gap-2",children:[g.jsx("input",{type:"text",value:V,onChange:se=>U(se.target.value),placeholder:Q("imagePromptPlaceholder",u),className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-primary bg-white"}),g.jsx("button",{onClick:st,disabled:P,className:"p-2 bg-primary text-white rounded-md hover:bg-secondary disabled:opacity-50",children:g.jsx(op,{className:"w-5 h-5"})})]}),g.jsx("div",{className:"text-center text-sm text-gray-500",children:""}),g.jsxs("div",{children:[g.jsx("input",{type:"file",ref:Z,onChange:yt,className:"hidden",accept:"image/*"}),g.jsx("button",{type:"button",onClick:()=>{var se;return(se=Z.current)==null?void 0:se.click()},className:"w-full text-center p-2 bg-gray-100 hover:bg-gray-200 rounded-md font-semibold text-gray-700",children:Q("uploadImageButton",u)})]})]}),g.jsxs("div",{className:"mt-4",children:[g.jsx("label",{htmlFor:"imageCaption",className:"block text-sm font-medium text-gray-700 mb-1",children:" "}),g.jsx("input",{type:"text",id:"imageCaption",value:A,onChange:se=>C(se.target.value),placeholder:Q("imageCaptionPlaceholder",u),className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-primary bg-white"})]})]}),g.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[g.jsx("h3",{className:"text-lg font-semibold text-neutral mb-4",children:" "}),g.jsx("div",{className:"space-y-4",children:g.jsxs("div",{className:"flex items-center",children:[g.jsx("input",{type:"checkbox",id:"show-sidebar",name:"showSidebar",checked:R,onChange:se=>L(se.target.checked),className:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"}),g.jsx("label",{htmlFor:"show-sidebar",className:"ml-2 rtl:mr-2 block text-sm text-gray-900",children:"  "})]})})]})]})]})]})]})},dW=({categories:n,onAddCategory:e,onDeleteCategory:t,cmsLang:i})=>{const[r,o]=ae.useState(""),[l,u]=ae.useState(""),f=v=>v.toLowerCase().replace(/||/g,"a").replace(//g,"b").replace(/|/g,"t").replace(//g,"th").replace(//g,"g").replace(//g,"h").replace(//g,"kh").replace(//g,"d").replace(//g,"dh").replace(//g,"r").replace(//g,"z").replace(//g,"s").replace(//g,"sh").replace(//g,"s").replace(//g,"d").replace(//g,"t").replace(//g,"z").replace(//g,"a").replace(//g,"gh").replace(//g,"f").replace(//g,"q").replace(//g,"k").replace(//g,"l").replace(//g,"m").replace(//g,"n").replace(//g,"h").replace(//g,"w").replace(//g,"y").replace(/\s+/g,"-").replace(/[^\w-]+/g,"").replace(/--+/g,"-").replace(/^-+/,"").replace(/-+$/,""),m=v=>{const w=v.target.value;o(w),u(f(w))},y=v=>{v.preventDefault();const w=r.trim(),E=l.trim();w&&E&&(e(w,E),o(""),u(""))};return g.jsxs("div",{className:"p-8",children:[g.jsx("h1",{className:"text-3xl font-bold text-neutral mb-6",children:Q("categoryManager",i)}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[g.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[g.jsx("h2",{className:"text-xl font-semibold mb-4",children:Q("addNewCategory",i)}),g.jsxs("form",{onSubmit:y,className:"space-y-4",children:[g.jsxs("div",{children:[g.jsx("label",{htmlFor:"categoryName",className:"block text-sm font-medium text-gray-700 mb-1",children:" "}),g.jsx("input",{id:"categoryName",type:"text",value:r,onChange:m,placeholder:Q("categoryNamePlaceholder",i),className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-primary bg-white text-gray-900",required:!0})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"categorySlug",className:"block text-sm font-medium text-gray-700 mb-1",children:" (Slug)"}),g.jsx("input",{id:"categorySlug",type:"text",value:l,onChange:v=>u(v.target.value),placeholder:"alrabt-almakhtasar",className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-primary bg-white text-gray-900 ltr",required:!0})]}),g.jsx("button",{type:"submit",className:"w-full bg-primary text-white px-4 py-2 rounded-md hover:bg-secondary",children:Q("add",i)})]})]}),g.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[g.jsx("h2",{className:"text-xl font-semibold mb-4",children:Q("currentCategories",i)}),n.length>0?g.jsx("ul",{className:"space-y-2",children:n.map(v=>g.jsxs("li",{className:"p-3 bg-gray-100 rounded-md flex justify-between items-center",children:[g.jsxs("div",{children:[g.jsx("span",{className:"font-semibold",children:v.name}),g.jsxs("code",{className:"text-sm text-gray-500 mr-2 bg-gray-200 px-2 py-1 rounded",children:["/",v.slug]})]}),g.jsx("button",{onClick:()=>t(v.id),className:"p-2 rounded-full text-red-600 hover:bg-red-100 transition-colors",children:g.jsx(Yr,{className:"w-5 h-5"})})]},v.id))}):g.jsx("p",{className:"text-gray-500",children:Q("noCategoriesYet",i)})]})]})]})},fW=({pages:n,onDelete:e,cmsLang:t})=>{const i=Q("addNewPage",t);return g.jsxs("div",{className:"p-8",children:[g.jsxs("div",{className:"flex justify-between items-center mb-6",children:[g.jsx("h1",{className:"text-3xl font-bold text-neutral",children:Q("pageList",t)}),g.jsx(zt,{href:"#admin/pages/new",className:"bg-primary text-white px-4 py-2 rounded-md hover:bg-secondary",children:i})]}),n.length>0?g.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:g.jsxs("table",{className:"w-full text-right",children:[g.jsx("thead",{className:"bg-gray-50",children:g.jsxs("tr",{children:[g.jsx("th",{className:"p-4 font-semibold text-sm text-gray-600 uppercase tracking-wider",children:Q("title",t)}),g.jsx("th",{className:"p-4 font-semibold text-sm text-gray-600 uppercase tracking-wider",children:Q("slug",t)}),g.jsx("th",{className:"p-4 font-semibold text-sm text-gray-600 uppercase tracking-wider",children:Q("createdDate",t)}),g.jsx("th",{className:"p-4 font-semibold text-sm text-gray-600 uppercase tracking-wider",children:Q("actions",t)})]})}),g.jsx("tbody",{className:"divide-y",children:n.map(r=>g.jsxs("tr",{className:"hover:bg-gray-50",children:[g.jsx("td",{className:"p-4 text-neutral",children:g.jsxs("div",{className:"flex items-center",children:[r.title,r.status==="draft"&&g.jsx("span",{className:"mr-3 rtl:ml-3 text-xs font-semibold bg-gray-200 text-gray-600 px-2 py-1 rounded-full",children:Q("draft",t)})]})}),g.jsxs("td",{className:"p-4 text-gray-500 font-mono",children:["/",r.slug]}),g.jsx("td",{className:"p-4 text-gray-500",children:new Date(r.createdAt).toLocaleDateString("ar-EG")}),g.jsx("td",{className:"p-4",children:g.jsxs("div",{className:"flex items-center space-x-2 rtl:space-x-reverse",children:[g.jsx(zt,{href:`#admin/pages/edit/${r.id}`,className:"p-2 rounded-full text-blue-600 hover:bg-blue-100 transition-colors",children:g.jsx(Xu,{className:"w-5 h-5"})}),g.jsx("button",{onClick:()=>e(r.id),className:"p-2 rounded-full text-red-600 hover:bg-red-100 transition-colors",children:g.jsx(Yr,{className:"w-5 h-5"})})]})})]},r.id))})]})}):g.jsxs("div",{className:"text-center py-16 px-8 bg-white rounded-lg shadow-md",children:[g.jsx("h2",{className:"text-xl font-semibold text-gray-700",children:Q("noPagesYet",t)}),g.jsx("p",{className:"text-gray-500 mt-2",children:Q("clickToStart",t,{buttonText:i})})]})]})},MA=({page:n,onSave:e,adUnits:t,cmsLang:i})=>{const[r,o]=ae.useState(""),[l,u]=ae.useState(""),[f,m]=ae.useState(""),[y,v]=ae.useState(!1),[w,E]=ae.useState(null),S=ae.useRef(null),[b,A]=ae.useState(!1);ae.useEffect(()=>{if(!S.current)return;const H=new IntersectionObserver(([O])=>{A(!O.isIntersecting)},{rootMargin:"-1px 0px 0px 0px",threshold:[1]});return H.observe(S.current),()=>H.disconnect()},[]),ae.useEffect(()=>{n?(o(n.title),u(n.slug),m(n.content),v(n.showSidebar)):(o(""),u(""),m(""),v(!1))},[n]);const C=H=>{const O=H.target.value;o(O),n||u(O.toLowerCase().trim().replace(/\s+/g,"-").replace(/[^\w-]+/g,""))},R=()=>({id:(n==null?void 0:n.id)||Ou(),title:r,slug:l,content:f,showSidebar:y,status:"draft",createdAt:(n==null?void 0:n.createdAt)||new Date().toISOString()}),L=()=>{const H=R();localStorage.setItem("cms_preview_data",JSON.stringify({type:"page",data:H})),window.open(window.location.pathname+"#preview","_blank")},q=H=>{if(!r||!f||!l){E("  .");return}const O={...R(),status:H};e(O)},z=(n==null?void 0:n.status)==="published";return g.jsxs(g.Fragment,{children:[g.jsx("div",{className:`fixed top-0 left-0 right-0 md:right-64 z-10 bg-white/80 backdrop-blur-sm shadow-md transition-transform duration-300 ease-in-out ${b?"translate-y-0":"-translate-y-full"}`,children:g.jsxs("div",{className:"p-4 flex items-center justify-between",children:[g.jsx("div",{className:"flex items-center gap-4 overflow-hidden",children:g.jsx("h2",{className:"text-lg font-bold text-neutral truncate whitespace-nowrap",children:r||" "})}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("button",{type:"button",onClick:()=>q("draft"),className:"bg-gray-200 text-gray-800 px-4 py-2 rounded-lg font-semibold hover:bg-gray-300 transition-colors",children:Q("saveDraft",i)}),g.jsxs("button",{onClick:L,type:"button",className:"bg-gray-600 text-white px-4 py-2 rounded-lg font-semibold hover:bg-gray-700 transition-colors flex items-center gap-1",children:[g.jsx(ap,{className:"w-5 h-5"}),g.jsx("span",{children:Q("preview",i)})]}),g.jsx("button",{type:"button",onClick:()=>q("published"),className:"bg-primary text-white px-6 py-2 rounded-lg font-semibold hover:bg-secondary transition-colors",children:Q(z?"update":"publish",i)})]})]})}),g.jsxs("div",{className:"p-8",children:[g.jsxs("div",{ref:S,className:"flex items-center justify-between mb-6",children:[g.jsx("h1",{className:"text-3xl font-bold text-neutral",children:n?" ":"  "}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("button",{type:"button",onClick:()=>q("draft"),className:"bg-white text-gray-800 px-6 py-2 rounded-md hover:bg-gray-100 shadow-sm border",children:Q("saveDraft",i)}),g.jsxs("button",{onClick:L,type:"button",className:"bg-gray-600 text-white px-6 py-2 rounded-lg font-semibold hover:bg-gray-700 shadow-sm flex items-center gap-2",children:[g.jsx(ap,{className:"w-5 h-5"}),g.jsx("span",{children:Q("preview",i)})]}),g.jsx("button",{type:"button",onClick:()=>q("published"),className:"bg-primary text-white px-6 py-2 rounded-md hover:bg-secondary",children:z?Q("saveChanges",i):" "})]})]}),g.jsxs("form",{onSubmit:H=>H.preventDefault(),className:"space-y-6 bg-white p-6 rounded-lg shadow-md",children:[g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[g.jsxs("div",{children:[g.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-1",children:" "}),g.jsx("input",{id:"title",type:"text",value:r,onChange:C,className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-primary focus:border-transparent bg-white text-gray-900",required:!0})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"slug",className:"block text-sm font-medium text-gray-700 mb-1",children:" (Slug)"}),g.jsx("input",{id:"slug",type:"text",value:l,onChange:H=>u(H.target.value),className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-primary focus:border-transparent ltr bg-white text-gray-900",required:!0})]})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"content",className:"block text-sm font-medium text-gray-700 mb-1",children:""}),g.jsx(lP,{value:f,onChange:m,adUnits:t,dir:"rtl"})]}),g.jsx("div",{className:"border-t pt-4",children:g.jsxs("div",{className:"flex items-center",children:[g.jsx("input",{type:"checkbox",id:"show-sidebar-page",name:"showSidebar",checked:y,onChange:H=>v(H.target.checked),className:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"}),g.jsx("label",{htmlFor:"show-sidebar-page",className:"ml-2 rtl:mr-2 block text-sm text-gray-900",children:"     "})]})}),w&&g.jsx("p",{className:"text-red-500 text-sm",children:w}),g.jsx("div",{className:"flex justify-end pt-4 border-t",children:g.jsx(zt,{href:"#admin/pages",className:"text-gray-700 px-6 py-2 rounded-md hover:bg-gray-100",children:Q("cancel",i)})})]})]})]})},VA=({onLoginSuccess:n})=>{const[e,t]=ae.useState(""),[i,r]=ae.useState(""),[o,l]=ae.useState(""),[u,f]=ae.useState(!1),[m,y]=ae.useState(!1),v=async E=>{E.preventDefault(),l(""),f(!0);try{m?await vv.createUserWithEmailAndPassword(e,i):await vv.signInWithEmailAndPassword(e,i),n()}catch(S){l(w(S.code))}finally{f(!1)}},w=E=>{switch(E){case"auth/invalid-email":return"   .";case"auth/user-not-found":case"auth/wrong-password":return"      .";case"auth/invalid-credential":return"      .";case"auth/email-already-in-use":return"    .";case"auth/weak-password":return"   .    6   .";default:return"   .    ."}};return g.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-50 font-sans",children:g.jsxs("div",{className:"max-w-md w-full bg-white p-8 rounded-lg shadow-md",children:[g.jsxs("h1",{className:"text-3xl font-bold text-center text-neutral mb-2",children:["CMS ",g.jsx("span",{className:"text-primary",children:"AI"})]}),g.jsx("p",{className:"text-center text-gray-500 mb-6",children:m?"  ":"    "}),g.jsxs("form",{onSubmit:v,className:"space-y-6",children:[g.jsxs("div",{children:[g.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:" "}),g.jsx("input",{id:"email",type:"email",value:e,onChange:E=>t(E.target.value),required:!0,className:"w-full mt-1 p-3 border border-gray-300 rounded-md focus:ring-primary focus:border-primary"})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:" "}),g.jsx("input",{id:"password",type:"password",value:i,onChange:E=>r(E.target.value),required:!0,className:"w-full mt-1 p-3 border border-gray-300 rounded-md focus:ring-primary focus:border-primary"})]}),o&&g.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md text-sm text-center",children:o}),g.jsx("button",{type:"submit",disabled:u,className:"w-full bg-primary text-white py-3 rounded-md hover:bg-secondary font-semibold transition-colors disabled:bg-gray-400",children:u?"...":m?" ":""})]}),g.jsx("div",{className:"mt-4 text-center",children:g.jsx("button",{onClick:()=>y(!m),className:"text-sm text-primary hover:underline",children:m?"    ":"     "})})]})})};function dm(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var S_={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/var UA;function hW(){return UA||(UA=1,(function(n,e){(function(t){n.exports=t()})(function(){return(function t(i,r,o){function l(m,y){if(!r[m]){if(!i[m]){var v=typeof dm=="function"&&dm;if(!y&&v)return v(m,!0);if(u)return u(m,!0);var w=new Error("Cannot find module '"+m+"'");throw w.code="MODULE_NOT_FOUND",w}var E=r[m]={exports:{}};i[m][0].call(E.exports,function(S){var b=i[m][1][S];return l(b||S)},E,E.exports,t,i,r,o)}return r[m].exports}for(var u=typeof dm=="function"&&dm,f=0;f<o.length;f++)l(o[f]);return l})({1:[function(t,i,r){var o=t("./utils"),l=t("./support"),u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";r.encode=function(f){for(var m,y,v,w,E,S,b,A=[],C=0,R=f.length,L=R,q=o.getTypeOf(f)!=="string";C<f.length;)L=R-C,v=q?(m=f[C++],y=C<R?f[C++]:0,C<R?f[C++]:0):(m=f.charCodeAt(C++),y=C<R?f.charCodeAt(C++):0,C<R?f.charCodeAt(C++):0),w=m>>2,E=(3&m)<<4|y>>4,S=1<L?(15&y)<<2|v>>6:64,b=2<L?63&v:64,A.push(u.charAt(w)+u.charAt(E)+u.charAt(S)+u.charAt(b));return A.join("")},r.decode=function(f){var m,y,v,w,E,S,b=0,A=0,C="data:";if(f.substr(0,C.length)===C)throw new Error("Invalid base64 input, it looks like a data url.");var R,L=3*(f=f.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(f.charAt(f.length-1)===u.charAt(64)&&L--,f.charAt(f.length-2)===u.charAt(64)&&L--,L%1!=0)throw new Error("Invalid base64 input, bad content length.");for(R=l.uint8array?new Uint8Array(0|L):new Array(0|L);b<f.length;)m=u.indexOf(f.charAt(b++))<<2|(w=u.indexOf(f.charAt(b++)))>>4,y=(15&w)<<4|(E=u.indexOf(f.charAt(b++)))>>2,v=(3&E)<<6|(S=u.indexOf(f.charAt(b++))),R[A++]=m,E!==64&&(R[A++]=y),S!==64&&(R[A++]=v);return R}},{"./support":30,"./utils":32}],2:[function(t,i,r){var o=t("./external"),l=t("./stream/DataWorker"),u=t("./stream/Crc32Probe"),f=t("./stream/DataLengthProbe");function m(y,v,w,E,S){this.compressedSize=y,this.uncompressedSize=v,this.crc32=w,this.compression=E,this.compressedContent=S}m.prototype={getContentWorker:function(){var y=new l(o.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new f("data_length")),v=this;return y.on("end",function(){if(this.streamInfo.data_length!==v.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),y},getCompressedWorker:function(){return new l(o.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},m.createWorkerFrom=function(y,v,w){return y.pipe(new u).pipe(new f("uncompressedSize")).pipe(v.compressWorker(w)).pipe(new f("compressedSize")).withStreamInfo("compression",v)},i.exports=m},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(t,i,r){var o=t("./stream/GenericWorker");r.STORE={magic:"\0\0",compressWorker:function(){return new o("STORE compression")},uncompressWorker:function(){return new o("STORE decompression")}},r.DEFLATE=t("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(t,i,r){var o=t("./utils"),l=(function(){for(var u,f=[],m=0;m<256;m++){u=m;for(var y=0;y<8;y++)u=1&u?3988292384^u>>>1:u>>>1;f[m]=u}return f})();i.exports=function(u,f){return u!==void 0&&u.length?o.getTypeOf(u)!=="string"?(function(m,y,v,w){var E=l,S=w+v;m^=-1;for(var b=w;b<S;b++)m=m>>>8^E[255&(m^y[b])];return-1^m})(0|f,u,u.length,0):(function(m,y,v,w){var E=l,S=w+v;m^=-1;for(var b=w;b<S;b++)m=m>>>8^E[255&(m^y.charCodeAt(b))];return-1^m})(0|f,u,u.length,0):0}},{"./utils":32}],5:[function(t,i,r){r.base64=!1,r.binary=!1,r.dir=!1,r.createFolders=!0,r.date=null,r.compression=null,r.compressionOptions=null,r.comment=null,r.unixPermissions=null,r.dosPermissions=null},{}],6:[function(t,i,r){var o=null;o=typeof Promise<"u"?Promise:t("lie"),i.exports={Promise:o}},{lie:37}],7:[function(t,i,r){var o=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",l=t("pako"),u=t("./utils"),f=t("./stream/GenericWorker"),m=o?"uint8array":"array";function y(v,w){f.call(this,"FlateWorker/"+v),this._pako=null,this._pakoAction=v,this._pakoOptions=w,this.meta={}}r.magic="\b\0",u.inherits(y,f),y.prototype.processChunk=function(v){this.meta=v.meta,this._pako===null&&this._createPako(),this._pako.push(u.transformTo(m,v.data),!1)},y.prototype.flush=function(){f.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},y.prototype.cleanUp=function(){f.prototype.cleanUp.call(this),this._pako=null},y.prototype._createPako=function(){this._pako=new l[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var v=this;this._pako.onData=function(w){v.push({data:w,meta:v.meta})}},r.compressWorker=function(v){return new y("Deflate",v)},r.uncompressWorker=function(){return new y("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(t,i,r){function o(E,S){var b,A="";for(b=0;b<S;b++)A+=String.fromCharCode(255&E),E>>>=8;return A}function l(E,S,b,A,C,R){var L,q,z=E.file,H=E.compression,O=R!==m.utf8encode,V=u.transformTo("string",R(z.name)),U=u.transformTo("string",m.utf8encode(z.name)),j=z.comment,J=u.transformTo("string",R(j)),M=u.transformTo("string",m.utf8encode(j)),F=U.length!==z.name.length,k=M.length!==j.length,ne="",te="",X="",_e=z.dir,me=z.date,K={crc32:0,compressedSize:0,uncompressedSize:0};S&&!b||(K.crc32=E.crc32,K.compressedSize=E.compressedSize,K.uncompressedSize=E.uncompressedSize);var Y=0;S&&(Y|=8),O||!F&&!k||(Y|=2048);var Z=0,he=0;_e&&(Z|=16),C==="UNIX"?(he=798,Z|=(function(we,ke){var it=we;return we||(it=ke?16893:33204),(65535&it)<<16})(z.unixPermissions,_e)):(he=20,Z|=(function(we){return 63&(we||0)})(z.dosPermissions)),L=me.getUTCHours(),L<<=6,L|=me.getUTCMinutes(),L<<=5,L|=me.getUTCSeconds()/2,q=me.getUTCFullYear()-1980,q<<=4,q|=me.getUTCMonth()+1,q<<=5,q|=me.getUTCDate(),F&&(te=o(1,1)+o(y(V),4)+U,ne+="up"+o(te.length,2)+te),k&&(X=o(1,1)+o(y(J),4)+M,ne+="uc"+o(X.length,2)+X);var ve="";return ve+=`
\0`,ve+=o(Y,2),ve+=H.magic,ve+=o(L,2),ve+=o(q,2),ve+=o(K.crc32,4),ve+=o(K.compressedSize,4),ve+=o(K.uncompressedSize,4),ve+=o(V.length,2),ve+=o(ne.length,2),{fileRecord:v.LOCAL_FILE_HEADER+ve+V+ne,dirRecord:v.CENTRAL_FILE_HEADER+o(he,2)+ve+o(J.length,2)+"\0\0\0\0"+o(Z,4)+o(A,4)+V+ne+J}}var u=t("../utils"),f=t("../stream/GenericWorker"),m=t("../utf8"),y=t("../crc32"),v=t("../signature");function w(E,S,b,A){f.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=S,this.zipPlatform=b,this.encodeFileName=A,this.streamFiles=E,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}u.inherits(w,f),w.prototype.push=function(E){var S=E.meta.percent||0,b=this.entriesCount,A=this._sources.length;this.accumulate?this.contentBuffer.push(E):(this.bytesWritten+=E.data.length,f.prototype.push.call(this,{data:E.data,meta:{currentFile:this.currentFile,percent:b?(S+100*(b-A-1))/b:100}}))},w.prototype.openedSource=function(E){this.currentSourceOffset=this.bytesWritten,this.currentFile=E.file.name;var S=this.streamFiles&&!E.file.dir;if(S){var b=l(E,S,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:b.fileRecord,meta:{percent:0}})}else this.accumulate=!0},w.prototype.closedSource=function(E){this.accumulate=!1;var S=this.streamFiles&&!E.file.dir,b=l(E,S,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(b.dirRecord),S)this.push({data:(function(A){return v.DATA_DESCRIPTOR+o(A.crc32,4)+o(A.compressedSize,4)+o(A.uncompressedSize,4)})(E),meta:{percent:100}});else for(this.push({data:b.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},w.prototype.flush=function(){for(var E=this.bytesWritten,S=0;S<this.dirRecords.length;S++)this.push({data:this.dirRecords[S],meta:{percent:100}});var b=this.bytesWritten-E,A=(function(C,R,L,q,z){var H=u.transformTo("string",z(q));return v.CENTRAL_DIRECTORY_END+"\0\0\0\0"+o(C,2)+o(C,2)+o(R,4)+o(L,4)+o(H.length,2)+H})(this.dirRecords.length,b,E,this.zipComment,this.encodeFileName);this.push({data:A,meta:{percent:100}})},w.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},w.prototype.registerPrevious=function(E){this._sources.push(E);var S=this;return E.on("data",function(b){S.processChunk(b)}),E.on("end",function(){S.closedSource(S.previous.streamInfo),S._sources.length?S.prepareNextSource():S.end()}),E.on("error",function(b){S.error(b)}),this},w.prototype.resume=function(){return!!f.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},w.prototype.error=function(E){var S=this._sources;if(!f.prototype.error.call(this,E))return!1;for(var b=0;b<S.length;b++)try{S[b].error(E)}catch{}return!0},w.prototype.lock=function(){f.prototype.lock.call(this);for(var E=this._sources,S=0;S<E.length;S++)E[S].lock()},i.exports=w},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(t,i,r){var o=t("../compressions"),l=t("./ZipFileWorker");r.generateWorker=function(u,f,m){var y=new l(f.streamFiles,m,f.platform,f.encodeFileName),v=0;try{u.forEach(function(w,E){v++;var S=(function(R,L){var q=R||L,z=o[q];if(!z)throw new Error(q+" is not a valid compression method !");return z})(E.options.compression,f.compression),b=E.options.compressionOptions||f.compressionOptions||{},A=E.dir,C=E.date;E._compressWorker(S,b).withStreamInfo("file",{name:w,dir:A,date:C,comment:E.comment||"",unixPermissions:E.unixPermissions,dosPermissions:E.dosPermissions}).pipe(y)}),y.entriesCount=v}catch(w){y.error(w)}return y}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(t,i,r){function o(){if(!(this instanceof o))return new o;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var l=new o;for(var u in this)typeof this[u]!="function"&&(l[u]=this[u]);return l}}(o.prototype=t("./object")).loadAsync=t("./load"),o.support=t("./support"),o.defaults=t("./defaults"),o.version="3.10.1",o.loadAsync=function(l,u){return new o().loadAsync(l,u)},o.external=t("./external"),i.exports=o},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(t,i,r){var o=t("./utils"),l=t("./external"),u=t("./utf8"),f=t("./zipEntries"),m=t("./stream/Crc32Probe"),y=t("./nodejsUtils");function v(w){return new l.Promise(function(E,S){var b=w.decompressed.getContentWorker().pipe(new m);b.on("error",function(A){S(A)}).on("end",function(){b.streamInfo.crc32!==w.decompressed.crc32?S(new Error("Corrupted zip : CRC32 mismatch")):E()}).resume()})}i.exports=function(w,E){var S=this;return E=o.extend(E||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:u.utf8decode}),y.isNode&&y.isStream(w)?l.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):o.prepareContent("the loaded zip file",w,!0,E.optimizedBinaryString,E.base64).then(function(b){var A=new f(E);return A.load(b),A}).then(function(b){var A=[l.Promise.resolve(b)],C=b.files;if(E.checkCRC32)for(var R=0;R<C.length;R++)A.push(v(C[R]));return l.Promise.all(A)}).then(function(b){for(var A=b.shift(),C=A.files,R=0;R<C.length;R++){var L=C[R],q=L.fileNameStr,z=o.resolve(L.fileNameStr);S.file(z,L.decompressed,{binary:!0,optimizedBinaryString:!0,date:L.date,dir:L.dir,comment:L.fileCommentStr.length?L.fileCommentStr:null,unixPermissions:L.unixPermissions,dosPermissions:L.dosPermissions,createFolders:E.createFolders}),L.dir||(S.file(z).unsafeOriginalName=q)}return A.zipComment.length&&(S.comment=A.zipComment),S})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(t,i,r){var o=t("../utils"),l=t("../stream/GenericWorker");function u(f,m){l.call(this,"Nodejs stream input adapter for "+f),this._upstreamEnded=!1,this._bindStream(m)}o.inherits(u,l),u.prototype._bindStream=function(f){var m=this;(this._stream=f).pause(),f.on("data",function(y){m.push({data:y,meta:{percent:0}})}).on("error",function(y){m.isPaused?this.generatedError=y:m.error(y)}).on("end",function(){m.isPaused?m._upstreamEnded=!0:m.end()})},u.prototype.pause=function(){return!!l.prototype.pause.call(this)&&(this._stream.pause(),!0)},u.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},i.exports=u},{"../stream/GenericWorker":28,"../utils":32}],13:[function(t,i,r){var o=t("readable-stream").Readable;function l(u,f,m){o.call(this,f),this._helper=u;var y=this;u.on("data",function(v,w){y.push(v)||y._helper.pause(),m&&m(w)}).on("error",function(v){y.emit("error",v)}).on("end",function(){y.push(null)})}t("../utils").inherits(l,o),l.prototype._read=function(){this._helper.resume()},i.exports=l},{"../utils":32,"readable-stream":16}],14:[function(t,i,r){i.exports={isNode:typeof Buffer<"u",newBufferFrom:function(o,l){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(o,l);if(typeof o=="number")throw new Error('The "data" argument must not be a number');return new Buffer(o,l)},allocBuffer:function(o){if(Buffer.alloc)return Buffer.alloc(o);var l=new Buffer(o);return l.fill(0),l},isBuffer:function(o){return Buffer.isBuffer(o)},isStream:function(o){return o&&typeof o.on=="function"&&typeof o.pause=="function"&&typeof o.resume=="function"}}},{}],15:[function(t,i,r){function o(z,H,O){var V,U=u.getTypeOf(H),j=u.extend(O||{},y);j.date=j.date||new Date,j.compression!==null&&(j.compression=j.compression.toUpperCase()),typeof j.unixPermissions=="string"&&(j.unixPermissions=parseInt(j.unixPermissions,8)),j.unixPermissions&&16384&j.unixPermissions&&(j.dir=!0),j.dosPermissions&&16&j.dosPermissions&&(j.dir=!0),j.dir&&(z=C(z)),j.createFolders&&(V=A(z))&&R.call(this,V,!0);var J=U==="string"&&j.binary===!1&&j.base64===!1;O&&O.binary!==void 0||(j.binary=!J),(H instanceof v&&H.uncompressedSize===0||j.dir||!H||H.length===0)&&(j.base64=!1,j.binary=!0,H="",j.compression="STORE",U="string");var M=null;M=H instanceof v||H instanceof f?H:S.isNode&&S.isStream(H)?new b(z,H):u.prepareContent(z,H,j.binary,j.optimizedBinaryString,j.base64);var F=new w(z,M,j);this.files[z]=F}var l=t("./utf8"),u=t("./utils"),f=t("./stream/GenericWorker"),m=t("./stream/StreamHelper"),y=t("./defaults"),v=t("./compressedObject"),w=t("./zipObject"),E=t("./generate"),S=t("./nodejsUtils"),b=t("./nodejs/NodejsStreamInputAdapter"),A=function(z){z.slice(-1)==="/"&&(z=z.substring(0,z.length-1));var H=z.lastIndexOf("/");return 0<H?z.substring(0,H):""},C=function(z){return z.slice(-1)!=="/"&&(z+="/"),z},R=function(z,H){return H=H!==void 0?H:y.createFolders,z=C(z),this.files[z]||o.call(this,z,null,{dir:!0,createFolders:H}),this.files[z]};function L(z){return Object.prototype.toString.call(z)==="[object RegExp]"}var q={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(z){var H,O,V;for(H in this.files)V=this.files[H],(O=H.slice(this.root.length,H.length))&&H.slice(0,this.root.length)===this.root&&z(O,V)},filter:function(z){var H=[];return this.forEach(function(O,V){z(O,V)&&H.push(V)}),H},file:function(z,H,O){if(arguments.length!==1)return z=this.root+z,o.call(this,z,H,O),this;if(L(z)){var V=z;return this.filter(function(j,J){return!J.dir&&V.test(j)})}var U=this.files[this.root+z];return U&&!U.dir?U:null},folder:function(z){if(!z)return this;if(L(z))return this.filter(function(U,j){return j.dir&&z.test(U)});var H=this.root+z,O=R.call(this,H),V=this.clone();return V.root=O.name,V},remove:function(z){z=this.root+z;var H=this.files[z];if(H||(z.slice(-1)!=="/"&&(z+="/"),H=this.files[z]),H&&!H.dir)delete this.files[z];else for(var O=this.filter(function(U,j){return j.name.slice(0,z.length)===z}),V=0;V<O.length;V++)delete this.files[O[V].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(z){var H,O={};try{if((O=u.extend(z||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:l.utf8encode})).type=O.type.toLowerCase(),O.compression=O.compression.toUpperCase(),O.type==="binarystring"&&(O.type="string"),!O.type)throw new Error("No output type specified.");u.checkSupport(O.type),O.platform!=="darwin"&&O.platform!=="freebsd"&&O.platform!=="linux"&&O.platform!=="sunos"||(O.platform="UNIX"),O.platform==="win32"&&(O.platform="DOS");var V=O.comment||this.comment||"";H=E.generateWorker(this,O,V)}catch(U){(H=new f("error")).error(U)}return new m(H,O.type||"string",O.mimeType)},generateAsync:function(z,H){return this.generateInternalStream(z).accumulate(H)},generateNodeStream:function(z,H){return(z=z||{}).type||(z.type="nodebuffer"),this.generateInternalStream(z).toNodejsStream(H)}};i.exports=q},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(t,i,r){i.exports=t("stream")},{stream:void 0}],17:[function(t,i,r){var o=t("./DataReader");function l(u){o.call(this,u);for(var f=0;f<this.data.length;f++)u[f]=255&u[f]}t("../utils").inherits(l,o),l.prototype.byteAt=function(u){return this.data[this.zero+u]},l.prototype.lastIndexOfSignature=function(u){for(var f=u.charCodeAt(0),m=u.charCodeAt(1),y=u.charCodeAt(2),v=u.charCodeAt(3),w=this.length-4;0<=w;--w)if(this.data[w]===f&&this.data[w+1]===m&&this.data[w+2]===y&&this.data[w+3]===v)return w-this.zero;return-1},l.prototype.readAndCheckSignature=function(u){var f=u.charCodeAt(0),m=u.charCodeAt(1),y=u.charCodeAt(2),v=u.charCodeAt(3),w=this.readData(4);return f===w[0]&&m===w[1]&&y===w[2]&&v===w[3]},l.prototype.readData=function(u){if(this.checkOffset(u),u===0)return[];var f=this.data.slice(this.zero+this.index,this.zero+this.index+u);return this.index+=u,f},i.exports=l},{"../utils":32,"./DataReader":18}],18:[function(t,i,r){var o=t("../utils");function l(u){this.data=u,this.length=u.length,this.index=0,this.zero=0}l.prototype={checkOffset:function(u){this.checkIndex(this.index+u)},checkIndex:function(u){if(this.length<this.zero+u||u<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+u+"). Corrupted zip ?")},setIndex:function(u){this.checkIndex(u),this.index=u},skip:function(u){this.setIndex(this.index+u)},byteAt:function(){},readInt:function(u){var f,m=0;for(this.checkOffset(u),f=this.index+u-1;f>=this.index;f--)m=(m<<8)+this.byteAt(f);return this.index+=u,m},readString:function(u){return o.transformTo("string",this.readData(u))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var u=this.readInt(4);return new Date(Date.UTC(1980+(u>>25&127),(u>>21&15)-1,u>>16&31,u>>11&31,u>>5&63,(31&u)<<1))}},i.exports=l},{"../utils":32}],19:[function(t,i,r){var o=t("./Uint8ArrayReader");function l(u){o.call(this,u)}t("../utils").inherits(l,o),l.prototype.readData=function(u){this.checkOffset(u);var f=this.data.slice(this.zero+this.index,this.zero+this.index+u);return this.index+=u,f},i.exports=l},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(t,i,r){var o=t("./DataReader");function l(u){o.call(this,u)}t("../utils").inherits(l,o),l.prototype.byteAt=function(u){return this.data.charCodeAt(this.zero+u)},l.prototype.lastIndexOfSignature=function(u){return this.data.lastIndexOf(u)-this.zero},l.prototype.readAndCheckSignature=function(u){return u===this.readData(4)},l.prototype.readData=function(u){this.checkOffset(u);var f=this.data.slice(this.zero+this.index,this.zero+this.index+u);return this.index+=u,f},i.exports=l},{"../utils":32,"./DataReader":18}],21:[function(t,i,r){var o=t("./ArrayReader");function l(u){o.call(this,u)}t("../utils").inherits(l,o),l.prototype.readData=function(u){if(this.checkOffset(u),u===0)return new Uint8Array(0);var f=this.data.subarray(this.zero+this.index,this.zero+this.index+u);return this.index+=u,f},i.exports=l},{"../utils":32,"./ArrayReader":17}],22:[function(t,i,r){var o=t("../utils"),l=t("../support"),u=t("./ArrayReader"),f=t("./StringReader"),m=t("./NodeBufferReader"),y=t("./Uint8ArrayReader");i.exports=function(v){var w=o.getTypeOf(v);return o.checkSupport(w),w!=="string"||l.uint8array?w==="nodebuffer"?new m(v):l.uint8array?new y(o.transformTo("uint8array",v)):new u(o.transformTo("array",v)):new f(v)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(t,i,r){r.LOCAL_FILE_HEADER="PK",r.CENTRAL_FILE_HEADER="PK",r.CENTRAL_DIRECTORY_END="PK",r.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",r.ZIP64_CENTRAL_DIRECTORY_END="PK",r.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(t,i,r){var o=t("./GenericWorker"),l=t("../utils");function u(f){o.call(this,"ConvertWorker to "+f),this.destType=f}l.inherits(u,o),u.prototype.processChunk=function(f){this.push({data:l.transformTo(this.destType,f.data),meta:f.meta})},i.exports=u},{"../utils":32,"./GenericWorker":28}],25:[function(t,i,r){var o=t("./GenericWorker"),l=t("../crc32");function u(){o.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}t("../utils").inherits(u,o),u.prototype.processChunk=function(f){this.streamInfo.crc32=l(f.data,this.streamInfo.crc32||0),this.push(f)},i.exports=u},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(t,i,r){var o=t("../utils"),l=t("./GenericWorker");function u(f){l.call(this,"DataLengthProbe for "+f),this.propName=f,this.withStreamInfo(f,0)}o.inherits(u,l),u.prototype.processChunk=function(f){if(f){var m=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=m+f.data.length}l.prototype.processChunk.call(this,f)},i.exports=u},{"../utils":32,"./GenericWorker":28}],27:[function(t,i,r){var o=t("../utils"),l=t("./GenericWorker");function u(f){l.call(this,"DataWorker");var m=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,f.then(function(y){m.dataIsReady=!0,m.data=y,m.max=y&&y.length||0,m.type=o.getTypeOf(y),m.isPaused||m._tickAndRepeat()},function(y){m.error(y)})}o.inherits(u,l),u.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this.data=null},u.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,o.delay(this._tickAndRepeat,[],this)),!0)},u.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(o.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},u.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var f=null,m=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":f=this.data.substring(this.index,m);break;case"uint8array":f=this.data.subarray(this.index,m);break;case"array":case"nodebuffer":f=this.data.slice(this.index,m)}return this.index=m,this.push({data:f,meta:{percent:this.max?this.index/this.max*100:0}})},i.exports=u},{"../utils":32,"./GenericWorker":28}],28:[function(t,i,r){function o(l){this.name=l||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}o.prototype={push:function(l){this.emit("data",l)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(l){this.emit("error",l)}return!0},error:function(l){return!this.isFinished&&(this.isPaused?this.generatedError=l:(this.isFinished=!0,this.emit("error",l),this.previous&&this.previous.error(l),this.cleanUp()),!0)},on:function(l,u){return this._listeners[l].push(u),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(l,u){if(this._listeners[l])for(var f=0;f<this._listeners[l].length;f++)this._listeners[l][f].call(this,u)},pipe:function(l){return l.registerPrevious(this)},registerPrevious:function(l){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=l.streamInfo,this.mergeStreamInfo(),this.previous=l;var u=this;return l.on("data",function(f){u.processChunk(f)}),l.on("end",function(){u.end()}),l.on("error",function(f){u.error(f)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var l=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),l=!0),this.previous&&this.previous.resume(),!l},flush:function(){},processChunk:function(l){this.push(l)},withStreamInfo:function(l,u){return this.extraStreamInfo[l]=u,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var l in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,l)&&(this.streamInfo[l]=this.extraStreamInfo[l])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var l="Worker "+this.name;return this.previous?this.previous+" -> "+l:l}},i.exports=o},{}],29:[function(t,i,r){var o=t("../utils"),l=t("./ConvertWorker"),u=t("./GenericWorker"),f=t("../base64"),m=t("../support"),y=t("../external"),v=null;if(m.nodestream)try{v=t("../nodejs/NodejsStreamOutputAdapter")}catch{}function w(S,b){return new y.Promise(function(A,C){var R=[],L=S._internalType,q=S._outputType,z=S._mimeType;S.on("data",function(H,O){R.push(H),b&&b(O)}).on("error",function(H){R=[],C(H)}).on("end",function(){try{var H=(function(O,V,U){switch(O){case"blob":return o.newBlob(o.transformTo("arraybuffer",V),U);case"base64":return f.encode(V);default:return o.transformTo(O,V)}})(q,(function(O,V){var U,j=0,J=null,M=0;for(U=0;U<V.length;U++)M+=V[U].length;switch(O){case"string":return V.join("");case"array":return Array.prototype.concat.apply([],V);case"uint8array":for(J=new Uint8Array(M),U=0;U<V.length;U++)J.set(V[U],j),j+=V[U].length;return J;case"nodebuffer":return Buffer.concat(V);default:throw new Error("concat : unsupported type '"+O+"'")}})(L,R),z);A(H)}catch(O){C(O)}R=[]}).resume()})}function E(S,b,A){var C=b;switch(b){case"blob":case"arraybuffer":C="uint8array";break;case"base64":C="string"}try{this._internalType=C,this._outputType=b,this._mimeType=A,o.checkSupport(C),this._worker=S.pipe(new l(C)),S.lock()}catch(R){this._worker=new u("error"),this._worker.error(R)}}E.prototype={accumulate:function(S){return w(this,S)},on:function(S,b){var A=this;return S==="data"?this._worker.on(S,function(C){b.call(A,C.data,C.meta)}):this._worker.on(S,function(){o.delay(b,arguments,A)}),this},resume:function(){return o.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(S){if(o.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new v(this,{objectMode:this._outputType!=="nodebuffer"},S)}},i.exports=E},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(t,i,r){if(r.base64=!0,r.array=!0,r.string=!0,r.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",r.nodebuffer=typeof Buffer<"u",r.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")r.blob=!1;else{var o=new ArrayBuffer(0);try{r.blob=new Blob([o],{type:"application/zip"}).size===0}catch{try{var l=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);l.append(o),r.blob=l.getBlob("application/zip").size===0}catch{r.blob=!1}}}try{r.nodestream=!!t("readable-stream").Readable}catch{r.nodestream=!1}},{"readable-stream":16}],31:[function(t,i,r){for(var o=t("./utils"),l=t("./support"),u=t("./nodejsUtils"),f=t("./stream/GenericWorker"),m=new Array(256),y=0;y<256;y++)m[y]=252<=y?6:248<=y?5:240<=y?4:224<=y?3:192<=y?2:1;m[254]=m[254]=1;function v(){f.call(this,"utf-8 decode"),this.leftOver=null}function w(){f.call(this,"utf-8 encode")}r.utf8encode=function(E){return l.nodebuffer?u.newBufferFrom(E,"utf-8"):(function(S){var b,A,C,R,L,q=S.length,z=0;for(R=0;R<q;R++)(64512&(A=S.charCodeAt(R)))==55296&&R+1<q&&(64512&(C=S.charCodeAt(R+1)))==56320&&(A=65536+(A-55296<<10)+(C-56320),R++),z+=A<128?1:A<2048?2:A<65536?3:4;for(b=l.uint8array?new Uint8Array(z):new Array(z),R=L=0;L<z;R++)(64512&(A=S.charCodeAt(R)))==55296&&R+1<q&&(64512&(C=S.charCodeAt(R+1)))==56320&&(A=65536+(A-55296<<10)+(C-56320),R++),A<128?b[L++]=A:(A<2048?b[L++]=192|A>>>6:(A<65536?b[L++]=224|A>>>12:(b[L++]=240|A>>>18,b[L++]=128|A>>>12&63),b[L++]=128|A>>>6&63),b[L++]=128|63&A);return b})(E)},r.utf8decode=function(E){return l.nodebuffer?o.transformTo("nodebuffer",E).toString("utf-8"):(function(S){var b,A,C,R,L=S.length,q=new Array(2*L);for(b=A=0;b<L;)if((C=S[b++])<128)q[A++]=C;else if(4<(R=m[C]))q[A++]=65533,b+=R-1;else{for(C&=R===2?31:R===3?15:7;1<R&&b<L;)C=C<<6|63&S[b++],R--;1<R?q[A++]=65533:C<65536?q[A++]=C:(C-=65536,q[A++]=55296|C>>10&1023,q[A++]=56320|1023&C)}return q.length!==A&&(q.subarray?q=q.subarray(0,A):q.length=A),o.applyFromCharCode(q)})(E=o.transformTo(l.uint8array?"uint8array":"array",E))},o.inherits(v,f),v.prototype.processChunk=function(E){var S=o.transformTo(l.uint8array?"uint8array":"array",E.data);if(this.leftOver&&this.leftOver.length){if(l.uint8array){var b=S;(S=new Uint8Array(b.length+this.leftOver.length)).set(this.leftOver,0),S.set(b,this.leftOver.length)}else S=this.leftOver.concat(S);this.leftOver=null}var A=(function(R,L){var q;for((L=L||R.length)>R.length&&(L=R.length),q=L-1;0<=q&&(192&R[q])==128;)q--;return q<0||q===0?L:q+m[R[q]]>L?q:L})(S),C=S;A!==S.length&&(l.uint8array?(C=S.subarray(0,A),this.leftOver=S.subarray(A,S.length)):(C=S.slice(0,A),this.leftOver=S.slice(A,S.length))),this.push({data:r.utf8decode(C),meta:E.meta})},v.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:r.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},r.Utf8DecodeWorker=v,o.inherits(w,f),w.prototype.processChunk=function(E){this.push({data:r.utf8encode(E.data),meta:E.meta})},r.Utf8EncodeWorker=w},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(t,i,r){var o=t("./support"),l=t("./base64"),u=t("./nodejsUtils"),f=t("./external");function m(b){return b}function y(b,A){for(var C=0;C<b.length;++C)A[C]=255&b.charCodeAt(C);return A}t("setimmediate"),r.newBlob=function(b,A){r.checkSupport("blob");try{return new Blob([b],{type:A})}catch{try{var C=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return C.append(b),C.getBlob(A)}catch{throw new Error("Bug : can't construct the Blob.")}}};var v={stringifyByChunk:function(b,A,C){var R=[],L=0,q=b.length;if(q<=C)return String.fromCharCode.apply(null,b);for(;L<q;)A==="array"||A==="nodebuffer"?R.push(String.fromCharCode.apply(null,b.slice(L,Math.min(L+C,q)))):R.push(String.fromCharCode.apply(null,b.subarray(L,Math.min(L+C,q)))),L+=C;return R.join("")},stringifyByChar:function(b){for(var A="",C=0;C<b.length;C++)A+=String.fromCharCode(b[C]);return A},applyCanBeUsed:{uint8array:(function(){try{return o.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}})(),nodebuffer:(function(){try{return o.nodebuffer&&String.fromCharCode.apply(null,u.allocBuffer(1)).length===1}catch{return!1}})()}};function w(b){var A=65536,C=r.getTypeOf(b),R=!0;if(C==="uint8array"?R=v.applyCanBeUsed.uint8array:C==="nodebuffer"&&(R=v.applyCanBeUsed.nodebuffer),R)for(;1<A;)try{return v.stringifyByChunk(b,C,A)}catch{A=Math.floor(A/2)}return v.stringifyByChar(b)}function E(b,A){for(var C=0;C<b.length;C++)A[C]=b[C];return A}r.applyFromCharCode=w;var S={};S.string={string:m,array:function(b){return y(b,new Array(b.length))},arraybuffer:function(b){return S.string.uint8array(b).buffer},uint8array:function(b){return y(b,new Uint8Array(b.length))},nodebuffer:function(b){return y(b,u.allocBuffer(b.length))}},S.array={string:w,array:m,arraybuffer:function(b){return new Uint8Array(b).buffer},uint8array:function(b){return new Uint8Array(b)},nodebuffer:function(b){return u.newBufferFrom(b)}},S.arraybuffer={string:function(b){return w(new Uint8Array(b))},array:function(b){return E(new Uint8Array(b),new Array(b.byteLength))},arraybuffer:m,uint8array:function(b){return new Uint8Array(b)},nodebuffer:function(b){return u.newBufferFrom(new Uint8Array(b))}},S.uint8array={string:w,array:function(b){return E(b,new Array(b.length))},arraybuffer:function(b){return b.buffer},uint8array:m,nodebuffer:function(b){return u.newBufferFrom(b)}},S.nodebuffer={string:w,array:function(b){return E(b,new Array(b.length))},arraybuffer:function(b){return S.nodebuffer.uint8array(b).buffer},uint8array:function(b){return E(b,new Uint8Array(b.length))},nodebuffer:m},r.transformTo=function(b,A){if(A=A||"",!b)return A;r.checkSupport(b);var C=r.getTypeOf(A);return S[C][b](A)},r.resolve=function(b){for(var A=b.split("/"),C=[],R=0;R<A.length;R++){var L=A[R];L==="."||L===""&&R!==0&&R!==A.length-1||(L===".."?C.pop():C.push(L))}return C.join("/")},r.getTypeOf=function(b){return typeof b=="string"?"string":Object.prototype.toString.call(b)==="[object Array]"?"array":o.nodebuffer&&u.isBuffer(b)?"nodebuffer":o.uint8array&&b instanceof Uint8Array?"uint8array":o.arraybuffer&&b instanceof ArrayBuffer?"arraybuffer":void 0},r.checkSupport=function(b){if(!o[b.toLowerCase()])throw new Error(b+" is not supported by this platform")},r.MAX_VALUE_16BITS=65535,r.MAX_VALUE_32BITS=-1,r.pretty=function(b){var A,C,R="";for(C=0;C<(b||"").length;C++)R+="\\x"+((A=b.charCodeAt(C))<16?"0":"")+A.toString(16).toUpperCase();return R},r.delay=function(b,A,C){setImmediate(function(){b.apply(C||null,A||[])})},r.inherits=function(b,A){function C(){}C.prototype=A.prototype,b.prototype=new C},r.extend=function(){var b,A,C={};for(b=0;b<arguments.length;b++)for(A in arguments[b])Object.prototype.hasOwnProperty.call(arguments[b],A)&&C[A]===void 0&&(C[A]=arguments[b][A]);return C},r.prepareContent=function(b,A,C,R,L){return f.Promise.resolve(A).then(function(q){return o.blob&&(q instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(q))!==-1)&&typeof FileReader<"u"?new f.Promise(function(z,H){var O=new FileReader;O.onload=function(V){z(V.target.result)},O.onerror=function(V){H(V.target.error)},O.readAsArrayBuffer(q)}):q}).then(function(q){var z=r.getTypeOf(q);return z?(z==="arraybuffer"?q=r.transformTo("uint8array",q):z==="string"&&(L?q=l.decode(q):C&&R!==!0&&(q=(function(H){return y(H,o.uint8array?new Uint8Array(H.length):new Array(H.length))})(q))),q):f.Promise.reject(new Error("Can't read the data of '"+b+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(t,i,r){var o=t("./reader/readerFor"),l=t("./utils"),u=t("./signature"),f=t("./zipEntry"),m=t("./support");function y(v){this.files=[],this.loadOptions=v}y.prototype={checkSignature:function(v){if(!this.reader.readAndCheckSignature(v)){this.reader.index-=4;var w=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+l.pretty(w)+", expected "+l.pretty(v)+")")}},isSignature:function(v,w){var E=this.reader.index;this.reader.setIndex(v);var S=this.reader.readString(4)===w;return this.reader.setIndex(E),S},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var v=this.reader.readData(this.zipCommentLength),w=m.uint8array?"uint8array":"array",E=l.transformTo(w,v);this.zipComment=this.loadOptions.decodeFileName(E)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var v,w,E,S=this.zip64EndOfCentralSize-44;0<S;)v=this.reader.readInt(2),w=this.reader.readInt(4),E=this.reader.readData(w),this.zip64ExtensibleData[v]={id:v,length:w,value:E}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var v,w;for(v=0;v<this.files.length;v++)w=this.files[v],this.reader.setIndex(w.localHeaderOffset),this.checkSignature(u.LOCAL_FILE_HEADER),w.readLocalPart(this.reader),w.handleUTF8(),w.processAttributes()},readCentralDir:function(){var v;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(u.CENTRAL_FILE_HEADER);)(v=new f({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(v);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var v=this.reader.lastIndexOfSignature(u.CENTRAL_DIRECTORY_END);if(v<0)throw this.isSignature(0,u.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(v);var w=v;if(this.checkSignature(u.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===l.MAX_VALUE_16BITS||this.diskWithCentralDirStart===l.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===l.MAX_VALUE_16BITS||this.centralDirRecords===l.MAX_VALUE_16BITS||this.centralDirSize===l.MAX_VALUE_32BITS||this.centralDirOffset===l.MAX_VALUE_32BITS){if(this.zip64=!0,(v=this.reader.lastIndexOfSignature(u.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(v),this.checkSignature(u.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,u.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(u.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(u.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var E=this.centralDirOffset+this.centralDirSize;this.zip64&&(E+=20,E+=12+this.zip64EndOfCentralSize);var S=w-E;if(0<S)this.isSignature(w,u.CENTRAL_FILE_HEADER)||(this.reader.zero=S);else if(S<0)throw new Error("Corrupted zip: missing "+Math.abs(S)+" bytes.")},prepareReader:function(v){this.reader=o(v)},load:function(v){this.prepareReader(v),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},i.exports=y},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(t,i,r){var o=t("./reader/readerFor"),l=t("./utils"),u=t("./compressedObject"),f=t("./crc32"),m=t("./utf8"),y=t("./compressions"),v=t("./support");function w(E,S){this.options=E,this.loadOptions=S}w.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(E){var S,b;if(E.skip(22),this.fileNameLength=E.readInt(2),b=E.readInt(2),this.fileName=E.readData(this.fileNameLength),E.skip(b),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((S=(function(A){for(var C in y)if(Object.prototype.hasOwnProperty.call(y,C)&&y[C].magic===A)return y[C];return null})(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+l.pretty(this.compressionMethod)+" unknown (inner file : "+l.transformTo("string",this.fileName)+")");this.decompressed=new u(this.compressedSize,this.uncompressedSize,this.crc32,S,E.readData(this.compressedSize))},readCentralPart:function(E){this.versionMadeBy=E.readInt(2),E.skip(2),this.bitFlag=E.readInt(2),this.compressionMethod=E.readString(2),this.date=E.readDate(),this.crc32=E.readInt(4),this.compressedSize=E.readInt(4),this.uncompressedSize=E.readInt(4);var S=E.readInt(2);if(this.extraFieldsLength=E.readInt(2),this.fileCommentLength=E.readInt(2),this.diskNumberStart=E.readInt(2),this.internalFileAttributes=E.readInt(2),this.externalFileAttributes=E.readInt(4),this.localHeaderOffset=E.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");E.skip(S),this.readExtraFields(E),this.parseZIP64ExtraField(E),this.fileComment=E.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var E=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),E==0&&(this.dosPermissions=63&this.externalFileAttributes),E==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var E=o(this.extraFields[1].value);this.uncompressedSize===l.MAX_VALUE_32BITS&&(this.uncompressedSize=E.readInt(8)),this.compressedSize===l.MAX_VALUE_32BITS&&(this.compressedSize=E.readInt(8)),this.localHeaderOffset===l.MAX_VALUE_32BITS&&(this.localHeaderOffset=E.readInt(8)),this.diskNumberStart===l.MAX_VALUE_32BITS&&(this.diskNumberStart=E.readInt(4))}},readExtraFields:function(E){var S,b,A,C=E.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});E.index+4<C;)S=E.readInt(2),b=E.readInt(2),A=E.readData(b),this.extraFields[S]={id:S,length:b,value:A};E.setIndex(C)},handleUTF8:function(){var E=v.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=m.utf8decode(this.fileName),this.fileCommentStr=m.utf8decode(this.fileComment);else{var S=this.findExtraFieldUnicodePath();if(S!==null)this.fileNameStr=S;else{var b=l.transformTo(E,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(b)}var A=this.findExtraFieldUnicodeComment();if(A!==null)this.fileCommentStr=A;else{var C=l.transformTo(E,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(C)}}},findExtraFieldUnicodePath:function(){var E=this.extraFields[28789];if(E){var S=o(E.value);return S.readInt(1)!==1||f(this.fileName)!==S.readInt(4)?null:m.utf8decode(S.readData(E.length-5))}return null},findExtraFieldUnicodeComment:function(){var E=this.extraFields[25461];if(E){var S=o(E.value);return S.readInt(1)!==1||f(this.fileComment)!==S.readInt(4)?null:m.utf8decode(S.readData(E.length-5))}return null}},i.exports=w},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(t,i,r){function o(S,b,A){this.name=S,this.dir=A.dir,this.date=A.date,this.comment=A.comment,this.unixPermissions=A.unixPermissions,this.dosPermissions=A.dosPermissions,this._data=b,this._dataBinary=A.binary,this.options={compression:A.compression,compressionOptions:A.compressionOptions}}var l=t("./stream/StreamHelper"),u=t("./stream/DataWorker"),f=t("./utf8"),m=t("./compressedObject"),y=t("./stream/GenericWorker");o.prototype={internalStream:function(S){var b=null,A="string";try{if(!S)throw new Error("No output type specified.");var C=(A=S.toLowerCase())==="string"||A==="text";A!=="binarystring"&&A!=="text"||(A="string"),b=this._decompressWorker();var R=!this._dataBinary;R&&!C&&(b=b.pipe(new f.Utf8EncodeWorker)),!R&&C&&(b=b.pipe(new f.Utf8DecodeWorker))}catch(L){(b=new y("error")).error(L)}return new l(b,A,"")},async:function(S,b){return this.internalStream(S).accumulate(b)},nodeStream:function(S,b){return this.internalStream(S||"nodebuffer").toNodejsStream(b)},_compressWorker:function(S,b){if(this._data instanceof m&&this._data.compression.magic===S.magic)return this._data.getCompressedWorker();var A=this._decompressWorker();return this._dataBinary||(A=A.pipe(new f.Utf8EncodeWorker)),m.createWorkerFrom(A,S,b)},_decompressWorker:function(){return this._data instanceof m?this._data.getContentWorker():this._data instanceof y?this._data:new u(this._data)}};for(var v=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],w=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},E=0;E<v.length;E++)o.prototype[v[E]]=w;i.exports=o},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(t,i,r){(function(o){var l,u,f=o.MutationObserver||o.WebKitMutationObserver;if(f){var m=0,y=new f(S),v=o.document.createTextNode("");y.observe(v,{characterData:!0}),l=function(){v.data=m=++m%2}}else if(o.setImmediate||o.MessageChannel===void 0)l="document"in o&&"onreadystatechange"in o.document.createElement("script")?function(){var b=o.document.createElement("script");b.onreadystatechange=function(){S(),b.onreadystatechange=null,b.parentNode.removeChild(b),b=null},o.document.documentElement.appendChild(b)}:function(){setTimeout(S,0)};else{var w=new o.MessageChannel;w.port1.onmessage=S,l=function(){w.port2.postMessage(0)}}var E=[];function S(){var b,A;u=!0;for(var C=E.length;C;){for(A=E,E=[],b=-1;++b<C;)A[b]();C=E.length}u=!1}i.exports=function(b){E.push(b)!==1||u||l()}}).call(this,typeof em<"u"?em:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(t,i,r){var o=t("immediate");function l(){}var u={},f=["REJECTED"],m=["FULFILLED"],y=["PENDING"];function v(C){if(typeof C!="function")throw new TypeError("resolver must be a function");this.state=y,this.queue=[],this.outcome=void 0,C!==l&&b(this,C)}function w(C,R,L){this.promise=C,typeof R=="function"&&(this.onFulfilled=R,this.callFulfilled=this.otherCallFulfilled),typeof L=="function"&&(this.onRejected=L,this.callRejected=this.otherCallRejected)}function E(C,R,L){o(function(){var q;try{q=R(L)}catch(z){return u.reject(C,z)}q===C?u.reject(C,new TypeError("Cannot resolve promise with itself")):u.resolve(C,q)})}function S(C){var R=C&&C.then;if(C&&(typeof C=="object"||typeof C=="function")&&typeof R=="function")return function(){R.apply(C,arguments)}}function b(C,R){var L=!1;function q(O){L||(L=!0,u.reject(C,O))}function z(O){L||(L=!0,u.resolve(C,O))}var H=A(function(){R(z,q)});H.status==="error"&&q(H.value)}function A(C,R){var L={};try{L.value=C(R),L.status="success"}catch(q){L.status="error",L.value=q}return L}(i.exports=v).prototype.finally=function(C){if(typeof C!="function")return this;var R=this.constructor;return this.then(function(L){return R.resolve(C()).then(function(){return L})},function(L){return R.resolve(C()).then(function(){throw L})})},v.prototype.catch=function(C){return this.then(null,C)},v.prototype.then=function(C,R){if(typeof C!="function"&&this.state===m||typeof R!="function"&&this.state===f)return this;var L=new this.constructor(l);return this.state!==y?E(L,this.state===m?C:R,this.outcome):this.queue.push(new w(L,C,R)),L},w.prototype.callFulfilled=function(C){u.resolve(this.promise,C)},w.prototype.otherCallFulfilled=function(C){E(this.promise,this.onFulfilled,C)},w.prototype.callRejected=function(C){u.reject(this.promise,C)},w.prototype.otherCallRejected=function(C){E(this.promise,this.onRejected,C)},u.resolve=function(C,R){var L=A(S,R);if(L.status==="error")return u.reject(C,L.value);var q=L.value;if(q)b(C,q);else{C.state=m,C.outcome=R;for(var z=-1,H=C.queue.length;++z<H;)C.queue[z].callFulfilled(R)}return C},u.reject=function(C,R){C.state=f,C.outcome=R;for(var L=-1,q=C.queue.length;++L<q;)C.queue[L].callRejected(R);return C},v.resolve=function(C){return C instanceof this?C:u.resolve(new this(l),C)},v.reject=function(C){var R=new this(l);return u.reject(R,C)},v.all=function(C){var R=this;if(Object.prototype.toString.call(C)!=="[object Array]")return this.reject(new TypeError("must be an array"));var L=C.length,q=!1;if(!L)return this.resolve([]);for(var z=new Array(L),H=0,O=-1,V=new this(l);++O<L;)U(C[O],O);return V;function U(j,J){R.resolve(j).then(function(M){z[J]=M,++H!==L||q||(q=!0,u.resolve(V,z))},function(M){q||(q=!0,u.reject(V,M))})}},v.race=function(C){var R=this;if(Object.prototype.toString.call(C)!=="[object Array]")return this.reject(new TypeError("must be an array"));var L=C.length,q=!1;if(!L)return this.resolve([]);for(var z=-1,H=new this(l);++z<L;)O=C[z],R.resolve(O).then(function(V){q||(q=!0,u.resolve(H,V))},function(V){q||(q=!0,u.reject(H,V))});var O;return H}},{immediate:36}],38:[function(t,i,r){var o={};(0,t("./lib/utils/common").assign)(o,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),i.exports=o},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(t,i,r){var o=t("./zlib/deflate"),l=t("./utils/common"),u=t("./utils/strings"),f=t("./zlib/messages"),m=t("./zlib/zstream"),y=Object.prototype.toString,v=0,w=-1,E=0,S=8;function b(C){if(!(this instanceof b))return new b(C);this.options=l.assign({level:w,method:S,chunkSize:16384,windowBits:15,memLevel:8,strategy:E,to:""},C||{});var R=this.options;R.raw&&0<R.windowBits?R.windowBits=-R.windowBits:R.gzip&&0<R.windowBits&&R.windowBits<16&&(R.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new m,this.strm.avail_out=0;var L=o.deflateInit2(this.strm,R.level,R.method,R.windowBits,R.memLevel,R.strategy);if(L!==v)throw new Error(f[L]);if(R.header&&o.deflateSetHeader(this.strm,R.header),R.dictionary){var q;if(q=typeof R.dictionary=="string"?u.string2buf(R.dictionary):y.call(R.dictionary)==="[object ArrayBuffer]"?new Uint8Array(R.dictionary):R.dictionary,(L=o.deflateSetDictionary(this.strm,q))!==v)throw new Error(f[L]);this._dict_set=!0}}function A(C,R){var L=new b(R);if(L.push(C,!0),L.err)throw L.msg||f[L.err];return L.result}b.prototype.push=function(C,R){var L,q,z=this.strm,H=this.options.chunkSize;if(this.ended)return!1;q=R===~~R?R:R===!0?4:0,typeof C=="string"?z.input=u.string2buf(C):y.call(C)==="[object ArrayBuffer]"?z.input=new Uint8Array(C):z.input=C,z.next_in=0,z.avail_in=z.input.length;do{if(z.avail_out===0&&(z.output=new l.Buf8(H),z.next_out=0,z.avail_out=H),(L=o.deflate(z,q))!==1&&L!==v)return this.onEnd(L),!(this.ended=!0);z.avail_out!==0&&(z.avail_in!==0||q!==4&&q!==2)||(this.options.to==="string"?this.onData(u.buf2binstring(l.shrinkBuf(z.output,z.next_out))):this.onData(l.shrinkBuf(z.output,z.next_out)))}while((0<z.avail_in||z.avail_out===0)&&L!==1);return q===4?(L=o.deflateEnd(this.strm),this.onEnd(L),this.ended=!0,L===v):q!==2||(this.onEnd(v),!(z.avail_out=0))},b.prototype.onData=function(C){this.chunks.push(C)},b.prototype.onEnd=function(C){C===v&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=l.flattenChunks(this.chunks)),this.chunks=[],this.err=C,this.msg=this.strm.msg},r.Deflate=b,r.deflate=A,r.deflateRaw=function(C,R){return(R=R||{}).raw=!0,A(C,R)},r.gzip=function(C,R){return(R=R||{}).gzip=!0,A(C,R)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(t,i,r){var o=t("./zlib/inflate"),l=t("./utils/common"),u=t("./utils/strings"),f=t("./zlib/constants"),m=t("./zlib/messages"),y=t("./zlib/zstream"),v=t("./zlib/gzheader"),w=Object.prototype.toString;function E(b){if(!(this instanceof E))return new E(b);this.options=l.assign({chunkSize:16384,windowBits:0,to:""},b||{});var A=this.options;A.raw&&0<=A.windowBits&&A.windowBits<16&&(A.windowBits=-A.windowBits,A.windowBits===0&&(A.windowBits=-15)),!(0<=A.windowBits&&A.windowBits<16)||b&&b.windowBits||(A.windowBits+=32),15<A.windowBits&&A.windowBits<48&&(15&A.windowBits)==0&&(A.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new y,this.strm.avail_out=0;var C=o.inflateInit2(this.strm,A.windowBits);if(C!==f.Z_OK)throw new Error(m[C]);this.header=new v,o.inflateGetHeader(this.strm,this.header)}function S(b,A){var C=new E(A);if(C.push(b,!0),C.err)throw C.msg||m[C.err];return C.result}E.prototype.push=function(b,A){var C,R,L,q,z,H,O=this.strm,V=this.options.chunkSize,U=this.options.dictionary,j=!1;if(this.ended)return!1;R=A===~~A?A:A===!0?f.Z_FINISH:f.Z_NO_FLUSH,typeof b=="string"?O.input=u.binstring2buf(b):w.call(b)==="[object ArrayBuffer]"?O.input=new Uint8Array(b):O.input=b,O.next_in=0,O.avail_in=O.input.length;do{if(O.avail_out===0&&(O.output=new l.Buf8(V),O.next_out=0,O.avail_out=V),(C=o.inflate(O,f.Z_NO_FLUSH))===f.Z_NEED_DICT&&U&&(H=typeof U=="string"?u.string2buf(U):w.call(U)==="[object ArrayBuffer]"?new Uint8Array(U):U,C=o.inflateSetDictionary(this.strm,H)),C===f.Z_BUF_ERROR&&j===!0&&(C=f.Z_OK,j=!1),C!==f.Z_STREAM_END&&C!==f.Z_OK)return this.onEnd(C),!(this.ended=!0);O.next_out&&(O.avail_out!==0&&C!==f.Z_STREAM_END&&(O.avail_in!==0||R!==f.Z_FINISH&&R!==f.Z_SYNC_FLUSH)||(this.options.to==="string"?(L=u.utf8border(O.output,O.next_out),q=O.next_out-L,z=u.buf2string(O.output,L),O.next_out=q,O.avail_out=V-q,q&&l.arraySet(O.output,O.output,L,q,0),this.onData(z)):this.onData(l.shrinkBuf(O.output,O.next_out)))),O.avail_in===0&&O.avail_out===0&&(j=!0)}while((0<O.avail_in||O.avail_out===0)&&C!==f.Z_STREAM_END);return C===f.Z_STREAM_END&&(R=f.Z_FINISH),R===f.Z_FINISH?(C=o.inflateEnd(this.strm),this.onEnd(C),this.ended=!0,C===f.Z_OK):R!==f.Z_SYNC_FLUSH||(this.onEnd(f.Z_OK),!(O.avail_out=0))},E.prototype.onData=function(b){this.chunks.push(b)},E.prototype.onEnd=function(b){b===f.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=l.flattenChunks(this.chunks)),this.chunks=[],this.err=b,this.msg=this.strm.msg},r.Inflate=E,r.inflate=S,r.inflateRaw=function(b,A){return(A=A||{}).raw=!0,S(b,A)},r.ungzip=S},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(t,i,r){var o=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";r.assign=function(f){for(var m=Array.prototype.slice.call(arguments,1);m.length;){var y=m.shift();if(y){if(typeof y!="object")throw new TypeError(y+"must be non-object");for(var v in y)y.hasOwnProperty(v)&&(f[v]=y[v])}}return f},r.shrinkBuf=function(f,m){return f.length===m?f:f.subarray?f.subarray(0,m):(f.length=m,f)};var l={arraySet:function(f,m,y,v,w){if(m.subarray&&f.subarray)f.set(m.subarray(y,y+v),w);else for(var E=0;E<v;E++)f[w+E]=m[y+E]},flattenChunks:function(f){var m,y,v,w,E,S;for(m=v=0,y=f.length;m<y;m++)v+=f[m].length;for(S=new Uint8Array(v),m=w=0,y=f.length;m<y;m++)E=f[m],S.set(E,w),w+=E.length;return S}},u={arraySet:function(f,m,y,v,w){for(var E=0;E<v;E++)f[w+E]=m[y+E]},flattenChunks:function(f){return[].concat.apply([],f)}};r.setTyped=function(f){f?(r.Buf8=Uint8Array,r.Buf16=Uint16Array,r.Buf32=Int32Array,r.assign(r,l)):(r.Buf8=Array,r.Buf16=Array,r.Buf32=Array,r.assign(r,u))},r.setTyped(o)},{}],42:[function(t,i,r){var o=t("./common"),l=!0,u=!0;try{String.fromCharCode.apply(null,[0])}catch{l=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{u=!1}for(var f=new o.Buf8(256),m=0;m<256;m++)f[m]=252<=m?6:248<=m?5:240<=m?4:224<=m?3:192<=m?2:1;function y(v,w){if(w<65537&&(v.subarray&&u||!v.subarray&&l))return String.fromCharCode.apply(null,o.shrinkBuf(v,w));for(var E="",S=0;S<w;S++)E+=String.fromCharCode(v[S]);return E}f[254]=f[254]=1,r.string2buf=function(v){var w,E,S,b,A,C=v.length,R=0;for(b=0;b<C;b++)(64512&(E=v.charCodeAt(b)))==55296&&b+1<C&&(64512&(S=v.charCodeAt(b+1)))==56320&&(E=65536+(E-55296<<10)+(S-56320),b++),R+=E<128?1:E<2048?2:E<65536?3:4;for(w=new o.Buf8(R),b=A=0;A<R;b++)(64512&(E=v.charCodeAt(b)))==55296&&b+1<C&&(64512&(S=v.charCodeAt(b+1)))==56320&&(E=65536+(E-55296<<10)+(S-56320),b++),E<128?w[A++]=E:(E<2048?w[A++]=192|E>>>6:(E<65536?w[A++]=224|E>>>12:(w[A++]=240|E>>>18,w[A++]=128|E>>>12&63),w[A++]=128|E>>>6&63),w[A++]=128|63&E);return w},r.buf2binstring=function(v){return y(v,v.length)},r.binstring2buf=function(v){for(var w=new o.Buf8(v.length),E=0,S=w.length;E<S;E++)w[E]=v.charCodeAt(E);return w},r.buf2string=function(v,w){var E,S,b,A,C=w||v.length,R=new Array(2*C);for(E=S=0;E<C;)if((b=v[E++])<128)R[S++]=b;else if(4<(A=f[b]))R[S++]=65533,E+=A-1;else{for(b&=A===2?31:A===3?15:7;1<A&&E<C;)b=b<<6|63&v[E++],A--;1<A?R[S++]=65533:b<65536?R[S++]=b:(b-=65536,R[S++]=55296|b>>10&1023,R[S++]=56320|1023&b)}return y(R,S)},r.utf8border=function(v,w){var E;for((w=w||v.length)>v.length&&(w=v.length),E=w-1;0<=E&&(192&v[E])==128;)E--;return E<0||E===0?w:E+f[v[E]]>w?E:w}},{"./common":41}],43:[function(t,i,r){i.exports=function(o,l,u,f){for(var m=65535&o|0,y=o>>>16&65535|0,v=0;u!==0;){for(u-=v=2e3<u?2e3:u;y=y+(m=m+l[f++]|0)|0,--v;);m%=65521,y%=65521}return m|y<<16|0}},{}],44:[function(t,i,r){i.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(t,i,r){var o=(function(){for(var l,u=[],f=0;f<256;f++){l=f;for(var m=0;m<8;m++)l=1&l?3988292384^l>>>1:l>>>1;u[f]=l}return u})();i.exports=function(l,u,f,m){var y=o,v=m+f;l^=-1;for(var w=m;w<v;w++)l=l>>>8^y[255&(l^u[w])];return-1^l}},{}],46:[function(t,i,r){var o,l=t("../utils/common"),u=t("./trees"),f=t("./adler32"),m=t("./crc32"),y=t("./messages"),v=0,w=4,E=0,S=-2,b=-1,A=4,C=2,R=8,L=9,q=286,z=30,H=19,O=2*q+1,V=15,U=3,j=258,J=j+U+1,M=42,F=113,k=1,ne=2,te=3,X=4;function _e(P,xe){return P.msg=y[xe],xe}function me(P){return(P<<1)-(4<P?9:0)}function K(P){for(var xe=P.length;0<=--xe;)P[xe]=0}function Y(P){var xe=P.state,se=xe.pending;se>P.avail_out&&(se=P.avail_out),se!==0&&(l.arraySet(P.output,xe.pending_buf,xe.pending_out,se,P.next_out),P.next_out+=se,xe.pending_out+=se,P.total_out+=se,P.avail_out-=se,xe.pending-=se,xe.pending===0&&(xe.pending_out=0))}function Z(P,xe){u._tr_flush_block(P,0<=P.block_start?P.block_start:-1,P.strstart-P.block_start,xe),P.block_start=P.strstart,Y(P.strm)}function he(P,xe){P.pending_buf[P.pending++]=xe}function ve(P,xe){P.pending_buf[P.pending++]=xe>>>8&255,P.pending_buf[P.pending++]=255&xe}function we(P,xe){var se,$,W=P.max_chain_length,re=P.strstart,Ee=P.prev_length,Ae=P.nice_match,ce=P.strstart>P.w_size-J?P.strstart-(P.w_size-J):0,Ne=P.window,Fe=P.w_mask,Ve=P.prev,Oe=P.strstart+j,Ke=Ne[re+Ee-1],We=Ne[re+Ee];P.prev_length>=P.good_match&&(W>>=2),Ae>P.lookahead&&(Ae=P.lookahead);do if(Ne[(se=xe)+Ee]===We&&Ne[se+Ee-1]===Ke&&Ne[se]===Ne[re]&&Ne[++se]===Ne[re+1]){re+=2,se++;do;while(Ne[++re]===Ne[++se]&&Ne[++re]===Ne[++se]&&Ne[++re]===Ne[++se]&&Ne[++re]===Ne[++se]&&Ne[++re]===Ne[++se]&&Ne[++re]===Ne[++se]&&Ne[++re]===Ne[++se]&&Ne[++re]===Ne[++se]&&re<Oe);if($=j-(Oe-re),re=Oe-j,Ee<$){if(P.match_start=xe,Ae<=(Ee=$))break;Ke=Ne[re+Ee-1],We=Ne[re+Ee]}}while((xe=Ve[xe&Fe])>ce&&--W!=0);return Ee<=P.lookahead?Ee:P.lookahead}function ke(P){var xe,se,$,W,re,Ee,Ae,ce,Ne,Fe,Ve=P.w_size;do{if(W=P.window_size-P.lookahead-P.strstart,P.strstart>=Ve+(Ve-J)){for(l.arraySet(P.window,P.window,Ve,Ve,0),P.match_start-=Ve,P.strstart-=Ve,P.block_start-=Ve,xe=se=P.hash_size;$=P.head[--xe],P.head[xe]=Ve<=$?$-Ve:0,--se;);for(xe=se=Ve;$=P.prev[--xe],P.prev[xe]=Ve<=$?$-Ve:0,--se;);W+=Ve}if(P.strm.avail_in===0)break;if(Ee=P.strm,Ae=P.window,ce=P.strstart+P.lookahead,Ne=W,Fe=void 0,Fe=Ee.avail_in,Ne<Fe&&(Fe=Ne),se=Fe===0?0:(Ee.avail_in-=Fe,l.arraySet(Ae,Ee.input,Ee.next_in,Fe,ce),Ee.state.wrap===1?Ee.adler=f(Ee.adler,Ae,Fe,ce):Ee.state.wrap===2&&(Ee.adler=m(Ee.adler,Ae,Fe,ce)),Ee.next_in+=Fe,Ee.total_in+=Fe,Fe),P.lookahead+=se,P.lookahead+P.insert>=U)for(re=P.strstart-P.insert,P.ins_h=P.window[re],P.ins_h=(P.ins_h<<P.hash_shift^P.window[re+1])&P.hash_mask;P.insert&&(P.ins_h=(P.ins_h<<P.hash_shift^P.window[re+U-1])&P.hash_mask,P.prev[re&P.w_mask]=P.head[P.ins_h],P.head[P.ins_h]=re,re++,P.insert--,!(P.lookahead+P.insert<U)););}while(P.lookahead<J&&P.strm.avail_in!==0)}function it(P,xe){for(var se,$;;){if(P.lookahead<J){if(ke(P),P.lookahead<J&&xe===v)return k;if(P.lookahead===0)break}if(se=0,P.lookahead>=U&&(P.ins_h=(P.ins_h<<P.hash_shift^P.window[P.strstart+U-1])&P.hash_mask,se=P.prev[P.strstart&P.w_mask]=P.head[P.ins_h],P.head[P.ins_h]=P.strstart),se!==0&&P.strstart-se<=P.w_size-J&&(P.match_length=we(P,se)),P.match_length>=U)if($=u._tr_tally(P,P.strstart-P.match_start,P.match_length-U),P.lookahead-=P.match_length,P.match_length<=P.max_lazy_match&&P.lookahead>=U){for(P.match_length--;P.strstart++,P.ins_h=(P.ins_h<<P.hash_shift^P.window[P.strstart+U-1])&P.hash_mask,se=P.prev[P.strstart&P.w_mask]=P.head[P.ins_h],P.head[P.ins_h]=P.strstart,--P.match_length!=0;);P.strstart++}else P.strstart+=P.match_length,P.match_length=0,P.ins_h=P.window[P.strstart],P.ins_h=(P.ins_h<<P.hash_shift^P.window[P.strstart+1])&P.hash_mask;else $=u._tr_tally(P,0,P.window[P.strstart]),P.lookahead--,P.strstart++;if($&&(Z(P,!1),P.strm.avail_out===0))return k}return P.insert=P.strstart<U-1?P.strstart:U-1,xe===w?(Z(P,!0),P.strm.avail_out===0?te:X):P.last_lit&&(Z(P,!1),P.strm.avail_out===0)?k:ne}function Me(P,xe){for(var se,$,W;;){if(P.lookahead<J){if(ke(P),P.lookahead<J&&xe===v)return k;if(P.lookahead===0)break}if(se=0,P.lookahead>=U&&(P.ins_h=(P.ins_h<<P.hash_shift^P.window[P.strstart+U-1])&P.hash_mask,se=P.prev[P.strstart&P.w_mask]=P.head[P.ins_h],P.head[P.ins_h]=P.strstart),P.prev_length=P.match_length,P.prev_match=P.match_start,P.match_length=U-1,se!==0&&P.prev_length<P.max_lazy_match&&P.strstart-se<=P.w_size-J&&(P.match_length=we(P,se),P.match_length<=5&&(P.strategy===1||P.match_length===U&&4096<P.strstart-P.match_start)&&(P.match_length=U-1)),P.prev_length>=U&&P.match_length<=P.prev_length){for(W=P.strstart+P.lookahead-U,$=u._tr_tally(P,P.strstart-1-P.prev_match,P.prev_length-U),P.lookahead-=P.prev_length-1,P.prev_length-=2;++P.strstart<=W&&(P.ins_h=(P.ins_h<<P.hash_shift^P.window[P.strstart+U-1])&P.hash_mask,se=P.prev[P.strstart&P.w_mask]=P.head[P.ins_h],P.head[P.ins_h]=P.strstart),--P.prev_length!=0;);if(P.match_available=0,P.match_length=U-1,P.strstart++,$&&(Z(P,!1),P.strm.avail_out===0))return k}else if(P.match_available){if(($=u._tr_tally(P,0,P.window[P.strstart-1]))&&Z(P,!1),P.strstart++,P.lookahead--,P.strm.avail_out===0)return k}else P.match_available=1,P.strstart++,P.lookahead--}return P.match_available&&($=u._tr_tally(P,0,P.window[P.strstart-1]),P.match_available=0),P.insert=P.strstart<U-1?P.strstart:U-1,xe===w?(Z(P,!0),P.strm.avail_out===0?te:X):P.last_lit&&(Z(P,!1),P.strm.avail_out===0)?k:ne}function st(P,xe,se,$,W){this.good_length=P,this.max_lazy=xe,this.nice_length=se,this.max_chain=$,this.func=W}function yt(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=R,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new l.Buf16(2*O),this.dyn_dtree=new l.Buf16(2*(2*z+1)),this.bl_tree=new l.Buf16(2*(2*H+1)),K(this.dyn_ltree),K(this.dyn_dtree),K(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new l.Buf16(V+1),this.heap=new l.Buf16(2*q+1),K(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new l.Buf16(2*q+1),K(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Ze(P){var xe;return P&&P.state?(P.total_in=P.total_out=0,P.data_type=C,(xe=P.state).pending=0,xe.pending_out=0,xe.wrap<0&&(xe.wrap=-xe.wrap),xe.status=xe.wrap?M:F,P.adler=xe.wrap===2?0:1,xe.last_flush=v,u._tr_init(xe),E):_e(P,S)}function Bt(P){var xe=Ze(P);return xe===E&&(function(se){se.window_size=2*se.w_size,K(se.head),se.max_lazy_match=o[se.level].max_lazy,se.good_match=o[se.level].good_length,se.nice_match=o[se.level].nice_length,se.max_chain_length=o[se.level].max_chain,se.strstart=0,se.block_start=0,se.lookahead=0,se.insert=0,se.match_length=se.prev_length=U-1,se.match_available=0,se.ins_h=0})(P.state),xe}function Pt(P,xe,se,$,W,re){if(!P)return S;var Ee=1;if(xe===b&&(xe=6),$<0?(Ee=0,$=-$):15<$&&(Ee=2,$-=16),W<1||L<W||se!==R||$<8||15<$||xe<0||9<xe||re<0||A<re)return _e(P,S);$===8&&($=9);var Ae=new yt;return(P.state=Ae).strm=P,Ae.wrap=Ee,Ae.gzhead=null,Ae.w_bits=$,Ae.w_size=1<<Ae.w_bits,Ae.w_mask=Ae.w_size-1,Ae.hash_bits=W+7,Ae.hash_size=1<<Ae.hash_bits,Ae.hash_mask=Ae.hash_size-1,Ae.hash_shift=~~((Ae.hash_bits+U-1)/U),Ae.window=new l.Buf8(2*Ae.w_size),Ae.head=new l.Buf16(Ae.hash_size),Ae.prev=new l.Buf16(Ae.w_size),Ae.lit_bufsize=1<<W+6,Ae.pending_buf_size=4*Ae.lit_bufsize,Ae.pending_buf=new l.Buf8(Ae.pending_buf_size),Ae.d_buf=1*Ae.lit_bufsize,Ae.l_buf=3*Ae.lit_bufsize,Ae.level=xe,Ae.strategy=re,Ae.method=se,Bt(P)}o=[new st(0,0,0,0,function(P,xe){var se=65535;for(se>P.pending_buf_size-5&&(se=P.pending_buf_size-5);;){if(P.lookahead<=1){if(ke(P),P.lookahead===0&&xe===v)return k;if(P.lookahead===0)break}P.strstart+=P.lookahead,P.lookahead=0;var $=P.block_start+se;if((P.strstart===0||P.strstart>=$)&&(P.lookahead=P.strstart-$,P.strstart=$,Z(P,!1),P.strm.avail_out===0)||P.strstart-P.block_start>=P.w_size-J&&(Z(P,!1),P.strm.avail_out===0))return k}return P.insert=0,xe===w?(Z(P,!0),P.strm.avail_out===0?te:X):(P.strstart>P.block_start&&(Z(P,!1),P.strm.avail_out),k)}),new st(4,4,8,4,it),new st(4,5,16,8,it),new st(4,6,32,32,it),new st(4,4,16,16,Me),new st(8,16,32,32,Me),new st(8,16,128,128,Me),new st(8,32,128,256,Me),new st(32,128,258,1024,Me),new st(32,258,258,4096,Me)],r.deflateInit=function(P,xe){return Pt(P,xe,R,15,8,0)},r.deflateInit2=Pt,r.deflateReset=Bt,r.deflateResetKeep=Ze,r.deflateSetHeader=function(P,xe){return P&&P.state?P.state.wrap!==2?S:(P.state.gzhead=xe,E):S},r.deflate=function(P,xe){var se,$,W,re;if(!P||!P.state||5<xe||xe<0)return P?_e(P,S):S;if($=P.state,!P.output||!P.input&&P.avail_in!==0||$.status===666&&xe!==w)return _e(P,P.avail_out===0?-5:S);if($.strm=P,se=$.last_flush,$.last_flush=xe,$.status===M)if($.wrap===2)P.adler=0,he($,31),he($,139),he($,8),$.gzhead?(he($,($.gzhead.text?1:0)+($.gzhead.hcrc?2:0)+($.gzhead.extra?4:0)+($.gzhead.name?8:0)+($.gzhead.comment?16:0)),he($,255&$.gzhead.time),he($,$.gzhead.time>>8&255),he($,$.gzhead.time>>16&255),he($,$.gzhead.time>>24&255),he($,$.level===9?2:2<=$.strategy||$.level<2?4:0),he($,255&$.gzhead.os),$.gzhead.extra&&$.gzhead.extra.length&&(he($,255&$.gzhead.extra.length),he($,$.gzhead.extra.length>>8&255)),$.gzhead.hcrc&&(P.adler=m(P.adler,$.pending_buf,$.pending,0)),$.gzindex=0,$.status=69):(he($,0),he($,0),he($,0),he($,0),he($,0),he($,$.level===9?2:2<=$.strategy||$.level<2?4:0),he($,3),$.status=F);else{var Ee=R+($.w_bits-8<<4)<<8;Ee|=(2<=$.strategy||$.level<2?0:$.level<6?1:$.level===6?2:3)<<6,$.strstart!==0&&(Ee|=32),Ee+=31-Ee%31,$.status=F,ve($,Ee),$.strstart!==0&&(ve($,P.adler>>>16),ve($,65535&P.adler)),P.adler=1}if($.status===69)if($.gzhead.extra){for(W=$.pending;$.gzindex<(65535&$.gzhead.extra.length)&&($.pending!==$.pending_buf_size||($.gzhead.hcrc&&$.pending>W&&(P.adler=m(P.adler,$.pending_buf,$.pending-W,W)),Y(P),W=$.pending,$.pending!==$.pending_buf_size));)he($,255&$.gzhead.extra[$.gzindex]),$.gzindex++;$.gzhead.hcrc&&$.pending>W&&(P.adler=m(P.adler,$.pending_buf,$.pending-W,W)),$.gzindex===$.gzhead.extra.length&&($.gzindex=0,$.status=73)}else $.status=73;if($.status===73)if($.gzhead.name){W=$.pending;do{if($.pending===$.pending_buf_size&&($.gzhead.hcrc&&$.pending>W&&(P.adler=m(P.adler,$.pending_buf,$.pending-W,W)),Y(P),W=$.pending,$.pending===$.pending_buf_size)){re=1;break}re=$.gzindex<$.gzhead.name.length?255&$.gzhead.name.charCodeAt($.gzindex++):0,he($,re)}while(re!==0);$.gzhead.hcrc&&$.pending>W&&(P.adler=m(P.adler,$.pending_buf,$.pending-W,W)),re===0&&($.gzindex=0,$.status=91)}else $.status=91;if($.status===91)if($.gzhead.comment){W=$.pending;do{if($.pending===$.pending_buf_size&&($.gzhead.hcrc&&$.pending>W&&(P.adler=m(P.adler,$.pending_buf,$.pending-W,W)),Y(P),W=$.pending,$.pending===$.pending_buf_size)){re=1;break}re=$.gzindex<$.gzhead.comment.length?255&$.gzhead.comment.charCodeAt($.gzindex++):0,he($,re)}while(re!==0);$.gzhead.hcrc&&$.pending>W&&(P.adler=m(P.adler,$.pending_buf,$.pending-W,W)),re===0&&($.status=103)}else $.status=103;if($.status===103&&($.gzhead.hcrc?($.pending+2>$.pending_buf_size&&Y(P),$.pending+2<=$.pending_buf_size&&(he($,255&P.adler),he($,P.adler>>8&255),P.adler=0,$.status=F)):$.status=F),$.pending!==0){if(Y(P),P.avail_out===0)return $.last_flush=-1,E}else if(P.avail_in===0&&me(xe)<=me(se)&&xe!==w)return _e(P,-5);if($.status===666&&P.avail_in!==0)return _e(P,-5);if(P.avail_in!==0||$.lookahead!==0||xe!==v&&$.status!==666){var Ae=$.strategy===2?(function(ce,Ne){for(var Fe;;){if(ce.lookahead===0&&(ke(ce),ce.lookahead===0)){if(Ne===v)return k;break}if(ce.match_length=0,Fe=u._tr_tally(ce,0,ce.window[ce.strstart]),ce.lookahead--,ce.strstart++,Fe&&(Z(ce,!1),ce.strm.avail_out===0))return k}return ce.insert=0,Ne===w?(Z(ce,!0),ce.strm.avail_out===0?te:X):ce.last_lit&&(Z(ce,!1),ce.strm.avail_out===0)?k:ne})($,xe):$.strategy===3?(function(ce,Ne){for(var Fe,Ve,Oe,Ke,We=ce.window;;){if(ce.lookahead<=j){if(ke(ce),ce.lookahead<=j&&Ne===v)return k;if(ce.lookahead===0)break}if(ce.match_length=0,ce.lookahead>=U&&0<ce.strstart&&(Ve=We[Oe=ce.strstart-1])===We[++Oe]&&Ve===We[++Oe]&&Ve===We[++Oe]){Ke=ce.strstart+j;do;while(Ve===We[++Oe]&&Ve===We[++Oe]&&Ve===We[++Oe]&&Ve===We[++Oe]&&Ve===We[++Oe]&&Ve===We[++Oe]&&Ve===We[++Oe]&&Ve===We[++Oe]&&Oe<Ke);ce.match_length=j-(Ke-Oe),ce.match_length>ce.lookahead&&(ce.match_length=ce.lookahead)}if(ce.match_length>=U?(Fe=u._tr_tally(ce,1,ce.match_length-U),ce.lookahead-=ce.match_length,ce.strstart+=ce.match_length,ce.match_length=0):(Fe=u._tr_tally(ce,0,ce.window[ce.strstart]),ce.lookahead--,ce.strstart++),Fe&&(Z(ce,!1),ce.strm.avail_out===0))return k}return ce.insert=0,Ne===w?(Z(ce,!0),ce.strm.avail_out===0?te:X):ce.last_lit&&(Z(ce,!1),ce.strm.avail_out===0)?k:ne})($,xe):o[$.level].func($,xe);if(Ae!==te&&Ae!==X||($.status=666),Ae===k||Ae===te)return P.avail_out===0&&($.last_flush=-1),E;if(Ae===ne&&(xe===1?u._tr_align($):xe!==5&&(u._tr_stored_block($,0,0,!1),xe===3&&(K($.head),$.lookahead===0&&($.strstart=0,$.block_start=0,$.insert=0))),Y(P),P.avail_out===0))return $.last_flush=-1,E}return xe!==w?E:$.wrap<=0?1:($.wrap===2?(he($,255&P.adler),he($,P.adler>>8&255),he($,P.adler>>16&255),he($,P.adler>>24&255),he($,255&P.total_in),he($,P.total_in>>8&255),he($,P.total_in>>16&255),he($,P.total_in>>24&255)):(ve($,P.adler>>>16),ve($,65535&P.adler)),Y(P),0<$.wrap&&($.wrap=-$.wrap),$.pending!==0?E:1)},r.deflateEnd=function(P){var xe;return P&&P.state?(xe=P.state.status)!==M&&xe!==69&&xe!==73&&xe!==91&&xe!==103&&xe!==F&&xe!==666?_e(P,S):(P.state=null,xe===F?_e(P,-3):E):S},r.deflateSetDictionary=function(P,xe){var se,$,W,re,Ee,Ae,ce,Ne,Fe=xe.length;if(!P||!P.state||(re=(se=P.state).wrap)===2||re===1&&se.status!==M||se.lookahead)return S;for(re===1&&(P.adler=f(P.adler,xe,Fe,0)),se.wrap=0,Fe>=se.w_size&&(re===0&&(K(se.head),se.strstart=0,se.block_start=0,se.insert=0),Ne=new l.Buf8(se.w_size),l.arraySet(Ne,xe,Fe-se.w_size,se.w_size,0),xe=Ne,Fe=se.w_size),Ee=P.avail_in,Ae=P.next_in,ce=P.input,P.avail_in=Fe,P.next_in=0,P.input=xe,ke(se);se.lookahead>=U;){for($=se.strstart,W=se.lookahead-(U-1);se.ins_h=(se.ins_h<<se.hash_shift^se.window[$+U-1])&se.hash_mask,se.prev[$&se.w_mask]=se.head[se.ins_h],se.head[se.ins_h]=$,$++,--W;);se.strstart=$,se.lookahead=U-1,ke(se)}return se.strstart+=se.lookahead,se.block_start=se.strstart,se.insert=se.lookahead,se.lookahead=0,se.match_length=se.prev_length=U-1,se.match_available=0,P.next_in=Ae,P.input=ce,P.avail_in=Ee,se.wrap=re,E},r.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(t,i,r){i.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(t,i,r){i.exports=function(o,l){var u,f,m,y,v,w,E,S,b,A,C,R,L,q,z,H,O,V,U,j,J,M,F,k,ne;u=o.state,f=o.next_in,k=o.input,m=f+(o.avail_in-5),y=o.next_out,ne=o.output,v=y-(l-o.avail_out),w=y+(o.avail_out-257),E=u.dmax,S=u.wsize,b=u.whave,A=u.wnext,C=u.window,R=u.hold,L=u.bits,q=u.lencode,z=u.distcode,H=(1<<u.lenbits)-1,O=(1<<u.distbits)-1;e:do{L<15&&(R+=k[f++]<<L,L+=8,R+=k[f++]<<L,L+=8),V=q[R&H];t:for(;;){if(R>>>=U=V>>>24,L-=U,(U=V>>>16&255)===0)ne[y++]=65535&V;else{if(!(16&U)){if((64&U)==0){V=q[(65535&V)+(R&(1<<U)-1)];continue t}if(32&U){u.mode=12;break e}o.msg="invalid literal/length code",u.mode=30;break e}j=65535&V,(U&=15)&&(L<U&&(R+=k[f++]<<L,L+=8),j+=R&(1<<U)-1,R>>>=U,L-=U),L<15&&(R+=k[f++]<<L,L+=8,R+=k[f++]<<L,L+=8),V=z[R&O];n:for(;;){if(R>>>=U=V>>>24,L-=U,!(16&(U=V>>>16&255))){if((64&U)==0){V=z[(65535&V)+(R&(1<<U)-1)];continue n}o.msg="invalid distance code",u.mode=30;break e}if(J=65535&V,L<(U&=15)&&(R+=k[f++]<<L,(L+=8)<U&&(R+=k[f++]<<L,L+=8)),E<(J+=R&(1<<U)-1)){o.msg="invalid distance too far back",u.mode=30;break e}if(R>>>=U,L-=U,(U=y-v)<J){if(b<(U=J-U)&&u.sane){o.msg="invalid distance too far back",u.mode=30;break e}if(F=C,(M=0)===A){if(M+=S-U,U<j){for(j-=U;ne[y++]=C[M++],--U;);M=y-J,F=ne}}else if(A<U){if(M+=S+A-U,(U-=A)<j){for(j-=U;ne[y++]=C[M++],--U;);if(M=0,A<j){for(j-=U=A;ne[y++]=C[M++],--U;);M=y-J,F=ne}}}else if(M+=A-U,U<j){for(j-=U;ne[y++]=C[M++],--U;);M=y-J,F=ne}for(;2<j;)ne[y++]=F[M++],ne[y++]=F[M++],ne[y++]=F[M++],j-=3;j&&(ne[y++]=F[M++],1<j&&(ne[y++]=F[M++]))}else{for(M=y-J;ne[y++]=ne[M++],ne[y++]=ne[M++],ne[y++]=ne[M++],2<(j-=3););j&&(ne[y++]=ne[M++],1<j&&(ne[y++]=ne[M++]))}break}}break}}while(f<m&&y<w);f-=j=L>>3,R&=(1<<(L-=j<<3))-1,o.next_in=f,o.next_out=y,o.avail_in=f<m?m-f+5:5-(f-m),o.avail_out=y<w?w-y+257:257-(y-w),u.hold=R,u.bits=L}},{}],49:[function(t,i,r){var o=t("../utils/common"),l=t("./adler32"),u=t("./crc32"),f=t("./inffast"),m=t("./inftrees"),y=1,v=2,w=0,E=-2,S=1,b=852,A=592;function C(M){return(M>>>24&255)+(M>>>8&65280)+((65280&M)<<8)+((255&M)<<24)}function R(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new o.Buf16(320),this.work=new o.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function L(M){var F;return M&&M.state?(F=M.state,M.total_in=M.total_out=F.total=0,M.msg="",F.wrap&&(M.adler=1&F.wrap),F.mode=S,F.last=0,F.havedict=0,F.dmax=32768,F.head=null,F.hold=0,F.bits=0,F.lencode=F.lendyn=new o.Buf32(b),F.distcode=F.distdyn=new o.Buf32(A),F.sane=1,F.back=-1,w):E}function q(M){var F;return M&&M.state?((F=M.state).wsize=0,F.whave=0,F.wnext=0,L(M)):E}function z(M,F){var k,ne;return M&&M.state?(ne=M.state,F<0?(k=0,F=-F):(k=1+(F>>4),F<48&&(F&=15)),F&&(F<8||15<F)?E:(ne.window!==null&&ne.wbits!==F&&(ne.window=null),ne.wrap=k,ne.wbits=F,q(M))):E}function H(M,F){var k,ne;return M?(ne=new R,(M.state=ne).window=null,(k=z(M,F))!==w&&(M.state=null),k):E}var O,V,U=!0;function j(M){if(U){var F;for(O=new o.Buf32(512),V=new o.Buf32(32),F=0;F<144;)M.lens[F++]=8;for(;F<256;)M.lens[F++]=9;for(;F<280;)M.lens[F++]=7;for(;F<288;)M.lens[F++]=8;for(m(y,M.lens,0,288,O,0,M.work,{bits:9}),F=0;F<32;)M.lens[F++]=5;m(v,M.lens,0,32,V,0,M.work,{bits:5}),U=!1}M.lencode=O,M.lenbits=9,M.distcode=V,M.distbits=5}function J(M,F,k,ne){var te,X=M.state;return X.window===null&&(X.wsize=1<<X.wbits,X.wnext=0,X.whave=0,X.window=new o.Buf8(X.wsize)),ne>=X.wsize?(o.arraySet(X.window,F,k-X.wsize,X.wsize,0),X.wnext=0,X.whave=X.wsize):(ne<(te=X.wsize-X.wnext)&&(te=ne),o.arraySet(X.window,F,k-ne,te,X.wnext),(ne-=te)?(o.arraySet(X.window,F,k-ne,ne,0),X.wnext=ne,X.whave=X.wsize):(X.wnext+=te,X.wnext===X.wsize&&(X.wnext=0),X.whave<X.wsize&&(X.whave+=te))),0}r.inflateReset=q,r.inflateReset2=z,r.inflateResetKeep=L,r.inflateInit=function(M){return H(M,15)},r.inflateInit2=H,r.inflate=function(M,F){var k,ne,te,X,_e,me,K,Y,Z,he,ve,we,ke,it,Me,st,yt,Ze,Bt,Pt,P,xe,se,$,W=0,re=new o.Buf8(4),Ee=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!M||!M.state||!M.output||!M.input&&M.avail_in!==0)return E;(k=M.state).mode===12&&(k.mode=13),_e=M.next_out,te=M.output,K=M.avail_out,X=M.next_in,ne=M.input,me=M.avail_in,Y=k.hold,Z=k.bits,he=me,ve=K,xe=w;e:for(;;)switch(k.mode){case S:if(k.wrap===0){k.mode=13;break}for(;Z<16;){if(me===0)break e;me--,Y+=ne[X++]<<Z,Z+=8}if(2&k.wrap&&Y===35615){re[k.check=0]=255&Y,re[1]=Y>>>8&255,k.check=u(k.check,re,2,0),Z=Y=0,k.mode=2;break}if(k.flags=0,k.head&&(k.head.done=!1),!(1&k.wrap)||(((255&Y)<<8)+(Y>>8))%31){M.msg="incorrect header check",k.mode=30;break}if((15&Y)!=8){M.msg="unknown compression method",k.mode=30;break}if(Z-=4,P=8+(15&(Y>>>=4)),k.wbits===0)k.wbits=P;else if(P>k.wbits){M.msg="invalid window size",k.mode=30;break}k.dmax=1<<P,M.adler=k.check=1,k.mode=512&Y?10:12,Z=Y=0;break;case 2:for(;Z<16;){if(me===0)break e;me--,Y+=ne[X++]<<Z,Z+=8}if(k.flags=Y,(255&k.flags)!=8){M.msg="unknown compression method",k.mode=30;break}if(57344&k.flags){M.msg="unknown header flags set",k.mode=30;break}k.head&&(k.head.text=Y>>8&1),512&k.flags&&(re[0]=255&Y,re[1]=Y>>>8&255,k.check=u(k.check,re,2,0)),Z=Y=0,k.mode=3;case 3:for(;Z<32;){if(me===0)break e;me--,Y+=ne[X++]<<Z,Z+=8}k.head&&(k.head.time=Y),512&k.flags&&(re[0]=255&Y,re[1]=Y>>>8&255,re[2]=Y>>>16&255,re[3]=Y>>>24&255,k.check=u(k.check,re,4,0)),Z=Y=0,k.mode=4;case 4:for(;Z<16;){if(me===0)break e;me--,Y+=ne[X++]<<Z,Z+=8}k.head&&(k.head.xflags=255&Y,k.head.os=Y>>8),512&k.flags&&(re[0]=255&Y,re[1]=Y>>>8&255,k.check=u(k.check,re,2,0)),Z=Y=0,k.mode=5;case 5:if(1024&k.flags){for(;Z<16;){if(me===0)break e;me--,Y+=ne[X++]<<Z,Z+=8}k.length=Y,k.head&&(k.head.extra_len=Y),512&k.flags&&(re[0]=255&Y,re[1]=Y>>>8&255,k.check=u(k.check,re,2,0)),Z=Y=0}else k.head&&(k.head.extra=null);k.mode=6;case 6:if(1024&k.flags&&(me<(we=k.length)&&(we=me),we&&(k.head&&(P=k.head.extra_len-k.length,k.head.extra||(k.head.extra=new Array(k.head.extra_len)),o.arraySet(k.head.extra,ne,X,we,P)),512&k.flags&&(k.check=u(k.check,ne,we,X)),me-=we,X+=we,k.length-=we),k.length))break e;k.length=0,k.mode=7;case 7:if(2048&k.flags){if(me===0)break e;for(we=0;P=ne[X+we++],k.head&&P&&k.length<65536&&(k.head.name+=String.fromCharCode(P)),P&&we<me;);if(512&k.flags&&(k.check=u(k.check,ne,we,X)),me-=we,X+=we,P)break e}else k.head&&(k.head.name=null);k.length=0,k.mode=8;case 8:if(4096&k.flags){if(me===0)break e;for(we=0;P=ne[X+we++],k.head&&P&&k.length<65536&&(k.head.comment+=String.fromCharCode(P)),P&&we<me;);if(512&k.flags&&(k.check=u(k.check,ne,we,X)),me-=we,X+=we,P)break e}else k.head&&(k.head.comment=null);k.mode=9;case 9:if(512&k.flags){for(;Z<16;){if(me===0)break e;me--,Y+=ne[X++]<<Z,Z+=8}if(Y!==(65535&k.check)){M.msg="header crc mismatch",k.mode=30;break}Z=Y=0}k.head&&(k.head.hcrc=k.flags>>9&1,k.head.done=!0),M.adler=k.check=0,k.mode=12;break;case 10:for(;Z<32;){if(me===0)break e;me--,Y+=ne[X++]<<Z,Z+=8}M.adler=k.check=C(Y),Z=Y=0,k.mode=11;case 11:if(k.havedict===0)return M.next_out=_e,M.avail_out=K,M.next_in=X,M.avail_in=me,k.hold=Y,k.bits=Z,2;M.adler=k.check=1,k.mode=12;case 12:if(F===5||F===6)break e;case 13:if(k.last){Y>>>=7&Z,Z-=7&Z,k.mode=27;break}for(;Z<3;){if(me===0)break e;me--,Y+=ne[X++]<<Z,Z+=8}switch(k.last=1&Y,Z-=1,3&(Y>>>=1)){case 0:k.mode=14;break;case 1:if(j(k),k.mode=20,F!==6)break;Y>>>=2,Z-=2;break e;case 2:k.mode=17;break;case 3:M.msg="invalid block type",k.mode=30}Y>>>=2,Z-=2;break;case 14:for(Y>>>=7&Z,Z-=7&Z;Z<32;){if(me===0)break e;me--,Y+=ne[X++]<<Z,Z+=8}if((65535&Y)!=(Y>>>16^65535)){M.msg="invalid stored block lengths",k.mode=30;break}if(k.length=65535&Y,Z=Y=0,k.mode=15,F===6)break e;case 15:k.mode=16;case 16:if(we=k.length){if(me<we&&(we=me),K<we&&(we=K),we===0)break e;o.arraySet(te,ne,X,we,_e),me-=we,X+=we,K-=we,_e+=we,k.length-=we;break}k.mode=12;break;case 17:for(;Z<14;){if(me===0)break e;me--,Y+=ne[X++]<<Z,Z+=8}if(k.nlen=257+(31&Y),Y>>>=5,Z-=5,k.ndist=1+(31&Y),Y>>>=5,Z-=5,k.ncode=4+(15&Y),Y>>>=4,Z-=4,286<k.nlen||30<k.ndist){M.msg="too many length or distance symbols",k.mode=30;break}k.have=0,k.mode=18;case 18:for(;k.have<k.ncode;){for(;Z<3;){if(me===0)break e;me--,Y+=ne[X++]<<Z,Z+=8}k.lens[Ee[k.have++]]=7&Y,Y>>>=3,Z-=3}for(;k.have<19;)k.lens[Ee[k.have++]]=0;if(k.lencode=k.lendyn,k.lenbits=7,se={bits:k.lenbits},xe=m(0,k.lens,0,19,k.lencode,0,k.work,se),k.lenbits=se.bits,xe){M.msg="invalid code lengths set",k.mode=30;break}k.have=0,k.mode=19;case 19:for(;k.have<k.nlen+k.ndist;){for(;st=(W=k.lencode[Y&(1<<k.lenbits)-1])>>>16&255,yt=65535&W,!((Me=W>>>24)<=Z);){if(me===0)break e;me--,Y+=ne[X++]<<Z,Z+=8}if(yt<16)Y>>>=Me,Z-=Me,k.lens[k.have++]=yt;else{if(yt===16){for($=Me+2;Z<$;){if(me===0)break e;me--,Y+=ne[X++]<<Z,Z+=8}if(Y>>>=Me,Z-=Me,k.have===0){M.msg="invalid bit length repeat",k.mode=30;break}P=k.lens[k.have-1],we=3+(3&Y),Y>>>=2,Z-=2}else if(yt===17){for($=Me+3;Z<$;){if(me===0)break e;me--,Y+=ne[X++]<<Z,Z+=8}Z-=Me,P=0,we=3+(7&(Y>>>=Me)),Y>>>=3,Z-=3}else{for($=Me+7;Z<$;){if(me===0)break e;me--,Y+=ne[X++]<<Z,Z+=8}Z-=Me,P=0,we=11+(127&(Y>>>=Me)),Y>>>=7,Z-=7}if(k.have+we>k.nlen+k.ndist){M.msg="invalid bit length repeat",k.mode=30;break}for(;we--;)k.lens[k.have++]=P}}if(k.mode===30)break;if(k.lens[256]===0){M.msg="invalid code -- missing end-of-block",k.mode=30;break}if(k.lenbits=9,se={bits:k.lenbits},xe=m(y,k.lens,0,k.nlen,k.lencode,0,k.work,se),k.lenbits=se.bits,xe){M.msg="invalid literal/lengths set",k.mode=30;break}if(k.distbits=6,k.distcode=k.distdyn,se={bits:k.distbits},xe=m(v,k.lens,k.nlen,k.ndist,k.distcode,0,k.work,se),k.distbits=se.bits,xe){M.msg="invalid distances set",k.mode=30;break}if(k.mode=20,F===6)break e;case 20:k.mode=21;case 21:if(6<=me&&258<=K){M.next_out=_e,M.avail_out=K,M.next_in=X,M.avail_in=me,k.hold=Y,k.bits=Z,f(M,ve),_e=M.next_out,te=M.output,K=M.avail_out,X=M.next_in,ne=M.input,me=M.avail_in,Y=k.hold,Z=k.bits,k.mode===12&&(k.back=-1);break}for(k.back=0;st=(W=k.lencode[Y&(1<<k.lenbits)-1])>>>16&255,yt=65535&W,!((Me=W>>>24)<=Z);){if(me===0)break e;me--,Y+=ne[X++]<<Z,Z+=8}if(st&&(240&st)==0){for(Ze=Me,Bt=st,Pt=yt;st=(W=k.lencode[Pt+((Y&(1<<Ze+Bt)-1)>>Ze)])>>>16&255,yt=65535&W,!(Ze+(Me=W>>>24)<=Z);){if(me===0)break e;me--,Y+=ne[X++]<<Z,Z+=8}Y>>>=Ze,Z-=Ze,k.back+=Ze}if(Y>>>=Me,Z-=Me,k.back+=Me,k.length=yt,st===0){k.mode=26;break}if(32&st){k.back=-1,k.mode=12;break}if(64&st){M.msg="invalid literal/length code",k.mode=30;break}k.extra=15&st,k.mode=22;case 22:if(k.extra){for($=k.extra;Z<$;){if(me===0)break e;me--,Y+=ne[X++]<<Z,Z+=8}k.length+=Y&(1<<k.extra)-1,Y>>>=k.extra,Z-=k.extra,k.back+=k.extra}k.was=k.length,k.mode=23;case 23:for(;st=(W=k.distcode[Y&(1<<k.distbits)-1])>>>16&255,yt=65535&W,!((Me=W>>>24)<=Z);){if(me===0)break e;me--,Y+=ne[X++]<<Z,Z+=8}if((240&st)==0){for(Ze=Me,Bt=st,Pt=yt;st=(W=k.distcode[Pt+((Y&(1<<Ze+Bt)-1)>>Ze)])>>>16&255,yt=65535&W,!(Ze+(Me=W>>>24)<=Z);){if(me===0)break e;me--,Y+=ne[X++]<<Z,Z+=8}Y>>>=Ze,Z-=Ze,k.back+=Ze}if(Y>>>=Me,Z-=Me,k.back+=Me,64&st){M.msg="invalid distance code",k.mode=30;break}k.offset=yt,k.extra=15&st,k.mode=24;case 24:if(k.extra){for($=k.extra;Z<$;){if(me===0)break e;me--,Y+=ne[X++]<<Z,Z+=8}k.offset+=Y&(1<<k.extra)-1,Y>>>=k.extra,Z-=k.extra,k.back+=k.extra}if(k.offset>k.dmax){M.msg="invalid distance too far back",k.mode=30;break}k.mode=25;case 25:if(K===0)break e;if(we=ve-K,k.offset>we){if((we=k.offset-we)>k.whave&&k.sane){M.msg="invalid distance too far back",k.mode=30;break}ke=we>k.wnext?(we-=k.wnext,k.wsize-we):k.wnext-we,we>k.length&&(we=k.length),it=k.window}else it=te,ke=_e-k.offset,we=k.length;for(K<we&&(we=K),K-=we,k.length-=we;te[_e++]=it[ke++],--we;);k.length===0&&(k.mode=21);break;case 26:if(K===0)break e;te[_e++]=k.length,K--,k.mode=21;break;case 27:if(k.wrap){for(;Z<32;){if(me===0)break e;me--,Y|=ne[X++]<<Z,Z+=8}if(ve-=K,M.total_out+=ve,k.total+=ve,ve&&(M.adler=k.check=k.flags?u(k.check,te,ve,_e-ve):l(k.check,te,ve,_e-ve)),ve=K,(k.flags?Y:C(Y))!==k.check){M.msg="incorrect data check",k.mode=30;break}Z=Y=0}k.mode=28;case 28:if(k.wrap&&k.flags){for(;Z<32;){if(me===0)break e;me--,Y+=ne[X++]<<Z,Z+=8}if(Y!==(4294967295&k.total)){M.msg="incorrect length check",k.mode=30;break}Z=Y=0}k.mode=29;case 29:xe=1;break e;case 30:xe=-3;break e;case 31:return-4;case 32:default:return E}return M.next_out=_e,M.avail_out=K,M.next_in=X,M.avail_in=me,k.hold=Y,k.bits=Z,(k.wsize||ve!==M.avail_out&&k.mode<30&&(k.mode<27||F!==4))&&J(M,M.output,M.next_out,ve-M.avail_out)?(k.mode=31,-4):(he-=M.avail_in,ve-=M.avail_out,M.total_in+=he,M.total_out+=ve,k.total+=ve,k.wrap&&ve&&(M.adler=k.check=k.flags?u(k.check,te,ve,M.next_out-ve):l(k.check,te,ve,M.next_out-ve)),M.data_type=k.bits+(k.last?64:0)+(k.mode===12?128:0)+(k.mode===20||k.mode===15?256:0),(he==0&&ve===0||F===4)&&xe===w&&(xe=-5),xe)},r.inflateEnd=function(M){if(!M||!M.state)return E;var F=M.state;return F.window&&(F.window=null),M.state=null,w},r.inflateGetHeader=function(M,F){var k;return M&&M.state?(2&(k=M.state).wrap)==0?E:((k.head=F).done=!1,w):E},r.inflateSetDictionary=function(M,F){var k,ne=F.length;return M&&M.state?(k=M.state).wrap!==0&&k.mode!==11?E:k.mode===11&&l(1,F,ne,0)!==k.check?-3:J(M,F,ne,ne)?(k.mode=31,-4):(k.havedict=1,w):E},r.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(t,i,r){var o=t("../utils/common"),l=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],u=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],f=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],m=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];i.exports=function(y,v,w,E,S,b,A,C){var R,L,q,z,H,O,V,U,j,J=C.bits,M=0,F=0,k=0,ne=0,te=0,X=0,_e=0,me=0,K=0,Y=0,Z=null,he=0,ve=new o.Buf16(16),we=new o.Buf16(16),ke=null,it=0;for(M=0;M<=15;M++)ve[M]=0;for(F=0;F<E;F++)ve[v[w+F]]++;for(te=J,ne=15;1<=ne&&ve[ne]===0;ne--);if(ne<te&&(te=ne),ne===0)return S[b++]=20971520,S[b++]=20971520,C.bits=1,0;for(k=1;k<ne&&ve[k]===0;k++);for(te<k&&(te=k),M=me=1;M<=15;M++)if(me<<=1,(me-=ve[M])<0)return-1;if(0<me&&(y===0||ne!==1))return-1;for(we[1]=0,M=1;M<15;M++)we[M+1]=we[M]+ve[M];for(F=0;F<E;F++)v[w+F]!==0&&(A[we[v[w+F]]++]=F);if(O=y===0?(Z=ke=A,19):y===1?(Z=l,he-=257,ke=u,it-=257,256):(Z=f,ke=m,-1),M=k,H=b,_e=F=Y=0,q=-1,z=(K=1<<(X=te))-1,y===1&&852<K||y===2&&592<K)return 1;for(;;){for(V=M-_e,j=A[F]<O?(U=0,A[F]):A[F]>O?(U=ke[it+A[F]],Z[he+A[F]]):(U=96,0),R=1<<M-_e,k=L=1<<X;S[H+(Y>>_e)+(L-=R)]=V<<24|U<<16|j|0,L!==0;);for(R=1<<M-1;Y&R;)R>>=1;if(R!==0?(Y&=R-1,Y+=R):Y=0,F++,--ve[M]==0){if(M===ne)break;M=v[w+A[F]]}if(te<M&&(Y&z)!==q){for(_e===0&&(_e=te),H+=k,me=1<<(X=M-_e);X+_e<ne&&!((me-=ve[X+_e])<=0);)X++,me<<=1;if(K+=1<<X,y===1&&852<K||y===2&&592<K)return 1;S[q=Y&z]=te<<24|X<<16|H-b|0}}return Y!==0&&(S[H+Y]=M-_e<<24|64<<16|0),C.bits=te,0}},{"../utils/common":41}],51:[function(t,i,r){i.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(t,i,r){var o=t("../utils/common"),l=0,u=1;function f(W){for(var re=W.length;0<=--re;)W[re]=0}var m=0,y=29,v=256,w=v+1+y,E=30,S=19,b=2*w+1,A=15,C=16,R=7,L=256,q=16,z=17,H=18,O=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],V=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],U=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],j=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],J=new Array(2*(w+2));f(J);var M=new Array(2*E);f(M);var F=new Array(512);f(F);var k=new Array(256);f(k);var ne=new Array(y);f(ne);var te,X,_e,me=new Array(E);function K(W,re,Ee,Ae,ce){this.static_tree=W,this.extra_bits=re,this.extra_base=Ee,this.elems=Ae,this.max_length=ce,this.has_stree=W&&W.length}function Y(W,re){this.dyn_tree=W,this.max_code=0,this.stat_desc=re}function Z(W){return W<256?F[W]:F[256+(W>>>7)]}function he(W,re){W.pending_buf[W.pending++]=255&re,W.pending_buf[W.pending++]=re>>>8&255}function ve(W,re,Ee){W.bi_valid>C-Ee?(W.bi_buf|=re<<W.bi_valid&65535,he(W,W.bi_buf),W.bi_buf=re>>C-W.bi_valid,W.bi_valid+=Ee-C):(W.bi_buf|=re<<W.bi_valid&65535,W.bi_valid+=Ee)}function we(W,re,Ee){ve(W,Ee[2*re],Ee[2*re+1])}function ke(W,re){for(var Ee=0;Ee|=1&W,W>>>=1,Ee<<=1,0<--re;);return Ee>>>1}function it(W,re,Ee){var Ae,ce,Ne=new Array(A+1),Fe=0;for(Ae=1;Ae<=A;Ae++)Ne[Ae]=Fe=Fe+Ee[Ae-1]<<1;for(ce=0;ce<=re;ce++){var Ve=W[2*ce+1];Ve!==0&&(W[2*ce]=ke(Ne[Ve]++,Ve))}}function Me(W){var re;for(re=0;re<w;re++)W.dyn_ltree[2*re]=0;for(re=0;re<E;re++)W.dyn_dtree[2*re]=0;for(re=0;re<S;re++)W.bl_tree[2*re]=0;W.dyn_ltree[2*L]=1,W.opt_len=W.static_len=0,W.last_lit=W.matches=0}function st(W){8<W.bi_valid?he(W,W.bi_buf):0<W.bi_valid&&(W.pending_buf[W.pending++]=W.bi_buf),W.bi_buf=0,W.bi_valid=0}function yt(W,re,Ee,Ae){var ce=2*re,Ne=2*Ee;return W[ce]<W[Ne]||W[ce]===W[Ne]&&Ae[re]<=Ae[Ee]}function Ze(W,re,Ee){for(var Ae=W.heap[Ee],ce=Ee<<1;ce<=W.heap_len&&(ce<W.heap_len&&yt(re,W.heap[ce+1],W.heap[ce],W.depth)&&ce++,!yt(re,Ae,W.heap[ce],W.depth));)W.heap[Ee]=W.heap[ce],Ee=ce,ce<<=1;W.heap[Ee]=Ae}function Bt(W,re,Ee){var Ae,ce,Ne,Fe,Ve=0;if(W.last_lit!==0)for(;Ae=W.pending_buf[W.d_buf+2*Ve]<<8|W.pending_buf[W.d_buf+2*Ve+1],ce=W.pending_buf[W.l_buf+Ve],Ve++,Ae===0?we(W,ce,re):(we(W,(Ne=k[ce])+v+1,re),(Fe=O[Ne])!==0&&ve(W,ce-=ne[Ne],Fe),we(W,Ne=Z(--Ae),Ee),(Fe=V[Ne])!==0&&ve(W,Ae-=me[Ne],Fe)),Ve<W.last_lit;);we(W,L,re)}function Pt(W,re){var Ee,Ae,ce,Ne=re.dyn_tree,Fe=re.stat_desc.static_tree,Ve=re.stat_desc.has_stree,Oe=re.stat_desc.elems,Ke=-1;for(W.heap_len=0,W.heap_max=b,Ee=0;Ee<Oe;Ee++)Ne[2*Ee]!==0?(W.heap[++W.heap_len]=Ke=Ee,W.depth[Ee]=0):Ne[2*Ee+1]=0;for(;W.heap_len<2;)Ne[2*(ce=W.heap[++W.heap_len]=Ke<2?++Ke:0)]=1,W.depth[ce]=0,W.opt_len--,Ve&&(W.static_len-=Fe[2*ce+1]);for(re.max_code=Ke,Ee=W.heap_len>>1;1<=Ee;Ee--)Ze(W,Ne,Ee);for(ce=Oe;Ee=W.heap[1],W.heap[1]=W.heap[W.heap_len--],Ze(W,Ne,1),Ae=W.heap[1],W.heap[--W.heap_max]=Ee,W.heap[--W.heap_max]=Ae,Ne[2*ce]=Ne[2*Ee]+Ne[2*Ae],W.depth[ce]=(W.depth[Ee]>=W.depth[Ae]?W.depth[Ee]:W.depth[Ae])+1,Ne[2*Ee+1]=Ne[2*Ae+1]=ce,W.heap[1]=ce++,Ze(W,Ne,1),2<=W.heap_len;);W.heap[--W.heap_max]=W.heap[1],(function(We,_t){var si,Yn,oi,At,ai,Bn,Pn=_t.dyn_tree,ir=_t.max_code,Se=_t.stat_desc.static_tree,Qe=_t.stat_desc.has_stree,qe=_t.stat_desc.extra_bits,je=_t.stat_desc.extra_base,ot=_t.stat_desc.max_length,vt=0;for(At=0;At<=A;At++)We.bl_count[At]=0;for(Pn[2*We.heap[We.heap_max]+1]=0,si=We.heap_max+1;si<b;si++)ot<(At=Pn[2*Pn[2*(Yn=We.heap[si])+1]+1]+1)&&(At=ot,vt++),Pn[2*Yn+1]=At,ir<Yn||(We.bl_count[At]++,ai=0,je<=Yn&&(ai=qe[Yn-je]),Bn=Pn[2*Yn],We.opt_len+=Bn*(At+ai),Qe&&(We.static_len+=Bn*(Se[2*Yn+1]+ai)));if(vt!==0){do{for(At=ot-1;We.bl_count[At]===0;)At--;We.bl_count[At]--,We.bl_count[At+1]+=2,We.bl_count[ot]--,vt-=2}while(0<vt);for(At=ot;At!==0;At--)for(Yn=We.bl_count[At];Yn!==0;)ir<(oi=We.heap[--si])||(Pn[2*oi+1]!==At&&(We.opt_len+=(At-Pn[2*oi+1])*Pn[2*oi],Pn[2*oi+1]=At),Yn--)}})(W,re),it(Ne,Ke,W.bl_count)}function P(W,re,Ee){var Ae,ce,Ne=-1,Fe=re[1],Ve=0,Oe=7,Ke=4;for(Fe===0&&(Oe=138,Ke=3),re[2*(Ee+1)+1]=65535,Ae=0;Ae<=Ee;Ae++)ce=Fe,Fe=re[2*(Ae+1)+1],++Ve<Oe&&ce===Fe||(Ve<Ke?W.bl_tree[2*ce]+=Ve:ce!==0?(ce!==Ne&&W.bl_tree[2*ce]++,W.bl_tree[2*q]++):Ve<=10?W.bl_tree[2*z]++:W.bl_tree[2*H]++,Ne=ce,Ke=(Ve=0)===Fe?(Oe=138,3):ce===Fe?(Oe=6,3):(Oe=7,4))}function xe(W,re,Ee){var Ae,ce,Ne=-1,Fe=re[1],Ve=0,Oe=7,Ke=4;for(Fe===0&&(Oe=138,Ke=3),Ae=0;Ae<=Ee;Ae++)if(ce=Fe,Fe=re[2*(Ae+1)+1],!(++Ve<Oe&&ce===Fe)){if(Ve<Ke)for(;we(W,ce,W.bl_tree),--Ve!=0;);else ce!==0?(ce!==Ne&&(we(W,ce,W.bl_tree),Ve--),we(W,q,W.bl_tree),ve(W,Ve-3,2)):Ve<=10?(we(W,z,W.bl_tree),ve(W,Ve-3,3)):(we(W,H,W.bl_tree),ve(W,Ve-11,7));Ne=ce,Ke=(Ve=0)===Fe?(Oe=138,3):ce===Fe?(Oe=6,3):(Oe=7,4)}}f(me);var se=!1;function $(W,re,Ee,Ae){ve(W,(m<<1)+(Ae?1:0),3),(function(ce,Ne,Fe,Ve){st(ce),he(ce,Fe),he(ce,~Fe),o.arraySet(ce.pending_buf,ce.window,Ne,Fe,ce.pending),ce.pending+=Fe})(W,re,Ee)}r._tr_init=function(W){se||((function(){var re,Ee,Ae,ce,Ne,Fe=new Array(A+1);for(ce=Ae=0;ce<y-1;ce++)for(ne[ce]=Ae,re=0;re<1<<O[ce];re++)k[Ae++]=ce;for(k[Ae-1]=ce,ce=Ne=0;ce<16;ce++)for(me[ce]=Ne,re=0;re<1<<V[ce];re++)F[Ne++]=ce;for(Ne>>=7;ce<E;ce++)for(me[ce]=Ne<<7,re=0;re<1<<V[ce]-7;re++)F[256+Ne++]=ce;for(Ee=0;Ee<=A;Ee++)Fe[Ee]=0;for(re=0;re<=143;)J[2*re+1]=8,re++,Fe[8]++;for(;re<=255;)J[2*re+1]=9,re++,Fe[9]++;for(;re<=279;)J[2*re+1]=7,re++,Fe[7]++;for(;re<=287;)J[2*re+1]=8,re++,Fe[8]++;for(it(J,w+1,Fe),re=0;re<E;re++)M[2*re+1]=5,M[2*re]=ke(re,5);te=new K(J,O,v+1,w,A),X=new K(M,V,0,E,A),_e=new K(new Array(0),U,0,S,R)})(),se=!0),W.l_desc=new Y(W.dyn_ltree,te),W.d_desc=new Y(W.dyn_dtree,X),W.bl_desc=new Y(W.bl_tree,_e),W.bi_buf=0,W.bi_valid=0,Me(W)},r._tr_stored_block=$,r._tr_flush_block=function(W,re,Ee,Ae){var ce,Ne,Fe=0;0<W.level?(W.strm.data_type===2&&(W.strm.data_type=(function(Ve){var Oe,Ke=4093624447;for(Oe=0;Oe<=31;Oe++,Ke>>>=1)if(1&Ke&&Ve.dyn_ltree[2*Oe]!==0)return l;if(Ve.dyn_ltree[18]!==0||Ve.dyn_ltree[20]!==0||Ve.dyn_ltree[26]!==0)return u;for(Oe=32;Oe<v;Oe++)if(Ve.dyn_ltree[2*Oe]!==0)return u;return l})(W)),Pt(W,W.l_desc),Pt(W,W.d_desc),Fe=(function(Ve){var Oe;for(P(Ve,Ve.dyn_ltree,Ve.l_desc.max_code),P(Ve,Ve.dyn_dtree,Ve.d_desc.max_code),Pt(Ve,Ve.bl_desc),Oe=S-1;3<=Oe&&Ve.bl_tree[2*j[Oe]+1]===0;Oe--);return Ve.opt_len+=3*(Oe+1)+5+5+4,Oe})(W),ce=W.opt_len+3+7>>>3,(Ne=W.static_len+3+7>>>3)<=ce&&(ce=Ne)):ce=Ne=Ee+5,Ee+4<=ce&&re!==-1?$(W,re,Ee,Ae):W.strategy===4||Ne===ce?(ve(W,2+(Ae?1:0),3),Bt(W,J,M)):(ve(W,4+(Ae?1:0),3),(function(Ve,Oe,Ke,We){var _t;for(ve(Ve,Oe-257,5),ve(Ve,Ke-1,5),ve(Ve,We-4,4),_t=0;_t<We;_t++)ve(Ve,Ve.bl_tree[2*j[_t]+1],3);xe(Ve,Ve.dyn_ltree,Oe-1),xe(Ve,Ve.dyn_dtree,Ke-1)})(W,W.l_desc.max_code+1,W.d_desc.max_code+1,Fe+1),Bt(W,W.dyn_ltree,W.dyn_dtree)),Me(W),Ae&&st(W)},r._tr_tally=function(W,re,Ee){return W.pending_buf[W.d_buf+2*W.last_lit]=re>>>8&255,W.pending_buf[W.d_buf+2*W.last_lit+1]=255&re,W.pending_buf[W.l_buf+W.last_lit]=255&Ee,W.last_lit++,re===0?W.dyn_ltree[2*Ee]++:(W.matches++,re--,W.dyn_ltree[2*(k[Ee]+v+1)]++,W.dyn_dtree[2*Z(re)]++),W.last_lit===W.lit_bufsize-1},r._tr_align=function(W){ve(W,2,3),we(W,L,J),(function(re){re.bi_valid===16?(he(re,re.bi_buf),re.bi_buf=0,re.bi_valid=0):8<=re.bi_valid&&(re.pending_buf[re.pending++]=255&re.bi_buf,re.bi_buf>>=8,re.bi_valid-=8)})(W)}},{"../utils/common":41}],53:[function(t,i,r){i.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(t,i,r){(function(o){(function(l,u){if(!l.setImmediate){var f,m,y,v,w=1,E={},S=!1,b=l.document,A=Object.getPrototypeOf&&Object.getPrototypeOf(l);A=A&&A.setTimeout?A:l,f={}.toString.call(l.process)==="[object process]"?function(q){process.nextTick(function(){R(q)})}:(function(){if(l.postMessage&&!l.importScripts){var q=!0,z=l.onmessage;return l.onmessage=function(){q=!1},l.postMessage("","*"),l.onmessage=z,q}})()?(v="setImmediate$"+Math.random()+"$",l.addEventListener?l.addEventListener("message",L,!1):l.attachEvent("onmessage",L),function(q){l.postMessage(v+q,"*")}):l.MessageChannel?((y=new MessageChannel).port1.onmessage=function(q){R(q.data)},function(q){y.port2.postMessage(q)}):b&&"onreadystatechange"in b.createElement("script")?(m=b.documentElement,function(q){var z=b.createElement("script");z.onreadystatechange=function(){R(q),z.onreadystatechange=null,m.removeChild(z),z=null},m.appendChild(z)}):function(q){setTimeout(R,0,q)},A.setImmediate=function(q){typeof q!="function"&&(q=new Function(""+q));for(var z=new Array(arguments.length-1),H=0;H<z.length;H++)z[H]=arguments[H+1];var O={callback:q,args:z};return E[w]=O,f(w),w++},A.clearImmediate=C}function C(q){delete E[q]}function R(q){if(S)setTimeout(R,0,q);else{var z=E[q];if(z){S=!0;try{(function(H){var O=H.callback,V=H.args;switch(V.length){case 0:O();break;case 1:O(V[0]);break;case 2:O(V[0],V[1]);break;case 3:O(V[0],V[1],V[2]);break;default:O.apply(u,V)}})(z)}finally{C(q),S=!1}}}}function L(q){q.source===l&&typeof q.data=="string"&&q.data.indexOf(v)===0&&R(+q.data.slice(v.length))}})(typeof self>"u"?o===void 0?this:o:self)}).call(this,typeof em<"u"?em:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(S_)),S_.exports}var mW=hW();const pW=kv(mW),LA="https://script.google.com/macros/s/YOUR_APPS_SCRIPT_ID/exec",gW=async()=>{try{if(LA.includes("YOUR_APPS_SCRIPT_ID"))return console.warn("Template Store is using mock data. Please replace the placeholder URL in services/templateStoreService.ts"),new Promise(t=>setTimeout(()=>t([{id:"remote-news-pro",name:"  ",thumbnail:"https://cdn.jsdelivr.net/gh/ph-2/proj-images/GFx/cms-template-news-pro.svg",price:15,downloadUrl:"mock_url_1",previewUrl:"https://example.com/preview/news-pro"},{id:"remote-magazine-pro",name:"  ",thumbnail:"https://cdn.jsdelivr.net/gh/ph-2/proj-images/GFx/cms-template-magazine-pro.svg",price:20,downloadUrl:"mock_url_2",previewUrl:"https://example.com/preview/magazine-pro"},{id:"remote-minimal-free",name:"  ",thumbnail:"https://cdn.jsdelivr.net/gh/ph-2/proj-images/GFx/cms-template-minimal-free.svg",price:0,downloadUrl:"mock_url_3",previewUrl:"https://example.com/preview/minimal-free"}]),1e3));const n=await fetch(LA);if(!n.ok)throw new Error(`    (Status: ${n.status})`);const e=await n.json();if(!e.success||!Array.isArray(e.templates))throw new Error("       .");return e.templates}catch(n){throw console.error("Error fetching remote templates:",n),n}},yW=({template:n,onInstall:e,onBuy:t,onVerify:i,purchaseStatus:r})=>{const o=()=>{const l="flex-1 px-4 py-2.5 rounded-md font-semibold transition-colors flex items-center justify-center gap-2";switch(r){case"verifying":return g.jsxs("button",{disabled:!0,className:`${l} bg-gray-300 text-gray-500 cursor-not-allowed`,children:[g.jsx("div",{className:"w-5 h-5 border-2 border-current border-t-transparent rounded-full animate-spin"}),g.jsx("span",{children:" ..."})]});case"pending":return g.jsx("button",{onClick:()=>i(n),className:`${l} bg-green-600 hover:bg-green-700 text-white`,children:"  "});case"completed":return g.jsxs("button",{disabled:!0,className:`${l} bg-green-500 text-white`,children:[g.jsx(Tv,{className:"w-5 h-5"}),g.jsx("span",{children:" "})]});case"idle":default:return n.price>0?g.jsx("button",{onClick:()=>t(n),className:`${l} bg-blue-600 hover:bg-blue-700 text-white`,children:` $${n.price.toFixed(2)}`}):g.jsx("button",{onClick:()=>e(n),className:`${l} bg-accent hover:bg-secondary text-white`,children:" "})}};return g.jsxs("div",{className:"rounded-lg bg-white shadow-md overflow-hidden ring-1 ring-gray-200 flex flex-col",children:[g.jsx("img",{src:n.thumbnail,alt:n.name,className:"w-full h-48 object-cover bg-gray-100"}),g.jsxs("div",{className:"p-5 flex flex-col flex-grow",children:[g.jsx("h2",{className:"text-xl font-semibold text-neutral mb-4 flex-grow",children:n.name}),g.jsxs("div",{className:"mt-auto pt-4 border-t flex items-stretch gap-2",children:[g.jsxs("a",{href:n.previewUrl,target:"_blank",rel:"noopener noreferrer",className:"flex-1 text-center px-4 py-2.5 rounded-md bg-white text-gray-700 font-semibold transition-colors border border-gray-300 hover:bg-gray-100 flex items-center justify-center gap-2",children:[g.jsx(gN,{className:"w-4 h-4"}),g.jsx("span",{children:""})]}),o()]})]})]})},_W=({templates:n,activeTemplateId:e,onSelectTemplate:t,onSaveTemplate:i,onDeleteTemplate:r,userId:o,developerSettings:l,cmsLang:u})=>{const[f,m]=ae.useState(null),[y,v]=ae.useState(!1),[w,E]=ae.useState({}),S=ae.useRef(null),[b,A]=ae.useState([]),[C,R]=ae.useState(!0),[L,q]=ae.useState(null),{url:z,authToken:H}=l.paymentWorker,O=z&&H;ae.useEffect(()=>{(async()=>{try{const ne=await gW(),te=new Set(n.map(X=>X.name));A(ne.filter(X=>!te.has(X.name)))}catch(ne){q(ne.message)}finally{R(!1)}})()},[n]);const V=async k=>{var ne;v(!0),m(null);try{const te=await pW.loadAsync(k),X=te.file("template.json");if(!X)throw new Error("       `template.json`.");const _e=await X.async("string"),me=JSON.parse(_e);if(!me.name||!me.thumbnail||!me.styles)throw new Error("`template.json`   : name, thumbnail, styles.");const K={},Y={};let Z="",he="";for(const we in te.files){const ke=te.files[we];if(!ke.dir){if(we.endsWith(".html")){const it=(ne=we.split("/").pop())==null?void 0:ne.replace(".html","");it&&(Y[it]=await ke.async("string"))}else if(we.endsWith(".css"))Z+=await ke.async("string")+`
`;else if(we.endsWith(".js"))he+=await ke.async("string")+`
`;else if(/\.(png|jpg|jpeg|gif|svg|webp|woff|woff2|ttf|eot)$/i.test(we)){const it=await ke.async("blob");K[we]=URL.createObjectURL(it)}}}const ve={...me,htmlHome:Y.home,htmlPost:Y.post,htmlPage:Y.page,htmlHeader:Y.header,htmlFooter:Y.footer,htmlSidebar:Y.sidebar,customCss:(me.customCss||"")+`
`+Z,customJs:(me.customJs||"")+`
`+he,assetMap:K};i(ve)}catch(te){throw m(te.message),te}finally{v(!1)}},U=async k=>{var te;const ne=(te=k.target.files)==null?void 0:te[0];if(ne)try{await V(ne)}catch{}finally{k.target.value=""}},j=async k=>{E(ne=>({...ne,[k.id]:{...ne[k.id],status:"verifying"}})),m(null);try{const ne=await fetch(k.downloadUrl);if(!ne.ok)throw new Error(`   (Status: ${ne.status})`);const te=await ne.blob(),X=new File([te],`${k.id}.zip`,{type:"application/zip"});await V(X),E(_e=>({..._e,[k.id]:{..._e[k.id],status:"completed"}}))}catch(ne){m(ne.message),E(te=>({...te,[k.id]:{...te[k.id],status:"error"}}))}},J=(k,ne,te)=>`https://www.paypal.com/cgi-bin/webscr?cmd=_xclick&business=mgkrol99@gmail.com&item_name=${encodeURIComponent(k)}&amount=${ne.toFixed(2)}&currency_code=USD&no_shipping=1&custom=${encodeURIComponent(te)}`,M=k=>{if(!O){m("       (Payment Worker)    .");return}const ne=`template-${k.id}-${o}-${Date.now()}`;E(X=>({...X,[k.id]:{purchaseId:ne,status:"pending"}}));const te=J(`CMS Template: ${k.name}`,k.price,ne);window.open(te,"_blank")},F=async k=>{const ne=w[k.id];if(!(!ne||!O)){E(te=>({...te,[k.id]:{...ne,status:"verifying"}})),m(null);try{await fetch(`${z.replace(/\/$/,"")}/simulate-paypal-completion`,{method:"POST",headers:{"Content-Type":"application/json","X-Auth-Token":H},body:JSON.stringify({purchaseId:ne.purchaseId,userId:o,itemId:k.id})});const X=await(await fetch(`${z.replace(/\/$/,"")}/get-purchase-status`,{method:"POST",headers:{"Content-Type":"application/json","X-Auth-Token":H},body:JSON.stringify({purchaseId:ne.purchaseId})})).json();if(X.success&&X.status==="completed")await j(k);else throw new Error("Payment not confirmed.")}catch{m(`     "${k.name}".    .`),E(X=>({...X,[k.id]:{...ne,status:"pending"}}))}}};return g.jsxs("div",{className:"p-8",children:[g.jsx("h1",{className:"text-3xl font-bold text-neutral mb-2",children:" "}),g.jsx("p",{className:"text-gray-600 mb-8 max-w-2xl",children:"           ."}),f&&g.jsx("p",{className:"text-red-500 text-sm mb-4 bg-red-50 p-3 rounded-md",children:f}),g.jsxs("div",{className:"mb-12",children:[g.jsxs("h2",{className:"text-2xl font-bold text-neutral mb-4 flex items-center gap-2",children:[g.jsx(TT,{className:"w-7 h-7 text-primary"}),g.jsx("span",{children:" "})]}),C?g.jsx("div",{className:"text-center py-10",children:g.jsx("div",{className:"w-8 h-8 border-4 border-primary border-t-transparent rounded-full animate-spin mx-auto"})}):L?g.jsx("p",{className:"text-red-500 bg-red-50 p-3 rounded-md",children:L}):g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:b.map(k=>{var ne;return g.jsx(yW,{template:k,onInstall:j,onBuy:M,onVerify:F,purchaseStatus:((ne=w[k.id])==null?void 0:ne.status)||"idle"},k.id)})})]}),g.jsx("hr",{className:"my-12"}),g.jsxs("div",{children:[g.jsx("h2",{className:"text-2xl font-bold text-neutral mb-4",children:" "}),n.length>0?g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:n.map(k=>g.jsxs("div",{className:`relative rounded-lg bg-white shadow-md overflow-hidden transition-all duration-300 transform hover:-translate-y-1 ${e===k.id?"ring-4 ring-primary":"ring-1 ring-gray-200"}`,children:[k.isCustom&&g.jsx("button",{onClick:ne=>{ne.stopPropagation(),r(k.id)},className:"absolute top-2 right-2 rtl:right-auto rtl:left-2 bg-red-500 text-white rounded-full p-1.5 shadow-md hover:bg-red-600 transition-transform hover:scale-110 z-10",title:" ",children:g.jsx(Yr,{className:"w-4 h-4"})}),g.jsx("img",{src:k.thumbnail,alt:k.name,className:"w-full h-48 object-cover bg-gray-100"}),g.jsxs("div",{className:"p-5",children:[g.jsx("h2",{className:"text-xl font-semibold text-neutral mb-4",children:k.name}),g.jsx("button",{onClick:()=>t(k.id),disabled:e===k.id,className:"w-full mt-2 px-4 py-2.5 rounded-md text-white font-semibold transition-colors disabled:bg-gray-300 disabled:text-gray-500 disabled:cursor-not-allowed bg-primary hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary",children:e===k.id?" ":" "})]})]},k.id))}):!y&&g.jsxs("div",{className:"text-center py-16 px-8 bg-white rounded-lg shadow-md mt-8",children:[g.jsx("h2",{className:"text-xl font-semibold text-gray-700",children:"   "}),g.jsx("p",{className:"text-gray-500 mt-2 mb-4",children:"       ."})]})]}),g.jsxs("div",{className:"mt-12 border-t pt-8 flex items-center gap-4",children:[g.jsx("input",{type:"file",ref:S,onChange:U,className:"hidden",accept:".zip"}),g.jsxs("button",{onClick:()=>{var k;return(k=S.current)==null?void 0:k.click()},disabled:y,className:"flex items-center space-x-2 rtl:space-x-reverse bg-gray-600 text-white px-5 py-3 rounded-lg shadow-md hover:shadow-lg hover:bg-gray-700 transition-all font-semibold disabled:bg-gray-400 disabled:cursor-wait",children:[g.jsx(_N,{className:"w-5 h-5"}),g.jsx("span",{children:y?" ...":"     Zip..."})]})]})]})},vW=({settings:n,onSave:e,seoSettings:t,cmsLang:i})=>{const[r,o]=ae.useState(n),[l,u]=ae.useState(!1),f=y=>{const{name:v,value:w,type:E}=y.target,S=E==="checkbox",b=S?y.target.checked:void 0,A=v.split(".");o(C=>{const R=JSON.parse(JSON.stringify(C));let L=R;for(let H=0;H<A.length-1;H++)L=L[A[H]]=L[A[H]]||{};const q=A[A.length-1];let z=S?b:w;return q==="maxPosts"&&typeof w=="string"&&(z=parseInt(w,10)),L[q]=z,R})},m=()=>{e(r),u(!0),setTimeout(()=>u(!1),3e3)};return g.jsxs("div",{className:"p-8",children:[g.jsxs("div",{className:"flex justify-between items-start mb-6",children:[g.jsxs("div",{children:[g.jsx("h1",{className:"text-3xl font-bold text-neutral",children:"  "}),g.jsx("p",{className:"text-gray-600 mt-1",children:"      ."})]}),g.jsx("button",{onClick:m,className:`px-6 py-2 rounded-md font-semibold transition-all duration-300 ${l?"bg-green-500 text-white":"bg-primary text-white hover:bg-secondary"}`,children:Q(l?"saved":"saveChanges",i)})]}),g.jsxs("div",{className:"space-y-8",children:[g.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[g.jsx("h2",{className:"text-xl font-semibold mb-4 text-neutral",children:" "}),g.jsxs("div",{className:"flex items-center",children:[g.jsx("input",{type:"checkbox",id:"showSidebarOnHome",name:"showSidebarOnHome",checked:r.showSidebarOnHome,onChange:f,className:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"}),g.jsx("label",{htmlFor:"showSidebarOnHome",className:"ml-2 rtl:mr-2 block text-sm text-gray-900",children:"     "})]}),g.jsx("p",{className:"text-xs text-gray-500 mt-2 mr-6 rtl:mr-6",children:":             ."})]}),g.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[g.jsx("h2",{className:"text-xl font-semibold mb-4 text-neutral",children:' "  "'}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[g.jsxs("div",{children:[g.jsx("label",{htmlFor:"widgetTitle.ar",className:"block text-sm font-medium text-gray-700 mb-1",children:"  ()"}),g.jsx("input",{type:"text",id:"widgetTitle.ar",name:"relatedPostsWidget.title.ar",value:r.relatedPostsWidget.title.ar,onChange:f,className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-primary bg-white text-gray-900"})]}),t.supportedLanguages.some(y=>y.code==="fr")&&g.jsxs("div",{children:[g.jsx("label",{htmlFor:"widgetTitle.fr",className:"block text-sm font-medium text-gray-700 mb-1",children:"  ()"}),g.jsx("input",{type:"text",id:"widgetTitle.fr",name:"relatedPostsWidget.title.fr",value:r.relatedPostsWidget.title.fr||"",onChange:f,className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-primary bg-white text-gray-900 ltr"})]}),t.supportedLanguages.some(y=>y.code==="en")&&g.jsxs("div",{children:[g.jsx("label",{htmlFor:"widgetTitle.en",className:"block text-sm font-medium text-gray-700 mb-1",children:"  ()"}),g.jsx("input",{type:"text",id:"widgetTitle.en",name:"relatedPostsWidget.title.en",value:r.relatedPostsWidget.title.en||"",onChange:f,className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-primary bg-white text-gray-900 ltr"})]}),g.jsx("div",{className:"md:col-span-2"}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"sortBy",className:"block text-sm font-medium text-gray-700 mb-1",children:" "}),g.jsxs("select",{id:"sortBy",name:"relatedPostsWidget.sortBy",value:r.relatedPostsWidget.sortBy,onChange:f,className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-primary bg-white text-gray-900",children:[g.jsx("option",{value:"latest",children:""}),g.jsx("option",{value:"category",children:" ( )"})]})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"maxPosts",className:"block text-sm font-medium text-gray-700 mb-1",children:"  "}),g.jsx("input",{type:"number",id:"maxPosts",name:"relatedPostsWidget.maxPosts",min:"1",max:"10",value:r.relatedPostsWidget.maxPosts,onChange:f,className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-primary bg-white text-gray-900"})]})]})]}),g.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[g.jsx("h2",{className:"text-xl font-semibold mb-4 text-neutral",children:' ""'}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[g.jsxs("div",{children:[g.jsx("label",{htmlFor:"categoriesWidgetTitle.ar",className:"block text-sm font-medium text-gray-700 mb-1",children:"  ()"}),g.jsx("input",{type:"text",id:"categoriesWidgetTitle.ar",name:"categoriesWidget.title.ar",value:r.categoriesWidget.title.ar,onChange:f,className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-primary bg-white text-gray-900"})]}),t.supportedLanguages.some(y=>y.code==="fr")&&g.jsxs("div",{children:[g.jsx("label",{htmlFor:"categoriesWidgetTitle.fr",className:"block text-sm font-medium text-gray-700 mb-1",children:"  ()"}),g.jsx("input",{type:"text",id:"categoriesWidgetTitle.fr",name:"categoriesWidget.title.fr",value:r.categoriesWidget.title.fr||"",onChange:f,className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-primary bg-white text-gray-900 ltr"})]}),t.supportedLanguages.some(y=>y.code==="en")&&g.jsxs("div",{children:[g.jsx("label",{htmlFor:"categoriesWidgetTitle.en",className:"block text-sm font-medium text-gray-700 mb-1",children:"  ()"}),g.jsx("input",{type:"text",id:"categoriesWidgetTitle.en",name:"categoriesWidget.title.en",value:r.categoriesWidget.title.en||"",onChange:f,className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-primary bg-white text-gray-900 ltr"})]}),g.jsx("div",{className:"flex items-end",children:g.jsxs("div",{className:"flex items-center",children:[g.jsx("input",{type:"checkbox",id:"categoriesWidgetEnabled",name:"categoriesWidget.enabled",checked:r.categoriesWidget.enabled,onChange:f,className:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"}),g.jsx("label",{htmlFor:"categoriesWidgetEnabled",className:"ml-2 rtl:mr-2 block text-sm text-gray-900",children:"  "})]})})]})]})]})]})},TW=({platform:n})=>{switch(n){case"twitter":return g.jsx(SN,{});case"facebook":return g.jsx(IN,{});case"instagram":return g.jsx(iB,{});case"linkedin":return g.jsx(AN,{});case"youtube":return g.jsx(rB,{});case"github":return g.jsx(sB,{});default:return null}},OA=({links:n})=>n.length===0?null:g.jsxs("div",{className:"widget",children:[g.jsx("h3",{className:"widget-title",children:""}),g.jsx("div",{className:"social-links",children:n.map(e=>g.jsx("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",title:e.platform,children:g.jsx(TW,{platform:e.platform})},e.id))})]}),FA=({settings:n,allPosts:e,currentPost:t})=>{let i=[];n.sortBy==="category"&&t&&t.categoryId&&(i=e.filter(o=>o.id!==t.id&&o.categoryId===t.categoryId)),i.length===0&&(i=e.filter(o=>o.id!==(t==null?void 0:t.id)).sort((o,l)=>new Date(l.createdAt).getTime()-new Date(o.createdAt).getTime()));const r=i.slice(0,n.maxPosts);return r.length===0?null:g.jsxs("div",{className:"widget",children:[g.jsx("h3",{className:"widget-title",children:n.title.ar}),g.jsx("ul",{children:r.map(o=>g.jsx("li",{children:g.jsx(zt,{href:`#posts/${o.id}`,children:o.title.ar})},o.id))})]})},BA=({settings:n,categories:e})=>!n.enabled||e.length===0?null:g.jsxs("div",{className:"widget",children:[g.jsx("h3",{className:"widget-title",children:n.title.ar}),g.jsx("ul",{children:e.map(t=>g.jsx("li",{children:g.jsx(zt,{href:`#category/${t.slug}`,children:t.name})},t.id))})]}),wW=({settings:n,allPosts:e,currentPost:t,socialLinks:i,categories:r,activeTemplate:o})=>{const l=ae.useRef(null),u=ae.useRef({});return ae.useEffect(()=>{const f=l.current;if(!f||!o.htmlSidebar)return;Object.values(u.current).forEach(y=>y.unmount()),u.current={};const m=(y,v)=>{var b;const w=document.createNodeIterator(f,NodeFilter.SHOW_COMMENT);let E;const S=[];for(;E=w.nextNode();)((b=E.nodeValue)==null?void 0:b.trim())===y&&S.push(E);S.forEach((A,C)=>{var z;const R=document.createElement("div"),L=`${y}-${C}`;R.dataset.portalTarget=L,(z=A.parentNode)==null||z.replaceChild(R,A);const q=Mv.createRoot(R);q.render(v),u.current[L]=q})};return m("WIDGET_SOCIAL_LINKS",g.jsx(OA,{links:i})),m("WIDGET_RELATED_POSTS",g.jsx(FA,{settings:n.relatedPostsWidget,allPosts:e,currentPost:t})),m("WIDGET_CATEGORIES",g.jsx(BA,{settings:n.categoriesWidget,categories:r})),()=>{Object.values(u.current).forEach(y=>y.unmount()),u.current={}}},[o.htmlSidebar,i,n,e,t,r]),o.htmlSidebar?g.jsx("div",{ref:l,className:"blog-sidebar",dangerouslySetInnerHTML:{__html:o.htmlSidebar}}):g.jsxs("div",{className:"blog-sidebar",children:[g.jsx(OA,{links:i}),g.jsx(FA,{settings:n.relatedPostsWidget,allPosts:e,currentPost:t}),g.jsx(BA,{settings:n.categoriesWidget,categories:r})]})},xW=({shortname:n,url:e,identifier:t,title:i})=>(ae.useEffect(()=>{if(!n||typeof window>"u")return;window.disqus_config=function(){this.page.url=e,this.page.identifier=t,this.page.title=i};const r=document.getElementById("disqus-script");if(window.DISQUS)window.DISQUS.reset({reload:!0,config:function(){this.page.url=e,this.page.identifier=t,this.page.title=i}});else if(!r){const o=document.createElement("script");o.src=`https://${n}.disqus.com/embed.js`,o.id="disqus-script",o.setAttribute("data-timestamp",String(+new Date)),(document.body||document.head).appendChild(o)}return()=>{}},[n,e,t,i]),g.jsxs("div",{className:"mt-12 py-8 border-t",children:[g.jsx("div",{id:"disqus_thread"}),g.jsxs("noscript",{children:["Please enable JavaScript to view the ",g.jsx("a",{href:"https://disqus.com/?ref_noscript",children:"comments powered by Disqus."})]})]})),EW=({isAuthenticated:n})=>g.jsx("div",{className:"header-actions-container",children:n?g.jsx(zt,{href:"#admin",className:"header-action-button",children:" "}):g.jsx(zt,{href:"#login",className:"header-action-button",children:" "})}),bW=({currentPage:n,totalPages:e,basePath:t})=>{if(e<=1)return null;const r=(()=>{const o=[];if(e<=7)for(let l=1;l<=e;l++)o.push(l);else{o.push(1),n>3&&o.push("...");const l=Math.max(2,n-1),u=Math.min(e-1,n+1);for(let f=l;f<=u;f++)o.push(f);n<e-2&&o.push("..."),o.push(e)}return o})();return g.jsxs("nav",{"aria-label":"Pagination",className:"flex justify-center items-center space-x-2 my-8 text-sm",children:[g.jsx(zt,{href:n>1?`${t}${n-1}`:"#",className:`px-4 py-2 border rounded-md bg-white hover:bg-gray-100 ${n===1?"text-gray-400 cursor-not-allowed":""}`,onClick:o=>n===1&&o.preventDefault(),"aria-disabled":n===1,children:""}),r.map((o,l)=>g.jsx(ZA.Fragment,{children:typeof o=="string"?g.jsx("span",{className:"px-4 py-2 border rounded-md bg-white text-gray-500",children:o}):g.jsx(zt,{href:`${t}${o}`,className:`px-4 py-2 border rounded-md ${n===o?"bg-primary text-white border-primary":"bg-white hover:bg-gray-100"}`,"aria-current":n===o?"page":void 0,children:o})},l)),g.jsx(zt,{href:n<e?`${t}${n+1}`:"#",className:`px-4 py-2 border rounded-md bg-white hover:bg-gray-100 ${n===e?"text-gray-400 cursor-not-allowed":""}`,onClick:o=>n===e&&o.preventDefault(),"aria-disabled":n===e,children:""})]})},uP=({headline:n,buttonText:e,learnMoreUrl:t})=>g.jsxs("div",{className:"p-6 my-8 bg-primary/10 border-r-4 border-primary rounded-md",children:[g.jsx("p",{className:"text-lg font-semibold text-neutral mb-4",children:n}),g.jsx(zt,{href:t,className:"inline-block bg-primary text-white px-5 py-2 rounded-md text-sm font-bold hover:bg-secondary transition-colors",children:e})]}),cP=({searchSettings:n,seoSettings:e})=>{const t=e==null?void 0:e.programmableSearchEngineId;if(ae.useEffect(()=>{if(t){if(document.querySelector(`script[src="https://cse.google.com/cse.js?cx=${t}"]`))return;const o=document.createElement("script");return o.src=`https://cse.google.com/cse.js?cx=${t}`,o.async=!0,document.body.appendChild(o),()=>{document.body.removeChild(o)}}},[t]),t)return g.jsx("div",{className:"p-6 my-8 border rounded-lg bg-white shadow-sm",children:g.jsx("div",{className:"gcse-search"})});const i=r=>{if(n.searchUrl.startsWith("#")){r.preventDefault();const l=new FormData(r.currentTarget).get("q");window.location.hash=`${n.searchUrl}?q=${encodeURIComponent(l)}`}};return g.jsxs("div",{className:"p-6 my-8 border rounded-lg bg-white shadow-sm",children:[g.jsx("h3",{className:"text-xl font-bold text-center text-neutral mb-4",children:n.title}),g.jsxs("form",{action:n.searchUrl.startsWith("#")?void 0:n.searchUrl,method:"GET",onSubmit:i,className:"space-y-4",children:[g.jsxs("div",{children:[g.jsx("label",{htmlFor:"query",className:"block text-sm font-medium text-gray-700 mb-1",children:n.inputLabel}),g.jsx("input",{type:"text",id:"query",name:"q",className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-primary bg-white text-gray-900",placeholder:n.inputPlaceholder})]}),g.jsx("button",{type:"submit",className:"w-full bg-primary text-white py-2.5 rounded-md font-semibold hover:bg-secondary transition-colors",children:g.jsx("span",{children:n.buttonText})})]})]})},SW=()=>g.jsx(zt,{href:"#admin",className:"admin-fab",title:" ",children:g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24",strokeWidth:"1.5",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 6h9.75M10.5 6a1.5 1.5 0 1 1-3 0m3 0a1.5 1.5 0 1 0-3 0M3.75 6H7.5m3 12h9.75m-9.75 0a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m-3.75 0H7.5m9-6h3.75m-3.75 0a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m-9.75 0h9.75"})})}),I_=(n,e)=>{if(!n||!e)return n;let t=n;const i=Object.keys(e).sort((r,o)=>o.length-r.length);for(const r of i){const o=e[r];t=t.split(r).join(o)}return t},IW=({code:n})=>{const e=ae.useRef(null);return ae.useEffect(()=>{try{(window.adsbygoogle=window.adsbygoogle||[]).push({})}catch(t){console.error("AdSense push error: ",t)}},[n]),g.jsx("div",{ref:e,dangerouslySetInnerHTML:{__html:n}})},Pv=(n,e)=>{let t=n;const i=/\{\{([A-Z_]+)\}\}/g;t=t.replace(i,(o,l)=>{var m,y,v,w,E,S,b,A,C,R;const u=e.lang!=="ar"?`${e.lang}/`:"",f=e.isEcommerce?"products":"posts";switch(l){case"SITE_TITLE":return e.siteName||"";case"SITE_DESCRIPTION":return e.siteDescription||"";case"POST_ID":return((m=e.post)==null?void 0:m.id)||((y=e.page)==null?void 0:y.id)||"";case"POST_URL":return e.post?`#${u}${f}/${e.post.id}`:e.page?`#${u}${e.page.slug}`:"#";case"POST_TITLE":return((v=e.post)==null?void 0:v.title)||((w=e.page)==null?void 0:w.title)||"";case"POST_IMAGE_URL":return((E=e.post)==null?void 0:E.imageUrl)||`https://picsum.photos/seed/${(S=e.post)==null?void 0:S.id}/1280/720`;case"POST_DATE":return e.post?new Date(e.post.createdAt).toLocaleDateString("ar-EG",{year:"numeric",month:"long",day:"numeric"}):"";case"POST_CONTENT":let L=((b=e.post)==null?void 0:b.content)||((A=e.page)==null?void 0:A.content)||"";return L&&(L=L.replace(/\[RELATED_POSTS\]/g,"<!-- RELATED_POSTS_CARDS -->"),L=L.replace(/\[AD_UNIT:(\S+?)\]/g,(q,z)=>`<!-- AD_UNIT:${z} -->`)),L;case"POST_EXCERPT":return((C=e.post)==null?void 0:C.content.replace(/<[^>]+>/g,"").substring(0,150))+"..."||"";case"POST_IMAGE_CAPTION":return((R=e.post)==null?void 0:R.imageCaption)||"";case"POST_CATEGORY_URL":return e.category?`#/category/${e.category.slug}`:"#";case"POST_CATEGORY_NAME":return e.category?e.category.name:"";case"POST_CATEGORY_SLUG":return e.category?e.category.slug:"";case"CURRENT_YEAR":return new Date().getFullYear().toString();case"PRODUCT_PRICE":return e.post&&typeof e.post.price=="number"?`$${e.post.price.toFixed(2)}`:"";case"ADD_TO_CART_URL":return"#checkout";default:return o}});const r=/\{\{([A-Z_]+)_START\}\}([\s\S]*?)\{\{([A-Z_]+)_END\}\}/g;return t=t.replace(r,(o,l,u,f)=>{var y,v;if(l!==f)return o;let m=!1;switch(l){case"POST_IMAGE_CAPTION":m=!!((y=e.post)!=null&&y.imageCaption);break;case"POST_IMAGE_URL":m=!!((v=e.post)!=null&&v.imageUrl);break}return m?u:""}),t},AW=(n,e=[],t=[],i="ar",r=!1)=>{const o=/\{\{POSTS_LOOP_START\}\}([\s\S]*?)\{\{POSTS_LOOP_END\}\}/g;return n.replace(o,(l,u)=>e.map(f=>{const m=t.find(w=>w.id===f.categoryId),y=f.title[i]||f.title.ar,v=f.content[i]||f.content.ar;return Pv(u,{post:{...f,title:y,content:v},category:m,lang:i,isEcommerce:r})}).join(""))},CW=({posts:n,templateId:e,lang:t})=>{var u;if(!n||n.length===0)return null;const i=t!=="ar"?`${t}/`:"",r=typeof((u=n[0])==null?void 0:u.price)=="number",o=r?"products":"posts";return(()=>{const f=m=>m.title[t]||m.title.ar;switch(e){case"readex":return g.jsxs("div",{className:"readex-related-posts",children:[g.jsx("h3",{children:"  "}),g.jsx("div",{className:"readex-related-grid",children:n.map(m=>g.jsx("a",{href:`#${i}${o}/${m.id}`,className:"readex-related-card",children:g.jsx("h4",{children:f(m)})},m.id))})]});case"al-arabiya":return g.jsxs(g.Fragment,{children:[g.jsx("h3",{children:" "}),g.jsx("div",{className:"magazine-related-grid",children:n.map(m=>g.jsxs("a",{href:`#${i}${o}/${m.id}`,className:"magazine-related-card",children:[g.jsx("img",{src:m.imageUrl||`https://picsum.photos/seed/${m.id}/400/250`,alt:m.title.ar}),g.jsx("h4",{children:f(m)})]},m.id))})]});case"creative-folio":return g.jsxs(g.Fragment,{children:[g.jsx("h3",{children:" "}),g.jsx("div",{className:"folio-related-grid",children:n.map(m=>g.jsxs("a",{href:`#${i}${o}/${m.id}`,className:"folio-related-card",children:[g.jsx("img",{src:m.imageUrl||`https://picsum.photos/seed/${m.id}/400/300`,alt:m.title.ar}),g.jsx("div",{className:"overlay",children:g.jsx("h4",{children:f(m)})})]},m.id))})]});case"full-control":default:return g.jsxs("div",{className:"related-posts-container",children:[g.jsx("h3",{children:r?" ":"  "}),g.jsx("ul",{children:n.map(m=>g.jsx("li",{children:g.jsx("a",{href:`#${i}${o}/${m.id}`,children:f(m)})},m.id))})]})}})()},Mf=n=>{const{mode:e,activeTemplate:t,posts:i,post:r,page:o,category:l,sidebarProps:u,disqusProps:f,isAuthenticated:m,showAdminLogin:y,relatedPosts:v,paginationProps:w,marketingSettings:E,adUnits:S,lang:b="ar",isEcommerce:A,seoSettings:C}=n,R=ae.useRef(null),L=ae.useRef({}),q=ae.useMemo(()=>e==="home"?t.htmlHome||"":e==="post"?t.htmlPost||"":e==="page"&&t.htmlPage||"",[e,t]),z=ae.useMemo(()=>{let H=q;t.htmlHeader&&(H=H.replace(/<!--HEADER-->/g,t.htmlHeader)),t.htmlFooter&&(H=H.replace(/<!--FOOTER-->/g,t.htmlFooter));const O={siteName:n.siteName,siteDescription:n.siteDescription,post:r,page:o,category:l,lang:b,isEcommerce:A};return e==="home"&&(H=AW(H,i,u==null?void 0:u.categories,b,A)),H=Pv(H,O),I_(H,t.assetMap)},[q,t,i,r,o,l,n.siteName,n.siteDescription,e,u,b,A]);return ae.useEffect(()=>{var F,k;const H=R.current;if(!H)return;const O=[];if(t.customCss){const ne=document.createElement("div");ne.innerHTML=I_(t.customCss,t.assetMap),ne.querySelectorAll("link, style").forEach(te=>{let X;if(te.tagName.toLowerCase()==="link"){X=document.createElement("link");for(const _e of te.attributes)X.setAttribute(_e.name,_e.value)}else{X=document.createElement("style"),X.innerHTML=te.innerHTML;for(const _e of te.attributes)X.setAttribute(_e.name,_e.value)}X.dataset.templateAsset="true",document.head.appendChild(X),O.push(X)})}if(t.customJs){const ne=document.createElement("div");ne.innerHTML=I_(t.customJs,t.assetMap),Array.from(ne.querySelectorAll("script")).forEach(te=>{const X=document.createElement("script");for(const _e of te.attributes)X.setAttribute(_e.name,_e.value);X.innerHTML=te.innerHTML,X.dataset.templateAsset="true",document.body.appendChild(X),O.push(X)})}Object.values(L.current).forEach(ne=>ne.unmount()),L.current={};const V=ne=>{const X=ne.target.closest('a[href^="#"]');if(X){const _e=X.getAttribute("href");_e&&(ne.preventDefault(),window.location.hash=_e)}};H.addEventListener("click",V),H.innerHTML=z;const U=(ne,te,X)=>{var K;const _e=document.createElement("div");_e.dataset.portalTarget=te,(K=ne.parentNode)==null||K.replaceChild(_e,ne);const me=Mv.createRoot(_e);me.render(X),L.current[te]=me},j=(ne,te)=>{var K;const X=document.createNodeIterator(H,NodeFilter.SHOW_COMMENT);let _e;const me=[];for(;_e=X.nextNode();)((K=_e.nodeValue)==null?void 0:K.trim())===ne&&me.push(_e);me.forEach((Y,Z)=>U(Y,`${ne}-${Z}`,te))},J=()=>{var me;if(!S||S.length===0)return;const ne=/AD_UNIT:(\S+)/,te=document.createNodeIterator(H,NodeFilter.SHOW_COMMENT);let X;const _e=[];for(;X=te.nextNode();){const K=(me=X.nodeValue)==null?void 0:me.trim().match(ne);K&&K[1]&&_e.push({node:X,adId:K[1]})}_e.forEach(({node:K,adId:Y},Z)=>{const he=S.find(ve=>ve.id===Y);he&&U(K,`ad-unit-${Y}-${Z}`,g.jsx(IW,{code:he.code}))})};return(e==="post"&&(r==null?void 0:r.showSidebar)||e==="page"&&(o==null?void 0:o.showSidebar))&&j("SIDEBAR",g.jsx(wW,{...u,activeTemplate:t})),e==="post"&&(f!=null&&f.shortname)&&!A&&j("COMMENTS",g.jsx(xW,{...f})),v&&v.length>0&&j("RELATED_POSTS_CARDS",g.jsx(CW,{posts:v,templateId:t.id,lang:b})),(F=E==null?void 0:E.ctaBanner)!=null&&F.enabled&&j("MARKETING_WIDGET:CTA_BANNER",g.jsx(uP,{...E.ctaBanner})),(k=E==null?void 0:E.searchWidget)!=null&&k.enabled&&C&&j("MARKETING_WIDGET:SEARCH_WIDGET",g.jsx(cP,{searchSettings:E.searchWidget,seoSettings:C})),m&&y&&j("ADMIN_BUTTON_PLACEHOLDER",g.jsx(SW,{})),w&&j("PAGINATION",g.jsx(bW,{...w})),j("HEADER_ACTIONS_PLACEHOLDER",g.jsx(EW,{isAuthenticated:m})),J(),()=>{O.forEach(ne=>ne.remove()),H&&H.removeEventListener("click",V),Object.values(L.current).forEach(ne=>ne.unmount()),L.current={}}},[z,t,S]),g.jsx("div",{ref:R,className:"template-root"})},qA=({post:n,allPosts:e,categories:t,seoSettings:i,relatedPostsGlobalSettings:r,marketingSettings:o,activeTemplate:l,sidebarProps:u,isAuthenticated:f,showAdminLogin:m,lang:y,adUnits:v})=>{const w=ae.useMemo(()=>{const A=n.title[y]||n.title.ar,C=n.content[y]||n.content.ar;return{...n,title:A,content:C}},[n,y]),E=ae.useMemo(()=>{if(e.length<=1)return[];let A=e.filter(C=>C.id!==n.id&&C.categoryId===n.categoryId);return A.length===0&&(A=e.filter(C=>C.id!==n.id).sort((C,R)=>new Date(R.createdAt).getTime()-new Date(C.createdAt).getTime())),A.slice(0,r.placeholderMaxPosts)},[n,e,r]),S={shortname:i.disqusShortname,url:`${window.location.origin}${window.location.pathname}${window.location.hash}`,identifier:n.id,title:w.title},b=ae.useMemo(()=>t.find(A=>A.id===n.categoryId),[t,n.categoryId]);return g.jsx(Mf,{mode:"post",activeTemplate:l,post:w,category:b,relatedPosts:E,disqusProps:S,sidebarProps:u,isAuthenticated:f,showAdminLogin:m,marketingSettings:o,seoSettings:i,adUnits:v,lang:y})},A_=6,fm=({posts:n,siteName:e,siteDescription:t,activeTemplate:i,isAuthenticated:r,showAdminLogin:o,currentPage:l,lang:u,blogPath:f="",seoSettings:m})=>{const y=Math.ceil(n.length/A_),v=n.slice((l-1)*A_,l*A_),w=u!=="ar"?`${u}/`:"",E={currentPage:l,totalPages:y,basePath:`#${w}${f}page/`};return g.jsx(Mf,{mode:"home",activeTemplate:i,posts:v,siteName:e,siteDescription:t,isAuthenticated:r,showAdminLogin:o,paginationProps:y>1?E:void 0,lang:u,seoSettings:m})},RW=({page:n,activeTemplate:e,sidebarProps:t,isAuthenticated:i,showAdminLogin:r,lang:o,seoSettings:l})=>g.jsx(Mf,{mode:"page",activeTemplate:e,page:n,sidebarProps:t,isAuthenticated:i,showAdminLogin:r,lang:o,seoSettings:l}),NW=({activeTemplate:n,isAuthenticated:e,showAdminLogin:t})=>{const i={id:"not-found",title:"404 -   ",slug:"404",content:`
            <div style="text-align: center; padding: 5rem 1rem;">
                <h1 style="font-size: 2.5em; font-weight: bold; margin-bottom: 1rem;">    .</h1>
                <p style="color: #6b7280; margin-bottom: 2rem;">          .</p>
                <a href="#home" style="display: inline-block; padding: 0.75rem 1.5rem; background-color: rgb(var(--color-primary)); color: white; text-decoration: none; border-radius: 0.375rem; font-weight: 600; transition: background-color 0.2s;">
                       
                </a>
            </div>
        `,showSidebar:!1,createdAt:new Date().toISOString(),status:"published"};return g.jsx(Mf,{mode:"page",activeTemplate:n,page:i,sidebarProps:{},isAuthenticated:e,showAdminLogin:t})},C_=6,zA=({allPosts:n,category:e,currentPage:t,activeTemplate:i,siteName:r,isAuthenticated:o,showAdminLogin:l,lang:u,blogPath:f="",seoSettings:m})=>{const y=n.filter(b=>b.categoryId===e.id),v=Math.ceil(y.length/C_),w=y.slice((t-1)*C_,t*C_),E=u!=="ar"?`${u}/`:"",S={currentPage:t,totalPages:v,basePath:`#${E}${f}category/${e.slug}/page/`};return g.jsx(Mf,{mode:"home",activeTemplate:i,posts:w,siteName:`: ${e.name}`,siteDescription:`     ${e.name}  ${r}`,paginationProps:v>1?S:void 0,isAuthenticated:o,showAdminLogin:l,lang:u,seoSettings:m})},PW=({settings:n,onSave:e,activeTemplate:t,cmsLang:i})=>{const[r,o]=ae.useState(n),[l,u]=ae.useState(!1),f=()=>{e(r),u(!0),setTimeout(()=>u(!1),3e3)},m=w=>{const{name:E,value:S}=w.target,b=E.split(".");b.length>1?o(A=>{const C=JSON.parse(JSON.stringify(A));let R=C;for(let L=0;L<b.length-1;L++)R=R[b[L]];return R[b[b.length-1]]=S,C}):o(A=>({...A,[E]:S}))},y=[{key:"body",label:"  (Body)",hasAlign:!0,hasLineHeight:!0},{key:"siteTitle",label:"  (Header)"},{key:"siteTagline",label:"  (Tagline)"},{key:"postTitle",label:"  (H1)"},{key:"h2",label:" H2",hasAlign:!0,hasLineHeight:!0},{key:"h3",label:" H3",hasAlign:!0,hasLineHeight:!0},{key:"h4",label:" H4",hasAlign:!0,hasLineHeight:!0},{key:"h5",label:" H5",hasAlign:!0,hasLineHeight:!0}],v=ae.useMemo(()=>t.supportedTypography&&t.supportedTypography.length>0?y.filter(w=>t.supportedTypography.includes(w.key)):y,[t]);return g.jsxs("div",{className:"p-8",children:[g.jsxs("div",{className:"flex justify-between items-start mb-6",children:[g.jsxs("div",{children:[g.jsx("h1",{className:"text-3xl font-bold text-neutral",children:" "}),g.jsx("p",{className:"text-gray-600 mt-1",children:"      ."})]}),g.jsx("button",{onClick:f,className:`px-6 py-2 rounded-md font-semibold transition-all duration-300 ${l?"bg-green-500 text-white":"bg-primary text-white hover:bg-secondary"}`,children:Q(l?"saved":"saveChanges",i)})]}),g.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[g.jsx("h2",{className:"text-xl font-semibold mb-4 text-neutral",children:" "}),v.length>0?g.jsx("div",{className:"space-y-4",children:v.map(({key:w,label:E,hasAlign:S,hasLineHeight:b})=>{var A,C;return g.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-5 items-center gap-4 border-b pb-4 last:border-b-0 last:pb-0",children:[g.jsx("label",{className:"col-span-1 text-sm font-medium text-gray-700",children:E}),g.jsx("div",{className:"col-span-1",children:S&&g.jsxs("select",{name:`${w}.textAlign`,value:((A=r[w])==null?void 0:A.textAlign)||"right",onChange:m,className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-primary bg-white text-gray-900",children:[g.jsx("option",{value:"right",children:""}),g.jsx("option",{value:"center",children:""}),g.jsx("option",{value:"left",children:""})]})}),g.jsx("div",{className:"col-span-1",children:b&&g.jsx("div",{className:"flex items-center",children:g.jsx("input",{type:"number",step:"0.1",name:`${w}.lineHeight`,value:((C=r[w])==null?void 0:C.lineHeight)||"1.5",onChange:R=>m({target:{name:`${w}.lineHeight`,value:R.target.value}}),className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-primary bg-white text-gray-900"})})}),g.jsx("div",{className:"col-span-1",children:g.jsxs("div",{className:"flex items-center",children:[g.jsx("input",{type:"number",step:"0.1",name:`${w}.fontSize`,value:parseFloat(r[w].fontSize),onChange:R=>m({target:{name:`${w}.fontSize`,value:`${R.target.value}rem`}}),className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-primary bg-white text-gray-900"}),g.jsx("span",{className:"mr-2 rtl:ml-2 text-sm text-gray-500",children:"rem"})]})}),g.jsx("div",{className:"col-span-1",children:g.jsx("input",{type:"color",name:`${w}.color`,value:r[w].color,onChange:m,className:"w-full h-10 p-1 border rounded-md bg-white"})})]},w)})}):g.jsxs("div",{className:"text-center py-8 px-4 bg-gray-50 rounded-md",children:[g.jsx("p",{className:"text-gray-600",children:"       ."}),g.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"        CSS  ."})]})]})]})},jA=[{name:"Arabic",code:"ar",dir:"rtl"},{name:"English",code:"en",dir:"ltr"},{name:"French",code:"fr",dir:"ltr"},{name:"German",code:"de",dir:"ltr"},{name:"Spanish",code:"es",dir:"ltr"},{name:"Italian",code:"it",dir:"ltr"},{name:"Portuguese",code:"pt",dir:"ltr"},{name:"Russian",code:"ru",dir:"ltr"},{name:"Chinese (Simplified)",code:"zh",dir:"ltr"},{name:"Japanese",code:"ja",dir:"ltr"},{name:"Korean",code:"ko",dir:"ltr"},{name:"Hindi",code:"hi",dir:"ltr"},{name:"Turkish",code:"tr",dir:"ltr"},{name:"Dutch",code:"nl",dir:"ltr"},{name:"Swedish",code:"sv",dir:"ltr"},{name:"Norwegian",code:"no",dir:"ltr"},{name:"Danish",code:"da",dir:"ltr"},{name:"Finnish",code:"fi",dir:"ltr"},{name:"Polish",code:"pl",dir:"ltr"},{name:"Hebrew",code:"he",dir:"rtl"},{name:"Urdu",code:"ur",dir:"rtl"},{name:"Persian (Farsi)",code:"fa",dir:"rtl"}],kW=({isOpen:n,onClose:e,onAdd:t,existingCodes:i})=>{const[r,o]=ae.useState(null),[l,u]=ae.useState("ltr");if(!n)return null;const f=jA.filter(v=>!i.includes(v.code)),m=v=>{const w=jA.find(E=>E.code===v);w&&(o(w),u(w.dir))},y=()=>{r&&(t({code:r.code,name:r.name,direction:l}),e())};return g.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center",onMouseDown:e,children:g.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-md",onMouseDown:v=>v.stopPropagation(),children:[g.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"  "}),g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" "}),g.jsxs("select",{onChange:v=>m(v.target.value),className:"w-full p-2 border border-gray-300 rounded-md bg-white text-black focus:ring-2 focus:ring-primary",children:[g.jsx("option",{value:"",children:"--  --"}),f.map(v=>g.jsx("option",{value:v.code,children:v.name},v.code))]})]}),r&&g.jsxs(g.Fragment,{children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" "}),g.jsx("input",{type:"text",readOnly:!0,value:r.code,className:"w-full p-2 border border-gray-300 rounded-md bg-white text-black"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" "}),g.jsxs("select",{value:l,onChange:v=>u(v.target.value),className:"w-full p-2 border border-gray-300 rounded-md bg-white text-black focus:ring-2 focus:ring-primary",children:[g.jsx("option",{value:"ltr",children:"   (LTR)"}),g.jsx("option",{value:"rtl",children:"   (RTL)"})]})]})]})]}),g.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[g.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 bg-gray-200 rounded-md",children:""}),g.jsx("button",{type:"button",onClick:y,disabled:!r,className:"px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-md disabled:bg-gray-300",children:""})]})]})})},DW=({settings:n,onSave:e,developerSettings:t,cmsLang:i})=>{var O,V,U,j,J;const[r,o]=ae.useState(n),[l,u]=ae.useState(!1),[f,m]=ae.useState(!1),[y,v]=ae.useState(0),[w,E]=ae.useState(!1),[S,b]=ae.useState(null),A=t.isUnlocked,C=()=>{e(r),u(!0),setTimeout(()=>u(!1),3e3)},R=M=>{const{name:F,value:k,type:ne}=M.target,te=ne==="checkbox"?M.target.checked:void 0,X=F.split(".");X.length>1?o(_e=>{const me=JSON.parse(JSON.stringify(_e));let K=me;for(let Y=0;Y<X.length-1;Y++)K=K[X[Y]]=K[X[Y]]||{};return K[X[X.length-1]]=ne==="checkbox"?te:k,me}):o(_e=>({..._e,[F]:ne==="checkbox"?te:k}))},L=M=>{o(F=>({...F,supportedLanguages:[...F.supportedLanguages,M]}))},q=M=>{if(r.supportedLanguages.length<=1){alert("    .");return}window.confirm(`      (${M})       .`)&&(o(F=>{const k=F.supportedLanguages.filter(_e=>_e.code!==M),ne={...F.siteName},te={...F.siteDescription},X={...F.siteMetaDescription};return delete ne[M],delete te[M],delete X[M],{...F,supportedLanguages:k,siteName:ne,siteDescription:te,siteMetaDescription:X}}),v(0))},z=async()=>{const M=r.siteName.ar,F=r.siteDescription.ar,k=r.siteMetaDescription.ar;if(!M||!F||!k){b("      .");return}const ne=r.supportedLanguages.filter(te=>te.code!=="ar");if(ne.length===0){b("     .");return}b(null),E(!0);try{const te=await lW(t.aiSettings.geminiApiKey,M,F,k,ne.map(X=>({code:X.code,name:X.name})));o(X=>{const _e={...X};return te.forEach(me=>{_e.siteName[me.langCode]=me.siteName,_e.siteDescription[me.langCode]=me.siteDescription,_e.siteMetaDescription[me.langCode]=me.siteMetaDescription}),_e})}catch(te){b(te.message)}finally{E(!1)}},H=r.supportedLanguages[y];return g.jsxs(g.Fragment,{children:[g.jsx(kW,{isOpen:f,onClose:()=>m(!1),onAdd:L,existingCodes:r.supportedLanguages.map(M=>M.code)}),g.jsxs("div",{className:"p-8",children:[g.jsxs("div",{className:"flex justify-between items-start mb-6",children:[g.jsxs("div",{children:[g.jsx("h1",{className:"text-3xl font-bold text-neutral",children:" SEO"}),g.jsx("p",{className:"text-gray-600 mt-1",children:"      ."})]}),g.jsx("button",{onClick:C,className:`px-6 py-2 rounded-md font-semibold transition-all duration-300 ${l?"bg-green-500 text-white":"bg-green-600 text-white hover:bg-green-700"}`,children:Q(l?"saved":"saveChanges",i)})]}),g.jsxs("div",{className:"space-y-8",children:[g.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[g.jsxs("div",{className:"flex flex-wrap gap-4 justify-between items-center mb-4",children:[g.jsx("h2",{className:"text-xl font-semibold text-neutral",children:" "}),A&&g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsxs("button",{onClick:z,disabled:w||!t.aiSettings.geminiApiKey,className:"flex items-center gap-2 text-sm bg-indigo-600 text-white font-semibold px-3 py-1.5 rounded-md hover:bg-indigo-700 disabled:bg-gray-400 disabled:cursor-not-allowed",children:[w?g.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):g.jsx(op,{className:"w-4 h-4"}),g.jsx("span",{children:"   "})]}),g.jsxs("button",{onClick:()=>m(!0),className:"flex items-center gap-1 text-sm bg-green-600 text-white font-semibold px-3 py-1.5 rounded-md hover:bg-green-700",children:[g.jsx(kf,{className:"w-4 h-4"}),g.jsx("span",{children:" "})]})]})]}),A?g.jsxs(g.Fragment,{children:[S&&g.jsx("p",{className:"text-red-500 text-sm mb-4 bg-red-50 p-3 rounded-md",children:S}),!t.aiSettings.geminiApiKey&&g.jsx("p",{className:"text-amber-700 text-sm mb-4 bg-amber-50 p-3 rounded-md",children:"  .    Gemini API   ."}),r.supportedLanguages.length>1&&g.jsxs("div",{className:"flex justify-between items-center bg-slate-200 p-2 rounded-lg mb-6 border border-slate-300",children:[g.jsx("button",{onClick:()=>v(M=>(M-1+r.supportedLanguages.length)%r.supportedLanguages.length),className:"p-2 rounded-full hover:bg-slate-300 text-slate-700 hover:text-slate-900",children:g.jsx("svg",{className:"w-5 h-5 rtl:rotate-180",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),g.jsxs("div",{className:"text-center font-semibold text-slate-900",children:[g.jsxs("span",{children:[H.name," (",H.code,")"]}),y>0&&g.jsx("button",{onClick:()=>q(H.code),className:"text-red-500 hover:text-red-700 mr-2 text-xs p-1",title:" ",children:g.jsx(Yr,{className:"w-4 h-4 inline-block"})})]}),g.jsx("button",{onClick:()=>v(M=>(M+1)%r.supportedLanguages.length),className:"p-2 rounded-full hover:bg-slate-300 text-slate-700 hover:text-slate-900",children:g.jsx("svg",{className:"w-5 h-5 rtl:rotate-180",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[g.jsxs("div",{children:[g.jsxs("label",{htmlFor:`siteName.${H.code}`,className:"block text-sm font-medium text-gray-700 mb-1",children:["  (",H.name,")"]}),g.jsx("input",{type:"text",id:`siteName.${H.code}`,name:`siteName.${H.code}`,value:r.siteName[H.code]||"",onChange:R,className:`w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary bg-white text-black ${H.direction==="rtl"?"rtl":"ltr"}`})]}),g.jsxs("div",{children:[g.jsxs("label",{htmlFor:`siteDescription.${H.code}`,className:"block text-sm font-medium text-gray-700 mb-1",children:["  () (",H.name,")"]}),g.jsx("input",{type:"text",id:`siteDescription.${H.code}`,name:`siteDescription.${H.code}`,value:r.siteDescription[H.code]||"",onChange:R,className:`w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary bg-white text-black ${H.direction==="rtl"?"rtl":"ltr"}`})]})]}),g.jsxs("div",{className:"mb-6",children:[g.jsxs("label",{htmlFor:`siteMetaDescription.${H.code}`,className:"block text-sm font-medium text-gray-700 mb-1",children:["  (Meta Description) (",H.name,")"]}),g.jsx("textarea",{id:`siteMetaDescription.${H.code}`,name:`siteMetaDescription.${H.code}`,value:((V=r.siteMetaDescription)==null?void 0:V[H.code])||"",onChange:R,rows:3,className:`w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary bg-white text-black ${H.direction==="rtl"?"rtl":"ltr"}`}),g.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"    .     150-160 ."})]})]}):g.jsxs(g.Fragment,{children:[g.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"      ."}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[g.jsxs("div",{children:[g.jsx("label",{htmlFor:"siteName.ar",className:"block text-sm font-medium text-gray-700 mb-1",children:"  ()"}),g.jsx("input",{type:"text",id:"siteName.ar",name:"siteName.ar",value:r.siteName.ar||"",onChange:R,className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary bg-white text-black rtl"})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"siteDescription.ar",className:"block text-sm font-medium text-gray-700 mb-1",children:"  ()"}),g.jsx("input",{type:"text",id:"siteDescription.ar",name:"siteDescription.ar",value:r.siteDescription.ar||"",onChange:R,className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary bg-white text-black rtl"})]})]}),g.jsxs("div",{className:"mb-6",children:[g.jsx("label",{htmlFor:"siteMetaDescription.ar",className:"block text-sm font-medium text-gray-700 mb-1",children:"  ()"}),g.jsx("textarea",{id:"siteMetaDescription.ar",name:"siteMetaDescription.ar",value:((O=r.siteMetaDescription)==null?void 0:O.ar)||"",onChange:R,rows:3,className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary bg-white text-black rtl"})]}),g.jsxs("div",{className:"mt-6 pt-6 border-t-2 border-dashed border-gray-200 text-center bg-gray-50 py-6 rounded-lg",children:[g.jsx("div",{className:"flex justify-center items-center text-gray-400 mb-2",children:g.jsx(wT,{className:"w-8 h-8"})}),g.jsx("h3",{className:"font-semibold text-lg text-gray-800",children:" :   "}),g.jsx("p",{className:"text-gray-600 mt-1 max-w-md mx-auto",children:"          ."}),g.jsx(zt,{href:"#admin/developer",className:"mt-4 inline-block bg-primary text-white px-5 py-2 rounded-lg font-semibold hover:bg-secondary transition-colors",children:"  "})]})]})]}),g.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[g.jsx("h2",{className:"text-xl font-semibold mb-4 text-neutral",children:"  "}),g.jsxs("div",{className:"space-y-4",children:[Object.entries({googleAnalytics:"Google Analytics",googleSearchConsole:"Google Search Console",bingWebmaster:"Bing Webmaster Tools"}).map(([M,F])=>g.jsxs("div",{className:"flex items-center space-x-4 rtl:space-x-reverse border-b pb-4 last:border-0 last:pb-0",children:[g.jsxs("div",{className:"flex-shrink-0 w-48",children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700",children:F}),g.jsxs("label",{htmlFor:`${M}.enabled`,className:"cursor-pointer text-xs flex items-center mt-1",children:[g.jsx("input",{type:"checkbox",id:`${M}.enabled`,name:`${M}.enabled`,checked:r[M].enabled,onChange:R,className:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"}),g.jsx("span",{className:"mr-2 rtl:ml-2",children:""})]})]}),g.jsx("input",{type:"text",name:`${M}.id`,value:r[M].id,onChange:R,className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-primary disabled:bg-gray-100 bg-white text-neutral",disabled:!r[M].enabled})]},M)),g.jsx("div",{className:"border-t pt-4 mt-4",children:g.jsxs("div",{className:"flex items-center space-x-4 rtl:space-x-reverse",children:[g.jsxs("div",{className:"flex-shrink-0 w-48",children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Google AdSense"}),g.jsxs("label",{htmlFor:"adsense.enabled",className:"cursor-pointer text-xs flex items-center mt-1",children:[g.jsx("input",{type:"checkbox",id:"adsense.enabled",name:"adsense.enabled",checked:((U=r.adsense)==null?void 0:U.enabled)||!1,onChange:R,className:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"}),g.jsx("span",{className:"mr-2 rtl:ml-2",children:""})]})]}),g.jsxs("div",{className:"w-full",children:[g.jsx("input",{type:"text",name:"adsense.id",value:((j=r.adsense)==null?void 0:j.id)||"",onChange:R,className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-primary disabled:bg-gray-100 bg-white text-neutral ltr",disabled:!((J=r.adsense)!=null&&J.enabled),placeholder:"ca-pub-xxxxxxxxxxxxxxxx"}),g.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"   (Publisher ID)  ."})]})]})}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 pt-4 border-t mt-4",children:[g.jsxs("div",{children:[g.jsx("label",{htmlFor:"disqusShortname",className:"block text-sm font-medium text-gray-700 mb-1",children:"Disqus Shortname"}),g.jsx("input",{type:"text",id:"disqusShortname",name:"disqusShortname",value:r.disqusShortname,onChange:R,className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-primary ltr bg-white text-neutral",placeholder:"your-site-shortname"})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"programmableSearchEngineId",className:"block text-sm font-medium text-gray-700 mb-1",children:"Programmable Search Engine ID"}),g.jsx("input",{type:"text",id:"programmableSearchEngineId",name:"programmableSearchEngineId",value:r.programmableSearchEngineId,onChange:R,className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-primary ltr bg-white text-neutral",placeholder:"Search engine ID"})]})]})]})]}),g.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[g.jsx("h2",{className:"text-xl font-semibold mb-4 text-neutral",children:" "}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[g.jsxs("div",{children:[g.jsx("h3",{className:"font-medium text-gray-800 mb-2",children:"Robots.txt"}),g.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"      ."}),g.jsx("textarea",{name:"robotsTxtContent",value:r.robotsTxtContent,onChange:R,rows:5,className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-primary font-mono text-sm ltr bg-white text-neutral"})]}),g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{children:[g.jsx("h3",{className:"font-medium text-gray-800 mb-2",children:"  (Sitemap)"}),g.jsxs("label",{htmlFor:"enableSitemap",className:"flex items-center cursor-pointer",children:[g.jsx("input",{type:"checkbox",id:"enableSitemap",name:"enableSitemap",checked:r.enableSitemap,onChange:R,className:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"}),g.jsx("span",{className:"mr-2 rtl:ml-2 text-sm text-gray-700",children:"   (sitemap.xml)"})]})]}),g.jsxs("div",{children:[g.jsx("h3",{className:"font-medium text-gray-800 mb-2",children:""}),g.jsxs("label",{htmlFor:"requireImageAlts",className:"flex items-center cursor-pointer",children:[g.jsx("input",{type:"checkbox",id:"requireImageAlts",name:"requireImageAlts",checked:r.requireImageAlts,onChange:R,className:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"}),g.jsx("span",{className:"mr-2 rtl:ml-2 text-sm text-gray-700",children:"      (Alt text) "})]})]}),g.jsxs("div",{children:[g.jsx("h3",{className:"font-medium text-gray-800 mb-2",children:"  "}),g.jsxs("label",{htmlFor:"showAdminLogin",className:"flex items-center cursor-pointer",children:[g.jsx("input",{type:"checkbox",id:"showAdminLogin",name:"showAdminLogin",checked:r.showAdminLogin,onChange:R,className:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"}),g.jsx("span",{className:"mr-2 rtl:ml-2 text-sm text-gray-700",children:'  " "  '})]})]})]})]})]})]})]})]})},GA=6,MW=({posts:n,pages:e,categories:t,seoSettings:i,cmsLang:r})=>{const[o,l]=ae.useState(i.supportedLanguages[0].code),u=v=>{var L;const w=[],E=i.siteUrl.replace(/\/$/,"");if(!E)return[Q("sitemapSetUrlError",r)];const S=((L=i.supportedLanguages[0])==null?void 0:L.code)||"ar",b=v.code===S?"":`${v.code}/`,A=n.filter(q=>q.status==="published"),C=e.filter(q=>q.status==="published");w.push(`${E}/#${b}`);const R=Math.ceil(A.length/GA);for(let q=2;q<=R;q++)w.push(`${E}/#${b}page/${q}`);return A.forEach(q=>{w.push(`${E}/#${b}posts/${q.id}`)}),C.forEach(q=>{w.push(`${E}/#${b}${q.slug}`)}),t.forEach(q=>{w.push(`${E}/#${b}category/${q.slug}`);const z=A.filter(O=>O.categoryId===q.id),H=Math.ceil(z.length/GA);for(let O=2;O<=H;O++)w.push(`${E}/#${b}category/${q.slug}/page/${O}`)}),w},f=ae.useMemo(()=>{const v=i.supportedLanguages.find(w=>w.code===o);return v?u(v):[]},[o,n,e,t,i]),m=()=>{navigator.clipboard.writeText(f.join(`
`)),alert("Sitemap URLs copied to clipboard!")},y=()=>{const v=new Blob([f.join(`
`)],{type:"text/plain"}),w=URL.createObjectURL(v),E=document.createElement("a");E.href=w,E.download=`sitemap-${o}.txt`,document.body.appendChild(E),E.click(),document.body.removeChild(E),URL.revokeObjectURL(w)};return g.jsxs("div",{className:"p-8",children:[g.jsx("div",{className:"flex justify-between items-start mb-6",children:g.jsxs("div",{children:[g.jsxs("h1",{className:"text-3xl font-bold text-neutral flex items-center gap-2",children:[g.jsx(xN,{}),g.jsx("span",{children:Q("sitemap",r)})]}),g.jsx("p",{className:"text-gray-600 mt-1",children:Q("sitemapDesc",r)})]})}),g.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[g.jsx("div",{className:"flex items-center gap-2 border-b pb-4 mb-4 flex-wrap",children:i.supportedLanguages.map(v=>g.jsx("button",{onClick:()=>l(v.code),className:`px-4 py-2 text-sm font-semibold rounded-md transition-colors ${o===v.code?"bg-primary text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:v.name},v.code))}),g.jsxs("div",{className:"flex justify-end gap-2 mb-4",children:[g.jsx("button",{onClick:m,disabled:f.length===0,className:"px-4 py-2 bg-gray-600 text-white text-sm rounded-md hover:bg-gray-700 disabled:bg-gray-300",children:Q("copy",r)}),g.jsx("button",{onClick:y,disabled:f.length===0,className:"px-4 py-2 bg-green-600 text-white text-sm rounded-md hover:bg-green-700 disabled:bg-gray-300",children:Q("download",r)})]}),g.jsx("div",{className:"bg-gray-50 p-4 rounded-md border max-h-96 overflow-y-auto",children:g.jsx("pre",{className:"text-sm text-gray-800 whitespace-pre-wrap break-all ltr",children:g.jsx("code",{children:f.join(`
`)})})}),g.jsx("p",{className:"text-xs text-gray-500 mt-2",children:Q("sitemapNote",r)})]})]})},VW=[{id:"twitter",name:"Twitter / X"},{id:"facebook",name:"Facebook"},{id:"instagram",name:"Instagram"},{id:"linkedin",name:"LinkedIn"},{id:"youtube",name:"YouTube"},{id:"github",name:"GitHub"}],UW=({socialLinks:n,onSave:e,cmsLang:t})=>{const[i,r]=ae.useState(n),[o,l]=ae.useState(!1),[u,f]=ae.useState(null),[m,y]=ae.useState("twitter"),[v,w]=ae.useState(""),E=()=>{e(i),l(!0),setTimeout(()=>l(!1),3e3)},S=R=>{if(R.preventDefault(),!m||!v.trim())return;let L;if(u)L=i.map(q=>q.id===u.id?{...q,platform:m,url:v}:q);else{const q={id:new Date().toISOString(),platform:m,url:v};L=[...i,q]}r(L),C()},b=R=>{f(R),y(R.platform),w(R.url)},A=R=>{r(L=>L.filter(q=>q.id!==R)),(u==null?void 0:u.id)===R&&C()},C=()=>{f(null),y("twitter"),w("")};return g.jsxs("div",{className:"p-8",children:[g.jsxs("div",{className:"flex justify-between items-start mb-6",children:[g.jsxs("div",{children:[g.jsx("h1",{className:"text-3xl font-bold text-neutral",children:" "}),g.jsx("p",{className:"text-gray-600 mt-1",children:"      ."})]}),g.jsx("button",{onClick:E,className:`px-6 py-2 rounded-md font-semibold transition-all duration-300 ${o?"bg-green-500 text-white":"bg-primary text-white hover:bg-secondary"}`,children:Q(o?"saved":"saveChanges",t)})]}),g.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[g.jsx("h2",{className:"text-xl font-semibold mb-4 text-neutral",children:"  "}),g.jsx("div",{className:"space-y-2 mb-6",children:i.map(R=>g.jsxs("div",{className:`p-3 rounded-md flex items-center justify-between transition-colors border ${(u==null?void 0:u.id)===R.id?"bg-primary/10 border-primary":"bg-white border-gray-200"}`,children:[g.jsxs("div",{children:[g.jsx("span",{className:"font-medium text-gray-800 capitalize",children:R.platform}),g.jsxs("a",{href:R.url,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-primary hover:underline mr-2 rtl:ml-2 rtl:mr-0",children:["(",R.url,")"]})]}),g.jsxs("div",{className:"flex items-center space-x-1 rtl:space-x-reverse",children:[g.jsx("button",{onClick:()=>b(R),className:"p-1.5 rounded-full text-blue-600 hover:bg-blue-100",children:g.jsx(Xu,{className:"w-5 h-5"})}),g.jsx("button",{onClick:()=>A(R.id),className:"p-1.5 rounded-full text-red-600 hover:bg-red-100",children:g.jsx(Yr,{className:"w-5 h-5"})})]})]},R.id))}),g.jsxs("form",{onSubmit:S,className:"p-4 border-t",children:[g.jsx("h3",{className:"font-semibold mb-3 text-gray-700",children:u?" ":"  "}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-3",children:[g.jsx("select",{value:m,onChange:R=>y(R.target.value),className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-primary bg-white text-gray-900",children:VW.map(R=>g.jsx("option",{value:R.id,children:R.name},R.id))}),g.jsx("input",{type:"url",value:v,onChange:R=>w(R.target.value),placeholder:"https://example.com",className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-primary bg-white text-gray-900",required:!0})]}),g.jsxs("div",{className:"flex justify-end items-center gap-3",children:[u&&g.jsx("button",{type:"button",onClick:C,className:"text-sm text-gray-600 hover:underline",children:Q("cancel",t)}),g.jsxs("button",{type:"submit",className:"bg-primary text-white px-5 py-2 rounded-md hover:bg-secondary flex items-center space-x-2 rtl:space-x-reverse",children:[g.jsx(kf,{className:"w-5 h-5"}),g.jsx("span",{children:Q(u?"update":"add",t)})]})]})]})]})]})},LW=({settings:n,onSave:e,cmsLang:t})=>{const[i,r]=ae.useState(n),[o,l]=ae.useState(!1),u=m=>{const{name:y,value:v}=m.target;r(w=>({...w,[y]:parseInt(v,10)}))},f=()=>{e(i),l(!0),setTimeout(()=>l(!1),3e3)};return g.jsxs("div",{className:"p-8",children:[g.jsxs("div",{className:"flex justify-between items-start mb-6",children:[g.jsxs("div",{children:[g.jsx("h1",{className:"text-3xl font-bold text-neutral",children:"   "}),g.jsx("p",{className:"text-gray-600 mt-1",children:"        ."})]}),g.jsx("button",{onClick:f,className:`px-6 py-2 rounded-md font-semibold transition-all duration-300 ${o?"bg-green-500 text-white":"bg-primary text-white hover:bg-secondary"}`,children:Q(o?"saved":"saveChanges",t)})]}),g.jsx("div",{className:"space-y-8",children:g.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[g.jsx("h2",{className:"text-xl font-semibold mb-4 text-neutral",children:"   "}),g.jsx("p",{className:"text-sm text-gray-500 mb-4",children:'          "  "   .'}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"placeholderMaxPosts",className:"block text-sm font-medium text-gray-700 mb-1",children:"  "}),g.jsx("input",{type:"number",id:"placeholderMaxPosts",name:"placeholderMaxPosts",min:"1",max:"10",value:i.placeholderMaxPosts,onChange:u,className:"w-full md:w-1/3 p-2 border rounded-md focus:ring-2 focus:ring-primary bg-white text-gray-900"})]})]})})]})},HA=({title:n,menuItems:e,setMenuItems:t})=>{const[i,r]=ae.useState(null),[o,l]=ae.useState(""),[u,f]=ae.useState(""),m=S=>{if(S.preventDefault(),!(!o.trim()||!u.trim())){if(i)t(e.map(b=>b.id===i.id?{...b,label:o,url:u}:b));else{const b={id:new Date().toISOString(),label:o,url:u};t([...e,b])}E()}},y=S=>{r(S),l(S.label),f(S.url)},v=S=>{window.confirm("      ")&&(t(e.filter(b=>b.id!==S)),(i==null?void 0:i.id)===S&&E())},w=(S,b)=>{const A=[...e],C=A[S],R=b==="up"?S-1:S+1;R<0||R>=A.length||(A[S]=A[R],A[R]=C,t(A))},E=()=>{r(null),l(""),f("")};return g.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[g.jsx("h2",{className:"text-xl font-semibold mb-4 text-neutral",children:n}),g.jsx("div",{className:"mb-6 space-y-2",children:e.length>0?e.map((S,b)=>g.jsxs("div",{className:`p-3 rounded-md flex items-center justify-between transition-colors ${(i==null?void 0:i.id)===S.id?"bg-primary/10":"bg-gray-50"}`,children:[g.jsxs("div",{children:[g.jsx("span",{className:"font-medium text-gray-800",children:S.label}),g.jsxs("span",{className:"text-sm text-gray-500 mr-2 rtl:ml-2 rtl:mr-0",children:["(",S.url,")"]})]}),g.jsxs("div",{className:"flex items-center space-x-1 rtl:space-x-reverse",children:[g.jsx("button",{onClick:()=>w(b,"up"),disabled:b===0,className:"p-1.5 rounded-full hover:bg-gray-200 disabled:text-gray-300 disabled:cursor-not-allowed",children:g.jsx(_N,{className:"w-4 h-4"})}),g.jsx("button",{onClick:()=>w(b,"down"),disabled:b===e.length-1,className:"p-1.5 rounded-full hover:bg-gray-200 disabled:text-gray-300 disabled:cursor-not-allowed",children:g.jsx(WF,{className:"w-4 h-4"})}),g.jsx("div",{className:"w-px h-5 bg-gray-200 mx-1"}),g.jsx("button",{onClick:()=>y(S),className:"p-1.5 rounded-full text-blue-600 hover:bg-blue-100",children:g.jsx(Xu,{className:"w-5 h-5"})}),g.jsx("button",{onClick:()=>v(S.id),className:"p-1.5 rounded-full text-red-600 hover:bg-red-100",children:g.jsx(Yr,{className:"w-5 h-5"})})]})]},S.id)):g.jsx("p",{className:"text-gray-500 text-center py-4",children:"      ."})}),g.jsxs("form",{onSubmit:m,className:"p-4 border-t",children:[g.jsx("h3",{className:"font-semibold mb-3 text-gray-700",children:i?" ":"  "}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-3",children:[g.jsxs("div",{children:[g.jsx("label",{htmlFor:`label-${n}`,className:"block text-sm font-medium text-gray-600 mb-1",children:" (Label)"}),g.jsx("input",{id:`label-${n}`,type:"text",value:o,onChange:S=>l(S.target.value),placeholder:":  ",className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-primary bg-white text-gray-900",required:!0})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:`url-${n}`,className:"block text-sm font-medium text-gray-600 mb-1",children:" (URL)"}),g.jsx("input",{id:`url-${n}`,type:"text",value:u,onChange:S=>f(S.target.value),placeholder:": #about-us",className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-primary bg-white text-gray-900",required:!0})]})]}),g.jsxs("div",{className:"flex justify-end items-center gap-3",children:[i&&g.jsx("button",{type:"button",onClick:E,className:"text-sm text-gray-600 hover:underline",children:" "}),g.jsxs("button",{type:"submit",className:"bg-primary text-white px-5 py-2 rounded-md hover:bg-secondary flex items-center space-x-2 rtl:space-x-reverse",children:[g.jsx(kf,{className:"w-5 h-5"}),g.jsx("span",{children:i?" ":" "})]})]})]})]})},OW=({headerMenuItems:n,onSaveHeaderMenu:e,footerMenuItems:t,onSaveFooterMenu:i,pages:r,categories:o,cmsLang:l})=>{const[u,f]=ae.useState(n),[m,y]=ae.useState(t),[v,w]=ae.useState(!1);ae.useEffect(()=>{f(n)},[n]),ae.useEffect(()=>{y(t)},[t]);const E=()=>{e(u),i(m),w(!0),setTimeout(()=>w(!1),3e3)},S=A=>{if(window.confirm(Q("confirmMenuOverwrite",l))){const R=r.filter(L=>L.status==="published").map(L=>({id:L.id,label:L.title,url:`#${L.slug}`}));A(R)}},b=A=>{if(window.confirm(Q("confirmMenuOverwrite",l))){const C=o.map(R=>({id:R.id,label:R.name,url:`#/category/${R.slug}`}));A(C)}};return g.jsxs("div",{className:"p-8",children:[g.jsxs("div",{className:"flex justify-between items-start mb-6",children:[g.jsxs("div",{children:[g.jsx("h1",{className:"text-3xl font-bold text-neutral",children:" "}),g.jsx("p",{className:"text-gray-600 mt-1",children:"        ."})]}),g.jsx("button",{onClick:E,className:`px-6 py-2 rounded-md font-semibold transition-all duration-300 ${v?"bg-green-500 text-white":"bg-primary text-white hover:bg-secondary"}`,children:Q(v?"saved":"saveChanges",l)})]}),g.jsxs("div",{className:"space-y-8",children:[g.jsxs("div",{children:[g.jsxs("div",{className:"mb-4 flex items-center gap-2",children:[g.jsx("span",{className:"text-sm font-medium text-gray-600",children:" :"}),g.jsx("button",{onClick:()=>S(f),className:"text-sm bg-gray-200 text-gray-800 px-3 py-1.5 rounded-md hover:bg-gray-300 transition-colors",children:Q("usePagesAsMenu",l)}),g.jsx("button",{onClick:()=>b(f),className:"text-sm bg-gray-200 text-gray-800 px-3 py-1.5 rounded-md hover:bg-gray-300 transition-colors",children:Q("useCategoriesAsMenu",l)})]}),g.jsx(HA,{title:"  (Header Menu)",menuItems:u,setMenuItems:f})]}),g.jsxs("div",{children:[g.jsxs("div",{className:"mb-4 flex items-center gap-2",children:[g.jsx("span",{className:"text-sm font-medium text-gray-600",children:" :"}),g.jsx("button",{onClick:()=>S(y),className:"text-sm bg-gray-200 text-gray-800 px-3 py-1.5 rounded-md hover:bg-gray-300 transition-colors",children:Q("usePagesAsMenu",l)}),g.jsx("button",{onClick:()=>b(y),className:"text-sm bg-gray-200 text-gray-800 px-3 py-1.5 rounded-md hover:bg-gray-300 transition-colors",children:Q("useCategoriesAsMenu",l)})]}),g.jsx(HA,{title:"  (Footer Menu)",menuItems:m,setMenuItems:y})]})]})]})},$A=({label:n,enabled:e,onChange:t,icon:i})=>g.jsxs("label",{htmlFor:`toggle-${n}`,className:"flex items-center justify-between cursor-pointer p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[g.jsxs("div",{className:"flex items-center space-x-3 rtl:space-x-reverse",children:[i,g.jsx("span",{className:"text-sm font-medium text-gray-800",children:n})]}),g.jsxs("div",{className:"relative",children:[g.jsx("input",{id:`toggle-${n}`,type:"checkbox",className:"sr-only",checked:e,onChange:r=>t(r.target.checked),"aria-label":n}),g.jsx("div",{className:`block w-12 h-6 rounded-full transition ${e?"bg-primary":"bg-gray-300"}`}),g.jsx("div",{className:`dot absolute left-1 top-1 bg-white w-4 h-4 rounded-full transition-transform ${e?"transform translate-x-6":""}`})]})]}),WA=[{id:"facebook",name:"Facebook",icon:g.jsx(IN,{className:"w-5 h-5 text-[#1877F2]"})},{id:"twitter",name:"Twitter / X",icon:g.jsx(SN,{className:"w-5 h-5 text-black"})},{id:"pinterest",name:"Pinterest",icon:g.jsx(oB,{className:"w-5 h-5 text-[#E60023]"})},{id:"reddit",name:"Reddit",icon:g.jsx(aB,{className:"w-5 h-5 text-[#FF4500]"})},{id:"linkedin",name:"LinkedIn",icon:g.jsx(AN,{className:"w-5 h-5 text-[#0A66C2]"})}],FW=({settings:n,onSave:e,isEcommerceMode:t,cmsLang:i})=>{const[r,o]=ae.useState(n),[l,u]=ae.useState(!1),f=()=>{e(r),u(!0),setTimeout(()=>u(!1),3e3)},m=S=>{const{name:b,value:A,type:C}=S.target,R=C==="checkbox"?S.target.checked:void 0,L=b.split(".");L.length>1?o(q=>{const z=JSON.parse(JSON.stringify(q));let H=z;for(let O=0;O<L.length-1;O++)H=H[L[O]];return H[L[L.length-1]]=C==="checkbox"?R:A,z}):o(q=>({...q,[b]:A}))},y=(S,b)=>{o(A=>({...A,autoPost:{...A.autoPost,[S]:{...A.autoPost[S],enabled:b}}}))},v=S=>{const{name:b,value:A,type:C}=S.target,R=C==="checkbox"?S.target.checked:void 0;o(L=>({...L,googleIndexing:{...L.googleIndexing,[b]:C==="checkbox"?R:A}}))},w=S=>{const{name:b,value:A}=S.target;o(C=>({...C,aiSettings:{...C.aiSettings,[b]:A}}))},E=S=>b=>{const{name:A,value:C}=b.target;o(R=>({...R,[S]:{...R[S],[A]:C}}))};return g.jsxs("div",{className:"p-8",children:[g.jsxs("div",{className:"flex justify-between items-start mb-6",children:[g.jsxs("div",{children:[g.jsx("h1",{className:"text-3xl font-bold text-neutral",children:Q("developerSettings",i)}),g.jsx("p",{className:"text-gray-600 mt-1",children:Q("developerSettingsDesc",i)})]}),g.jsx("button",{onClick:f,className:`px-6 py-2 rounded-md font-semibold transition-all duration-300 ${l?"bg-green-500 text-white":"bg-primary text-white hover:bg-secondary"}`,children:Q(l?"saved":"saveSettings",i)})]}),g.jsxs("div",{className:"space-y-8",children:[g.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[g.jsx("h2",{className:"text-xl font-semibold mb-2 text-neutral",children:Q("cfWorkerContentTitle",i)}),g.jsx("p",{className:"text-sm text-gray-500 mb-4",children:Q("cfWorkerContentDesc",i)}),g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{children:[g.jsx("label",{htmlFor:"cfWorkerUrl",className:"block text-sm font-medium text-gray-700 mb-1",children:"Worker URL"}),g.jsx("input",{type:"url",id:"cfWorkerUrl",name:"url",value:r.cfWorker.url,onChange:E("cfWorker"),placeholder:"https://your-worker.your-name.workers.dev",className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-primary ltr bg-white"})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"cfWorkerAuthToken",className:"block text-sm font-medium text-gray-700 mb-1",children:"Auth Token (Secret)"}),g.jsx("input",{type:"password",id:"cfWorkerAuthToken",name:"authToken",value:r.cfWorker.authToken,onChange:E("cfWorker"),placeholder:Q("cfWorkerAuthPlaceholder",i),className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-primary ltr bg-white"})]})]})]}),g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[g.jsx("h2",{className:"text-xl font-semibold mb-2 text-neutral",children:Q("cfWorkerPaymentTitle",i)}),g.jsx("p",{className:"text-sm text-gray-500 mb-4",children:Q("cfWorkerPaymentDesc",i)}),g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{children:[g.jsx("label",{htmlFor:"paymentWorkerUrl",className:"block text-sm font-medium text-gray-700 mb-1",children:"Payment Worker URL"}),g.jsx("input",{type:"url",id:"paymentWorkerUrl",name:"url",value:r.paymentWorker.url,onChange:E("paymentWorker"),placeholder:"https://payment-worker.your-name.workers.dev",className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-primary ltr bg-white"})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"paymentWorkerAuthToken",className:"block text-sm font-medium text-gray-700 mb-1",children:"Auth Token (Secret)"}),g.jsx("input",{type:"password",id:"paymentWorkerAuthToken",name:"authToken",value:r.paymentWorker.authToken,onChange:E("paymentWorker"),placeholder:Q("cfWorkerPaymentAuthPlaceholder",i),className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-primary ltr bg-white"})]})]})]}),t&&g.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md animate-fade-in",children:[g.jsxs("h2",{className:"text-xl font-semibold mb-4 text-neutral flex items-center gap-2",children:[g.jsx(TT,{}),Q("ecommerceSettingsTitle",i)]}),g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{children:[g.jsx("label",{htmlFor:"ecommerce.blogPath",className:"block text-sm font-medium text-gray-700 mb-1",children:Q("blogPath",i)}),g.jsx("input",{type:"text",id:"ecommerce.blogPath",name:"ecommerce.blogPath",value:r.ecommerce.blogPath,onChange:m,placeholder:"blog",className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-primary ltr bg-white"}),g.jsx("p",{className:"text-xs text-gray-500 mt-1",children:Q("blogPathDesc",i)})]}),g.jsxs("div",{className:"border-t pt-4 grid grid-cols-1 md:grid-cols-2 gap-6",children:[g.jsxs("div",{children:[g.jsx("label",{htmlFor:"ecommerce.paypalClientId",className:"block text-sm font-medium text-gray-700 mb-1",children:"PayPal Client ID"}),g.jsx("input",{type:"password",id:"ecommerce.paypalClientId",name:"ecommerce.paypalClientId",value:r.ecommerce.paypalClientId,onChange:m,placeholder:Q("paypalClientIdPlaceholder",i),className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-primary ltr bg-white"})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"ecommerce.stripePublishableKey",className:"block text-sm font-medium text-gray-700 mb-1",children:"Stripe Publishable Key"}),g.jsx("input",{type:"password",id:"ecommerce.stripePublishableKey",name:"ecommerce.stripePublishableKey",value:r.ecommerce.stripePublishableKey,onChange:m,placeholder:Q("stripePublishableKeyPlaceholder",i),className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-primary ltr bg-white"})]})]})]})]}),g.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[g.jsx("h2",{className:"text-xl font-semibold mb-4 text-neutral",children:Q("aiProviderSettingsTitle",i)}),g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:Q("chooseProvider",i)}),g.jsxs("div",{className:"flex gap-4",children:[g.jsxs("label",{className:"flex items-center p-3 border rounded-lg cursor-pointer has-[:checked]:bg-primary/10 has-[:checked]:border-primary transition-colors",children:[g.jsx("input",{type:"radio",name:"provider",value:"gemini",checked:r.aiSettings.provider==="gemini",onChange:w,className:"form-radio text-primary focus:ring-primary"}),g.jsx("span",{className:"ml-2 rtl:mr-2 text-sm font-medium",children:"Gemini"})]}),g.jsxs("label",{className:"flex items-center p-3 border rounded-lg cursor-pointer has-[:checked]:bg-primary/10 has-[:checked]:border-primary transition-colors",children:[g.jsx("input",{type:"radio",name:"provider",value:"chatgpt",checked:r.aiSettings.provider==="chatgpt",onChange:w,className:"form-radio text-primary focus:ring-primary"}),g.jsx("span",{className:"ml-2 rtl:mr-2 text-sm font-medium",children:"ChatGPT"})]})]})]}),g.jsxs("div",{className:"border-t pt-4 mt-4 grid grid-cols-1 md:grid-cols-2 gap-6",children:[g.jsxs("div",{children:[g.jsx("label",{htmlFor:"geminiApiKey",className:"block text-sm font-medium text-gray-700 mb-1",children:"Gemini API Key"}),g.jsx("input",{type:"password",id:"geminiApiKey",name:"geminiApiKey",value:r.aiSettings.geminiApiKey,onChange:w,placeholder:Q("geminiApiKeyPlaceholder",i),className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-primary ltr bg-white"}),g.jsx("p",{className:"text-xs text-gray-500 mt-1",dangerouslySetInnerHTML:{__html:Q("geminiApiDesc",i)}})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"chatgptApiKey",className:"block text-sm font-medium text-gray-700 mb-1",children:"ChatGPT API Key"}),g.jsx("input",{type:"password",id:"chatgptApiKey",name:"chatgptApiKey",value:r.aiSettings.chatgptApiKey,onChange:w,placeholder:Q("chatgptApiKeyPlaceholder",i),className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-primary ltr bg-white"}),g.jsx("p",{className:"text-xs text-gray-500 mt-1",children:Q("chatgptApiDesc",i)})]})]})]})]}),g.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[g.jsx("h2",{className:"text-xl font-semibold mb-4 text-neutral",children:Q("gaSettingsTitle",i)}),g.jsx("div",{className:"space-y-4",children:g.jsxs("div",{children:[g.jsx("label",{htmlFor:"gaApiKey",className:"block text-sm font-medium text-gray-700 mb-1",children:"Google Analytics Data API Key"}),g.jsx("input",{type:"password",id:"gaApiKey",name:"googleAnalytics.apiKey",value:r.googleAnalytics.apiKey,onChange:m,placeholder:Q("gaApiKeyPlaceholder",i),className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-primary ltr bg-white"}),g.jsx("p",{className:"text-xs text-gray-500 mt-1",children:Q("gaApiDesc",i)})]})})]}),g.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[g.jsx("h2",{className:"text-xl font-semibold mb-2 text-neutral",children:Q("autoPostTitle",i)}),g.jsx("p",{className:"text-sm text-gray-500 mb-4",children:Q("autoPostDesc",i)}),g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:WA.map(S=>g.jsx($A,{label:S.name,icon:S.icon,enabled:r.autoPost[S.id].enabled,onChange:b=>y(S.id,b)},S.id))}),g.jsx("div",{className:"mt-6 space-y-4 border-t pt-6",children:WA.map(S=>r.autoPost[S.id].enabled&&g.jsxs("div",{className:"animate-fade-in",children:[g.jsxs("label",{htmlFor:`${S.id}-apiKey`,className:"block text-sm font-medium text-gray-700 mb-1",children:[S.name," API Key"]}),g.jsx("input",{type:"password",id:`${S.id}-apiKey`,name:`autoPost.${S.id}.apiKey`,value:r.autoPost[S.id].apiKey,onChange:m,placeholder:Q("apiKeyPlaceholder",i,{platform:S.name}),className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-primary ltr"})]},`${S.id}-api-key`))})]}),g.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[g.jsx("h2",{className:"text-xl font-semibold mb-4 text-neutral",children:Q("autoIndexTitle",i)}),g.jsxs("div",{className:"space-y-4",children:[g.jsx($A,{label:Q("autoIndexLabel",i),enabled:r.googleIndexing.enabled,onChange:S=>v({target:{name:"enabled",checked:S,type:"checkbox"}})}),r.googleIndexing.enabled&&g.jsxs("div",{className:"animate-fade-in",children:[g.jsx("label",{htmlFor:"googleIndexingApiKey",className:"block text-sm font-medium text-gray-700 mb-1",children:"Google API Key"}),g.jsx("input",{type:"password",id:"googleIndexingApiKey",name:"apiKey",value:r.googleIndexing.apiKey,onChange:v,placeholder:Q("googleApiKeyPlaceholder",i),className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-primary ltr bg-white text-gray-900"}),g.jsx("p",{className:"text-xs text-gray-500 mt-1",children:Q("googleApiDesc",i)})]})]})]})]})]})]})},hm=({title:n,value:e,icon:t})=>g.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md flex items-center space-x-4 rtl:space-x-reverse",children:[g.jsx("div",{className:"bg-primary/10 p-3 rounded-full",children:t}),g.jsxs("div",{children:[g.jsx("p",{className:"text-sm text-gray-500",children:n}),g.jsx("p",{className:"text-2xl font-bold text-neutral",children:e})]})]}),mm=({className:n="w-8 h-8 text-primary"})=>g.jsx("svg",{className:n,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z"})}),BW=({seoSettings:n,developerSettings:e,cmsLang:t})=>{var w,E;const[i,r]=ae.useState(!0),[o,l]=ae.useState(null),[u,f]=ae.useState(null),m=(w=n==null?void 0:n.googleAnalytics)==null?void 0:w.id,y=(E=e==null?void 0:e.googleAnalytics)==null?void 0:E.apiKey;ae.useEffect(()=>{if(!m||!y){r(!1);return}(async()=>{var C,R,L,q,z;r(!0),l(null),f(null);const b=`https://analyticsdata.googleapis.com/v1beta/properties/${m}:runReport?key=${y}`,A={dateRanges:[{startDate:"28daysAgo",endDate:"today"}],metrics:[{name:"activeUsers"},{name:"sessions"},{name:"screenPageViews"},{name:"totalUsers"}]};try{const H=await fetch(b,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(A)});if(!H.ok){const V=await H.json();throw new Error(((C=V.error)==null?void 0:C.message)||Q("analyticsFetchError",t))}const O=await H.json();if(O.rows&&O.rows.length>0){const V=O.rows[0].metricValues,U={activeUsers:((R=V[0])==null?void 0:R.value)||"0",sessions:((L=V[1])==null?void 0:L.value)||"0",pageViews:((q=V[2])==null?void 0:q.value)||"0",totalUsers:((z=V[3])==null?void 0:z.value)||"0"};f(U)}else f({activeUsers:"0",sessions:"0",pageViews:"0",totalUsers:"0"})}catch(H){console.error(H),l(H.message+" - "+Q("analyticsCheckGAID",t))}finally{r(!1)}})()},[m,y,t]);const v=()=>!m||!y?g.jsxs("div",{className:"text-center py-16 px-8 bg-white rounded-lg shadow-md mt-8",children:[g.jsx("div",{className:"inline-block bg-yellow-100 p-4 rounded-full",children:g.jsx(EN,{className:"w-12 h-12 text-yellow-500"})}),g.jsx("h2",{className:"text-2xl font-semibold text-gray-800 mt-4",children:Q("analyticsNotSetupTitle",t)}),g.jsx("p",{className:"text-gray-600 mt-2 max-w-xl mx-auto",children:Q("analyticsNotSetupDesc",t)}),g.jsxs("div",{className:"mt-6 flex justify-center gap-4",children:[g.jsx(zt,{href:"#admin/seo",className:"inline-block bg-primary text-white px-6 py-3 rounded-lg font-semibold hover:bg-secondary transition-colors shadow-md",children:Q("goToSeoSettings",t)}),g.jsx(zt,{href:"#admin/developer",className:"inline-block bg-gray-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-gray-700 transition-colors shadow-md",children:Q("goToDeveloperSettings",t)})]})]}):i?g.jsx("div",{className:"text-center py-20",children:Q("analyticsLoading",t)}):o?g.jsx("div",{className:"text-center py-20 text-red-600 bg-red-50 p-6 rounded-lg",children:`${Q("error",t)}: ${o}`}):u?g.jsxs("div",{className:"mb-8 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 animate-fade-in",children:[g.jsx(hm,{title:Q("analyticsTotalUsers",t),value:u.totalUsers,icon:g.jsx(mm,{})}),g.jsx(hm,{title:Q("analyticsActiveUsers",t),value:u.activeUsers,icon:g.jsx(mm,{})}),g.jsx(hm,{title:Q("analyticsSessions",t),value:u.sessions,icon:g.jsx(mm,{})}),g.jsx(hm,{title:Q("analyticsPageViews",t),value:u.pageViews,icon:g.jsx(mm,{})})]}):null;return g.jsxs("div",{className:"p-8",children:[g.jsx("div",{className:"flex justify-between items-start mb-6",children:g.jsxs("div",{children:[g.jsx("h1",{className:"text-3xl font-bold text-neutral",children:Q("analytics",t)}),g.jsx("p",{className:"text-gray-600 mt-1",children:Q("analyticsDesc",t)})]})}),v()]})},qW=({settings:n,onSave:e,cmsLang:t})=>{const[i,r]=ae.useState(n),[o,l]=ae.useState(!1),[u,f]=ae.useState("ctaBanner"),[m,y]=ae.useState(null),v=()=>{e(i),l(!0),setTimeout(()=>y(null),2e3)},w=b=>{const{name:A,value:C,type:R}=b.target,L=R==="checkbox"?b.target.checked:void 0,[q,z]=A.split(".");z&&r(H=>({...H,[q]:{...H[q],[z]:R==="checkbox"?L:C}}))},E=b=>{navigator.clipboard.writeText(b),y(b),setTimeout(()=>y(null),2e3)},S=()=>{if(u==="ctaBanner"){const b="<!-- MARKETING_WIDGET:CTA_BANNER -->";return g.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md mt-4 animate-fade-in",children:[g.jsx("p",{className:"text-sm text-gray-500 mb-4",children:Q("ctaWidgetDesc",t)}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 items-start",children:[g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{className:"flex items-center",children:[g.jsx("input",{type:"checkbox",id:"ctaBanner.enabled",name:"ctaBanner.enabled",checked:i.ctaBanner.enabled,onChange:w,className:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"}),g.jsx("label",{htmlFor:"ctaBanner.enabled",className:"mr-2 block text-sm text-gray-900",children:Q("enableWidget",t)})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"ctaBanner.headline",className:"block text-sm font-medium text-gray-700 mb-1",children:Q("ctaHeadline",t)}),g.jsx("textarea",{id:"ctaBanner.headline",name:"ctaBanner.headline",value:i.ctaBanner.headline,onChange:w,rows:3,className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-primary bg-white text-gray-900",disabled:!i.ctaBanner.enabled})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"ctaBanner.buttonText",className:"block text-sm font-medium text-gray-700 mb-1",children:Q("ctaButtonText",t)}),g.jsx("input",{type:"text",id:"ctaBanner.buttonText",name:"ctaBanner.buttonText",value:i.ctaBanner.buttonText,onChange:w,className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-primary bg-white text-gray-900",disabled:!i.ctaBanner.enabled})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"ctaBanner.learnMoreUrl",className:"block text-sm font-medium text-gray-700 mb-1",children:Q("ctaButtonUrl",t)}),g.jsx("input",{type:"url",id:"ctaBanner.learnMoreUrl",name:"ctaBanner.learnMoreUrl",value:i.ctaBanner.learnMoreUrl,onChange:w,className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-primary ltr bg-white text-gray-900",disabled:!i.ctaBanner.enabled})]})]}),g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{children:[g.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:Q("preview",t)}),g.jsx("div",{className:"p-4 border rounded-md bg-gray-50",children:g.jsx(uP,{...i.ctaBanner})})]}),g.jsxs("div",{children:[g.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:Q("shortcode",t)}),g.jsxs("div",{className:"flex items-stretch",children:[g.jsx("input",{type:"text",readOnly:!0,value:b,className:"w-full p-2 border rounded-r-none ltr font-mono text-sm bg-gray-100 text-gray-700"}),g.jsx("button",{onClick:()=>E(b),className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-l-none rounded-r-md hover:bg-gray-300 text-sm font-semibold",children:Q(m===b?"copied":"copy",t)})]})]})]})]})]})}if(u==="searchWidget"){const b="<!-- MARKETING_WIDGET:SEARCH_WIDGET -->";return g.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md mt-4 animate-fade-in",children:[g.jsx("p",{className:"text-sm text-gray-500 mb-4",children:Q("searchWidgetDesc",t)}),g.jsxs("div",{className:"bg-blue-50 text-blue-800 p-3 rounded-md text-sm mb-6 border border-blue-200",children:[g.jsxs("strong",{className:"font-bold",children:[Q("note",t),":"]})," ",Q("searchWidgetNote",t)," ",g.jsx(zt,{href:"#admin/seo",className:"font-semibold underline",children:Q("seoSettings",t)}),"."]}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 items-start",children:[g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{className:"flex items-center",children:[g.jsx("input",{type:"checkbox",id:"searchWidget.enabled",name:"searchWidget.enabled",checked:i.searchWidget.enabled,onChange:w,className:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"}),g.jsx("label",{htmlFor:"searchWidget.enabled",className:"mr-2 block text-sm text-gray-900",children:Q("enableWidget",t)})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"searchWidget.title",className:"block text-sm font-medium text-gray-700 mb-1",children:Q("searchWidgetFormTitle",t)}),g.jsx("input",{type:"text",id:"searchWidget.title",name:"searchWidget.title",value:i.searchWidget.title,onChange:w,className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-primary bg-white text-gray-900",disabled:!i.searchWidget.enabled})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"searchWidget.inputLabel",className:"block text-sm font-medium text-gray-700 mb-1",children:Q("searchWidgetInputLabel",t)}),g.jsx("input",{type:"text",id:"searchWidget.inputLabel",name:"searchWidget.inputLabel",value:i.searchWidget.inputLabel,onChange:w,className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-primary bg-white text-gray-900",disabled:!i.searchWidget.enabled})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"searchWidget.inputPlaceholder",className:"block text-sm font-medium text-gray-700 mb-1",children:Q("searchWidgetInputPlaceholder",t)}),g.jsx("input",{type:"text",id:"searchWidget.inputPlaceholder",name:"searchWidget.inputPlaceholder",value:i.searchWidget.inputPlaceholder,onChange:w,className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-primary bg-white text-gray-900",disabled:!i.searchWidget.enabled})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"searchWidget.buttonText",className:"block text-sm font-medium text-gray-700 mb-1",children:Q("searchWidgetButtonText",t)}),g.jsx("input",{type:"text",id:"searchWidget.buttonText",name:"searchWidget.buttonText",value:i.searchWidget.buttonText,onChange:w,className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-primary bg-white text-gray-900",disabled:!i.searchWidget.enabled})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"searchWidget.searchUrl",className:"block text-sm font-medium text-gray-700 mb-1",children:Q("searchWidgetSearchUrl",t)}),g.jsx("input",{type:"url",id:"searchWidget.searchUrl",name:"searchWidget.searchUrl",value:i.searchWidget.searchUrl,onChange:w,className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-primary ltr bg-white text-gray-900",disabled:!i.searchWidget.enabled})]})]}),g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{children:[g.jsxs("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:[Q("preview",t)," (",Q("basicSearch",t),")"]}),g.jsx("div",{className:"p-4 border rounded-md bg-gray-50",children:g.jsx(cP,{searchSettings:i.searchWidget,seoSettings:{programmableSearchEngineId:""}})})]}),g.jsxs("div",{children:[g.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:Q("shortcode",t)}),g.jsxs("div",{className:"flex items-stretch",children:[g.jsx("input",{type:"text",readOnly:!0,value:b,className:"w-full p-2 border rounded-r-none ltr font-mono text-sm bg-gray-100 text-gray-700"}),g.jsx("button",{onClick:()=>E(b),className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-l-none rounded-r-md hover:bg-gray-300 text-sm font-semibold",children:Q(m===b?"copied":"copy",t)})]})]})]})]})]})}return null};return g.jsxs("div",{className:"p-8",children:[g.jsxs("div",{className:"flex justify-between items-start mb-6",children:[g.jsxs("div",{children:[g.jsxs("h1",{className:"text-3xl font-bold text-neutral flex items-center gap-3",children:[g.jsx(TN,{}),g.jsx("span",{children:Q("marketingTools",t)})]}),g.jsx("p",{className:"text-gray-600 mt-1",children:Q("marketingToolsDesc",t)})]}),g.jsx("button",{onClick:v,className:`px-6 py-2 rounded-md font-semibold transition-all duration-300 ${o?"bg-green-500 text-white":"bg-primary text-white hover:bg-secondary"}`,children:Q(o?"saved":"saveChanges",t)})]}),g.jsxs("div",{className:"mb-6",children:[g.jsx("label",{htmlFor:"tool-selector",className:"block text-sm font-medium text-gray-700 mb-1",children:Q("selectToolToEdit",t)}),g.jsxs("select",{id:"tool-selector",value:u,onChange:b=>f(b.target.value),className:"w-full max-w-sm p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary bg-white text-gray-900",children:[g.jsx("option",{value:"ctaBanner",children:Q("ctaBannerOption",t)}),g.jsx("option",{value:"searchWidget",children:Q("searchWidgetOption",t)})]})]}),S()]})},zW=({adUnits:n,onSave:e,cmsLang:t})=>{const[i,r]=ae.useState(n),[o,l]=ae.useState(!1),[u,f]=ae.useState(null),[m,y]=ae.useState(""),[v,w]=ae.useState(""),E=()=>{e(i),l(!0),setTimeout(()=>l(!1),3e3)},S=R=>{if(R.preventDefault(),!m.trim()||!v.trim())return;let L;if(u)L=i.map(q=>q.id===u.id?{...q,name:m,code:v}:q);else{const q={id:Ou(),name:m,code:v};L=[...i,q]}r(L),C()},b=R=>{f(R),y(R.name),w(R.code)},A=R=>{window.confirm(Q("adsConfirmDelete",t))&&(r(L=>L.filter(q=>q.id!==R)),(u==null?void 0:u.id)===R&&C())},C=()=>{f(null),y(""),w("")};return g.jsxs("div",{className:"p-8",children:[g.jsxs("div",{className:"flex justify-between items-start mb-6",children:[g.jsxs("div",{children:[g.jsxs("h1",{className:"text-3xl font-bold text-neutral flex items-center gap-2",children:[g.jsx(wN,{}),g.jsx("span",{children:Q("adsManagerTitle",t)})]}),g.jsx("p",{className:"text-gray-600 mt-1",children:Q("adsManagerDesc",t)})]}),g.jsx("button",{onClick:E,className:`px-6 py-2 rounded-md font-semibold transition-all duration-300 ${o?"bg-green-500 text-white":"bg-primary text-white hover:bg-secondary"}`,children:Q(o?"saved":"saveChanges",t)})]}),g.jsxs("div",{className:"bg-blue-50 border-l-4 border-blue-400 text-blue-800 p-4 rounded-md mb-6",role:"alert",children:[g.jsx("p",{className:"font-bold",children:Q("adsHowToUseTitle",t)}),g.jsx("p",{className:"text-sm",dangerouslySetInnerHTML:{__html:Q("adsHowToUseDesc",t,{seoLink:`<a href="#admin/seo" class="font-semibold underline">${Q("seoSettings",t)}</a>`})}})]}),g.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[g.jsx("div",{className:"lg:col-span-1",children:g.jsxs("form",{onSubmit:S,className:"bg-white p-6 rounded-lg shadow-md sticky top-8",children:[g.jsx("h2",{className:"text-xl font-semibold mb-4 text-neutral",children:Q(u?"adsEditUnit":"adsCreateUnit",t)}),g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{children:[g.jsx("label",{htmlFor:"adName",className:"block text-sm font-medium text-gray-700 mb-1",children:Q("adsUnitName",t)}),g.jsx("input",{type:"text",id:"adName",value:m,onChange:R=>y(R.target.value),placeholder:Q("adsUnitNamePlaceholder",t),className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-primary bg-white text-gray-900",required:!0})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"adCode",className:"block text-sm font-medium text-gray-700 mb-1",children:Q("adsAdCode",t)}),g.jsx("textarea",{id:"adCode",value:v,onChange:R=>w(R.target.value),rows:8,placeholder:'<script async src="..."><\/script>',className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-primary font-mono text-sm ltr bg-white text-gray-900",required:!0})]})]}),g.jsxs("div",{className:"flex justify-end items-center gap-3 mt-6 border-t pt-4",children:[u&&g.jsx("button",{type:"button",onClick:C,className:"text-sm text-gray-600 hover:underline",children:Q("cancel",t)}),g.jsxs("button",{type:"submit",className:"bg-primary text-white px-5 py-2 rounded-md hover:bg-secondary flex items-center space-x-2 rtl:space-x-reverse",children:[g.jsx(kf,{className:"w-5 h-5"}),g.jsx("span",{children:Q(u?"update":"add",t)})]})]})]})}),g.jsx("div",{className:"lg:col-span-2 space-y-4",children:i.length>0?i.map(R=>g.jsx(jW,{adUnit:R,onEdit:b,onDelete:A,cmsLang:t},R.id)):g.jsxs("div",{className:"text-center py-16 px-8 bg-white rounded-lg shadow-md",children:[g.jsx("h2",{className:"text-xl font-semibold text-gray-700",children:Q("adsNoUnitsTitle",t)}),g.jsx("p",{className:"text-gray-500 mt-2",children:Q("adsNoUnitsDesc",t)})]})})]})]})},jW=({adUnit:n,onEdit:e,onDelete:t,cmsLang:i})=>{const[r,o]=ae.useState(!1),l=`<!-- AD_UNIT:${n.id} -->`,u=()=>{navigator.clipboard.writeText(l),o(!0),setTimeout(()=>o(!1),2e3)};return g.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-md",children:[g.jsxs("div",{className:"flex justify-between items-start",children:[g.jsx("h3",{className:"font-bold text-lg text-neutral",children:n.name}),g.jsxs("div",{className:"flex items-center space-x-1 rtl:space-x-reverse",children:[g.jsx("button",{onClick:()=>e(n),className:"p-1.5 rounded-full text-blue-600 hover:bg-blue-100",children:g.jsx(Xu,{className:"w-5 h-5"})}),g.jsx("button",{onClick:()=>t(n.id),className:"p-1.5 rounded-full text-red-600 hover:bg-red-100",children:g.jsx(Yr,{className:"w-5 h-5"})})]})]}),g.jsxs("div",{className:"mt-4",children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:Q("shortcode",i)}),g.jsxs("div",{className:"flex items-stretch",children:[g.jsx("input",{type:"text",readOnly:!0,value:l,className:"w-full p-2 border rounded-r-none ltr font-mono text-sm bg-gray-100 text-gray-700"}),g.jsx("button",{onClick:u,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-l-none rounded-r-md hover:bg-gray-300 text-sm font-semibold",children:Q(r?"copied":"copy",i)})]}),g.jsx("p",{className:"text-xs text-gray-500 mt-1",children:Q("shortcodeDesc",i)})]})]})},GW=({children:n,activeTemplate:e})=>{const t=ae.useRef(null);return ae.useEffect(()=>{const i=t.current;if(!i||!e)return;const r=["--color-primary","--color-secondary","--color-accent"],o={};r.forEach(l=>{o[l]=i.style.getPropertyValue(l)});for(const[l,u]of Object.entries(e.styles))i.style.setProperty(l,u);return()=>{r.forEach(l=>{o[l]?i.style.setProperty(l,o[l]):i.style.removeProperty(l)})}},[e]),g.jsx("div",{ref:t,children:n})},pm=({icon:n,title:e,description:t})=>g.jsxs("div",{className:"flex items-start space-x-3 rtl:space-x-reverse",children:[g.jsx("div",{className:"flex-shrink-0 h-8 w-8 rounded-full bg-primary/10 text-primary flex items-center justify-center",children:n}),g.jsxs("div",{children:[g.jsx("h3",{className:"text-lg font-semibold text-neutral",children:e}),g.jsx("p",{className:"text-gray-600 mt-1",children:t})]})]}),HW=({onUnlock:n,userId:e,developerSettings:t})=>{const[i,r]=ae.useState(null),[o,l]=ae.useState("idle"),[u,f]=ae.useState(null),{url:m,authToken:y}=t.paymentWorker,v=m&&y,w=b=>{const A="mgkrol99@gmail.com",C=encodeURIComponent("CMS AI Developer Pack"),R="50.00",L="USD",q=encodeURIComponent(b);return`https://www.paypal.com/cgi-bin/webscr?cmd=_xclick&business=${A}&item_name=${C}&amount=${R}&currency_code=${L}&no_shipping=1&custom=${q}`},E=()=>{if(f(null),!v){f("     (Payment Worker)   .");return}const b=`dev-pack-${e}-${Date.now()}`;r(b),l("pending"),window.open(w(b),"_blank")},S=async()=>{if(i){f(null),l("verifying");try{const b=await fetch(`${m.replace(/\/$/,"")}/simulate-paypal-completion`,{method:"POST",headers:{"Content-Type":"application/json","X-Auth-Token":y},body:JSON.stringify({purchaseId:i,userId:e,itemId:"dev-pack-unlock"})});if(!b.ok){const R=await b.json();throw new Error(R.error||"    .")}const A=await fetch(`${m.replace(/\/$/,"")}/get-purchase-status`,{method:"POST",headers:{"Content-Type":"application/json","X-Auth-Token":y},body:JSON.stringify({purchaseId:i})});if(!A.ok){const R=await A.json();throw new Error(R.error||"     .")}const C=await A.json();if(C.success&&C.status==="completed")l("verified"),setTimeout(()=>{n()},1500);else throw new Error("    .      .")}catch(b){f(b.message),l("pending")}}};return g.jsx("div",{className:"p-8 bg-gray-50 min-h-full flex items-center justify-center",children:g.jsxs("div",{className:"max-w-4xl mx-auto",children:[g.jsxs("div",{className:"text-center",children:[g.jsx("div",{className:"inline-block bg-primary/10 p-4 rounded-full",children:g.jsx(ZF,{className:"w-12 h-12 text-primary"})}),g.jsx("h1",{className:"text-4xl font-bold text-neutral mt-4",children:"   "}),g.jsx("p",{className:"text-lg text-gray-600 mt-2 max-w-2xl mx-auto",children:"                ."})]}),g.jsxs("div",{className:"mt-12 grid grid-cols-1 md:grid-cols-2 gap-10 items-center",children:[g.jsxs("div",{className:"space-y-6",children:[g.jsx("h2",{className:"text-2xl font-bold text-neutral",children:" "}),g.jsx(pm,{icon:g.jsx(tB,{className:"w-5 h-5"}),title:"   ",description:"              ."}),g.jsx(pm,{icon:g.jsx(op,{className:"w-5 h-5"}),title:" ",description:"             Facebook  Twitter."}),g.jsx(pm,{icon:g.jsx(Tv,{className:"w-5 h-5"}),title:" Google ",description:"      Google         ."}),g.jsx(pm,{icon:g.jsx(wT,{className:"w-5 h-5"}),title:"   ",description:"     Gemini  ChatGPT   API       ."})]}),g.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-lg border text-center",children:[g.jsx("p",{className:"text-sm font-semibold uppercase text-primary",children:" "}),g.jsx("p",{className:"text-5xl font-bold text-neutral my-2",children:"$50"}),g.jsx("p",{className:"text-gray-500",children:"  "}),o==="idle"&&g.jsx("button",{onClick:E,className:"mt-6 w-full inline-block bg-blue-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-blue-700 transition-colors shadow-md",children:"   PayPal"}),(o==="pending"||o==="verifying")&&g.jsxs("div",{className:"mt-6",children:[g.jsx("div",{className:"text-center text-sm text-gray-500 mb-3",children:"         ."}),g.jsxs("button",{onClick:S,disabled:o==="verifying",className:"w-full bg-primary text-white px-6 py-3 rounded-lg font-semibold hover:bg-secondary transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[o==="verifying"&&g.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),o==="verifying"?" ...":"  "]})]}),g.jsxs("div",{className:"h-8 mt-3",children:[o==="verified"&&g.jsxs("div",{className:"flex items-center justify-center text-green-600 font-semibold",children:[g.jsx(Tv,{className:"w-5 h-5 ml-1"}),g.jsx("span",{children:"  !   ..."})]}),u&&g.jsx("p",{className:"text-red-500 text-sm",children:u})]})]})]})]})})},$W=({product:n,onDelete:e,cmsLang:t})=>g.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 flex items-center justify-between transition-shadow hover:shadow-lg",children:[g.jsxs("div",{className:"flex items-center space-x-4 rtl:space-x-reverse",children:[g.jsx("img",{src:n.imageUrl||"https://picsum.photos/seed/product/100/100",alt:n.name,className:"w-24 h-24 object-cover rounded-md bg-gray-200"}),g.jsxs("div",{children:[g.jsxs("h3",{className:"text-lg font-bold text-neutral flex items-center",children:[n.name,n.status==="draft"&&g.jsx("span",{className:"mr-3 rtl:ml-3 text-xs font-semibold bg-gray-200 text-gray-600 px-2 py-1 rounded-full",children:Q("draft",t)})]}),g.jsxs("p",{className:"text-lg text-primary font-semibold",children:["$",n.price.toFixed(2)]}),g.jsxs("p",{className:"text-sm text-gray-500",children:[Q("createdDate",t),": ",new Date(n.createdAt).toLocaleDateString("ar-EG")]})]})]}),g.jsxs("div",{className:"flex items-center space-x-2 rtl:space-x-reverse",children:[g.jsx(zt,{href:`#admin/products/edit/${n.id}`,className:"p-2 rounded-full text-blue-600 hover:bg-blue-100 transition-colors",children:g.jsx(Xu,{className:"w-5 h-5"})}),g.jsx("button",{onClick:()=>e(n.id),className:"p-2 rounded-full text-red-600 hover:bg-red-100 transition-colors",children:g.jsx(Yr,{className:"w-5 h-5"})})]})]}),WW=({products:n,onDelete:e,cmsLang:t})=>{const i=Q("addNewProduct",t);return g.jsxs("div",{className:"p-8",children:[g.jsxs("div",{className:"flex justify-between items-center mb-6",children:[g.jsx("h1",{className:"text-3xl font-bold text-neutral",children:Q("productList",t)}),g.jsx(zt,{href:"#admin/products/new",className:"bg-primary text-white px-4 py-2 rounded-md hover:bg-secondary",children:i})]}),n.length>0?g.jsx("div",{className:"space-y-4",children:n.sort((r,o)=>new Date(o.createdAt).getTime()-new Date(r.createdAt).getTime()).map(r=>g.jsx($W,{product:r,onDelete:e,cmsLang:t},r.id))}):g.jsxs("div",{className:"text-center py-16 px-8 bg-white rounded-lg shadow-md",children:[g.jsx("h2",{className:"text-xl font-semibold text-gray-700",children:Q("noProductsYet",t)}),g.jsx("p",{className:"text-gray-500 mt-2",children:Q("clickToStart",t,{buttonText:i})})]})]})},KA=({product:n,onSave:e,developerSettings:t,cmsLang:i})=>{const[r,o]=ae.useState(""),[l,u]=ae.useState(""),[f,m]=ae.useState(0),[y,v]=ae.useState(""),[w,E]=ae.useState(!1),[S,b]=ae.useState(null),A=ae.useRef(null);ae.useEffect(()=>{n?(o(n.name),u(n.description),m(n.price),v(n.imageUrl)):(o(""),u(""),m(0),v(""))},[n]);const C=async q=>{var H;const z=(H=q.target.files)==null?void 0:H[0];if(z){b(null),E(!0);try{const O=new FileReader;O.onload=async V=>{var j;const U=(j=V.target)==null?void 0:j.result;if(U){const J=await dp(U),M=await sp(J.optimizedUrl,t.cfWorker);v(M)}},O.readAsDataURL(z)}catch{b(Q("errorImageUploadFailed",i))}finally{E(!1)}}},R=q=>{if(!r||f<0){b(Q("productEditorNamePriceError",i));return}const z={id:(n==null?void 0:n.id)||Ou(),name:r,description:l,price:f,imageUrl:y,status:q,createdAt:(n==null?void 0:n.createdAt)||new Date().toISOString()};e(z)},L=(n==null?void 0:n.status)==="published";return g.jsxs("div",{className:"p-4 sm:p-8",children:[g.jsxs("div",{className:"flex items-center justify-between mb-6",children:[g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsx("h1",{className:"text-3xl font-bold text-neutral",children:Q(n?"editProduct":"newProduct",i)}),g.jsxs(zt,{href:"#admin/products",className:"flex items-center space-x-2 rtl:space-x-reverse text-sm text-gray-500 hover:text-primary hover:underline font-semibold",children:[g.jsx(pN,{className:"rtl:rotate-180 w-5 h-5"}),g.jsx("span",{children:Q("backToProducts",i)})]})]}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("button",{onClick:()=>R("draft"),type:"button",className:"bg-white text-gray-800 px-6 py-3 rounded-lg font-semibold hover:bg-gray-100 disabled:bg-gray-300 disabled:cursor-not-allowed transition-all shadow-md border",disabled:w,children:Q("saveDraft",i)}),g.jsx("button",{onClick:()=>R("published"),type:"button",className:"bg-primary text-white px-8 py-3 rounded-lg font-semibold hover:bg-secondary disabled:bg-gray-300 disabled:cursor-not-allowed transition-all shadow-md hover:shadow-lg",disabled:w,children:Q(L?"updateProduct":"publishProduct",i)})]})]}),g.jsxs("div",{className:"space-y-6 bg-white p-6 rounded-lg shadow-md",children:[g.jsxs("div",{children:[g.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:Q("productName",i)}),g.jsx("input",{id:"name",type:"text",value:r,onChange:q=>o(q.target.value),className:"w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary focus:border-transparent bg-white text-gray-900 text-lg",required:!0,placeholder:Q("productNamePlaceholder",i)})]}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-6",children:[g.jsxs("div",{className:"md:col-span-1",children:[g.jsx("label",{htmlFor:"price",className:"block text-sm font-medium text-gray-700 mb-1",children:Q("productPrice",i)}),g.jsx("input",{type:"number",id:"price",value:f,onChange:q=>m(parseFloat(q.target.value)||0),min:"0",step:"0.01",className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary"})]}),g.jsxs("div",{className:"md:col-span-4",children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:Q("productImage",i)}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("input",{type:"file",ref:A,onChange:C,className:"hidden",accept:"image/*"}),g.jsx("button",{type:"button",onClick:()=>{var q;return(q=A.current)==null?void 0:q.click()},className:"bg-gray-200 text-gray-700 px-4 py-2 rounded-md hover:bg-gray-300 text-sm font-semibold",children:Q("uploadImageButton",i)})]})]})]}),(y||w)&&g.jsxs("div",{className:"border-t pt-4",children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:Q("imagePreviewLabel",i)}),g.jsx("div",{className:"w-full max-w-sm aspect-square border-2 border-dashed rounded-md flex items-center justify-center bg-gray-50 overflow-hidden relative",children:w?g.jsxs("div",{className:"text-center",children:[g.jsx("div",{className:"w-8 h-8 border-4 border-accent border-t-transparent rounded-full animate-spin mx-auto"}),g.jsx("p",{className:"text-sm text-gray-500 mt-2",children:Q("uploading",i)})]}):y?g.jsx("img",{src:y,alt:"Product visual",className:"w-full h-full object-cover"}):g.jsx(bN,{className:"w-12 h-12 text-gray-300"})})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:Q("productDescription",i)}),g.jsx("textarea",{id:"description",value:l,onChange:q=>u(q.target.value),rows:10,className:"w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary",placeholder:Q("productDescriptionPlaceholder",i)})]}),S&&g.jsx("p",{className:"mt-4 text-red-500 text-sm bg-red-100 p-3 rounded-md",children:S})]})]})},KW=({developerSettings:n})=>{const e=ae.useRef(null),[t,i]=ae.useState(!1),[r,o]=ae.useState("idle"),{paypalClientId:l,stripePublishableKey:u}=n.ecommerce;ae.useEffect(()=>{if(l&&!window.paypal){const m=document.createElement("script");m.src=`https://www.paypal.com/sdk/js?client-id=${l}&currency=USD`,m.onload=()=>{i(!0)},document.body.appendChild(m)}else window.paypal&&i(!0)},[l]),ae.useEffect(()=>{t&&e.current&&window.paypal&&(e.current.innerHTML="",window.paypal.Buttons({createOrder:(m,y)=>y.order.create({purchase_units:[{description:"CMS E-commerce Product",amount:{value:"59.99"}}]}),onApprove:async(m,y)=>{o("processing"),console.log("Order approved:",m),setTimeout(()=>o("success"),2e3)},onError:m=>{console.error("PayPal Error:",m),o("error")}}).render(e.current))},[t]);const f=()=>{if(!u){alert("Stripe is not configured.");return}o("processing"),console.log("Initiating Stripe Checkout..."),setTimeout(()=>{o("success")},2500)};return g.jsx("div",{className:"bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:g.jsxs("div",{className:"max-w-md mx-auto bg-white rounded-lg shadow-md p-8",children:[g.jsx("h2",{className:"text-2xl font-bold text-center text-neutral mb-6",children:"  "}),r==="success"?g.jsxs("div",{className:"text-center text-green-600",children:[g.jsx("h3",{className:"text-xl font-semibold",children:" !"}),g.jsx("p",{children:"   ."})]}):r==="error"?g.jsxs("div",{className:"text-center text-red-600",children:[g.jsx("h3",{className:"text-xl font-semibold",children:" "}),g.jsx("p",{children:"     .    ."})]}):g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"mb-6 pb-6 border-b",children:g.jsxs("div",{className:"flex justify-between items-center",children:[g.jsx("p",{className:"text-gray-700",children:" "}),g.jsx("p",{className:"font-semibold text-neutral",children:"$59.99"})]})}),g.jsxs("div",{className:"space-y-4",children:[g.jsx("button",{onClick:f,disabled:!u||r==="processing",className:"w-full bg-indigo-600 text-white py-3 rounded-md font-semibold hover:bg-indigo-700 transition-colors disabled:bg-gray-400",children:r==="processing"?" ...":"  Stripe"}),!l&&g.jsx("p",{className:"text-center text-sm text-gray-500",children:"PayPal  ."}),g.jsx("div",{ref:e,className:`${r==="processing"?"opacity-50 pointer-events-none":""}`})]})]})]})})},JW=(n,e)=>{if(!n.htmlHome)return"<div>   .</div>";const i=new DOMParser().parseFromString(n.htmlHome,"text/html");return i.querySelectorAll("[data-editable]").forEach(o=>{const l=o.dataset.editable;if(!l)return;const u=e[l];if(u==null)return;const f=o.tagName.toLowerCase();f==="img"&&typeof u=="string"?o.src=u:f==="a"&&typeof u=="object"&&u!==null&&"text"in u&&"href"in u?(o.href=u.href,o.textContent=u.text):typeof u=="string"&&(o.innerHTML=u)}),i.body.innerHTML},dP=({activeTemplate:n,content:e,isAuthenticated:t,showAdminLogin:i,isPreview:r})=>{const o=ae.useMemo(()=>JW(n,e),[n,e]),l=ae.useMemo(()=>{if(n.customCss){const u=n.customCss.match(/<link[^>]*href="([^"]*)"[^>]*>/);if(u&&u[1])return u[0]}return null},[n.customCss]);return g.jsxs(g.Fragment,{children:[l&&g.jsx("div",{dangerouslySetInnerHTML:{__html:l}}),t&&i&&!r&&g.jsx(zt,{href:"#admin",className:"admin-fab",title:" ",children:g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24",strokeWidth:"1.5",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 6h9.75M10.5 6a1.5 1.5 0 1 1-3 0m3 0a1.5 1.5 0 1 0-3 0M3.75 6H7.5m3 12h9.75m-9.75 0a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m-3.75 0H7.5m9-6h3.75m-3.75 0a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m-9.75 0h9.75"})})}),g.jsx("div",{dangerouslySetInnerHTML:{__html:o}})]})},YW=({activeTemplate:n,initialContent:e,onSave:t,developerSettings:i})=>{const[r,o]=ae.useState(e),[l,u]=ae.useState([]),[f,m]=ae.useState(!1),y=ae.useRef({}),[v,w]=ae.useState(null);ae.useEffect(()=>{o(e)},[e]),ae.useEffect(()=>{if(!n.htmlHome){u([]);return}const L=new DOMParser().parseFromString(n.htmlHome,"text/html").querySelectorAll("[data-editable]"),q=[];L.forEach(z=>{const H=z.dataset.editable||"";if(!H||q.some(U=>U.key===H))return;const O=z.dataset.label||H,V=z.tagName.toLowerCase();if(V==="img")q.push({key:H,type:"image",label:`: ${O}`,defaultValue:z.getAttribute("src")||""});else if(V==="a")q.push({key:H,type:"link",label:`: ${O}`,defaultValue:{text:z.textContent||"",href:z.getAttribute("href")||"#"}});else{const U=(z.textContent||"").length>80?"textarea":"text";q.push({key:H,type:U,label:`: ${O}`,defaultValue:z.innerHTML||z.textContent||""})}}),u(q)},[n]);const E=(C,R)=>{o(L=>({...L,[C]:R}))},S=()=>{t(r),m(!0),setTimeout(()=>m(!1),3e3)},b=async(C,R)=>{var q;const L=(q=C.target.files)==null?void 0:q[0];if(L){w(R);try{const z=new FileReader;z.onload=async H=>{var V;const O=(V=H.target)==null?void 0:V.result;if(O){const{optimizedUrl:U}=await dp(O),j=await sp(U,i.cfWorker);E(R,j)}w(null)},z.onerror=()=>{w(null)},z.readAsDataURL(L)}catch(z){console.error(z),w(null)}}},A=C=>{const R=r[C.key]??C.defaultValue;switch(C.type){case"image":const L=R,q=v===C.key;return g.jsxs("div",{className:"p-3 bg-white rounded-md border space-y-2",children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700",children:C.label}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("img",{src:L,alt:"preview",className:"w-10 h-10 object-cover rounded bg-gray-100"}),g.jsx("input",{type:"url",value:L,onChange:H=>E(C.key,H.target.value),placeholder:"https://...",className:"w-full p-2 border rounded-md focus:ring-primary ltr bg-white text-sm"})]}),g.jsx("input",{type:"file",ref:H=>{y.current[C.key]=H},onChange:H=>b(H,C.key),className:"hidden",accept:"image/*"}),g.jsx("button",{type:"button",onClick:()=>{var H;return(H=y.current[C.key])==null?void 0:H.click()},disabled:q,className:"w-full text-center text-sm p-2 bg-gray-100 hover:bg-gray-200 rounded-md font-semibold text-gray-700 disabled:opacity-50",children:q?" ...":" "})]},C.key);case"link":const z=R;return g.jsxs("div",{className:"p-3 bg-white rounded-md border space-y-2",children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700",children:C.label}),g.jsx("input",{type:"text",value:z.text,onChange:H=>E(C.key,{...z,text:H.target.value}),placeholder:" ",className:"w-full p-2 border rounded-md focus:ring-primary bg-white text-sm"}),g.jsx("input",{type:"url",value:z.href,onChange:H=>E(C.key,{...z,href:H.target.value}),placeholder:"https://...",className:"w-full p-2 border rounded-md focus:ring-primary ltr bg-white text-sm"})]},C.key);case"textarea":return g.jsxs("div",{className:"p-3 bg-white rounded-md border space-y-1",children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700",children:C.label}),g.jsx("textarea",{value:R,onChange:H=>E(C.key,H.target.value),rows:4,className:"w-full p-2 border rounded-md focus:ring-primary bg-white text-sm"})]},C.key);case"text":default:return g.jsxs("div",{className:"p-3 bg-white rounded-md border space-y-1",children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700",children:C.label}),g.jsx("input",{type:"text",value:R,onChange:H=>E(C.key,H.target.value),className:"w-full p-2 border rounded-md focus:ring-primary bg-white text-sm"})]},C.key)}};return g.jsxs("div",{className:"flex flex-col h-screen",children:[g.jsxs("div",{className:"p-4 bg-white border-b flex justify-between items-center shrink-0",children:[g.jsxs("div",{children:[g.jsx("h1",{className:"text-xl font-bold text-neutral",children:"  "}),g.jsxs("p",{className:"text-sm text-gray-500",children:[" : ",n.name]})]}),g.jsx("button",{onClick:S,className:`px-6 py-2 rounded-md font-semibold transition-all duration-300 ${f?"bg-green-500 text-white":"bg-primary text-white hover:bg-secondary"}`,children:f?" !":" "})]}),g.jsxs("div",{className:"flex-grow grid grid-cols-1 md:grid-cols-3 overflow-hidden",children:[g.jsxs("div",{className:"md:col-span-1 bg-gray-50 p-4 overflow-y-auto space-y-4 border-l",children:[g.jsx("h2",{className:"font-semibold text-lg pb-2 border-b",children:"  "}),l.length>0?l.map(A):g.jsx("p",{className:"text-sm text-gray-500 p-4 text-center bg-gray-100 rounded-md",children:'       .   `data-editable="key"`  HTML    .'})]}),g.jsx("div",{className:"md:col-span-2 bg-gray-200 overflow-y-auto",children:g.jsx("div",{className:"bg-white mx-auto my-4 shadow-lg",style:{width:"100%"},children:g.jsx(dP,{activeTemplate:n,content:r,isAuthenticated:!1,showAdminLogin:!1,isPreview:!0})})})]})]})},QW=({product:n})=>g.jsxs("div",{className:"group relative",children:[g.jsx("div",{className:"aspect-h-1 aspect-w-1 w-full overflow-hidden rounded-md bg-gray-200 lg:aspect-none group-hover:opacity-75 lg:h-80",children:g.jsx("img",{src:n.imageUrl||"https://tailwindui.com/img/ecommerce-images/product-page-01-related-product-01.jpg",alt:n.name,className:"h-full w-full object-cover object-center lg:h-full lg:w-full"})}),g.jsxs("div",{className:"mt-4 flex justify-between",children:[g.jsxs("div",{children:[g.jsx("h3",{className:"text-sm text-gray-700",children:g.jsxs(zt,{href:`#products/${n.id}`,children:[g.jsx("span",{"aria-hidden":"true",className:"absolute inset-0"}),n.name]})}),g.jsx("p",{className:"mt-1 text-sm text-gray-500 line-clamp-2",children:n.description})]}),g.jsxs("p",{className:"text-sm font-medium text-neutral",children:["$",n.price.toFixed(2)]})]})]}),XW=({products:n})=>g.jsx("div",{className:"bg-gray-50",children:g.jsxs("div",{className:"mx-auto max-w-2xl px-4 py-16 sm:px-6 sm:py-24 lg:max-w-7xl lg:px-8",children:[g.jsxs("div",{className:"flex justify-between items-center pb-8 border-b border-gray-200",children:[g.jsx("h2",{className:"text-4xl font-bold tracking-tight text-neutral",children:" "}),g.jsx(zt,{href:"#blog",className:"text-sm font-semibold text-primary hover:text-secondary",children:"   "})]}),n.length>0?g.jsx("div",{className:"mt-6 grid grid-cols-1 gap-x-6 gap-y-10 sm:grid-cols-2 lg:grid-cols-4 xl:gap-x-8",children:n.map(e=>g.jsx(QW,{product:e},e.id))}):g.jsxs("div",{className:"text-center py-20",children:[g.jsx("h3",{className:"text-xl font-semibold text-gray-700",children:"    "}),g.jsx("p",{className:"text-gray-500 mt-2",children:"  !"})]})]})}),ZW=({cmsLang:n,onLangChange:e,seoSettings:t,onSaveSeoSettings:i})=>{const[r,o]=ae.useState(n),[l,u]=ae.useState(t),[f,m]=ae.useState(!1);ae.useEffect(()=>{u(t)},[t]);const y=w=>{const{name:E,value:S}=w.target;u(b=>({...b,[E]:S}))},v=()=>{e(r),i(l),m(!0),setTimeout(()=>m(!1),3e3)};return g.jsxs("div",{className:"p-8",children:[g.jsxs("div",{className:"flex justify-between items-start mb-6",children:[g.jsxs("div",{children:[g.jsxs("h1",{className:"text-3xl font-bold text-neutral flex items-center gap-2",children:[g.jsx(yN,{}),g.jsx("span",{children:Q("systemSettingsTitle",n)})]}),g.jsx("p",{className:"text-gray-600 mt-1",children:Q("systemSettingsDesc",n)})]}),g.jsx("button",{onClick:v,className:`px-6 py-2 rounded-md font-semibold transition-all duration-300 ${f?"bg-green-500 text-white":"bg-primary text-white hover:bg-secondary"}`,children:Q(f?"saved":"saveChanges",n)})]}),g.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md max-w-2xl",children:[g.jsx("h2",{className:"text-xl font-semibold mb-4 text-neutral",children:" "}),g.jsxs("div",{className:"space-y-6",children:[g.jsxs("div",{children:[g.jsx("label",{htmlFor:"siteUrl",className:"block text-sm font-medium text-gray-700 mb-1",children:"  (URL)"}),g.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"    () .    . : https://example.com"}),g.jsx("input",{type:"url",id:"siteUrl",name:"siteUrl",value:l.siteUrl,onChange:y,className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary bg-white text-gray-900 ltr",placeholder:"https://example.com"})]}),g.jsxs("div",{className:"border-t pt-6",children:[g.jsx("label",{htmlFor:"interfaceLanguage",className:"block text-sm font-medium text-gray-700 mb-1",children:Q("interfaceLanguage",n)}),g.jsx("p",{className:"text-xs text-gray-500 mb-2",children:Q("interfaceLanguageDesc",n)}),g.jsxs("select",{id:"interfaceLanguage",value:r,onChange:w=>o(w.target.value),className:"w-full max-w-xs p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary bg-white text-gray-900","aria-label":Q("interfaceLanguage",n),children:[g.jsx("option",{value:"ar",children:""}),g.jsx("option",{value:"en",children:"English"}),g.jsx("option",{value:"fr",children:"Franais"})]})]})]})]})]})},eK={id:"fallback",name:"No Template Loaded",thumbnail:"https://cdn.jsdelivr.net/gh/ph-2/proj-images/GFx/cms-template-fallback.svg",styles:{},htmlHome:'<div style="padding: 4rem; text-align: center; font-family: sans-serif;"><h1>No Template Loaded</h1><p>Please go to the admin panel to upload and activate a template.</p><a href="#admin/templates" style="color: blue; text-decoration: underline;">Go to Templates</a></div>',htmlPost:'<div style="padding: 4rem; text-align: center; font-family: sans-serif;"><h1>No Template Loaded</h1><p>Please go to the admin panel to upload and activate a template.</p><a href="#admin/templates" style="color: blue; text-decoration: underline;">Go to Templates</a></div>',htmlPage:'<div style="padding: 4rem; text-align: center; font-family: sans-serif;"><h1>No Template Loaded</h1><p>Please go to the admin panel to upload and activate a template.</p><a href="#admin/templates" style="color: blue; text-decoration: underline;">Go to Templates</a></div>'},R_={siteUrl:"",siteName:{ar:""},siteDescription:{ar:" "},siteMetaDescription:{ar:"     ."},supportedLanguages:[{code:"ar",name:"Arabic",direction:"rtl"}],googleAnalytics:{enabled:!1,id:""},googleSearchConsole:{enabled:!1,id:""},bingWebmaster:{enabled:!1,id:""},adsense:{enabled:!1,id:""},disqusShortname:"",programmableSearchEngineId:"",enableSitemap:!0,robotsTxtContent:`User-agent: *
Allow: /`,requireImageAlts:!1,showAdminLogin:!0},JA={body:{fontSize:"1rem",color:"#333333",textAlign:"right",lineHeight:"1.7"},siteTitle:{fontSize:"2.5rem",color:"#111111"},siteTagline:{fontSize:"1rem",color:"#555555"},postTitle:{fontSize:"2.25rem",color:"#111111"},h2:{fontSize:"1.875rem",color:"#111111",textAlign:"right",lineHeight:"1.4"},h3:{fontSize:"1.5rem",color:"#222222",textAlign:"right",lineHeight:"1.5"},h4:{fontSize:"1.25rem",color:"#333333",textAlign:"right",lineHeight:"1.6"},h5:{fontSize:"1.125rem",color:"#444444",textAlign:"right",lineHeight:"1.6"}},YA={relatedPostsWidget:{title:{ar:"  "},sortBy:"category",maxPosts:5},categoriesWidget:{title:{ar:""},enabled:!0},showSidebarOnHome:!1},QA={placeholderMaxPosts:3},N_={isUnlocked:!1,autoPost:{facebook:{enabled:!1,apiKey:""},twitter:{enabled:!1,apiKey:""},pinterest:{enabled:!1,apiKey:""},reddit:{enabled:!1,apiKey:""},linkedin:{enabled:!1,apiKey:""}},googleIndexing:{enabled:!1,apiKey:""},googleAnalytics:{apiKey:""},aiSettings:{provider:"gemini",geminiApiKey:"",chatgptApiKey:""},cfWorker:{url:"",authToken:""},ecommerce:{blogPath:"blog",paypalClientId:"",stripePublishableKey:""},paymentWorker:{url:"",authToken:""}},XA={ctaBanner:{enabled:!0,headline:"         !",buttonText:" ",learnMoreUrl:"#subscribe"},searchWidget:{enabled:!0,title:"  ",inputLabel:" ",inputPlaceholder:"  ...",buttonText:"",searchUrl:"#search"}},tK=()=>{const{user:n,loading:e}=jF(),[t,i]=ae.useState([]),[r,o]=ae.useState([]),[l,u]=ae.useState([]),[f,m]=ae.useState([]),[y,v]=ae.useState([]),[w,E]=ae.useState([]),[S,b]=ae.useState(R_),[A,C]=ae.useState(JA),[R,L]=ae.useState(YA),[q,z]=ae.useState([]),[H,O]=ae.useState(QA),[V,U]=ae.useState(N_),[j,J]=ae.useState(XA),[M,F]=ae.useState([]),[k,ne]=ae.useState({}),[te,X]=ae.useState([]),[_e,me]=ae.useState(""),[K,Y]=ae.useState(!0),[Z,he]=ae.useState("home"),[ve,we]=ae.useState({}),[ke,it]=ae.useState(!1),[Me,st]=ae.useState(()=>localStorage.getItem("cmsLang")||"ar"),yt=ae.useMemo(()=>[...te],[te]),Ze=ae.useMemo(()=>yt.find(Se=>Se.id===_e)||yt[0]||eK,[yt,_e]),Bt=Ze.isEcommerce===!0,Pt=Ze.templateType==="landing-page";ae.useEffect(()=>{document.documentElement.lang=Me,document.documentElement.dir=Me==="ar"?"rtl":"ltr"},[Me]);const P=Se=>{st(Se),localStorage.setItem("cmsLang",Se)};ae.useEffect(()=>{const Se=async()=>{var Qe;Y(!0);try{const qe=V.cfWorker,je=await kF(qe),ot=await MF(qe),vt=await LF(qe);i(je),o(ot),u(vt);const[Wt,_n,li,rr,Ii,Qr,ut,Yt,jt,ui,Xr,rc,yr,tl]=await Promise.all([sF(),rI(),uF(),dF(),hF(),pF(),yF(),vF(),sI(),EF(),wF(),IF(),CF(),NF()]);m(Wt),b(_n||R_),C(li||JA),L(rr||YA),z(Ii),O(Qr||QA),v(ut),E(Yt),U(jt||N_),X(ui),me((Xr==null?void 0:Xr.id)||((Qe=ui[0])==null?void 0:Qe.id)||""),J(rc||XA),F(yr),ne(tl)}catch(qe){console.error("Failed to load initial data:",qe)}finally{Y(!1)}};V.cfWorker.url&&V.cfWorker.authToken?Se():Promise.all([sI(),rI()]).then(([Qe,qe])=>{const je=Qe||N_;U(je),b(qe||R_),je.cfWorker.url&&je.cfWorker.authToken?Se():Y(!1)})},[V.cfWorker.url,V.cfWorker.authToken]),ae.useEffect(()=>{!K&&n&&(async()=>{if(n&&V.paymentWorker.url&&V.paymentWorker.authToken&&!V.isUnlocked)try{const Qe=await fetch(`${V.paymentWorker.url.replace(/\/$/,"")}/get-user-unlock-status`,{method:"POST",headers:{"Content-Type":"application/json","X-Auth-Token":V.paymentWorker.authToken},body:JSON.stringify({userId:n.uid})});if(Qe.ok){const qe=await Qe.json();if(qe.success&&qe.isUnlocked){const je={...V,isUnlocked:!0};U(je),oI(je)}}}catch(Qe){console.error("Failed to sync unlock status:",Qe)}})()},[n,V.paymentWorker.url,V.paymentWorker.authToken,K]),ae.useEffect(()=>{const Se=()=>{const Qe=window.location.hash.replace(/^#\/?/,""),qe={admin:/^admin$/,"admin/posts/new":/^admin\/posts\/new$/,"admin/posts/edit/:id":/^admin\/posts\/edit\/(?<id>[^/]+)$/,"admin/pages":/^admin\/pages$/,"admin/pages/new":/^admin\/pages\/new$/,"admin/pages/edit/:id":/^admin\/pages\/edit\/(?<id>[^/]+)$/,"admin/categories":/^admin\/categories$/,"admin/templates":/^admin\/templates$/,"admin/sidebar":/^admin\/sidebar$/,"admin/writing":/^admin\/writing$/,"admin/seo":/^admin\/seo$/,"admin/sitemap":/^admin\/sitemap$/,"admin/accounts":/^admin\/accounts$/,"admin/related-posts":/^admin\/related-posts$/,"admin/menus":/^admin\/menus$/,"admin/developer":/^admin\/developer$/,"admin/analytics":/^admin\/analytics$/,"admin/marketing":/^admin\/marketing$/,"admin/ads":/^admin\/ads$/,"admin/products":/^admin\/products$/,"admin/products/new":/^admin\/products\/new$/,"admin/products/edit/:id":/^admin\/products\/edit\/(?<id>[^/]+)$/,"admin/landing-page":/^admin\/landing-page$/,"admin/system":/^admin\/system$/};let je;Pt?je={preview:/^preview$/,home:/^$/,"blog/home":/^blog$/,"blog/page":/^blog\/page\/(?<pageNumber>\d+)$/,"blog/posts/:id":/^blog\/posts\/(?<id>[^/]+)$/,"blog/category/:slug":/^blog\/category\/(?<slug>[^/]+)$/,"blog/category/:slug/page/:pageNumber":/^blog\/category\/(?<slug>[^/]+)\/page\/(?<pageNumber>\d+)$/,"products/:id":/^products\/(?<id>[^/]+)$/,checkout:/^checkout$/,login:/^login$/,":slug":/^(?!blog)(?<slug>[^/]+)$/}:je={preview:/^preview$/,home:/^$/,page:/^page\/(?<pageNumber>\d+)$/,"fr/page":/^fr\/page\/(?<pageNumber>\d+)$/,"en/page":/^en\/page\/(?<pageNumber>\d+)$/,"posts/:id":/^posts\/(?<id>[^/]+)$/,"fr/posts/:id":/^fr\/posts\/(?<id>[^/]+)$/,"en/posts/:id":/^en\/posts\/(?<id>[^/]+)$/,"products/:id":/^products\/(?<id>[^/]+)$/,"fr/products/:id":/^fr\/products\/(?<id>[^/]+)$/,"en/products/:id":/^en\/products\/(?<id>[^/]+)$/,"category/:slug":/^category\/(?<slug>[^/]+)$/,"category/:slug/page/:pageNumber":/^category\/(?<slug>[^/]+)\/page\/(?<pageNumber>\d+)$/,"fr/category/:slug":/^fr\/category\/(?<slug>[^/]+)$/,"fr/category/:slug/page/:pageNumber":/^fr\/category\/(?<slug>[^/]+)\/page\/(?<pageNumber>\d+)$/,"en/category/:slug":/^en\/category\/(?<slug>[^/]+)$/,"en/category/:slug/page/:pageNumber":/^en\/category\/(?<slug>[^/]+)\/page\/(?<pageNumber>\d+)$/,checkout:/^checkout$/,login:/^login$/,":slug":/^(?<slug>[^/]+)$/,"fr/:slug":/^fr\/(?<slug>[^/]+)$/,"en/:slug":/^en\/(?<slug>[^/]+)$/};const ot={...qe,...je};for(const[vt,Wt]of Object.entries(ot)){const _n=Qe.match(Wt);if(_n){he(vt),we(_n.groups||{});return}}he("404"),we({})};return window.addEventListener("hashchange",Se),Se(),()=>window.removeEventListener("hashchange",Se)},[Bt,Pt]),ae.useEffect(()=>{const Se=document.getElementById("dynamic-typography-styles");if(Se){const Qe=`
                .prose {
                    font-size: ${A.body.fontSize};
                    color: ${A.body.color};
                    line-height: ${A.body.lineHeight};
                    text-align: ${A.body.textAlign};
                }
                .prose h1, .post-title-class { /* Add class for templates */
                    font-size: ${A.postTitle.fontSize};
                    color: ${A.postTitle.color};
                }
                 .prose h2 {
                    font-size: ${A.h2.fontSize};
                    color: ${A.h2.color};
                    line-height: ${A.h2.lineHeight};
                    text-align: ${A.h2.textAlign};
                }
                 .prose h3 {
                    font-size: ${A.h3.fontSize};
                    color: ${A.h3.color};
                    line-height: ${A.h3.lineHeight};
                    text-align: ${A.h3.textAlign};
                }
                 .prose h4 {
                    font-size: ${A.h4.fontSize};
                    color: ${A.h4.color};
                    line-height: ${A.h4.lineHeight};
                    text-align: ${A.h4.textAlign};
                }
                 .prose h5 {
                    font-size: ${A.h5.fontSize};
                    color: ${A.h5.color};
                    line-height: ${A.h5.lineHeight};
                    text-align: ${A.h5.textAlign};
                }
            `;Se.innerHTML=Qe}},[A]),ae.useEffect(()=>{var qe;const Se="adsense-script",Qe=document.getElementById(Se);if((qe=S.adsense)!=null&&qe.enabled&&S.adsense.id)if(Qe)Qe.src.includes(S.adsense.id)||(Qe.src=`https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=${S.adsense.id}`);else{const je=document.createElement("script");je.id=Se,je.src=`https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=${S.adsense.id}`,je.async=!0,je.crossOrigin="anonymous",document.head.appendChild(je)}else Qe&&Qe.remove()},[S.adsense]);const xe=async Se=>{const Qe=t;i(qe=>qe.find(ot=>ot.id===Se.id)?qe.map(ot=>ot.id===Se.id?Se:ot):[Se,...qe]),window.location.hash="#admin";try{await aI(Se,V.cfWorker),Se.status==="published"&&!Qe.find(qe=>qe.id===Se.id&&qe.status==="published")&&(BF(Se,V),qF(Se,V))}catch(qe){console.error("Failed to save post:",qe),i(Qe)}},se=async Se=>{if(window.confirm(Q("confirmDeletePost",Me))){const Qe=t;i(qe=>qe.filter(je=>je.id!==Se));try{await DF(Se,V.cfWorker)}catch(qe){console.error("Failed to delete post:",qe),i(Qe)}}},$=async Se=>{const Qe=l;u(qe=>qe.find(ot=>ot.id===Se.id)?qe.map(ot=>ot.id===Se.id?Se:ot):[Se,...qe]),window.location.hash="#admin/products";try{await OF(Se,V.cfWorker)}catch(qe){console.error("Failed to save product:",qe),u(Qe)}},W=async Se=>{if(window.confirm("      ")){const Qe=l;u(qe=>qe.filter(je=>je.id!==Se));try{await FF(Se,V.cfWorker)}catch(qe){console.error("Failed to delete product:",qe),u(Qe)}}},re=async Se=>{const Qe=r;o(qe=>qe.find(ot=>ot.id===Se.id)?qe.map(ot=>ot.id===Se.id?Se:ot):[Se,...qe]),window.location.hash="#admin/pages";try{await VF(Se,V.cfWorker)}catch(qe){console.error("Failed to save page:",qe),o(Qe)}},Ee=async Se=>{if(window.confirm(Q("confirmDeletePage",Me))){const Qe=r;o(qe=>qe.filter(je=>je.id!==Se));try{await UF(Se,V.cfWorker)}catch(qe){console.error("Failed to delete page:",qe),o(Qe)}}},Ae=async(Se,Qe)=>{const qe={id:Ou(),name:Se,slug:Qe},je=f;m(ot=>[...ot,qe].sort((vt,Wt)=>vt.name.localeCompare(Wt.name)));try{await oF(qe)}catch(ot){console.error("Failed to add category:",ot),m(je)}},ce=async Se=>{if(window.confirm(Q("confirmDeleteCategory",Me))){const Qe=f,qe=t;m(vt=>vt.filter(Wt=>Wt.id!==Se));const je=t.filter(vt=>vt.categoryId===Se),ot=t.map(vt=>vt.categoryId===Se?{...vt,categoryId:null}:vt);i(ot);try{await aF(Se);const vt=je.map(Wt=>aI({...Wt,categoryId:null},V.cfWorker));await Promise.all(vt)}catch(vt){console.error("Failed to delete category and update posts:",vt),m(Qe),i(qe)}}},Ne=Se=>{b(Se),lF(Se)},Fe=Se=>{C(Se),cF(Se)},Ve=Se=>{L(Se),fF(Se)},Oe=Se=>{z(Se),mF(Se)},Ke=Se=>{O(Se),gF(Se)},We=Se=>{v(Se),_F(Se)},_t=Se=>{E(Se),TF(Se)},si=Se=>{U(Se),oI(Se)},Yn=Se=>{J(Se),AF(Se)},oi=Se=>{F(Se),RF(Se)},At=Se=>{ne(Se),PF(Se)},ai=Se=>{me(Se),xF({id:Se})},Bn=async Se=>{const Qe={...Se,id:Ou(),isCustom:!0},qe=te;X(je=>[Qe,...je]);try{await bF(Qe),yt.length===0&&ai(Qe.id)}catch{X(qe)}},Pn=async Se=>{if(window.confirm("      ")){const Qe=te;X(qe=>qe.filter(je=>je.id!==Se));try{await SF(Se)}catch{X(Qe)}}};return(()=>{if(e||K)return g.jsx("div",{className:"flex items-center justify-center h-screen",children:g.jsx("div",{className:"w-12 h-12 border-4 border-primary border-t-transparent rounded-full animate-spin"})});if(!n){if(Z==="login"||window.location.hash.startsWith("#login"))return g.jsx(VA,{onLoginSuccess:()=>window.location.hash="#admin"});if(Z.startsWith("admin"))return window.location.hash="#login",g.jsx(VA,{onLoginSuccess:()=>window.location.hash="#admin"})}if(!Z.startsWith("admin")){const Se=t.filter(_n=>_n.status==="published"),Qe=r.filter(_n=>_n.status==="published"),qe=l.filter(_n=>_n.status==="published"),je=Z.startsWith("fr/")?"fr":Z.startsWith("en/")?"en":"ar",ot=Bt?`${V.ecommerce.blogPath}/`:"",vt=(je==="fr"?S.siteName.fr:je==="en"?S.siteName.en:S.siteName.ar)||S.siteName.ar,Wt=(je==="fr"?S.siteDescription.fr:je==="en"?S.siteDescription.en:S.siteDescription.ar)||S.siteDescription.ar;return g.jsx(GW,{activeTemplate:Ze,children:(()=>{switch(Z){case"home":return Pt?g.jsx(dP,{activeTemplate:Ze,content:k,isAuthenticated:!!n,showAdminLogin:S.showAdminLogin}):Bt?g.jsx(XW,{products:qe}):g.jsx(fm,{posts:Se,siteName:vt,siteDescription:Wt,activeTemplate:Ze,isAuthenticated:!!n,showAdminLogin:S.showAdminLogin,currentPage:1,lang:"ar",seoSettings:S});case"blog/home":return g.jsx(fm,{posts:Se,siteName:vt,siteDescription:Wt,activeTemplate:Ze,isAuthenticated:!!n,showAdminLogin:S.showAdminLogin,currentPage:1,lang:"ar",blogPath:"blog/",seoSettings:S});case"page":case"blog/page":return g.jsx(fm,{posts:Se,siteName:vt,siteDescription:Wt,activeTemplate:Ze,isAuthenticated:!!n,showAdminLogin:S.showAdminLogin,currentPage:parseInt(ve.pageNumber,10)||1,lang:"ar",blogPath:ot,seoSettings:S});case"fr/page":case"en/page":return g.jsx(fm,{posts:Se,siteName:vt,siteDescription:Wt,activeTemplate:Ze,isAuthenticated:!!n,showAdminLogin:S.showAdminLogin,currentPage:parseInt(ve.pageNumber,10)||1,lang:je,seoSettings:S});case"posts/:id":case"fr/posts/:id":case"en/posts/:id":case"blog/posts/:id":const _n=Se.find(ut=>ut.id===ve.id);if(_n)return g.jsx(qA,{post:_n,allPosts:Se,categories:f,seoSettings:S,relatedPostsGlobalSettings:H,marketingSettings:j,activeTemplate:Ze,sidebarProps:{settings:R,allPosts:Se,socialLinks:q,categories:f,currentPost:_n},isAuthenticated:!!n,showAdminLogin:S.showAdminLogin,lang:je,adUnits:M});break;case"products/:id":case"fr/products/:id":case"en/products/:id":const li=qe.find(ut=>ut.id===ve.id);if(li){const ut={...li,title:{ar:li.name},content:{ar:li.description},categoryId:null,showSidebar:!1,relatedPostsSettings:{enabled:!1,position:"after-p",p_count:0},imageCaption:""},Yt=qe.map(jt=>({...jt,title:{ar:jt.name},content:{ar:jt.description},categoryId:null,showSidebar:!1,relatedPostsSettings:{enabled:!1,position:"after-p",p_count:0},imageCaption:""}));return g.jsx(qA,{post:ut,allPosts:Yt,categories:f,seoSettings:S,relatedPostsGlobalSettings:H,marketingSettings:j,activeTemplate:Ze,sidebarProps:{settings:R,allPosts:Yt,socialLinks:q,categories:f,currentPost:ut},isAuthenticated:!!n,showAdminLogin:S.showAdminLogin,lang:je,adUnits:M})}break;case"category/:slug":case"fr/category/:slug":case"en/category/:slug":case"blog/category/:slug":const rr=f.find(ut=>ut.slug===ve.slug);if(rr)return g.jsx(zA,{allPosts:Se,category:rr,currentPage:1,activeTemplate:Ze,siteName:vt,isAuthenticated:!!n,showAdminLogin:S.showAdminLogin,lang:je,blogPath:ot,seoSettings:S});break;case"category/:slug/page/:pageNumber":case"fr/category/:slug/page/:pageNumber":case"en/category/:slug/page/:pageNumber":case"blog/category/:slug/page/:pageNumber":const Ii=f.find(ut=>ut.slug===ve.slug);if(Ii)return g.jsx(zA,{allPosts:Se,category:Ii,currentPage:parseInt(ve.pageNumber,10)||1,activeTemplate:Ze,siteName:vt,isAuthenticated:!!n,showAdminLogin:S.showAdminLogin,lang:je,blogPath:ot,seoSettings:S});break;case"checkout":return g.jsx(KW,{developerSettings:V});case":slug":case"fr/:slug":case"en/:slug":const Qr=Qe.find(ut=>ut.slug===ve.slug);if(Qr)return g.jsx(RW,{page:Qr,activeTemplate:Ze,sidebarProps:{settings:R,allPosts:Se,socialLinks:q,categories:f},isAuthenticated:!!n,showAdminLogin:S.showAdminLogin,lang:je,seoSettings:S});break}return g.jsx(NW,{activeTemplate:Ze,isAuthenticated:!!n,showAdminLogin:S.showAdminLogin})})()})}return n?g.jsxs("div",{className:"flex h-screen bg-slate-50",children:[g.jsx(lB,{isOpen:ke,onClose:()=>it(!1),onLogout:()=>vv.signOut(),isDeveloperUnlocked:V.isUnlocked,isEcommerceMode:Bt,isLandingPageMode:Pt,cmsLang:Me}),ke&&g.jsx("div",{className:"fixed inset-0 bg-black/30 z-40 md:hidden",onClick:()=>it(!1)}),g.jsxs("main",{className:"flex-1 overflow-y-auto",children:[g.jsx("button",{onClick:()=>it(!0),className:"md:hidden fixed top-4 right-4 z-50 bg-white p-2 rounded-md shadow-md",children:g.jsx(vN,{className:"w-6 h-6"})}),(()=>{switch(Z){case"admin":return g.jsx(cI,{posts:t,onDelete:se,cmsLang:Me});case"admin/posts/new":return g.jsx(DA,{onSave:xe,categories:f,developerSettings:V,seoSettings:S,adUnits:M,allPosts:t,cmsLang:Me});case"admin/posts/edit/:id":const Se=t.find(je=>je.id===ve.id);return g.jsx(DA,{post:Se,onSave:xe,categories:f,developerSettings:V,seoSettings:S,adUnits:M,allPosts:t,cmsLang:Me});case"admin/pages":return g.jsx(fW,{pages:r,onDelete:Ee,cmsLang:Me});case"admin/pages/new":return g.jsx(MA,{onSave:re,adUnits:M,cmsLang:Me});case"admin/pages/edit/:id":const Qe=r.find(je=>je.id===ve.id);return g.jsx(MA,{page:Qe,onSave:re,adUnits:M,cmsLang:Me});case"admin/categories":return g.jsx(dW,{categories:f,onAddCategory:Ae,onDeleteCategory:ce,cmsLang:Me});case"admin/templates":return g.jsx(_W,{templates:yt,activeTemplateId:_e,onSelectTemplate:ai,onSaveTemplate:Bn,onDeleteTemplate:Pn,userId:n.uid,developerSettings:V,cmsLang:Me});case"admin/sidebar":return g.jsx(vW,{settings:R,onSave:Ve,seoSettings:S,cmsLang:Me});case"admin/writing":return g.jsx(PW,{settings:A,onSave:Fe,activeTemplate:Ze,cmsLang:Me});case"admin/seo":return g.jsx(DW,{settings:S,onSave:Ne,developerSettings:V,cmsLang:Me});case"admin/sitemap":return g.jsx(MW,{posts:t,pages:r,categories:f,seoSettings:S,cmsLang:Me});case"admin/accounts":return g.jsx(UW,{socialLinks:q,onSave:Oe,cmsLang:Me});case"admin/related-posts":return g.jsx(LW,{settings:H,onSave:Ke,cmsLang:Me});case"admin/menus":return g.jsx(OW,{headerMenuItems:y,footerMenuItems:w,onSaveHeaderMenu:We,onSaveFooterMenu:_t,pages:r,categories:f,cmsLang:Me});case"admin/developer":return V.isUnlocked?g.jsx(FW,{settings:V,onSave:si,isEcommerceMode:Bt,cmsLang:Me}):g.jsx(HW,{onUnlock:()=>si({...V,isUnlocked:!0}),userId:n.uid,developerSettings:V});case"admin/analytics":return g.jsx(BW,{seoSettings:S,developerSettings:V,cmsLang:Me});case"admin/marketing":return g.jsx(qW,{settings:j,onSave:Yn,cmsLang:Me});case"admin/ads":return g.jsx(zW,{adUnits:M,onSave:oi,cmsLang:Me});case"admin/products":return g.jsx(WW,{products:l,onDelete:W,cmsLang:Me});case"admin/products/new":return g.jsx(KA,{onSave:$,developerSettings:V,cmsLang:Me});case"admin/products/edit/:id":const qe=l.find(je=>je.id===ve.id);return g.jsx(KA,{product:qe,onSave:$,developerSettings:V,cmsLang:Me});case"admin/landing-page":return g.jsx(YW,{activeTemplate:Ze,initialContent:k,onSave:At,developerSettings:V});case"admin/system":return g.jsx(ZW,{cmsLang:Me,onLangChange:P,seoSettings:S,onSaveSeoSettings:Ne});default:return window.location.hash="#admin",g.jsx(cI,{posts:t,onDelete:se,cmsLang:Me})}})()]})]}):null})()},fP=document.getElementById("root");if(!fP)throw new Error("Could not find root element to mount to");const nK=$k.createRoot(fP);nK.render(g.jsx(ZA.StrictMode,{children:g.jsx(tK,{})}));
