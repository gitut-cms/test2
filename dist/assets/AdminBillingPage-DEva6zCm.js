import{r as a,j as e,bf as j,bj as y,aH as N,bk as w,aG as P,a0 as v,ak as D,bl as C}from"./index-hpjxKmld.js";import{c as S}from"./fileUtils-Cb1IM2ig.js";const U=()=>{const[l,d]=a.useState([]),[n,i]=a.useState([]),[x,c]=a.useState(!0),[m,h]=a.useState(0);a.useEffect(()=>{(async()=>{c(!0);try{const[r,s]=await Promise.all([j(),y()]);d(r),i(s)}catch(r){console.error("Failed to fetch admin billing data:",r),alert("ÙØ´Ù„ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ÙÙˆØ§ØªÙŠØ±.")}finally{c(!1)}})()},[m]);const g=async t=>{if(window.confirm(`Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø£Ù†Ùƒ ØªØ±ÙŠØ¯ Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø© Ø¹Ù„Ù‰ Ø·Ù„Ø¨ Ø§Ù„Ø¯ÙØ¹ Ø¨Ù‚ÙŠÙ…Ø© ${t.amount} ${t.currency} Ù„Ù„Ù…Ù‚Ù‡Ù‰ "${t.userCafeName}"ØŸ`))try{const s=await C(t);if(s.success)alert("ØªÙ…Øª Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø¯ÙØ¹ ÙˆØ¥Ø¶Ø§ÙØ© Ø§Ù„Ø±ØµÙŠØ¯ Ø¨Ù†Ø¬Ø§Ø­!"),h(u=>u+1);else throw new Error(s.message)}catch(s){console.error("Failed to approve payment:",s),alert(`ÙØ´Ù„ Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø¹Ù…Ù„ÙŠØ©: ${s.message}`)}},b=t=>{switch(t){case"Pending":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 text-xs font-semibold text-yellow-800 bg-yellow-100 rounded-full",children:[e.jsx(D,{})," Ù…Ø¹Ù„Ù‚"]});case"Approved":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 text-xs font-semibold text-green-800 bg-green-100 rounded-full",children:[e.jsx(v,{})," ØªÙ…Øª Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø©"]})}},p=t=>t==="PayPal"?e.jsxs("span",{className:"flex items-center gap-1 text-blue-600 font-bold",children:[e.jsx(N,{})," PayPal"]}):t==="CCP"?e.jsxs("span",{className:"flex items-center gap-1 text-yellow-600 font-bold",children:[e.jsx(w,{})," CCP"]}):e.jsxs("span",{className:"flex items-center gap-1 text-gray-600",children:[e.jsx(P,{})," ",t]}),o=t=>t==="USD"?e.jsx("span",{className:"bg-green-100 text-green-800 px-2 py-0.5 rounded text-xs font-bold border border-green-200",children:"USD $"}):e.jsx("span",{className:"bg-blue-100 text-blue-800 px-2 py-0.5 rounded text-xs font-bold border border-blue-200",children:"DZD Ø¯Ø¬"}),f=t=>{switch(t){case"Paid":return e.jsx("span",{className:"px-2 py-1 text-xs font-medium text-green-800 bg-green-100 rounded-full",children:"Ù…Ø¯ÙÙˆØ¹Ø©"});case"Pending":return e.jsx("span",{className:"px-2 py-1 text-xs font-medium text-yellow-800 bg-yellow-100 rounded-full",children:"ÙÙŠ Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„ØªØ£ÙƒÙŠØ¯"})}};return x?e.jsx("div",{className:"p-8 text-center text-gray-500",children:"Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ÙÙˆØ§ØªÙŠØ± ÙˆØ§Ù„Ø·Ù„Ø¨Ø§Øª..."}):e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-6",children:"Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ÙÙˆØ§ØªÙŠØ± ÙˆØ·Ù„Ø¨Ø§Øª Ø´Ø­Ù† Ø§Ù„Ø±ØµÙŠØ¯"}),e.jsxs("div",{className:"bg-white p-4 rounded-lg border shadow-sm mb-8",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-700 mb-4 border-b pb-2",children:"Ø·Ù„Ø¨Ø§Øª Ø´Ø­Ù† Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ø­Ø§Ù„ÙŠØ©"}),e.jsxs("div",{className:"bg-blue-50 border-l-4 border-blue-500 p-4 mb-4 text-sm text-blue-800",children:[e.jsx("p",{className:"font-bold",children:"ØªÙ†Ø¨ÙŠÙ‡ Ù„Ù„Ù…Ø¯ÙŠØ±:"}),e.jsxs("ul",{className:"list-disc list-inside mt-1",children:[e.jsxs("li",{children:["Ù„Ø·Ù„Ø¨Ø§Øª ",e.jsx("strong",{children:"PayPal (USD)"}),": ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ø³ØªÙ„Ø§Ù… Ø§Ù„Ù…Ø¨Ù„Øº ÙÙŠ Ø­Ø³Ø§Ø¨ PayPal Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ Ù‚Ø¨Ù„ Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø©."]}),e.jsxs("li",{children:["Ù„Ø·Ù„Ø¨Ø§Øª ",e.jsx("strong",{children:"CCP (DZD)"}),": ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµÙˆØ±Ø© Ø§Ù„ÙˆØµÙ„ Ø§Ù„Ù…Ø±ÙÙ‚Ø© ÙˆÙ…Ø·Ø§Ø¨Ù‚ØªÙ‡Ø§ Ù…Ø¹ Ø­Ø³Ø§Ø¨Ùƒ Ø§Ù„Ø¬Ø§Ø±ÙŠ."]})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-right",children:[e.jsx("thead",{className:"bg-gray-50 border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3 font-semibold text-sm text-gray-600",children:"Ø§Ø³Ù… Ø§Ù„Ù…Ù‚Ù‡Ù‰"}),e.jsx("th",{className:"p-3 font-semibold text-sm text-gray-600",children:"ØªØ§Ø±ÙŠØ® Ø§Ù„Ø·Ù„Ø¨"}),e.jsx("th",{className:"p-3 font-semibold text-sm text-gray-600",children:"Ø§Ù„Ù…Ø¨Ù„Øº"}),e.jsx("th",{className:"p-3 font-semibold text-sm text-gray-600",children:"Ø§Ù„ÙˆØ³ÙŠÙ„Ø©"}),e.jsx("th",{className:"p-3 font-semibold text-sm text-gray-600",children:"Ø¥Ø«Ø¨Ø§Øª Ø§Ù„Ø¯ÙØ¹"}),e.jsx("th",{className:"p-3 font-semibold text-sm text-gray-600",children:"Ø§Ù„Ø­Ø§Ù„Ø©"}),e.jsx("th",{className:"p-3 font-semibold text-sm text-gray-600",children:"Ø¥Ø¬Ø±Ø§Ø¡"})]})}),e.jsx("tbody",{children:l.length>0?l.map(t=>e.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[e.jsx("td",{className:"p-3 text-gray-800 font-semibold",children:t.userCafeName}),e.jsx("td",{className:"p-3 text-gray-600",children:(typeof t.date=="string"?new Date(t.date):t.date.toDate()).toLocaleDateString("ar-DZ")}),e.jsx("td",{className:"p-3",children:e.jsxs("div",{className:"flex items-center gap-2 font-mono font-bold text-gray-800",children:[t.amount.toLocaleString(),o(t.currency)]})}),e.jsx("td",{className:"p-3 text-sm",children:p(t.method)}),e.jsx("td",{className:"p-3",children:t.proofOfPaymentUrl?e.jsx("a",{href:S(t.proofOfPaymentUrl),target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline text-sm font-semibold bg-blue-50 px-2 py-1 rounded",children:"Ø¹Ø±Ø¶ Ø§Ù„Ø¥Ø«Ø¨Ø§Øª ğŸ“"}):e.jsx("span",{className:"text-gray-400 text-xs italic",children:"--"})}),e.jsx("td",{className:"p-3",children:b(t.status)}),e.jsx("td",{className:"p-3",children:t.status==="Pending"&&e.jsx("button",{onClick:()=>g(t),className:"bg-green-600 text-white font-semibold py-1 px-3 rounded-md hover:bg-green-700 text-sm shadow-sm transition-colors",children:"ØªØ£ÙƒÙŠØ¯ ÙˆØ¥Ø¶Ø§ÙØ© Ø§Ù„Ø±ØµÙŠØ¯"})})]},t.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"text-center p-8 text-gray-500 bg-gray-50 rounded-b-lg",children:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø·Ù„Ø¨Ø§Øª Ø´Ø­Ù† Ø±ØµÙŠØ¯ Ù…Ø¹Ù„Ù‚Ø© Ø­Ø§Ù„ÙŠØ§Ù‹."})})})]})})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg border shadow-sm",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-700 mb-4 border-b pb-2",children:"Ø³Ø¬Ù„ Ø§Ù„ÙÙˆØ§ØªÙŠØ± Ø§Ù„Ù…Ø¯ÙÙˆØ¹Ø©"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-right",children:[e.jsx("thead",{className:"bg-gray-50 border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3 font-semibold text-sm text-gray-600",children:"Ø§Ø³Ù… Ø§Ù„Ù…Ù‚Ù‡Ù‰"}),e.jsx("th",{className:"p-3 font-semibold text-sm text-gray-600",children:"ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¯ÙØ¹"}),e.jsx("th",{className:"p-3 font-semibold text-sm text-gray-600",children:"Ø§Ù„Ù…Ø¨Ù„Øº"}),e.jsx("th",{className:"p-3 font-semibold text-sm text-gray-600",children:"Ø§Ù„Ø­Ø§Ù„Ø©"})]})}),e.jsx("tbody",{children:n.length>0?n.map(t=>e.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[e.jsx("td",{className:"p-3 text-gray-800 font-semibold",children:t.userCafeName||"ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ"}),e.jsx("td",{className:"p-3 text-gray-600",children:(typeof t.date=="string"?new Date(t.date):t.date.toDate()).toLocaleDateString("ar-DZ")}),e.jsx("td",{className:"p-3",children:e.jsxs("div",{className:"flex items-center gap-2 font-mono text-gray-800",children:[t.amount.toLocaleString(),o(t.currency)]})}),e.jsx("td",{className:"p-3",children:f(t.status)})]},t.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:4,className:"text-center p-6 text-gray-500",children:"Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø³Ø¬Ù„ ÙÙˆØ§ØªÙŠØ± Ù„Ø¹Ø±Ø¶Ù‡."})})})]})})]})]})};export{U as default};
