import{r as n,j as e,F as g,aR as f}from"./index-hpjxKmld.js";const j=({title:i,messages:l,onSendMessage:x,currentUserId:b,isOnline:t,isLoading:h,onClose:c})=>{const[s,o]=n.useState(""),d=n.useRef(null),u=()=>{var r;(r=d.current)==null||r.scrollIntoView({behavior:"smooth"})};n.useEffect(()=>{u()},[l]);const m=r=>{r.preventDefault(),s.trim()&&(x(s.trim()),o(""))};return e.jsxs("div",{className:"flex flex-col h-full bg-white relative",children:[e.jsx("style",{children:`
                .chat-scrollbar::-webkit-scrollbar {
                    width: 8px;
                }
                .chat-scrollbar::-webkit-scrollbar-track {
                    background: transparent;
                }
                .chat-scrollbar::-webkit-scrollbar-thumb {
                    background-color: rgba(156, 163, 175, 0.5);
                    border-radius: 20px;
                    border: 2px solid transparent;
                    background-clip: content-box;
                }
                .chat-scrollbar::-webkit-scrollbar-thumb:hover {
                    background-color: rgba(107, 114, 128, 0.8);
                }
            `}),e.jsxs("header",{className:"flex-shrink-0 flex items-center justify-between p-3 border-b bg-gray-50 rounded-t-lg z-10",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-gray-800",children:i}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`w-2 h-2 rounded-full ${t===null?"bg-gray-300":t?"bg-green-500":"bg-gray-400"}`}),e.jsx("span",{className:"text-xs text-gray-500",children:t===null?"جاري التحقق...":t?"متصل الآن":"غير متصل"})]})]}),c&&e.jsx("button",{onClick:c,className:"text-gray-500 hover:text-gray-800 text-2xl",children:"×"})]}),e.jsxs("main",{className:"flex-grow p-4 overflow-y-auto bg-gray-100 chat-scrollbar",children:[h?e.jsx("div",{className:"flex justify-center items-center h-full",children:e.jsx(g,{className:"animate-spin text-2xl text-gray-400"})}):l.length===0?e.jsx("div",{className:"flex justify-center items-center h-full",children:e.jsx("p",{className:"text-gray-500",children:"ابدأ المحادثة بإرسال رسالة."})}):e.jsx("div",{className:"space-y-4",children:l.map(r=>{const a=r.senderId===b;return e.jsx("div",{className:`flex items-end gap-2 ${a?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-xs md:max-w-md p-3 rounded-2xl ${a?"bg-green-600 text-white rounded-br-none":"bg-white text-gray-800 rounded-bl-none border"}`,children:[!a&&e.jsx("p",{className:"text-xs font-bold text-blue-600 mb-1",children:r.senderName}),e.jsx("p",{className:"text-sm break-words",children:r.text}),e.jsx("p",{className:`text-xs mt-1 text-right ${a?"text-green-100":"text-gray-400"}`,children:new Date(r.timestamp).toLocaleTimeString("ar-DZ",{hour:"2-digit",minute:"2-digit"})})]})},r.id)})}),e.jsx("div",{ref:d})]}),e.jsx("footer",{className:"flex-shrink-0 p-3 border-t bg-white rounded-b-lg z-10",children:e.jsxs("form",{onSubmit:m,className:"flex items-center gap-2",children:[e.jsx("input",{type:"text",value:s,onChange:r=>o(r.target.value),placeholder:"اكتب رسالتك هنا...",className:"flex-grow p-2 border rounded-full focus:outline-none focus:ring-2 focus:ring-green-500",disabled:t===!1}),e.jsx("button",{type:"submit",className:"bg-green-600 text-white p-3 rounded-full hover:bg-green-700 disabled:bg-gray-400",disabled:t===!1||!s.trim(),children:e.jsx(f,{})})]})})]})};export{j as C};
